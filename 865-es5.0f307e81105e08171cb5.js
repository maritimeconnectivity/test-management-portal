!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}(self.webpackChunkmanagement_portal=self.webpackChunkmanagement_portal||[]).push([[865],{75530:function(e,t,n){"use strict";n.r(t),n.d(t,{HexBlock:function(){return v},ValueBlock:function(){return y},BaseBlock:function(){return b},Primitive:function(){return k},Constructed:function(){return P},EndOfContent:function(){return C},Boolean:function(){return O},Sequence:function(){return B},Set:function(){return _},Null:function(){return j},OctetString:function(){return E},BitString:function(){return V},Integer:function(){return M},Enumerated:function(){return R},ObjectIdentifier:function(){return L},Utf8String:function(){return K},RelativeObjectIdentifier:function(){return q},BmpString:function(){return J},UniversalString:function(){return Z},NumericString:function(){return X},PrintableString:function(){return Y},TeletexString:function(){return ee},VideotexString:function(){return te},IA5String:function(){return re},GraphicString:function(){return ne},VisibleString:function(){return ae},GeneralString:function(){return ie},CharacterString:function(){return se},UTCTime:function(){return oe},GeneralizedTime:function(){return ue},DATE:function(){return le},TimeOfDay:function(){return ce},DateTime:function(){return fe},Duration:function(){return he},TIME:function(){return de},Choice:function(){return me},Any:function(){return ve},Repeated:function(){return pe},RawData:function(){return ge},fromBER:function(){return be},compareSchema:function(){return we},verifySchema:function(){return ke},fromJSON:function(){return Se}});var a=n(1971);function o(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}var h=[new Uint8Array([1])],m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.blockLength=(0,a.getParametersValue)(t,"blockLength",0),this.error=(0,a.getParametersValue)(t,"error",""),this.warnings=(0,a.getParametersValue)(t,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in t?t.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return d(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,a.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),v=function(e){return function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).isHexOnly=(0,a.getParametersValue)(n,"isHexOnly",!1),e.valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e}return d(r,[{key:"fromBER",value:function(e,t,r){return!1===(0,a.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),r}(e)},p=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this),"idBlock"in n?(e.isHexOnly=(0,a.getParametersValue)(n.idBlock,"isHexOnly",!1),e.valueHex=(0,a.getParametersValue)(n.idBlock,"valueHex",new ArrayBuffer(0)),e.tagClass=(0,a.getParametersValue)(n.idBlock,"tagClass",-1),e.tagNumber=(0,a.getParametersValue)(n.idBlock,"tagNumber",-1),e.isConstructed=(0,a.getParametersValue)(n.idBlock,"isConstructed",!1)):(e.tagClass=-1,e.tagNumber=-1,e.isConstructed=!1),e}return d(r,[{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(e=new ArrayBuffer(1),t=new Uint8Array(e),!r){var i=this.tagNumber;n|=i&=31,t[0]=n}return e}if(!1===this.isHexOnly){var s=(0,a.utilToBase)(this.tagNumber,7),o=new Uint8Array(s),u=s.byteLength;if(e=new ArrayBuffer(u+1),(t=new Uint8Array(e))[0]=31|n,!r){for(var l=0;l<u-1;l++)t[l+1]=128|o[l];t[u]=o[u-1]}return e}if(e=new ArrayBuffer(this.valueHex.byteLength+1),(t=new Uint8Array(e))[0]=31|n,!1===r){for(var c=new Uint8Array(this.valueHex),f=0;f<c.length-1;f++)t[f+1]=128|c[f];t[this.valueHex.byteLength]=c[c.length-1]}return e}},{key:"fromBER",value:function(e,t,r){if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;var i=31&n[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{var s=1;this.valueHex=new ArrayBuffer(255);for(var o=255,u=new Uint8Array(this.valueHex);128&n[s];){if(u[s-1]=127&n[s],++s>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(s===o){o+=255;for(var l=new ArrayBuffer(o),c=new Uint8Array(l),f=0;f<u.length;f++)c[f]=u[f];this.valueHex=new ArrayBuffer(o),u=new Uint8Array(this.valueHex)}}this.blockLength=s+1,u[s-1]=127&n[s];for(var h=new ArrayBuffer(s),d=new Uint8Array(h),m=0;m<s;m++)d[m]=u[m];this.valueHex=new ArrayBuffer(s),(u=new Uint8Array(this.valueHex)).set(d),this.blockLength<=9?this.tagNumber=(0,a.utilFromBase)(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(v(m)),g=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this),"lenBlock"in n?(e.isIndefiniteForm=(0,a.getParametersValue)(n.lenBlock,"isIndefiniteForm",!1),e.longFormUsed=(0,a.getParametersValue)(n.lenBlock,"longFormUsed",!1),e.length=(0,a.getParametersValue)(n.lenBlock,"length",0)):(e.isIndefiniteForm=!1,e.longFormUsed=!1,e.length=0),e}return d(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;var i=127&n[0];if(i>8)return this.error="Too big integer",-1;if(i+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var s=new Uint8Array(i),o=0;o<i;o++)s[o]=n[o+1];return 0===s[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,a.utilFromBase)(s,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,t+this.blockLength}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=128),e;if(!0===this.longFormUsed){var n=(0,a.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(e=new ArrayBuffer(n.byteLength+1),!0===r)return e;var i=new Uint8Array(n);(t=new Uint8Array(e))[0]=128|n.byteLength;for(var s=0;s<n.byteLength;s++)t[s+1]=i[s];return e}return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=this.length),e}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(m),y=function(e){s(r,e);var t=u(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),t.call(this,e)}return d(r,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}},{key:"toBER",value:function(){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),r}(m),b=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return f(this,r),e=t.call(this,n),"name"in n&&(e.name=n.name),"optional"in n&&(e.optional=n.optional),"primitiveSchema"in n&&(e.primitiveSchema=n.primitiveSchema),e.idBlock=new p(n),e.lenBlock=new g(n),e.valueBlock=new a(n),e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.idBlock.toBER(t),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var i,s=this.lenBlock.toBER(t);if(e=(0,a.utilConcatBuf)(r,s),i=!1===t?this.valueBlock.toBER(t):new ArrayBuffer(this.lenBlock.length),e=(0,a.utilConcatBuf)(e,i),!0===this.lenBlock.isIndefiniteForm){var o=new ArrayBuffer(2);if(!1===t){var u=new Uint8Array(o);u[0]=0,u[1]=0}e=(0,a.utilConcatBuf)(e,o)}return e}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}},{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat((0,a.bufferToHexCodes)(this.valueBlock.valueHex))}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),r}(m),w=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e.isHexOnly=(0,a.getParametersValue)(n,"isHexOnly",!0),e}return d(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),s=0;s<n.length;s++)i[s]=n[s];return this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.valueHex=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),r}(y),k=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,w)).idBlock.isConstructed=!1,e}return d(r,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),r}(b),S=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).value=(0,a.getParametersValue)(n,"value",[]),e.isIndefiniteForm=(0,a.getParametersValue)(n,"isIndefiniteForm",!1),e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=t,i=r;if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var s=t;(!0===this.isIndefiniteForm?1:r)>0;){var o=ye(e,s,r);if(-1===o.offset)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(s=o.offset,this.blockLength+=o.result.blockLength,r-=o.result.blockLength,this.value.push(o.result),!0===this.isIndefiniteForm&&o.result.constructor.blockName()===C.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===C.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+i),s}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,a.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(n){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(y),P=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(e=t.call(this,r,S)).idBlock.isConstructed=!0,e}return d(n,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toString",value:function(){var e,t=[],n=r(this.valueBlock.value);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.toString().split("\n").map(function(e){return"  ".concat(e)}).join("\n"))}}catch(s){n.e(s)}finally{n.f()}var i=3===this.idBlock.tagClass?"[".concat(this.idBlock.tagNumber,"]"):this.constructor.blockName();return t.length?"".concat(i," :\n").concat(t.join("\n")):"".concat(i," :")}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),n}(b),A=function(e){s(r,e);var t=u(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),t.call(this,e)}return d(r,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),r}(y),C=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,A)).idBlock.tagClass=1,e.idBlock.tagNumber=0,e}return d(r,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),r}(b),I=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).value=(0,a.getParametersValue)(n,"value",!1),e.isHexOnly=(0,a.getParametersValue)(n,"isHexOnly",!1),"valueHex"in n?e.valueHex=n.valueHex.slice(0):(e.valueHex=new ArrayBuffer(1),!0===e.value&&(new Uint8Array(e.valueHex)[0]=255)),e}return d(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),s=0;s<n.length;s++)i[s]=n[s];return this.value=0!==a.utilDecodeTC.call(this),this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),r}(y),O=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,I)).idBlock.tagClass=1,e.idBlock.tagNumber=1,e}return d(r,[{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.value)}}],[{key:"blockName",value:function(){return"BOOLEAN"}}]),r}(b),B=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=16,e}return d(r,null,[{key:"blockName",value:function(){return"SEQUENCE"}}]),r}(P),_=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=17,e}return d(r,null,[{key:"blockName",value:function(){return"SET"}}]),r}(P),j=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,m)).idBlock.tagClass=1,e.idBlock.tagNumber=5,e}return d(r,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}},{key:"toString",value:function(){return"".concat(this.constructor.blockName())}}],[{key:"blockName",value:function(){return"NULL"}}]),r}(b),x=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).isConstructed=(0,a.getParametersValue)(n,"isConstructed",!1),e}return d(r,[{key:"fromBER",value:function(e,t,n){var a=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(a=S.prototype.fromBER.call(this,e,t,n)))return a;for(var s=0;s<this.value.length;s++){var o=this.value[s].constructor.blockName();if(o===C.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==E.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=i(c(r.prototype),"fromBER",this).call(this,e,t,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return S.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength||(t=this.valueHex.slice(0)),t}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),r}(v(S)),E=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,x)).idBlock.tagClass=1,e.idBlock.tagNumber=4,e}return d(r,[{key:"fromBER",value:function(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){var a=e.slice(t,t+n);try{var s=be(a);-1!==s.offset&&s.offset===n&&(this.valueBlock.value=[s.result])}catch(o){}}return i(c(r.prototype),"fromBER",this).call(this,e,t,n)}},{key:"isEqual",value:function(e){return e instanceof r!=0&&JSON.stringify(this)===JSON.stringify(e)}},{key:"toString",value:function(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?P.prototype.toString.call(this):"".concat(this.constructor.blockName()," : ").concat((0,a.bufferToHexCodes)(this.valueBlock.valueHex))}}],[{key:"blockName",value:function(){return"OCTET STRING"}}]),r}(b),N=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).unusedBits=(0,a.getParametersValue)(n,"unusedBits",0),e.isConstructed=(0,a.getParametersValue)(n,"isConstructed",!1),e.blockLength=e.valueHex.byteLength,e}return d(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=S.prototype.fromBER.call(this,e,t,r)))return n;for(var i=0;i<this.value.length;i++){var s=this.value[i].constructor.blockName();if(s===C.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(s!==V.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[i].valueBlock.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[i].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){var u=e.slice(t+1,t+r);try{var l=be(u);-1!==l.offset&&l.offset===r-1&&(this.value=[l.result])}catch(h){}}this.valueHex=new ArrayBuffer(o.length-1);for(var c=new Uint8Array(this.valueHex),f=0;f<r-1;f++)c[f]=o[f+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return S.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),r}(v(S)),V=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(e=t.call(this,r,N)).idBlock.tagClass=1,e.idBlock.tagNumber=3,e}return d(n,[{key:"fromBER",value:function(e,t,r){return 0===r?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,i(c(n.prototype),"fromBER",this).call(this,e,t,r))}},{key:"isEqual",value:function(e){return e instanceof n!=0&&JSON.stringify(this)===JSON.stringify(e)}},{key:"toString",value:function(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return P.prototype.toString.call(this);var e,t=[],n=r(new Uint8Array(this.valueBlock.valueHex));try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.toString(2).padStart(8,"0"))}}catch(i){n.e(i)}finally{n.f()}return"".concat(this.constructor.blockName()," : ").concat(t.join(""))}}],[{key:"blockName",value:function(){return"BIT STRING"}}]),n}(b),D=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this,n),"value"in n&&(e.valueDec=n.value),e}return d(r,[{key:"valueHex",get:function(){return this._valueHex},set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=a.utilDecodeTC.call(this)))}},{key:"valueDec",get:function(){return this._valueDec},set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,a.utilEncodeTC)(e)}},{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(-1===a)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!=(128&i[1])){var s=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(s).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=s.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var o=new ArrayBuffer(n);new Uint8Array(o).set(i,n-this._valueHex.byteLength),this._valueHex=o.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(a).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,t,n){var a=i(c(r.prototype),"fromBER",this).call(this,e,t,n);return-1===a?a:(this.blockLength=n,t+n)}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),s=n.slice(0),o=s.length-1,u=i.slice(0),l=u.length-1,c=0,f=0,h=l<o?o:l;h>=0;h--,f++){switch(!0){case f<u.length:c=s[o-f]+u[l-f]+r[0];break;default:c=s[o-f]+r[0]}switch(r[0]=c/10,!0){case f>=s.length:s=(0,a.utilConcatView)(new Uint8Array([c%10]),s);break;default:s[o-f]=c%10}}return r[0]>0&&(s=(0,a.utilConcatView)(r,s)),s.slice(0)}function t(e){if(e>=h.length)for(var t=h.length;t<=e;t++){for(var r=new Uint8Array([0]),n=h[t-1].slice(0),i=n.length-1;i>=0;i--){var s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=(0,a.utilConcatView)(r,n)),h.push(n)}return h[e]}function r(e,t){for(var r,n=0,a=new Uint8Array(e),i=new Uint8Array(t),s=a.slice(0),o=s.length-1,u=i.slice(0),l=u.length-1,c=0,f=l;f>=0;f--,c++)switch(r=s[o-c]-u[l-c]-n,!0){case r<0:n=1,s[o-c]=r+10;break;default:n=0,s[o-c]=r}if(n>0)for(var h=o-l+1;h>=0;h--,c++){if(!((r=s[o-c]-n)<0)){n=0,s[o-c]=r;break}n=1,s[o-c]=r+10}return s.slice()}for(var n,i=8*this._valueHex.byteLength-1,s=new Uint8Array(8*this._valueHex.byteLength/3),o=0,u=new Uint8Array(this._valueHex),l="",c=!1,f=this._valueHex.byteLength-1;f>=0;f--){n=u[f];for(var d=0;d<8;d++){if(1==(1&n))switch(o){case i:s=r(t(o),s),l="-";break;default:s=e(s,t(o))}o++,n>>=1}}for(var m=0;m<s.length;m++)s[m]&&(c=!0),c&&(l+="0123456789".charAt(s[m]));return!1===c&&(l+="0123456789".charAt(0)),l}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),r}(v(y)),M=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,D)).idBlock.tagClass=1,e.idBlock.tagNumber=2,e}return d(r,[{key:"isEqual",value:function(e){return e instanceof r?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,a.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,a.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new r({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new r({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}},{key:"toString",value:function(){o();var e=(0,a.bufferToHexCodes)(this.valueBlock.valueHex),t=BigInt("0x".concat(e));return"".concat(this.constructor.blockName()," : ").concat(t.toString())}}],[{key:"blockName",value:function(){return"INTEGER"}}]),r}(b),R=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=10,e}return d(r,null,[{key:"blockName",value:function(){return"ENUMERATED"}}]),r}(M),T=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).valueDec=(0,a.getParametersValue)(n,"valueDec",-1),e.isFirstSid=(0,a.getParametersValue)(n,"isFirstSid",!1),e}return d(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),s=0;s<r&&(i[s]=127&n[s],this.blockLength++,0!=(128&n[s]));s++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),l=0;l<this.blockLength;l++)u[l]=i[l];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,a.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"valueBigInt",set:function(e){o();for(var t=BigInt(e).toString(2);t.length%7;)t="0"+t;for(var r=new Uint8Array(t.length/7),n=0;n<r.length;n++)r[n]=parseInt(t.slice(7*n,7*n+7),2)+(n+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var i=0;i<this.blockLength-1;i++)t[i]=128|n[i];return t[this.blockLength-1]=n[this.blockLength-1],e}var s=(0,a.utilToBase)(this.valueDec,7);if(0===s.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(s.byteLength),!1===r){var o=new Uint8Array(s);t=new Uint8Array(e);for(var u=0;u<s.byteLength-1;u++)t[u]=128|o[u];t[s.byteLength-1]=o[s.byteLength-1]}return e}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),r}(v(m)),U=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).fromString((0,a.getParametersValue)(n,"value","")),e}return d(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new T;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,a.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do{if(n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],s=0;switch(i.valueDec){case 0:break;case 1:s=40;break;case 2:s=80;break;default:return this.value=[],!1}var u=parseInt(n,10);if(isNaN(u))return!0;i.valueDec=u+s,a=!1}else{var l=new T;if(n>Number.MAX_SAFE_INTEGER){o();var c=BigInt(n);l.valueBigInt=c}else if(l.valueDec=parseInt(n,10),isNaN(l.valueDec))return!0;0===this.value.length&&(l.isFirstSid=!0,a=!0),this.value.push(l)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?(n="{".concat(n,"}"),this.value[r].isFirstSid?e="2.{".concat(n," - 80}"):e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(n){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(y),L=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,U)).idBlock.tagClass=1,e.idBlock.tagNumber=6,e}return d(r,[{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.toString())}}],[{key:"blockName",value:function(){return"OBJECT IDENTIFIER"}}]),r}(b),H=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return d(r,[{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),r}(v(m)),K=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this,n,H),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=12,e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(t){this.warnings.push('Error during "decodeURIComponent": '.concat(t,", using raw string"))}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}},{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.value)}}],[{key:"blockName",value:function(){return"UTF8String"}}]),r}(b),F=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).valueDec=(0,a.getParametersValue)(n,"valueDec",-1),e}return d(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,a.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),s=0;s<r&&(i[s]=127&n[s],this.blockLength++,0!=(128&n[s]));s++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),l=0;l<this.blockLength;l++)u[l]=i[l];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,a.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var i=0;i<this.blockLength-1;i++)t[i]=128|n[i];return t[this.blockLength-1]=n[this.blockLength-1],e}var s=(0,a.utilToBase)(this.valueDec,7);if(0===s.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(s.byteLength),!1===r){var o=new Uint8Array(s);t=new Uint8Array(e);for(var u=0;u<s.byteLength-1;u++)t[u]=128|o[u];t[s.byteLength-1]=o[s.byteLength-1]}return e}},{key:"toString",value:function(){return!0===this.isHexOnly?(0,a.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString()}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.valueDec=this.valueDec,e}}],[{key:"blockName",value:function(){return"relativeSidBlock"}}]),r}(v(m)),W=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).fromString((0,a.getParametersValue)(n,"value","")),e}return d(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new F;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,a.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1;var a=new F;if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?e+=n="{".concat(n,"}"):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(n){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"RelativeObjectIdentifierValueBlock"}}]),r}(y),q=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n,W)).idBlock.tagClass=1,e.idBlock.tagNumber=13,e}return d(r,null,[{key:"blockName",value:function(){return"RelativeObjectIdentifier"}}]),r}(b),z=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return d(r,[{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),r}(v(m)),J=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this,n,z),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=30,e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,a.utilToBase)(e.charCodeAt(n),8),s=new Uint8Array(i);if(!(s.length>2))for(var o=2-s.length,u=s.length-1;u>=0;u--)r[2*n+u+o]=s[u]}this.valueBlock.value=e}},{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.value)}}],[{key:"blockName",value:function(){return"BMPString"}}]),r}(b),G=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return d(r,[{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),r}(v(m)),Z=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this,n,G),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=28,e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,a.utilToBase)(e.charCodeAt(n),8),s=new Uint8Array(i);if(!(s.length>4))for(var o=4-s.length,u=s.length-1;u>=0;u--)r[4*n+u+o]=s[u]}this.valueBlock.value=e}},{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.value)}}],[{key:"blockName",value:function(){return"UniversalString"}}]),r}(b),$=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).value="",e.isHexOnly=!0,e}return d(r,[{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),r}(v(m)),Q=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),e=t.call(this,n,$),"value"in n&&e.fromString(n.value),e}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}},{key:"toString",value:function(){return"".concat(this.constructor.blockName()," : ").concat(this.valueBlock.value)}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),r}(b),X=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=18,e}return d(r,null,[{key:"blockName",value:function(){return"NumericString"}}]),r}(Q),Y=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=19,e}return d(r,null,[{key:"blockName",value:function(){return"PrintableString"}}]),r}(Q),ee=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=20,e}return d(r,null,[{key:"blockName",value:function(){return"TeletexString"}}]),r}(Q),te=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=21,e}return d(r,null,[{key:"blockName",value:function(){return"VideotexString"}}]),r}(Q),re=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=22,e}return d(r,null,[{key:"blockName",value:function(){return"IA5String"}}]),r}(Q),ne=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=25,e}return d(r,null,[{key:"blockName",value:function(){return"GraphicString"}}]),r}(Q),ae=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=26,e}return d(r,null,[{key:"blockName",value:function(){return"VisibleString"}}]),r}(Q),ie=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=27,e}return d(r,null,[{key:"blockName",value:function(){return"GeneralString"}}]),r}(Q),se=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=29,e}return d(r,null,[{key:"blockName",value:function(){return"CharacterString"}}]),r}(Q),oe=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(f(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var a=new Uint8Array(e.valueBlock.valueHex),i=0;i<n.value.length;i++)a[i]=n.value.charCodeAt(i)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=23,l(e)}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,a.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,a.padNumber)(this.month,2),e[2]=(0,a.padNumber)(this.day,2),e[3]=(0,a.padNumber)(this.hour,2),e[4]=(0,a.padNumber)(this.minute,2),e[5]=(0,a.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),r}(ae),ue=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(f(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,e.millisecond=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var a=new Uint8Array(e.valueBlock.valueHex),i=0;i<n.value.length;i++)a[i]=n.value.charCodeAt(i)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=24,l(e)}return d(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t,r=!1,n="",a="",i=0,s=0,o=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var l=1,c=n.indexOf("+"),f="";if(-1===c&&(c=n.indexOf("-"),l=-1),-1!==c){if(f=n.substr(c+1),n=n.substr(0,c),2!==f.length&&4!==f.length)throw new Error("Wrong input string for convertion");var h=new Number(f.substr(0,2));if(isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");if(s=l*h,4===f.length){if(h=new Number(f.substr(2,2)),isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");o=l*h}}}var d=n.indexOf(".");if(-1===d&&(d=n.indexOf(",")),-1!==d){var m=new Number("0".concat(n.substr(d)));if(isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");i=m.valueOf(),a=n.substr(0,d)}else a=n;switch(!0){case 8===a.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==d)throw new Error("Wrong input string for convertion");break;case 10===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==d){var v=60*i;this.minute=Math.floor(v),v=60*(v-this.minute),this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 12===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==d){var p=60*i;this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case 14===a.length:t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==d&&(this.millisecond=Math.floor(1e3*i));break;default:throw new Error("Wrong input string for convertion")}var g=t.exec(a);if(null===g)throw new Error("Wrong input string for convertion");for(var y=1;y<g.length;y++)switch(y){case 1:this.year=parseInt(g[y],10);break;case 2:this.month=parseInt(g[y],10);break;case 3:this.day=parseInt(g[y],10);break;case 4:this.hour=parseInt(g[y],10)+s;break;case 5:this.minute=parseInt(g[y],10)+o;break;case 6:this.second=parseInt(g[y],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=b.getUTCFullYear(),this.month=b.getUTCMonth(),this.day=b.getUTCDay(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds(),this.millisecond=b.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,a.padNumber)(this.year,4)),e.push((0,a.padNumber)(this.month,2)),e.push((0,a.padNumber)(this.day,2)),e.push((0,a.padNumber)(this.hour,2)),e.push((0,a.padNumber)(this.minute,2)),e.push((0,a.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,a.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=i(c(r.prototype),"toJSON",this).call(this)}catch(t){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),r}(ae),le=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=31,e}return d(r,null,[{key:"blockName",value:function(){return"DATE"}}]),r}(K),ce=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=32,e}return d(r,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),r}(K),fe=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=33,e}return d(r,null,[{key:"blockName",value:function(){return"DateTime"}}]),r}(K),he=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=34,e}return d(r,null,[{key:"blockName",value:function(){return"Duration"}}]),r}(K),de=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=14,e}return d(r,null,[{key:"blockName",value:function(){return"TIME"}}]),r}(K),me=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.value=(0,a.getParametersValue)(t,"value",[]),this.optional=(0,a.getParametersValue)(t,"optional",!1)},ve=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.name=(0,a.getParametersValue)(t,"name",""),this.optional=(0,a.getParametersValue)(t,"optional",!1)},pe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.name=(0,a.getParametersValue)(t,"name",""),this.optional=(0,a.getParametersValue)(t,"optional",!1),this.value=(0,a.getParametersValue)(t,"value",new ve),this.local=(0,a.getParametersValue)(t,"local",!1)},ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.data=(0,a.getParametersValue)(t,"data",new ArrayBuffer(0))}return d(e,[{key:"fromBER",value:function(e,t,r){return this.data=e.slice(t,r),t+r}},{key:"toBER",value:function(){return this.data}}]),e}();function ye(e,t,r){var n=t,i=new b({},Object),s=new m;if(!1===(0,a.checkBufferParams)(s,e,t,r))return i.error=s.error,{offset:-1,result:i};if(0===new Uint8Array(e,t,r).length)return i.error="Zero buffer length",{offset:-1,result:i};var o=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),-1===o)return i.error=i.idBlock.error,{offset:-1,result:i};if(o=i.lenBlock.fromBER(e,t=o,r-=i.idBlock.blockLength),i.warnings.concat(i.lenBlock.warnings),-1===o)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=o,r-=i.lenBlock.blockLength,!1===i.idBlock.isConstructed&&!0===i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var u=b;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(!0===i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=C;break;case 1:u=O;break;case 2:u=M;break;case 3:u=V;break;case 4:u=E;break;case 5:u=j;break;case 6:u=L;break;case 10:u=R;break;case 12:u=K;break;case 13:u=q;break;case 14:u=de;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=B;break;case 17:u=_;break;case 18:u=X;break;case 19:u=Y;break;case 20:u=ee;break;case 21:u=te;break;case 22:u=re;break;case 23:u=oe;break;case 24:u=ue;break;case 25:u=ne;break;case 26:u=ae;break;case 27:u=ie;break;case 28:u=Z;break;case 29:u=se;break;case 30:u=J;break;case 31:u=le;break;case 32:u=ce;break;case 33:u=fe;break;case 34:u=he;break;default:var l;(l=!0===i.idBlock.isConstructed?new P:new k).idBlock=i.idBlock,l.lenBlock=i.lenBlock,l.warnings=i.warnings,i=l}break;case 2:case 3:case 4:default:u=!0===i.idBlock.isConstructed?P:k}return o=(i=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(i,u)).fromBER(e,t,!0===i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(n,n+i.blockLength),{offset:o,result:i}}function be(e){if(0===e.byteLength){var t=new b({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return ye(e,0,e.byteLength)}function we(e,t,r){if(r instanceof me){for(var n=0;n<r.value.length;n++)if(!0===we(e,t,r.value[n]).verified)return{verified:!0,result:e};var a={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(a.name=r.name),a}if(r instanceof ve)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==0)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var s=new Uint8Array(r.idBlock.valueHex),o=new Uint8Array(t.idBlock.valueHex);if(s.length!==o.length)return{verified:!1,result:e};for(var u=0;u<s.length;u++)if(s[u]!==o[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var l=0,c={verified:!1},f=r.valueBlock.value.length;if(f>0&&r.valueBlock.value[0]instanceof pe&&(f=t.valueBlock.value.length),0===f)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var h=!0,d=0;d<r.valueBlock.value.length;d++)h=h&&(r.valueBlock.value[d].optional||!1);return!0===h?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var m=0;m<f;m++)if(m-l>=t.valueBlock.value.length){if(!1===r.valueBlock.value[m].optional){var v={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],v.name=r.name)),v}}else if(r.valueBlock.value[0]instanceof pe){if(!1===(c=we(e,t.valueBlock.value[m],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var p={};void 0===(p="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(p[r.valueBlock.value[0].name]=[]),p[r.valueBlock.value[0].name].push(t.valueBlock.value[m])}}else if(!1===(c=we(e,t.valueBlock.value[m-l],r.valueBlock.value[m])).verified){if(!0!==r.valueBlock.value[m].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if(!1===c.verified){var g={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],g.name=r.name)),g}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var y=be(t.valueBlock.valueHex);if(-1===y.offset){var b={verified:!1,result:y.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],b.name=r.name)),b}return we(e,y.result,r.primitiveSchema)}return{verified:!0,result:e}}function ke(e,t){if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=be(e);return-1===r.offset?{verified:!1,result:r.result}:we(r.result,r.result,t)}function Se(e){}},28807:function(e,r,n){"use strict";n.r(r),n.d(r,{ByteStream:function(){return a},SeqStream:function(){return i},parseByteMap:function(){return s},BitStream:function(){return u},SeqBitStream:function(){return l}});var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.clear();for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];switch(a){case"length":this.length=t.length;break;case"stub":for(var i=0;i<this._view.length;i++)this._view[i]=t.stub;break;case"view":this.fromUint8Array(t.view);break;case"buffer":this.fromArrayBuffer(t.buffer);break;case"string":this.fromString(t.string);break;case"hexstring":this.fromHexString(t.hexstring)}}}return d(e,[{key:"buffer",get:function(){return this._buffer},set:function(e){this._buffer=e.slice(0),this._view=new Uint8Array(this._buffer)}},{key:"view",get:function(){return this._view},set:function(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}},{key:"length",get:function(){return this._buffer.byteLength},set:function(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}},{key:"clear",value:function(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}},{key:"fromArrayBuffer",value:function(e){this.buffer=e}},{key:"fromUint8Array",value:function(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}},{key:"fromString",value:function(e){var t=e.length;this.length=t;for(var r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(var n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}},{key:"fromHexString",value:function(e){var t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);var r=new Map;r.set("0",0),r.set("1",1),r.set("2",2),r.set("3",3),r.set("4",4),r.set("5",5),r.set("6",6),r.set("7",7),r.set("8",8),r.set("9",9),r.set("A",10),r.set("a",10),r.set("B",11),r.set("b",11),r.set("C",12),r.set("c",12),r.set("D",13),r.set("d",13),r.set("E",14),r.set("e",14),r.set("F",15),r.set("f",15);for(var n=0,a=0,i=0;i<t;i++)i%2?(a|=r.get(e.charAt(i)),this.view[n]=a,n++):a=r.get(e.charAt(i))<<4}},{key:"toHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(var n=e;n<e+t;n++){var a=this.view[n].toString(16).toUpperCase();r=r+(1==a.length?"0":"")+a}return r}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._buffer.byteLength-t;if(0===t&&0===this._buffer.byteLength)return new e;if(t<0||t>this._buffer.byteLength-1)throw new Error("Wrong start position: ".concat(t));var n=new e;return n._buffer=this._buffer.slice(t,t+r),n._view=new Uint8Array(n._buffer),n}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._buffer.byteLength;if(0===t&&0===this._buffer.byteLength)return new e;if(t<0||t>this._buffer.byteLength-1)throw new Error("Wrong start position: ".concat(t));var n=new e;return n._buffer=this._buffer.slice(t,r),n._view=new Uint8Array(n._buffer),n}},{key:"realloc",value:function(e){var t=new ArrayBuffer(e);new Uint8Array(t).set(e>this._view.length?this._view:new Uint8Array(this._buffer,0,e)),this._buffer=t.slice(0),this._view=new Uint8Array(this._buffer)}},{key:"append",value:function(e){var t=this._buffer.byteLength,r=e._buffer.byteLength,n=e._view.slice();this.realloc(t+r),this._view.set(n,t)}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._buffer.byteLength-t;return!(t>this._buffer.byteLength-1||(r>this._buffer.byteLength-t&&(r=this._buffer.byteLength-t),r>e._buffer.byteLength&&(r=e._buffer.byteLength),this._view.set(r==e._buffer.byteLength?e._view:e._view.slice(0,r),t),0))}},{key:"isEqual",value:function(e){if(this._buffer.byteLength!=e._buffer.byteLength)return!1;for(var t=0;t<e._buffer.byteLength;t++)if(this.view[t]!=e.view[t])return!1;return!0}},{key:"isEqualView",value:function(e){if(e.length!=this.view.length)return!1;for(var t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}},{key:"findPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));var a=e.buffer.byteLength;if(a>r)return-1;for(var i=[],s=0;s<a;s++)i.push(e.view[s]);for(var o=0;o<=r-a;o++){for(var u=!0,l=n?t-a-o:t+o,c=0;c<a;c++)if(this.view[c+l]!=i[c]){u=!1;break}if(u)return n?t-a-o:t+a+o}return-1}},{key:"findFirstIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a={id:-1,position:n?0:t+r,length:0},i=0;i<e.length;i++){var s=this.findPattern(e[i],t,r,n);if(-1!=s){var o=!1,u=e[i].length;n?s-u>=a.position-a.length&&(o=!0):s-u<=a.position-a.length&&(o=!0),o&&(a.position=s,a.id=i,a.length=u)}}return a}},{key:"findAllIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.buffer.byteLength-t,n=[];if(null==t&&(t=0),t>this.buffer.byteLength-1)return n;null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);for(var a={id:-1,position:t};;){var i=a.position;if(-1==(a=this.findFirstIn(e,a.position,r)).id)break;r-=a.position-i,n.push({id:a.id,position:a.position})}return n}},{key:"findAllPatternIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.buffer.byteLength-t;null==t&&(t=0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);var n=[],a=e.buffer.byteLength;if(a>r)return-1;for(var i=Array.from(e.view),s=0;s<=r-a;s++){for(var o=!0,u=t+s,l=0;l<a;l++)if(this.view[l+u]!=i[l]){o=!1;break}o&&(n.push(t+a+s),s+=a-1)}return n}},{key:"findFirstNotIn",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==r&&(r=a?this.buffer.byteLength:0),r>this.buffer.byteLength&&(r=this.buffer.byteLength),a?(null==n&&(n=r),n>r&&(n=r)):(null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r));for(var i={left:{id:-1,position:r},right:{id:-1,position:0},value:new e},s=n;s>0;){if(i.right=this.findFirstIn(t,a?r-n+s:r+n-s,s,a),-1==i.right.id){n=s,a?r-=n:r=i.left.position,i.value=new e,i.value._buffer=this._buffer.slice(r,r+n),i.value._view=new Uint8Array(i.value._buffer);break}if(i.right.position!=(a?i.left.position-t[i.right.id].buffer.byteLength:i.left.position+t[i.right.id].buffer.byteLength)){a?(r=i.right.position+t[i.right.id].buffer.byteLength,n=i.left.position-i.right.position-t[i.right.id].buffer.byteLength):(r=i.left.position,n=i.right.position-i.left.position-t[i.right.id].buffer.byteLength),i.value=new e,i.value._buffer=this._buffer.slice(r,r+n),i.value._view=new Uint8Array(i.value._buffer);break}i.left=i.right,s-=t[i.right.id]._buffer.byteLength}if(a){var o=i.right;i.right=i.left,i.left=o}return i}},{key:"findAllNotIn",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i={left:{id:-1,position:r},right:{id:-1,position:r},value:new e};do{var s=i.right.position;n-=(i=this.findFirstNotIn(t,i.right.position,n)).right.position-s,a.push({left:{id:i.left.id,position:i.left.position},right:{id:i.right.id,position:i.right.position},value:i.value})}while(-1!=i.right.id);return a}},{key:"findFirstSequence",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==r&&(r=a?this.buffer.byteLength:0),r>this.buffer.byteLength&&(r=this.buffer.byteLength),a?(null==n&&(n=r),n>r&&(n=r)):(null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r));var i=this.skipNotPatterns(t,r,n,a);if(-1==i)return{position:-1,value:new e};var s=this.skipPatterns(t,i,n-(a?r-i:i-r),a);a?(r=s,n=i-s):(r=i,n=s-i);var o=new e;return o._buffer=this._buffer.slice(r,r+n),o._view=new Uint8Array(o._buffer),{position:s,value:o}}},{key:"findAllSequences",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i={position:r,value:new e};do{var s=i.position;-1!=(i=this.findFirstSequence(t,i.position,n)).position&&(n-=i.position-s,a.push({position:i.position,value:i.value}))}while(-1!=i.position);return a}},{key:"findPairedPatterns",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[];if(e.isEqual(t))return a;if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i=0,s=this.findAllPatternIn(e,r,n);if(0==s.length)return a;var o=this.findAllPatternIn(t,r,n);if(0==o.length)return a;for(;i<s.length&&0!=o.length;)if(s[0]!=o[0]){if(s[i]>o[0])break;for(;s[i]<o[0]&&!(++i>=s.length););a.push({left:s[i-1],right:o[0]}),s.splice(i-1,1),o.splice(0,1),i=0}else a.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return a.sort(function(e,t){return e.left-t.left}),a}},{key:"findPairedArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i=0,s=this.findAllIn(e,r,n);if(0==s.length)return a;var o=this.findAllIn(t,r,n);if(0==o.length)return a;for(;i<s.length&&0!=o.length;)if(s[0].position!=o[0].position){if(s[i].position>o[0].position)break;for(;s[i].position<o[0].position&&!(++i>=s.length););a.push({left:s[i-1],right:o[0]}),s.splice(i-1,1),o.splice(0,1),i=0}else a.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return a.sort(function(e,t){return e.left.position-t.left.position}),a}},{key:"replacePattern",value:function(e,r){var n,a,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l={status:-1,searchPatternPositions:[],replacePatternPositions:[]};if(null==s&&(s=0),s>this.buffer.byteLength-1)return!1;if(null==o&&(o=this.buffer.byteLength-s),o>this.buffer.byteLength-s&&(o=this.buffer.byteLength-s),null==u){if(0==(a=this.findAllIn([e],s,o)).length)return l}else a=u;(n=l.searchPatternPositions).push.apply(n,t(Array.from(a,function(e){return e.position})));var c=e.buffer.byteLength-r.buffer.byteLength,f=new ArrayBuffer(this.view.length-a.length*c),h=new Uint8Array(f);for(h.set(new Uint8Array(this.buffer,0,s)),i=0;i<a.length;i++){var d=0==i?s:a[i-1].position;h.set(new Uint8Array(this.buffer,d,a[i].position-e.buffer.byteLength-d),d-i*c),h.set(r.view,a[i].position-e.buffer.byteLength-i*c),l.replacePatternPositions.push(a[i].position-e.buffer.byteLength-i*c)}return i--,h.set(new Uint8Array(this.buffer,a[i].position,this.buffer.byteLength-a[i].position),a[i].position-e.buffer.byteLength+r.buffer.byteLength-i*c),this.buffer=f,this.view=new Uint8Array(this.buffer),l.status=1,l}},{key:"skipPatterns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a=t,i=0;i<e.length;i++){for(var s=e[i].buffer.byteLength,o=n?a-s:a,u=!0,l=0;l<s;l++)if(this.view[l+o]!=e[i].view[l]){u=!1;break}if(u)if(i=-1,n){if((a-=s)<=0)return a}else if((a+=s)>=t+r)return a}return a}},{key:"skipNotPatterns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a=-1,i=0;i<r;i++){for(var s=0;s<e.length;s++){for(var o=e[s].buffer.byteLength,u=n?t-i-o:t+i,l=!0,c=0;c<o;c++)if(this.view[c+u]!=e[s].view[c]){l=!1;break}if(l){a=n?t-i:t+i;break}}if(-1!=a)break}return a}}]),e}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.stream=new a,this._length=0,this.backward=!1,this._start=0,this.appendBlock=0,this.prevLength=0,this.prevStart=0;for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];switch(i){case"stream":this.stream=t.stream;break;case"backward":this.backward=t.backward,this._start=this.stream.buffer.byteLength;break;case"length":this._length=t.length;break;case"start":this._start=t.start;break;case"appendBlock":this.appendBlock=t.appendBlock;break;case"view":this.stream=new a({view:t.view});break;case"buffer":this.stream=new a({buffer:t.buffer});break;case"string":this.stream=new a({string:t.string});break;case"hexstring":this.stream=new a({hexstring:t.hexstring})}}}return d(e,[{key:"stream",get:function(){return this._stream},set:function(e){this._stream=e,this.prevLength=this._length,this._length=e._buffer.byteLength,this.prevStart=this._start,this._start=0}},{key:"length",get:function(){return this.appendBlock?this.start:this._length},set:function(e){this.prevLength=this._length,this._length=e}},{key:"start",get:function(){return this._start},set:function(e){e>this.stream.buffer.byteLength||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}},{key:"buffer",get:function(){return this._stream._buffer.slice(0,this._length)}},{key:"resetPosition",value:function(){this._start=this.prevStart,this._length=this.prevLength}},{key:"findPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);var r=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==r)return r;if(this.backward){if(r<this.start-e.buffer.byteLength-t)return-1}else if(r>this.start+e.buffer.byteLength+t)return-1;return this.start=r,r}},{key:"findFirstIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);var r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==r.id)return r;if(this.backward){if(r.position<this.start-e[r.id].buffer.byteLength-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(r.position>this.start+e[r.id].buffer.byteLength+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=r.position,r}},{key:"findAllIn",value:function(e){return this.stream.findAllIn(e,this.backward?this.start-this.length:this.start,this.length)}},{key:"findFirstNotIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this._length)&&(t=this._length);var r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==r.left.id&&-1==r.right.id)return r;if(this.backward){if(-1!=r.right.id&&r.right.position<this._start-e[r.right.id]._buffer.byteLength-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new a}}else if(-1!=r.left.id&&r.left.position>this._start+e[r.left.id]._buffer.byteLength+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new a};return this.start=this.backward?-1==r.left.id?0:r.left.position:-1==r.right.id?this._start+this._length:r.right.position,r}},{key:"findAllNotIn",value:function(e){return this._stream.findAllNotIn(e,this.backward?this._start-this._length:this._start,this._length)}},{key:"findFirstSequence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==t||t>this._length)&&(t=this._length),(null==r||r>t)&&(r=t);var n=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==n.value.buffer.byteLength)return n;if(this.backward){if(n.position<this._start-n.value._buffer.byteLength-r)return{position:-1,value:new a}}else if(n.position>this._start+n.value._buffer.byteLength+r)return{position:-1,value:new a};return this.start=n.position,n}},{key:"findAllSequences",value:function(e){return this.stream.findAllSequences(e,this.backward?this.start-this.length:this.start,this.length)}},{key:"findPairedPatterns",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==r||r>this.length)&&(r=this.length);var n=this.stream.findPairedPatterns(e,t,this.backward?this.start-this.length:this.start,this.length);if(n.length)if(this.backward){if(n[0].right<this.start-t.buffer.byteLength-r)return[]}else if(n[0].left>this.start+e.buffer.byteLength+r)return[];return n}},{key:"findPairedArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==r||r>this.length)&&(r=this.length);var n=this.stream.findPairedArrays(e,t,this.backward?this.start-this.length:this.start,this.length);if(n.length)if(this.backward){if(n[0].right.position<this.start-t[n[0].right.id].buffer.byteLength-r)return[]}else if(n[0].left.position>this.start+e[n[0].left.id].buffer.byteLength+r)return[];return n}},{key:"replacePattern",value:function(e,t){return this.stream.replacePattern(e,t,this.backward?this.start-this.length:this.start,this.length)}},{key:"skipPatterns",value:function(e){var t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}},{key:"skipNotPatterns",value:function(e){var t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}},{key:"append",value:function(e){this._start+e._buffer.byteLength>this._stream._buffer.byteLength&&(e._buffer.byteLength>this.appendBlock&&(this.appendBlock=e._buffer.byteLength+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e._view,this._start),this._length+=2*e._buffer.byteLength,this.start=this._start+e._buffer.byteLength,this.prevLength-=2*e._buffer.byteLength}},{key:"appendView",value:function(e){this._start+e.length>this._stream._buffer.byteLength&&(e.length>this.appendBlock&&(this.appendBlock=e.length+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}},{key:"appendChar",value:function(e){this._start+1>this._stream._buffer.byteLength&&(1>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}},{key:"appendUint16",value:function(e){this._start+2>this._stream._buffer.byteLength&&(2>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint16Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[1],this._stream._view[this._start+1]=r[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}},{key:"appendUint24",value:function(e){this._start+3>this._stream._buffer.byteLength&&(3>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[2],this._stream._view[this._start+1]=r[1],this._stream._view[this._start+2]=r[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}},{key:"appendUint32",value:function(e){this._start+4>this._stream._buffer.byteLength&&(4>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[3],this._stream._view[this._start+1]=r[2],this._stream._view[this._start+2]=r[1],this._stream._view[this._start+3]=r[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}},{key:"getBlock",value:function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._length<=0)return[];if(this._length<e&&(e=this._length),this.backward){var n=this._stream._buffer.slice(this._length-e,this._length),a=new Uint8Array(n);t=new Array(e);for(var i=0;i<e;i++)t[e-1-i]=a[i]}else{var s=this._stream._buffer.slice(this._start,this._start+e);t=Array.from(new Uint8Array(s))}return r&&(this.start+=this.backward?-1*e:e),t}},{key:"getUint16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(2,e);if(t.length<2)return 0;var r=new Uint16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}},{key:"getInt16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(2,e);if(t.length<2)return 0;var r=new Int16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}},{key:"getUint24",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(3,e);if(t.length<3)return 0;for(var r=new Uint32Array(1),n=new Uint8Array(r.buffer),a=3;a>=1;a--)n[3-a]=t[a-1];return r[0]}},{key:"getUint32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(4,e);if(t.length<4)return 0;for(var r=new Uint32Array(1),n=new Uint8Array(r.buffer),a=3;a>=0;a--)n[3-a]=t[a];return r[0]}},{key:"getInt32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(4,e);if(t.length<4)return 0;for(var r=new Int32Array(1),n=new Uint8Array(r.buffer),a=3;a>=0;a--)n[3-a]=t[a];return r[0]}}]),e}();function s(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(null===a&&(a=0),a>e.buffer.byteLength-1)return!1;null===i&&(i=e.buffer.byteLength-a),i>e.buffer.byteLength-a&&(i=e.buffer.byteLength-a),n=0==a&&i==e.buffer.byteLength?e.view:new Uint8Array(e.buffer,a,i);for(var s=new Array(r),o=0,u=0,l=t.length;u<i;){var c=0;s[o]={};for(var f=0;f<l;f++)if(0!=t[f].maxlength){for(var h=new Array(t[f].maxlength),d=0;d<t[f].maxlength;d++)h[d]=n[u++];var m=t[f].func(h);if(-1==m.status)return 1==s.length?[]:s.slice(0,s.length-1);"check"!=t[f].type&&(s[o][t[f].name]=m.value),u-=t[f].maxlength-m.length,c+=m.length}else"defaultValue"in t[f]&&(s[o][t[f].name]=t[f].defaultValue);s[o++].structureLength=c}return s}var o=["00000000","00000001","00000010","00000011","00000100","00000101","00000110","00000111","00001000","00001001","00001010","00001011","00001100","00001101","00001110","00001111","00010000","00010001","00010010","00010011","00010100","00010101","00010110","00010111","00011000","00011001","00011010","00011011","00011100","00011101","00011110","00011111","00100000","00100001","00100010","00100011","00100100","00100101","00100110","00100111","00101000","00101001","00101010","00101011","00101100","00101101","00101110","00101111","00110000","00110001","00110010","00110011","00110100","00110101","00110110","00110111","00111000","00111001","00111010","00111011","00111100","00111101","00111110","00111111","01000000","01000001","01000010","01000011","01000100","01000101","01000110","01000111","01001000","01001001","01001010","01001011","01001100","01001101","01001110","01001111","01010000","01010001","01010010","01010011","01010100","01010101","01010110","01010111","01011000","01011001","01011010","01011011","01011100","01011101","01011110","01011111","01100000","01100001","01100010","01100011","01100100","01100101","01100110","01100111","01101000","01101001","01101010","01101011","01101100","01101101","01101110","01101111","01110000","01110001","01110010","01110011","01110100","01110101","01110110","01110111","01111000","01111001","01111010","01111011","01111100","01111101","01111110","01111111","10000000","10000001","10000010","10000011","10000100","10000101","10000110","10000111","10001000","10001001","10001010","10001011","10001100","10001101","10001110","10001111","10010000","10010001","10010010","10010011","10010100","10010101","10010110","10010111","10011000","10011001","10011010","10011011","10011100","10011101","10011110","10011111","10100000","10100001","10100010","10100011","10100100","10100101","10100110","10100111","10101000","10101001","10101010","10101011","10101100","10101101","10101110","10101111","10110000","10110001","10110010","10110011","10110100","10110101","10110110","10110111","10111000","10111001","10111010","10111011","10111100","10111101","10111110","10111111","11000000","11000001","11000010","11000011","11000100","11000101","11000110","11000111","11001000","11001001","11001010","11001011","11001100","11001101","11001110","11001111","11010000","11010001","11010010","11010011","11010100","11010101","11010110","11010111","11011000","11011001","11011010","11011011","11011100","11011101","11011110","11011111","11100000","11100001","11100010","11100011","11100100","11100101","11100110","11100111","11101000","11101001","11101010","11101011","11101100","11101101","11101110","11101111","11110000","11110001","11110010","11110011","11110100","11110101","11110110","11110111","11111000","11111001","11111010","11111011","11111100","11111101","11111110","11111111"],u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.buffer=new ArrayBuffer(0),this.view=new Uint8Array(this.buffer),this.bitsCount=0;for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];switch(a){case"byteStream":this.fromByteStream(t.byteStream);break;case"view":this.fromUint8Array(t.view);break;case"buffer":this.fromArrayBuffer(t.buffer);break;case"string":this.fromString(t.string);break;case"uint32":this.fromUint32(t.uint32);break;case"bitsCount":this.bitsCount=t.bitsCount}}}return d(e,[{key:"clear",value:function(){this.buffer=new ArrayBuffer(0),this.view=new Uint8Array(this.buffer),this.bitsCount=0}},{key:"fromByteStream",value:function(e){this.buffer=e.buffer.slice(0),this.view=new Uint8Array(this.buffer),this.bitsCount=this.view.length<<3}},{key:"fromArrayBuffer",value:function(e){this.buffer=e.slice(0),this.view=new Uint8Array(this.buffer),this.bitsCount=this.view.length<<3}},{key:"fromUint8Array",value:function(e){this.buffer=new ArrayBuffer(e.length),this.view=new Uint8Array(this.buffer),this.view.set(e),this.bitsCount=this.view.length<<3}},{key:"fromString",value:function(e){var t=e.length;this.buffer=new ArrayBuffer((t>>3)+(t%8?1:0)),this.view=new Uint8Array(this.buffer),this.bitsCount=1+(t>>3)<<3;for(var r=0,n=0;n<t;n++)"1"==e[n]&&(this.view[r]|=1<<7-n%8),n&&(n+1)%8==0&&r++;t%8&&this.shiftRight(8-t%8),this.bitsCount=t}},{key:"fromUint32",value:function(e){this.buffer=new ArrayBuffer(4),this.view=new Uint8Array(this.buffer);for(var t=new Uint32Array([e]),r=new Uint8Array(t.buffer),n=3;n>=0;n--)this.view[n]=r[3-n];this.bitsCount=32}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==e&&(e=0),(e>=this.view.length||e<0)&&(e=0),null==t&&(t=this.view.length-e),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(var r=[],n=e;n<e+t;n++)r.push(o[this.view[n]]);return r.join("").slice((this.view.length<<3)-this.bitsCount)}},{key:"shiftRight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!=this.view.length){if(e<0||e>8)throw new Error('The "shift" parameter must be in range 0-8');if(e>this.bitsCount)throw new Error('The "shift" parameter can not be bigger than "this.bitsCount"');var r=255>>8-e;this.view[this.view.length-1]>>=e;for(var n=this.view.length-2;n>=0;n--)this.view[n+1]|=(this.view[n]&r)<<8-e,this.view[n]>>=e;this.bitsCount-=e,0==this.bitsCount&&this.clear(),t&&this.shrink()}}},{key:"shiftLeft",value:function(e){if(0!=this.view.length){if(e<0||e>8)throw new Error('The "shift" parameter must be in range 0-8');if(e>this.bitsCount)throw new Error('The "shift" parameter can not be bigger than "this.bitsCount"');var t=7&this.bitsCount;if(t>e)this.view[0]&=255>>t+e;else{var r=new ArrayBuffer(this.buffer.byteLength-1),n=new Uint8Array(r);n.set(new Uint8Array(this.buffer,1,this.buffer.byteLength-1)),n[0]&=255>>e-t,this.buffer=r.slice(0),this.view=new Uint8Array(this.buffer)}this.bitsCount-=e,0==this.bitsCount&&this.clear()}}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;if(this.bitsCount%8&&(n=8-this.bitsCount%8),r+=n,null==(t+=n)&&(t=0),t<0||t>(this.view.length<<3)-1)return new e;if(null==r&&(r=(this.view.length<<3)-1),r<0||r>(this.view.length<<3)-1)return new e;if(r-t+1>this.bitsCount)return new e;var a=t>>3,i=7&t,s=r>>3,o=7&r,u=s-a==0?1:s-a+1,l=new e;return l.buffer=new ArrayBuffer(u),l.view=new Uint8Array(l.buffer),l.bitsCount=u<<3,l.view.set(new Uint8Array(this.buffer,a,u)),l.view[0]&=255>>i,l.view[u]&=255<<7-o,7-o&&l.shiftRight(7-o,!1),l.bitsCount=r-t+1,l.shrink(),l}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t<0||t>(this.view.length<<3)-1?new e:(null===r&&(r=(this.view.length<<3)-t-1),r>this.bitsCount?new e:this.slice(t,t+r-1))}},{key:"shrink",value:function(){var e=(this.bitsCount>>3)+(this.bitsCount%8?1:0);if(e<this.buffer.byteLength){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer,this.buffer.byteLength-e,e)),this.buffer=t.slice(0),this.view=new Uint8Array(this.buffer)}}},{key:"reverseBytes",value:function(){for(var e=0;e<this.view.length;e++)this.view[e]=65793*(2050*this.view[e]&139536|32800*this.view[e]&558144)>>16;this.bitsCount%8&&(this.view[this.view.length-((this.bitsCount>>3)+(this.bitsCount%8?1:0))]>>=8-(7&this.bitsCount))}},{key:"reverseValue",value:function(){for(var e=this.toString(),t=e.length,r=new Array(t),n=0;n<t;n++)r[t-1-n]=e[n];this.fromString(r.join(""))}},{key:"getNumberValue",value:function(){var e=this.buffer.byteLength-1;if(e>3)return-1;if(-1==e)return 0;for(var t=new Uint32Array(1),r=new Uint8Array(t.buffer),n=e;n>=0;n--)r[e-n]=this.view[n];return t[0]}},{key:"findPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new a({string:this.toString()}),s=new a({string:e.toString()});return i.findPattern(s,t,r,n)}},{key:"findFirstIn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});return i.findFirstIn(s,t,r,n)}},{key:"findAllIn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new a({string:this.toString()}),i=new Array(e.length),s=0;s<e.length;s++)i[s]=new a({string:e[s].toString()});return n.findAllIn(i,t,r)}},{key:"findAllPatternIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new a({string:this.toString()}),i=new a({string:e.toString()});return n.findAllPatternIn(i,t,r)}},{key:"findFirstNotIn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});return i.findFirstNotIn(s,t,r,n)}},{key:"findAllNotIn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new a({string:this.toString()}),i=new Array(e.length),s=0;s<e.length;s++)i[s]=new a({string:e[s].toString()});return n.findAllNotIn(i,t,r)}},{key:"findFirstSequence",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});return i.findFirstSequence(s,t,r,n)}},{key:"findAllSequences",value:function(e,t,r){for(var n=new a({string:this.toString()}),i=new Array(e.length),s=0;s<e.length;s++)i[s]=new a({string:e[s].toString()});return n.findAllSequences(i,t,r)}},{key:"findPairedPatterns",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new a({string:this.toString()}),s=new a({string:e.toString()}),o=new a({string:t.toString()});return i.findPairedPatterns(s,o,r,n)}},{key:"findPairedArrays",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});for(var u=new Array(t.length),l=0;l<t.length;l++)u[l]=new a({string:t[l].toString()});return i.findPairedArrays(s,u,r,n)}},{key:"replacePattern",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new a({string:this.toString()}),s=new a({string:e.toString()}),o=new a({string:t.toString()});return!!i.findPairedPatterns(s,o,r,n)&&(this.fromString(i.toString()),!0)}},{key:"skipPatterns",value:function(e,t,r,n){for(var i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});return i.skipPatterns(s,t,r,n)}},{key:"skipNotPatterns",value:function(e,t,r,n){for(var i=new a({string:this.toString()}),s=new Array(e.length),o=0;o<e.length;o++)s[o]=new a({string:e[o].toString()});return i.skipNotPatterns(s,t,r,n)}},{key:"append",value:function(e){this.fromString([this.toString(),e.toString()].join(""))}}]),e}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.stream=new u,this._start=0,this._length=this.stream.bitsCount,this.backward=!1,this.appendBlock=0;for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];switch(a){case"stream":case"start":case"length":case"backward":case"appendBlock":this[a]=t[a]}}}return d(e,[{key:"start",get:function(){return this._start},set:function(e){e>this.stream.bitsCount||(this._length-=this.backward?this._start-e:e-this._start,this._start=e,this.prevStart=this._start,this.prevLength=this._length)}},{key:"length",get:function(){return this._length},set:function(e){e>this.stream.bitsCount||(this.prevLength=this._length,this._length=e)}},{key:"stream",get:function(){return this._stream},set:function(e){this._stream=e,this.prevLength=this._length,this._length=e.bitsCount,this.prevStart=this._start,this._start=this.backward?this.length:0}},{key:"getBits",value:function(e){var t;return this.start+e>this.stream.bitsCount&&(e=this.stream.bitsCount-this.start),this.backward?(t=this.stream.copy(this.start-e,e),this.start-=t.bitsCount):(t=this.stream.copy(this.start,e),this.start+=t.bitsCount),t}},{key:"getBitsString",value:function(e){this.start+e>this.stream.bitsCount&&(e=this.stream.bitsCount-this.start);var t,r=[];t=this.backward?this.start-e:this.start;var n=this.start+e-1,a=0;this.stream.bitsCount%8&&(a=8-this.stream.bitsCount%8);for(var i=(t+=a)>>3,s=7&t,u=(n+=a)>>3,l=7&n,c=i+(u-i==0?1:u-i+1),f=i;f<c;f++){var h=o[this.stream.view[f]];f==i&&(h=h.slice(s)),f==c-1&&(h=h.slice(0,l-7+h.length)),r.push(h)}return r=r.join(""),this.backward?this.start-=r.length:this.start+=r.length,r}},{key:"getBitsReversedValue",value:function(e){var t,r,n=this.getBitsString(e),a=n.length,i=8-a%8,s=new Array(a),o=new Uint32Array(1),u=new Uint8Array(o.buffer,0,4);if(a>32)return-1;for(t=32==e?3:a-1>>3,r=0;r<a;r++)s[a-1-r]=n[r];for(r=i;r<i+a;r++)"1"==s[r-i]&&(u[t]|=1<<7-r%8),r&&(r+1)%8==0&&t--;return o[0]}},{key:"toString",value:function(){return this.stream.copy(this.start,this.length).toString()}}]),e}()},49457:function(e,t){var r,n;void 0===(n="function"==typeof(r=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,s){var o=a.URL||a.webkitURL,u=document.createElement("a");u.download=i=i||e.name||"download",u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?n(u):r(u.href)?t(e,i,s):n(u,u.target="_blank")):(u.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(u.href)},4e4),setTimeout(function(){n(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,i){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),a);else if(r(e))t(e,a,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){n(s)})}}:function(e,r,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var o="application/octet-stream"===e.type,u=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&u||i)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},c.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,h=f.createObjectURL(e);s?s.location=h:location.href=h,s=null,setTimeout(function(){f.revokeObjectURL(h)},4e4)}});a.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,[]):r)||(e.exports=n)},7586:function(e){e.exports=function e(t,r,n){function a(s,o){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){return a(t[s][1][e]||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i=void 0,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t,r){"use strict";var n=e("./utils"),a=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,a,s,o,u,l=[],c=0,f=e.length,h=f,d="string"!==n.getTypeOf(e);c<e.length;)h=f-c,a=d?(t=e[c++],r=c<f?e[c++]:0,c<f?e[c++]:0):(t=e.charCodeAt(c++),r=c<f?e.charCodeAt(c++):0,c<f?e.charCodeAt(c++):0),s=(3&t)<<4|r>>4,o=1<h?(15&r)<<2|a>>6:64,u=2<h?63&a:64,l.push(i.charAt(t>>2)+i.charAt(s)+i.charAt(o)+i.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,s,o,u,l=0,c=0,f="data:";if(e.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var h,d=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&d--,e.charAt(e.length-2)===i.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=a.uint8array?new Uint8Array(0|d):new Array(0|d);l<e.length;)t=i.indexOf(e.charAt(l++))<<2|(s=i.indexOf(e.charAt(l++)))>>4,r=(15&s)<<4|(o=i.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(u=i.indexOf(e.charAt(l++))),h[c++]=t,64!==o&&(h[c++]=r),64!==u&&(h[c++]=n);return h}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),a=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,r,n,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=a}o.prototype={getContentWorker:function(){var e=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new i).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),a=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var i=a,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,r,n){var i=a,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^i[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),i=e("./utils"),s=e("./stream/GenericWorker"),o=n?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",i.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(o,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function a(e,t,r,a,s,c){var f,h,d=e.file,m=e.compression,v=c!==o.utf8encode,p=i.transformTo("string",c(d.name)),g=i.transformTo("string",o.utf8encode(d.name)),y=d.comment,b=i.transformTo("string",c(y)),w=i.transformTo("string",o.utf8encode(y)),k=g.length!==d.name.length,S=w.length!==y.length,P="",A="",C="",I=d.dir,O=d.date,B={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(B.crc32=e.crc32,B.compressedSize=e.compressedSize,B.uncompressedSize=e.uncompressedSize);var _=0;t&&(_|=8),v||!k&&!S||(_|=2048);var j=0,x=0;I&&(j|=16),"UNIX"===s?(x=798,j|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(d.unixPermissions,I)):(x=20,j|=function(e){return 63&(e||0)}(d.dosPermissions)),f=O.getUTCHours(),f<<=6,f|=O.getUTCMinutes(),f<<=5,f|=O.getUTCSeconds()/2,h=O.getUTCFullYear()-1980,h<<=4,h|=O.getUTCMonth()+1,h<<=5,h|=O.getUTCDate(),k&&(A=n(1,1)+n(u(p),4)+g,P+="up"+n(A.length,2)+A),S&&(C=n(1,1)+n(u(b),4)+w,P+="uc"+n(C.length,2)+C);var E="";return E+="\n\0",E+=n(_,2),E+=m.magic,E+=n(f,2),E+=n(h,2),E+=n(B.crc32,4),E+=n(B.compressedSize,4),E+=n(B.uncompressedSize,4),E+=n(p.length,2),E+=n(P.length,2),{fileRecord:l.LOCAL_FILE_HEADER+E+p+P,dirRecord:l.CENTRAL_FILE_HEADER+n(x,2)+E+n(b.length,2)+"\0\0\0\0"+n(j,4)+n(a,4)+p+P+b}}var i=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),u=e("../crc32"),l=e("../signature");function c(e,t,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(c,s),c.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=a(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=a(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=function(e,t,r,a,s){var o=i.transformTo("string",s(a));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(o.length,2)+o}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},c.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),a=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var i=new a(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,r){s++;var a=function(e,t){var r=e||t,a=n[r];if(!a)throw new Error(r+" is not a valid compression method !");return a}(r.options.compression,t.compression),o=r.dir,u=r.date;r._compressWorker(a,r.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:o,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i)}),i.entriesCount=s}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.7.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),a=e("./external"),i=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new a.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),u.isNode&&u.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new s(t);return r.load(e),r}).then(function(e){var r=[a.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var i=0;i<n.length;i++)r.push(l(n[i]));return a.Promise.all(r)}).then(function(e){for(var n=e.shift(),a=n.files,i=0;i<a.length;i++){var s=a[i];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),a=e("../stream/GenericWorker");function i(e,t){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(i,a),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},i.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function a(e,t,r){n.call(this,t),this._helper=e;var a=this;e.on("data",function(e,t){a.push(e)||a._helper.pause(),r&&r(t)}).on("error",function(e){a.emit("error",e)}).on("end",function(){a.push(null)})}e("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},t.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,a,o=i.getTypeOf(t),f=i.extend(r||{},u);f.date=f.date||new Date,null!==f.compression&&(f.compression=f.compression.toUpperCase()),"string"==typeof f.unixPermissions&&(f.unixPermissions=parseInt(f.unixPermissions,8)),f.unixPermissions&&16384&f.unixPermissions&&(f.dir=!0),f.dosPermissions&&16&f.dosPermissions&&(f.dir=!0),f.dir&&(e=v(e)),f.createFolders&&(n=m(e))&&p.call(this,n,!0),r&&void 0!==r.binary||(f.binary=!("string"===o&&!1===f.binary&&!1===f.base64)),(t instanceof l&&0===t.uncompressedSize||f.dir||!t||0===t.length)&&(f.base64=!1,f.binary=!0,t="",f.compression="STORE",o="string"),a=t instanceof l||t instanceof s?t:h.isNode&&h.isStream(t)?new d(e,t):i.prepareContent(e,t,f.binary,f.optimizedBinaryString,f.base64);var g=new c(e,a,f);this.files[e]=g}var a=e("./utf8"),i=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),u=e("./defaults"),l=e("./compressedObject"),c=e("./zipObject"),f=e("./generate"),h=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},v=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},p=function(e,t){return t=void 0!==t?t:u.createFolders,e=v(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1!==arguments.length)return n.call(this,e=this.root+e,t,r),this;if(g(e)){var a=e;return this.filter(function(e,t){return!t.dir&&a.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(g(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=p.call(this,this.root+e),r=this.clone();return r.root=t.name,r},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS"),t=f.generateWorker(this,r,r.comment||this.comment||"")}catch(e){(t=new s("error")).error(e)}return new o(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function a(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===r&&this.data[i+2]===n&&this.data[i+3]===a)return i-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&r===i[1]&&n===i[2]&&a===i[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=a},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),a=e("../support"),i=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||a.uint8array?"nodebuffer"===t?new o(e):a.uint8array?new u(n.transformTo("uint8array",e)):new i(n.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),a=e("../utils");function i(e){n.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(i,n),i.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),a=e("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,n),i.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),a=e("./GenericWorker");function i(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(i,a),i.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),a.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),a=e("./GenericWorker");function i(e){a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(i,a),i.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var n=e("../utils"),a=e("./ConvertWorker"),i=e("./GenericWorker"),s=e("../base64"),o=e("../support"),u=e("../external"),l=null;if(o.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t,r){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=r,n.checkSupport(s),this._worker=e.pipe(new a(s)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}c.prototype={accumulate:function(e){return function(e,t){return new u.Promise(function(r,a){var i=[],o=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",function(e,r){i.push(e),t&&t(r)}).on("error",function(e){i=[],a(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(u,function(e,t){var r,n=0,a=null,i=0;for(r=0;r<t.length;r++)i+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(i),r=0;r<t.length;r++)a.set(t[r],n),n+=t[r].length;return a;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,i),l);r(e)}catch(e){a(e)}i=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return this._worker.on(e,"data"===e?function(e){t.call(r,e.data,e.meta)}:function(){n.delay(t,arguments,r)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),r.blob=0===a.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),a=e("./support"),i=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),u=0;u<256;u++)o[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(e){return a.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,r,n,i,s,o=e.length,u=0;for(i=0;i<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=a.uint8array?new Uint8Array(u):new Array(u),i=s=0;s<u;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return a.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,a,i,s=e.length,u=new Array(2*s);for(t=r=0;t<s;)if((a=e[t++])<128)u[r++]=a;else if(4<(i=o[a]))u[r++]=65533,t+=i-1;else{for(a&=2===i?31:3===i?15:7;1<i&&t<s;)a=a<<6|63&e[t++],i--;1<i?u[r++]=65533:a<65536?u[r++]=a:(u[r++]=55296|(a-=65536)>>10&1023,u[r++]=56320|1023&a)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(e=n.transformTo(a.uint8array?"uint8array":"array",e))},n.inherits(l,s),l.prototype.processChunk=function(e){var t=n.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}(t),u=t;s!==t.length&&(a.uint8array?(u=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(u=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(c,s),c.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var n=e("./support"),a=e("./base64"),i=e("./nodejsUtils"),s=e("set-immediate-shim"),o=e("./external");function u(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(t,n){r.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(t),a.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,r){var n=[],a=0,i=e.length;if(i<=r)return String.fromCharCode.apply(null,e);for(;a<i;)n.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(a,Math.min(a+r,i)):e.subarray(a,Math.min(a+r,i)))),a+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var t=65536,n=r.getTypeOf(e),a=!0;if("uint8array"===n?a=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(a=c.applyCanBeUsed.nodebuffer),a)for(;1<t;)try{return c.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=f;var d={};d.string={string:u,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},d.array={string:f,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},d.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:f,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return i.newBufferFrom(e)}},d.nodebuffer={string:f,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:u},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return d[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&i.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){s(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,i,s,u){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var c=r.getTypeOf(t);return c?("arraybuffer"===c?t=r.transformTo("uint8array",t):"string"===c&&(u?t=a.decode(t):i&&!0!==s&&(t=function(e){return l(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),a=e("./utils"),i=e("./signature"),s=e("./zipEntry"),o=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.transformTo(o.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),a=e("./utils"),i=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(a)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var a=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new s.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new a(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<l.length;f++)n.prototype[l[f]]=c;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,n,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var i=0,s=new a(c),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function a(){}var i={},s=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==a&&d(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n(function(){var n;try{n=t(r)}catch(n){return i.reject(e,n)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function a(t){r||(r=!0,i.resolve(e,t))}var s=m(function(){t(a,n)});"error"===s.status&&n(s.value)}function m(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(a);return this.state!==u?f(r,this.state===o?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){i.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=m(h,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=o,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:i.resolve(new this(a),e)},l.reject=function(e){var t=new this(a);return i.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,u=-1,l=new this(a);++u<r;)c(e[u],u);return l;function c(e,a){t.resolve(e).then(function(e){s[a]=e,++o!==r||n||(n=!0,i.resolve(l,s))},function(e){n||(n=!0,i.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n=-1,s=new this(a);++n<t;)this.resolve(e[n]).then(function(e){r||(r=!0,i.resolve(s,e))},function(e){r||(r=!0,i.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),a=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(s[r]);this._dict_set=!0}}function c(e,t){var r=new l(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}l.prototype.push=function(e,t){var r,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,o.input="string"==typeof e?i.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=n.deflate(o,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?i.buf2binstring(a.shrinkBuf(o.output,o.next_out)):a.shrinkBuf(o.output,o.next_out))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(o.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=l,r.deflate=c,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),a=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}f.prototype.push=function(e,t){var r,o,u,l,f,h,d=this.strm,m=this.options.chunkSize,v=this.options.dictionary,p=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,d.input="string"==typeof e?i.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?new Uint8Array(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(m),d.next_out=0,d.avail_out=m),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&v&&(h="string"==typeof v?i.string2buf(v):"[object ArrayBuffer]"===c.call(v)?new Uint8Array(v):v,r=n.inflateSetDictionary(this.strm,h)),r===s.Z_BUF_ERROR&&!0===p&&(r=s.Z_OK,p=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=i.utf8border(d.output,d.next_out),l=d.next_out-u,f=i.buf2string(d.output,u),d.next_out=l,d.avail_out=m-l,l&&a.arraySet(d.output,d.output,u,l,0),this.onData(f)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(p=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=f,r.inflate=h,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),a);else for(var i=0;i<n;i++)e[a+i]=t[r+i]},flattenChunks:function(e){var t,r,n,a,i,s;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),t=a=0,r=e.length;t<r;t++)s.set(i=e[t],a),a+=i.length;return s}},i={arraySet:function(e,t,r,n,a){for(var i=0;i<n;i++)e[a+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function u(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,a,i,s,o=e.length,u=0;for(i=0;i<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(a-56320),i++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),i=s=0;s<u;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(a-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,a=t.length;r<a;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,a,i,o=t||e.length,l=new Array(2*o);for(r=n=0;r<o;)if((a=e[r++])<128)l[n++]=a;else if(4<(i=s[a]))l[n++]=65533,r+=i-1;else{for(a&=2===i?31:3===i?15:7;1<i&&r<o;)a=a<<6|63&e[r++],i--;1<i?l[n++]=65533:a<65536?l[n++]=a:(l[n++]=55296|(a-=65536)>>10&1023,l[n++]=56320|1023&a)}return u(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;i=i+(a=a+t[n++]|0)|0,--s;);a%=65521,i%=65521}return a|i<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,a){var i=n,s=a+r;e^=-1;for(var o=a;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,a=e("../utils/common"),i=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),l=-2,c=258,f=262,h=113;function d(e,t){return e.msg=u[t],t}function m(e){return(e<<1)-(4<e?9:0)}function v(e){for(var t=e.length;0<=--t;)e[t]=0}function p(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(a.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function g(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,p(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var r,n,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,l=e.window,h=e.w_mask,d=e.prev,m=e.strstart+c,v=l[i+s-1],p=l[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+s]===p&&l[r+s-1]===v&&l[r]===l[i]&&l[++r]===l[i+1]){i+=2,r++;do{}while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<m);if(n=c-(m-i),i=m-c,s<n){if(e.match_start=t,o<=(s=n))break;v=l[i+s-1],p=l[i+s]}}}while((t=d[t&h])>u&&0!=--a);return s<=e.lookahead?s:e.lookahead}function k(e){var t,r,n,i,u,l,c,h,d,m,v=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=v+(v-f)){for(a.arraySet(e.window,e.window,v,v,0),e.match_start-=v,e.strstart-=v,e.block_start-=v,t=r=e.hash_size;n=e.head[--t],e.head[t]=v<=n?n-v:0,--r;);for(t=r=v;n=e.prev[--t],e.prev[t]=v<=n?n-v:0,--r;);i+=v}if(0===e.strm.avail_in)break;if(c=e.window,h=e.strstart+e.lookahead,m=void 0,(d=i)<(m=(l=e.strm).avail_in)&&(m=d),r=0===m?0:(l.avail_in-=m,a.arraySet(c,l.input,l.next_in,m,h),1===l.state.wrap?l.adler=s(l.adler,c,m,h):2===l.state.wrap&&(l.adler=o(l.adler,c,m,h)),l.next_in+=m,l.total_in+=m,m),e.lookahead+=r,e.lookahead+e.insert>=3)for(e.ins_h=e.window[u=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function S(e,t){for(var r,n;;){if(e.lookahead<f){if(k(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-f&&(e.match_length=w(e,r)),e.match_length>=3)if(n=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function P(e,t){for(var r,n,a;;){if(e.lookahead<f){if(k(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-f&&(e.match_length=w(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-3,n=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(g(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=i._tr_tally(e,0,e.window[e.strstart-1]))&&g(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function A(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):d(e,l)}function O(e){var t=I(e);return 0===t&&function(e){e.window_size=2*e.w_size,v(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function B(e,t,r,n,i,s){if(!e)return l;var o=1;if(-1===t&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),i<1||9<i||8!==r||n<8||15<n||t<0||9<t||s<0||4<s)return d(e,l);8===n&&(n=9);var u=new C;return(e.state=u).strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new a.Buf8(2*u.w_size),u.head=new a.Buf16(u.hash_size),u.prev=new a.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new a.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,O(e)}n=[new A(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,g(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&g(e,!1),1)}),new A(4,4,8,4,S),new A(4,5,16,8,S),new A(4,6,32,32,S),new A(4,4,16,16,P),new A(8,16,32,32,P),new A(8,16,128,128,P),new A(8,32,128,256,P),new A(32,128,258,1024,P),new A(32,258,258,4096,P)],r.deflateInit=function(e,t){return B(e,t,8,15,8,0)},r.deflateInit2=B,r.deflateReset=O,r.deflateResetKeep=I,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},r.deflate=function(e,t){var r,a,s,u;if(!e||!e.state||5<t||t<0)return e?d(e,l):l;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&4!==t)return d(e,0===e.avail_out?-5:l);if(a.strm=e,r=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,y(a,31),y(a,139),y(a,8),a.gzhead?(y(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),y(a,255&a.gzhead.time),y(a,a.gzhead.time>>8&255),y(a,a.gzhead.time>>16&255),y(a,a.gzhead.time>>24&255),y(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),y(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(y(a,255&a.gzhead.extra.length),y(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=o(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(y(a,0),y(a,0),y(a,0),y(a,0),y(a,0),y(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),y(a,3),a.status=h);else{var f=8+(a.w_bits-8<<4)<<8;f|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(f|=32),f+=31-f%31,a.status=h,b(a,f),0!==a.strstart&&(b(a,e.adler>>>16),b(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),p(e),s=a.pending,a.pending!==a.pending_buf_size));)y(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),p(e),s=a.pending,a.pending===a.pending_buf_size)){u=1;break}u=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,y(a,u)}while(0!==u);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===u&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),p(e),s=a.pending,a.pending===a.pending_buf_size)){u=1;break}u=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,y(a,u)}while(0!==u);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===u&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&p(e),a.pending+2<=a.pending_buf_size&&(y(a,255&e.adler),y(a,e.adler>>8&255),e.adler=0,a.status=h)):a.status=h),0!==a.pending){if(p(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(r)&&4!==t)return d(e,-5);if(666===a.status&&0!==e.avail_in)return d(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&666!==a.status){var w=2===a.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var r,n,a,s,o=e.window;;){if(e.lookahead<=c){if(k(e),e.lookahead<=c&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=o[a=e.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){s=e.strstart+c;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<s);e.match_length=c-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(a,t):n[a.level].func(a,t);if(3!==w&&4!==w||(a.status=666),1===w||3===w)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===w&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(v(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),p(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(y(a,255&e.adler),y(a,e.adler>>8&255),y(a,e.adler>>16&255),y(a,e.adler>>24&255),y(a,255&e.total_in),y(a,e.total_in>>8&255),y(a,e.total_in>>16&255),y(a,e.total_in>>24&255)):(b(a,e.adler>>>16),b(a,65535&e.adler)),p(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?d(e,l):(e.state=null,t===h?d(e,-3):0):l},r.deflateSetDictionary=function(e,t){var r,n,i,o,u,c,f,h,d=t.length;if(!e||!e.state)return l;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return l;for(1===o&&(e.adler=s(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===o&&(v(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new a.Buf8(r.w_size),a.arraySet(h,t,d-r.w_size,r.w_size,0),t=h,d=r.w_size),u=e.avail_in,c=e.next_in,f=e.input,e.avail_in=d,e.next_in=0,e.input=t,k(r);r.lookahead>=3;){for(n=r.strstart,i=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=2,k(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=c,e.input=f,e.avail_in=u,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,a,i,s,o,u,l,c,f,h,d,m,v,p,g,y,b,w,k,S,P,A,C,I;C=e.input,a=(n=e.next_in)+(e.avail_in-5),I=e.output,s=(i=e.next_out)-(t-e.avail_out),o=i+(e.avail_out-257),u=(r=e.state).dmax,l=r.wsize,c=r.whave,f=r.wnext,h=r.window,d=r.hold,m=r.bits,v=r.lencode,p=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{m<15&&(d+=C[n++]<<m,d+=C[n++]<<(m+=8),m+=8),b=v[d&g];t:for(;;){if(d>>>=w=b>>>24,m-=w,0==(w=b>>>16&255))I[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}k=65535&b,(w&=15)&&(m<w&&(d+=C[n++]<<m,m+=8),k+=d&(1<<w)-1,d>>>=w,m-=w),m<15&&(d+=C[n++]<<m,d+=C[n++]<<(m+=8),m+=8),b=p[d&y];r:for(;;){if(d>>>=w=b>>>24,m-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=p[(65535&b)+(d&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(S=65535&b,m<(w&=15)&&(d+=C[n++]<<m,(m+=8)<w&&(d+=C[n++]<<m,m+=8)),u<(S+=d&(1<<w)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=w,m-=w,(w=i-s)<S){if(c<(w=S-w)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(A=h,(P=0)===f){if(P+=l-w,w<k){for(k-=w;I[i++]=h[P++],--w;);P=i-S,A=I}}else if(f<w){if(P+=l+f-w,(w-=f)<k){for(k-=w;I[i++]=h[P++],--w;);if(P=0,f<k){for(k-=w=f;I[i++]=h[P++],--w;);P=i-S,A=I}}}else if(P+=f-w,w<k){for(k-=w;I[i++]=h[P++],--w;);P=i-S,A=I}for(;2<k;)I[i++]=A[P++],I[i++]=A[P++],I[i++]=A[P++],k-=3;k&&(I[i++]=A[P++],1<k&&(I[i++]=A[P++]))}else{for(P=i-S;I[i++]=I[P++],I[i++]=I[P++],I[i++]=I[P++],2<(k-=3););k&&(I[i++]=I[P++],1<k&&(I[i++]=I[P++]))}break}}break}}while(n<a&&i<o);n-=k=m>>3,d&=(1<<(m-=k<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=i<o?o-i+257:257-(i-o),r.hold=d,r.bits=m}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),a=e("./adler32"),i=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),u=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):u}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):u}function d(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,h(e))):u}function m(e,t){var r,n;return e?(n=new c,(e.state=n).window=null,0!==(r=d(e,t))&&(e.state=null),r):u}var v,p,g=!0;function y(e){if(g){var t;for(v=new n.Buf32(512),p=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,p,0,e.work,{bits:5}),g=!1}e.lencode=v,e.lenbits=9,e.distcode=p,e.distbits=5}function b(e,t,r,a){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),a>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(a<(i=s.wsize-s.wnext)&&(i=a),n.arraySet(s.window,t,r-a,i,s.wnext),(a-=i)?(n.arraySet(s.window,t,r-a,a,0),s.wnext=a,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}r.inflateReset=h,r.inflateReset2=d,r.inflateResetKeep=f,r.inflateInit=function(e){return m(e,15)},r.inflateInit2=m,r.inflate=function(e,t){var r,c,f,h,d,m,v,p,g,w,k,S,P,A,C,I,O,B,_,j,x,E,N,V,D=0,M=new n.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(r=e.state).mode&&(r.mode=13),d=e.next_out,f=e.output,h=e.next_in,c=e.input,p=r.hold,g=r.bits,w=m=e.avail_in,k=v=e.avail_out,E=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(2&r.wrap&&35615===p){M[r.check=0]=255&p,M[1]=p>>>8&255,r.check=i(r.check,M,2,0),g=p=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&p)<<8)+(p>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&p)){e.msg="unknown compression method",r.mode=30;break}if(g-=4,x=8+(15&(p>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<x,e.adler=r.check=1,r.mode=512&p?10:12,g=p=0;break;case 2:for(;g<16;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(r.flags=p,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=p>>8&1),512&r.flags&&(M[0]=255&p,M[1]=p>>>8&255,r.check=i(r.check,M,2,0)),g=p=0,r.mode=3;case 3:for(;g<32;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.head&&(r.head.time=p),512&r.flags&&(M[0]=255&p,M[1]=p>>>8&255,M[2]=p>>>16&255,M[3]=p>>>24&255,r.check=i(r.check,M,4,0)),g=p=0,r.mode=4;case 4:for(;g<16;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.head&&(r.head.xflags=255&p,r.head.os=p>>8),512&r.flags&&(M[0]=255&p,M[1]=p>>>8&255,r.check=i(r.check,M,2,0)),g=p=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.length=p,r.head&&(r.head.extra_len=p),512&r.flags&&(M[0]=255&p,M[1]=p>>>8&255,r.check=i(r.check,M,2,0)),g=p=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(m<(S=r.length)&&(S=m),S&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,h,S,x)),512&r.flags&&(r.check=i(r.check,c,S,h)),m-=S,h+=S,r.length-=S),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break e;for(S=0;x=c[h+S++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x)),x&&S<m;);if(512&r.flags&&(r.check=i(r.check,c,S,h)),m-=S,h+=S,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break e;for(S=0;x=c[h+S++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x)),x&&S<m;);if(512&r.flags&&(r.check=i(r.check,c,S,h)),m-=S,h+=S,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(p!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}g=p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}e.adler=r.check=l(p),g=p=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=d,e.avail_out=v,e.next_in=h,e.avail_in=m,r.hold=p,r.bits=g,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){p>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}switch(r.last=1&p,g-=1,3&(p>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6!==t)break;p>>>=2,g-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}p>>>=2,g-=2;break;case 14:for(p>>>=7&g,g-=7&g;g<32;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if((65535&p)!=(p>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&p,g=p=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(S=r.length){if(m<S&&(S=m),v<S&&(S=v),0===S)break e;n.arraySet(f,c,h,S,d),m-=S,h+=S,v-=S,d+=S,r.length-=S;break}r.mode=12;break;case 17:for(;g<14;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(r.nlen=257+(31&p),g-=5,r.ndist=1+(31&(p>>>=5)),g-=5,r.ncode=4+(15&(p>>>=5)),p>>>=4,g-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.lens[R[r.have++]]=7&p,p>>>=3,g-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E=o(0,r.lens,0,19,r.lencode,0,r.work,N={bits:r.lenbits}),r.lenbits=N.bits,E){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(D=r.lencode[p&(1<<r.lenbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=g);){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(O<16)p>>>=C,g-=C,r.lens[r.have++]=O;else{if(16===O){for(V=C+2;g<V;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(p>>>=C,g-=C,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}x=r.lens[r.have-1],S=3+(3&p),p>>>=2,g-=2}else if(17===O){for(V=C+3;g<V;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}g-=C,x=0,S=3+(7&(p>>>=C)),p>>>=3,g-=3}else{for(V=C+7;g<V;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}g-=C,x=0,S=11+(127&(p>>>=C)),p>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=x}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,E=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,N={bits:r.lenbits}),r.lenbits=N.bits,E){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,E=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,N={bits:r.distbits}),r.distbits=N.bits,E){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=m&&258<=v){e.next_out=d,e.avail_out=v,e.next_in=h,e.avail_in=m,r.hold=p,r.bits=g,s(e,k),d=e.next_out,f=e.output,v=e.avail_out,h=e.next_in,c=e.input,m=e.avail_in,p=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;I=(D=r.lencode[p&(1<<r.lenbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=g);){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(I&&0==(240&I)){for(B=C,_=I,j=O;I=(D=r.lencode[j+((p&(1<<B+_)-1)>>B)])>>>16&255,O=65535&D,!(B+(C=D>>>24)<=g);){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}p>>>=B,g-=B,r.back+=B}if(p>>>=C,g-=C,r.back+=C,r.length=O,0===I){r.mode=26;break}if(32&I){r.back=-1,r.mode=12;break}if(64&I){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&I,r.mode=22;case 22:if(r.extra){for(V=r.extra;g<V;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.length+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(D=r.distcode[p&(1<<r.distbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=g);){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(0==(240&I)){for(B=C,_=I,j=O;I=(D=r.distcode[j+((p&(1<<B+_)-1)>>B)])>>>16&255,O=65535&D,!(B+(C=D>>>24)<=g);){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}p>>>=B,g-=B,r.back+=B}if(p>>>=C,g-=C,r.back+=C,64&I){e.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&I,r.mode=24;case 24:if(r.extra){for(V=r.extra;g<V;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}r.offset+=p&(1<<r.extra)-1,p>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===v)break e;if(r.offset>(S=k-v)){if((S=r.offset-S)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}P=S>r.wnext?r.wsize-(S-=r.wnext):r.wnext-S,S>r.length&&(S=r.length),A=r.window}else A=f,P=d-r.offset,S=r.length;for(v<S&&(S=v),v-=S,r.length-=S;f[d++]=A[P++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===v)break e;f[d++]=r.length,v--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===m)break e;m--,p|=c[h++]<<g,g+=8}if(e.total_out+=k-=v,r.total+=k,k&&(e.adler=r.check=r.flags?i(r.check,f,k,d-k):a(r.check,f,k,d-k)),k=v,(r.flags?p:l(p))!==r.check){e.msg="incorrect data check",r.mode=30;break}g=p=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===m)break e;m--,p+=c[h++]<<g,g+=8}if(p!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}g=p=0}r.mode=29;case 29:E=1;break e;case 30:E=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=d,e.avail_out=v,e.next_in=h,e.avail_in=m,r.hold=p,r.bits=g,(r.wsize||k!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&b(e,e.output,e.next_out,k-e.avail_out)?(r.mode=31,-4):(k-=e.avail_out,e.total_in+=w-=e.avail_in,e.total_out+=k,r.total+=k,r.wrap&&k&&(e.adler=r.check=r.flags?i(r.check,f,k,e.next_out-k):a(r.check,f,k,e.next_out-k)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==w&&0===k||4===t)&&0===E&&(E=-5),E)},r.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?u:((r.head=t).done=!1,0):u},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?u:11===r.mode&&a(1,t,n,0)!==r.check?-3:b(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,l,c,f,h){var d,m,v,p,g,y,b,w,k,S=h.bits,P=0,A=0,C=0,I=0,O=0,B=0,_=0,j=0,x=0,E=0,N=null,V=0,D=new n.Buf16(16),M=new n.Buf16(16),R=null,T=0;for(P=0;P<=15;P++)D[P]=0;for(A=0;A<u;A++)D[t[r+A]]++;for(O=S,I=15;1<=I&&0===D[I];I--);if(I<O&&(O=I),0===I)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(C=1;C<I&&0===D[C];C++);for(O<C&&(O=C),P=j=1;P<=15;P++)if(j<<=1,(j-=D[P])<0)return-1;if(0<j&&(0===e||1!==I))return-1;for(M[1]=0,P=1;P<15;P++)M[P+1]=M[P]+D[P];for(A=0;A<u;A++)0!==t[r+A]&&(f[M[t[r+A]]++]=A);if(y=0===e?(N=R=f,19):1===e?(N=a,V-=257,R=i,T-=257,256):(N=s,R=o,-1),P=C,g=c,_=A=E=0,v=-1,p=(x=1<<(B=O))-1,1===e&&852<x||2===e&&592<x)return 1;for(;;){for(b=P-_,k=f[A]<y?(w=0,f[A]):f[A]>y?(w=R[T+f[A]],N[V+f[A]]):(w=96,0),d=1<<P-_,C=m=1<<B;l[g+(E>>_)+(m-=d)]=b<<24|w<<16|k|0,0!==m;);for(d=1<<P-1;E&d;)d>>=1;if(0!==d?(E&=d-1,E+=d):E=0,A++,0==--D[P]){if(P===I)break;P=t[r+f[A]]}if(O<P&&(E&p)!==v){for(0===_&&(_=O),g+=C,j=1<<(B=P-_);B+_<I&&!((j-=D[B+_])<=0);)B++,j<<=1;if(x+=1<<B,1===e&&852<x||2===e&&592<x)return 1;l[v=E&p]=O<<24|B<<16|g-c|0}}return 0!==E&&(l[g+E]=P-_<<24|64<<16|0),h.bits=O,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common");function a(e){for(var t=e.length;0<=--t;)e[t]=0}var i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);a(l);var c=new Array(60);a(c);var f=new Array(512);a(f);var h=new Array(256);a(h);var d=new Array(29);a(d);var m,v,p,g=new Array(30);function y(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?f[e]:f[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function P(e,t,r){S(e,r[2*t],r[2*t+1])}function A(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function C(e,t,r){var n,a,i=new Array(16),s=0;for(n=1;n<=15;n++)i[n]=s=s+r[n-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=A(i[o]++,o))}}function I(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function O(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,r,n){var a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]}function _(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&B(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!B(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n}function j(e,t,r){var n,a,o,u,l=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===n?P(e,a,t):(P(e,(o=h[a])+256+1,t),0!==(u=i[o])&&S(e,a-=d[o],u),P(e,o=w(--n),r),0!==(u=s[o])&&S(e,n-=g[o],u)),l<e.last_lit;);P(e,256,t)}function x(e,t){var r,n,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)_(e,i,r);for(a=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,_(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,i,s,o,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)m<(i=u[2*u[2*(n=e.heap[r])+1]+1]+1)&&(i=m,v++),u[2*n+1]=i,l<n||(e.bl_count[i]++,s=0,d<=n&&(s=h[n-d]),e.opt_len+=(o=u[2*n])*(i+s),f&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==v){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,v-=2}while(0<v);for(i=m;0!==i;i--)for(n=e.bl_count[i];0!==n;)l<(a=e.heap[--r])||(u[2*a+1]!==i&&(e.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}(e,t),C(i,l,e.bl_count)}function E(e,t,r){var n,a,i=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=s,s=t[2*(n+1)+1],++o<u&&a===s||(o<l?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=a,l=(o=0)===s?(u=138,3):a===s?(u=6,3):(u=7,4))}function N(e,t,r){var n,a,i=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=r;n++)if(a=s,s=t[2*(n+1)+1],!(++o<u&&a===s)){if(o<l)for(;P(e,a,e.bl_tree),0!=--o;);else 0!==a?(a!==i&&(P(e,a,e.bl_tree),o--),P(e,16,e.bl_tree),S(e,o-3,2)):o<=10?(P(e,17,e.bl_tree),S(e,o-3,3)):(P(e,18,e.bl_tree),S(e,o-11,7));i=a,l=(o=0)===s?(u=138,3):a===s?(u=6,3):(u=7,4)}}a(g);var V=!1;function D(e,t,r,a){S(e,0+(a?1:0),3),function(e,t,r,a){O(e),k(e,r),k(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){V||(function(){var e,t,r,n,a,u=new Array(16);for(n=r=0;n<28;n++)for(d[n]=r,e=0;e<1<<i[n];e++)h[r++]=n;for(h[r-1]=n,n=a=0;n<16;n++)for(g[n]=a,e=0;e<1<<s[n];e++)f[a++]=n;for(a>>=7;n<30;n++)for(g[n]=a<<7,e=0;e<1<<s[n]-7;e++)f[256+a++]=n;for(t=0;t<=15;t++)u[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,u[8]++;for(;e<=255;)l[2*e+1]=9,e++,u[9]++;for(;e<=279;)l[2*e+1]=7,e++,u[7]++;for(;e<=287;)l[2*e+1]=8,e++,u[8]++;for(C(l,287,u),e=0;e<30;e++)c[2*e+1]=5,c[2*e]=A(e,5);m=new y(l,i,257,286,15),v=new y(c,s,0,30,15),p=new y(new Array(0),o,0,19,7)}(),V=!0),e.l_desc=new b(e.dyn_ltree,m),e.d_desc=new b(e.dyn_dtree,v),e.bl_desc=new b(e.bl_tree,p),e.bi_buf=0,e.bi_valid=0,I(e)},r._tr_stored_block=D,r._tr_flush_block=function(e,t,r,n){var a,i,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),x(e,e.l_desc),x(e,e.d_desc),s=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),x(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(i=e.static_len+3+7>>>3)<=(a=e.opt_len+3+7>>>3)&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?D(e,t,r,n):4===e.strategy||i===a?(S(e,2+(n?1:0),3),j(e,l,c)):(S(e,4+(n?1:0),3),function(e,t,r,n){var a;for(S(e,t-257,5),S(e,r-1,5),S(e,n-4,4),a=0;a<n;a++)S(e,e.bl_tree[2*u[a]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),j(e,e.dyn_ltree,e.dyn_dtree)),I(e),n&&O(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(h[r]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){S(e,2,3),P(e,256,l),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)},88413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.accessMethod=(0,i.getParametersValue)(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=(0,i.getParametersValue)(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["accessMethod","accessLocation"]);var r=a.compareSchema(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new s.default({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new a.Sequence({value:[new a.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new s.default;default:throw new Error("Invalid member name for AccessDescription class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.ObjectIdentifier({name:t.accessMethod||""}),s.default.schema(t.accessLocation||{})]})}}]),e}();t.default=u},13264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"seconds"in t&&(this.seconds=(0,a.getParametersValue)(t,"seconds",e.defaultValues("seconds"))),"millis"in t&&(this.millis=(0,a.getParametersValue)(t,"millis",e.defaultValues("millis"))),"micros"in t&&(this.micros=(0,a.getParametersValue)(t,"micros",e.defaultValues("micros"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["seconds","millis","micros"]);var r=n.compareSchema(t,t,e.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Accuracy");if("seconds"in r.result&&(this.seconds=r.result.seconds.valueBlock.valueDec),"millis"in r.result){var i=new n.Integer({valueHex:r.result.millis.valueBlock.valueHex});this.millis=i.valueBlock.valueDec}if("micros"in r.result){var s=new n.Integer({valueHex:r.result.micros.valueBlock.valueHex});this.micros=s.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("seconds"in this&&e.push(new n.Integer({value:this.seconds})),"millis"in this){var t=new n.Integer({value:this.millis});e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){var r=new n.Integer({value:this.micros});e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:r.valueBlock.valueHex}))}return new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}],[{key:"defaultValues",value:function(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"seconds":case"millis":case"micros":return r===e.defaultValues(t);default:throw new Error("Invalid member name for Accuracy class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",optional:!0,value:[new n.Integer({optional:!0,name:t.seconds||""}),new n.Primitive({name:t.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=s},4987:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.algorithmId=(0,a.getParametersValue)(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=(0,a.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["algorithm","params"]);var r=n.compareSchema(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new n.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof n.Any==0&&e.push(this.algorithmParams),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof n.Any==0&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=0&&this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new n.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof n.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new n.ObjectIdentifier({name:t.algorithmIdentifier||""}),new n.Any({name:t.algorithmParams||"",optional:!0})]})}}]),e}();t.default=s},28165:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.altNames=(0,i.getParametersValue)(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["altNames"]);var r=a.compareSchema(t,t,e.schema({names:{altNames:"altNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new s.default({schema:e})}))}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.altNames||"",value:s.default.schema()})]})}}]),e}();t.default=u},68681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.type=(0,a.getParametersValue)(t,"type",e.defaultValues("type")),this.values=(0,a.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["type","values"]);var r=n.compareSchema(t,t,e.schema({names:{type:"type",values:"values"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Attribute");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.type}),new n.Set({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.type||""}),new n.Set({name:t.setName||"",value:[new n.Repeated({name:t.values||"",value:new n.Any})]})]})}}]),e}();t.default=s},64445:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IssuerSerial=t.AttributeCertificateInfoV1=t.AttCertValidityPeriod=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(70374)),s=l(r(4987)),o=l(r(68681)),u=l(r(39327));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.notBeforeTime=(0,a.getParametersValue)(t,"notBeforeTime",e.defaultValues("notBeforeTime")),this.notAfterTime=(0,a.getParametersValue)(t,"notAfterTime",e.defaultValues("notAfterTime")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["notBeforeTime","notAfterTime"]);var r=n.compareSchema(t,t,e.schema({names:{notBeforeTime:"notBeforeTime",notAfterTime:"notAfterTime"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttCertValidityPeriod");this.notBeforeTime=r.result.notBeforeTime.toDate(),this.notAfterTime=r.result.notAfterTime.toDate()}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.GeneralizedTime({valueDate:this.notBeforeTime}),new n.GeneralizedTime({valueDate:this.notAfterTime})]})}},{key:"toJSON",value:function(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}],[{key:"defaultValues",value:function(e){switch(e){case"notBeforeTime":case"notAfterTime":return new Date(0,0,0);default:throw new Error("Invalid member name for AttCertValidityPeriod class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.GeneralizedTime({name:t.notBeforeTime||""}),new n.GeneralizedTime({name:t.notAfterTime||""})]})}}]),e}();t.AttCertValidityPeriod=h;var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.issuer=(0,a.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.serialNumber=(0,a.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"issuerUID"in t&&(this.issuerUID=(0,a.getParametersValue)(t,"issuerUID",e.defaultValues("issuerUID"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["issuer","serialNumber","issuerUID"]);var r=n.compareSchema(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber",issuerUID:"issuerUID"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuerSerial");this.issuer=new i.default({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber,"issuerUID"in r.result&&(this.issuerUID=r.result.issuerUID)}},{key:"toSchema",value:function(){var e=new n.Sequence({value:[this.issuer.toSchema(),this.serialNumber]});return"issuerUID"in this&&e.valueBlock.value.push(this.issuerUID),e}},{key:"toJSON",value:function(){var e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return"issuerUID"in this&&(e.issuerUID=this.issuerUID.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new i.default;case"serialNumber":return new n.Integer;case"issuerUID":return new n.BitString;default:throw new Error("Invalid member name for IssuerSerial class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[i.default.schema(t.issuer||{}),new n.Integer({name:t.serialNumber||""}),new n.BitString({optional:!0,name:t.issuerUID||""})]})}}]),e}();t.IssuerSerial=m;var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),"baseCertificateID"in t&&(this.baseCertificateID=(0,a.getParametersValue)(t,"baseCertificateID",e.defaultValues("baseCertificateID"))),"subjectName"in t&&(this.subjectName=(0,a.getParametersValue)(t,"subjectName",e.defaultValues("subjectName"))),this.issuer=(0,a.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),this.serialNumber=(0,a.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.attrCertValidityPeriod=(0,a.getParametersValue)(t,"attrCertValidityPeriod",e.defaultValues("attrCertValidityPeriod")),this.attributes=(0,a.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,a.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"extensions"in t&&(this.extensions=(0,a.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","baseCertificateID","subjectName","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",baseCertificateID:"baseCertificateID",subjectName:"subjectName",issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV1");this.version=r.result.version.valueBlock.valueDec,"baseCertificateID"in r.result&&(this.baseCertificateID=new m({schema:new n.Sequence({value:r.result.baseCertificateID.valueBlock.value})})),"subjectName"in r.result&&(this.subjectName=new i.default({schema:new n.Sequence({value:r.result.subjectName.valueBlock.value})})),this.issuer=r.result.issuer,this.signature=new s.default({schema:r.result.signature}),this.serialNumber=r.result.serialNumber,this.attrCertValidityPeriod=new h({schema:r.result.attrCertValidityPeriod}),this.attributes=Array.from(r.result.attributes.valueBlock.value,function(e){return new o.default({schema:e})}),"issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result.issuerUniqueID),"extensions"in r.result&&(this.extensions=new u.default({schema:r.result.extensions}))}},{key:"toSchema",value:function(){var e=new n.Sequence({value:[new n.Integer({value:this.version})]});return"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"subjectName"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new n.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})),"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}},{key:"toJSON",value:function(){var e={version:this.version};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"subjectName"in this&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,function(e){return e.toJSON()}),"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"baseCertificateID":return new m;case"subjectName":return new i.default;case"issuer":return{};case"signature":return new s.default;case"serialNumber":return new n.Integer;case"attrCertValidityPeriod":return new h;case"attributes":return[];case"issuerUniqueID":return new n.BitString;case"extensions":return new u.default;default:throw new Error("Invalid member name for AttributeCertificateInfoV1 class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Choice({value:[new n.Constructed({name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:m.schema().valueBlock.value}),new n.Constructed({name:t.subjectName||"",idBlock:{tagClass:3,tagNumber:1},value:i.default.schema().valueBlock.value})]}),i.default.schema({names:{blockName:t.issuer||""}}),s.default.schema(t.signature||{}),new n.Integer({name:t.serialNumber||""}),h.schema(t.attrCertValidityPeriod||{}),new n.Sequence({name:t.attributes||"",value:[new n.Repeated({value:o.default.schema()})]}),new n.BitString({optional:!0,name:t.issuerUniqueID||""}),u.default.schema(t.extensions||{},!0)]})}}]),e}();t.AttributeCertificateInfoV1=v;var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.acinfo=(0,a.getParametersValue)(t,"acinfo",e.defaultValues("acinfo")),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,a.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["acinfo","signatureValue","signatureAlgorithm"]);var r=n.compareSchema(t,t,e.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV1");this.acinfo=new v({schema:r.result.acinfo}),this.signatureAlgorithm=new s.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"acinfo":return new v;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error("Invalid member name for AttributeCertificateV1 class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[v.schema(t.acinfo||{}),s.default.schema(t.signatureAlgorithm||{}),new n.BitString({name:t.signatureValue||""})]})}}]),e}();t.default=p},73766:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.V2Form=t.ObjectDigestInfo=t.Holder=t.AttributeCertificateInfoV2=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=c(r(70374)),s=c(r(4987)),o=c(r(68681)),u=c(r(39327)),l=r(64445);function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.digestedObjectType=(0,a.getParametersValue)(t,"digestedObjectType",e.defaultValues("digestedObjectType")),"otherObjectTypeID"in t&&(this.otherObjectTypeID=(0,a.getParametersValue)(t,"otherObjectTypeID",e.defaultValues("otherObjectTypeID"))),this.digestAlgorithm=(0,a.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.objectDigest=(0,a.getParametersValue)(t,"objectDigest",e.defaultValues("objectDigest")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["digestedObjectType","otherObjectTypeID","digestAlgorithm","objectDigest"]);var r=n.compareSchema(t,t,e.schema({names:{digestedObjectType:"digestedObjectType",otherObjectTypeID:"otherObjectTypeID",digestAlgorithm:{names:{blockName:"digestAlgorithm"}},objectDigest:"objectDigest"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ObjectDigestInfo");this.digestedObjectType=r.result.digestedObjectType,"otherObjectTypeID"in r.result&&(this.otherObjectTypeID=r.result.otherObjectTypeID),this.digestAlgorithm=new s.default({schema:r.result.digestAlgorithm}),this.objectDigest=r.result.objectDigest}},{key:"toSchema",value:function(){var e=new n.Sequence({value:[this.digestedObjectType]});return"otherObjectTypeID"in this&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}},{key:"toJSON",value:function(){var e={digestedObjectType:this.digestedObjectType.toJSON()};return"otherObjectTypeID"in this&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e.digestAlgorithm=this.digestAlgorithm.toJSON(),e.objectDigest=this.objectDigest.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"digestedObjectType":return new n.Enumerated;case"otherObjectTypeID":return new n.ObjectIdentifier;case"digestAlgorithm":return new s.default;case"objectDigest":return new n.BitString;default:throw new Error("Invalid member name for ObjectDigestInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Enumerated({name:t.digestedObjectType||""}),new n.ObjectIdentifier({optional:!0,name:t.otherObjectTypeID||""}),s.default.schema(t.digestAlgorithm||{}),new n.BitString({name:t.objectDigest||""})]})}}]),e}();t.ObjectDigestInfo=m;var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"issuerName"in t&&(this.issuerName=(0,a.getParametersValue)(t,"issuerName",e.defaultValues("issuerName"))),"baseCertificateID"in t&&(this.baseCertificateID=(0,a.getParametersValue)(t,"baseCertificateID",e.defaultValues("baseCertificateID"))),"objectDigestInfo"in t&&(this.objectDigestInfo=(0,a.getParametersValue)(t,"objectDigestInfo",e.defaultValues("objectDigestInfo"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["issuerName","baseCertificateID","objectDigestInfo"]);var r=n.compareSchema(t,t,e.schema({names:{issuerName:"issuerName",baseCertificateID:"baseCertificateID",objectDigestInfo:"objectDigestInfo"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for V2Form");"issuerName"in r.result&&(this.issuerName=new i.default({schema:r.result.issuerName})),"baseCertificateID"in r.result&&(this.baseCertificateID=new l.IssuerSerial({schema:new n.Sequence({value:r.result.baseCertificateID.valueBlock.value})})),"objectDigestInfo"in r.result&&(this.objectDigestInfo=new m({schema:new n.Sequence({value:r.result.objectDigestInfo.valueBlock.value})}))}},{key:"toSchema",value:function(){var e=new n.Sequence;return"issuerName"in this&&e.valueBlock.value.push(this.issuerName.toSchema()),"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}},{key:"toJSON",value:function(){var e={};return"issuerName"in this&&(e.issuerName=this.issuerName.toJSON()),"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerName":return new i.default;case"baseCertificateID":return new l.IssuerSerial;case"objectDigestInfo":return new m;default:throw new Error("Invalid member name for V2Form class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[i.default.schema({names:{blockName:t.issuerName}},!0),new n.Constructed({optional:!0,name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:l.IssuerSerial.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:1},value:m.schema().valueBlock.value})]})}}]),e}();t.V2Form=v;var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"baseCertificateID"in t&&(this.baseCertificateID=(0,a.getParametersValue)(t,"baseCertificateID",e.defaultValues("baseCertificateID"))),"entityName"in t&&(this.entityName=(0,a.getParametersValue)(t,"entityName",e.defaultValues("entityName"))),"objectDigestInfo"in t&&(this.objectDigestInfo=(0,a.getParametersValue)(t,"objectDigestInfo",e.defaultValues("objectDigestInfo"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["baseCertificateID","entityName","objectDigestInfo"]);var r=n.compareSchema(t,t,e.schema({names:{baseCertificateID:"baseCertificateID",entityName:"entityName",objectDigestInfo:"objectDigestInfo"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Holder");"baseCertificateID"in r.result&&(this.baseCertificateID=new l.IssuerSerial({schema:new n.Sequence({value:r.result.baseCertificateID.valueBlock.value})})),"entityName"in r.result&&(this.entityName=new i.default({schema:new n.Sequence({value:r.result.entityName.valueBlock.value})})),"objectDigestInfo"in r.result&&(this.objectDigestInfo=new m({schema:new n.Sequence({value:r.result.objectDigestInfo.valueBlock.value})}))}},{key:"toSchema",value:function(){var e=new n.Sequence;return"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"entityName"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}},{key:"toJSON",value:function(){var e={};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"entityName"in this&&(e.entityName=this.entityName.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"baseCertificateID":return new l.IssuerSerial;case"entityName":return new i.default;case"objectDigestInfo":return new m;default:throw new Error("Invalid member name for Holder class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:l.IssuerSerial.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.entityName||"",idBlock:{tagClass:3,tagNumber:1},value:i.default.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:2},value:m.schema().valueBlock.value})]})}}]),e}();t.Holder=p;var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.holder=(0,a.getParametersValue)(t,"holder",e.defaultValues("holder")),this.issuer=(0,a.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),this.serialNumber=(0,a.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.attrCertValidityPeriod=(0,a.getParametersValue)(t,"attrCertValidityPeriod",e.defaultValues("attrCertValidityPeriod")),this.attributes=(0,a.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,a.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"extensions"in t&&(this.extensions=(0,a.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","holder","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",holder:{names:{blockName:"holder"}},issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV2");switch(this.version=r.result.version.valueBlock.valueDec,this.holder=new p({schema:r.result.holder}),r.result.issuer.idBlock.tagClass){case 3:this.issuer=new v({schema:new n.Sequence({value:r.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new s.default({schema:r.result.signature}),this.serialNumber=r.result.serialNumber,this.attrCertValidityPeriod=new l.AttCertValidityPeriod({schema:r.result.attrCertValidityPeriod}),this.attributes=Array.from(r.result.attributes.valueBlock.value,function(e){return new o.default({schema:e})}),"issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result.issuerUniqueID),"extensions"in r.result&&(this.extensions=new u.default({schema:r.result.extensions}))}},{key:"toSchema",value:function(){var e=new n.Sequence({value:[new n.Integer({value:this.version}),this.holder.toSchema(),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new n.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})]});return"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}},{key:"toJSON",value:function(){var e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,function(e){return e.toJSON()})};return"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"holder":return new p;case"issuer":return{};case"signature":return new s.default;case"serialNumber":return new n.Integer;case"attrCertValidityPeriod":return new l.AttCertValidityPeriod;case"attributes":return[];case"issuerUniqueID":return new n.BitString;case"extensions":return new u.default;default:throw new Error("Invalid member name for AttributeCertificateInfoV2 class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),p.schema(t.holder||{}),new n.Choice({value:[i.default.schema({names:{blockName:t.issuer||""}}),new n.Constructed({name:t.issuer||"",idBlock:{tagClass:3,tagNumber:0},value:v.schema().valueBlock.value})]}),s.default.schema(t.signature||{}),new n.Integer({name:t.serialNumber||""}),l.AttCertValidityPeriod.schema(t.attrCertValidityPeriod||{}),new n.Sequence({name:t.attributes||"",value:[new n.Repeated({value:o.default.schema()})]}),new n.BitString({optional:!0,name:t.issuerUniqueID||""}),u.default.schema(t.extensions||{},!0)]})}}]),e}();t.AttributeCertificateInfoV2=g;var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.acinfo=(0,a.getParametersValue)(t,"acinfo",e.defaultValues("acinfo")),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,a.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["acinfo","signatureAlgorithm","signatureValue"]);var r=n.compareSchema(t,t,e.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV2");this.acinfo=new g({schema:r.result.acinfo}),this.signatureAlgorithm=new s.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"acinfo":return new g;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error("Invalid member name for AttributeCertificateV2 class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[g.schema(t.acinfo||{}),s.default.schema(t.signatureAlgorithm||{}),new n.BitString({name:t.signatureValue||""})]})}}]),e}();t.default=y},45402:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.type=(0,a.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,a.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["type","typeValue"]);var r=n.compareSchema(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeTypeAndValue");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return e.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,e}},{key:"isEqual",value:function(t){var r=[n.Utf8String.blockName(),n.BmpString.blockName(),n.UniversalString.blockName(),n.NumericString.blockName(),n.PrintableString.blockName(),n.TeletexString.blockName(),n.VideotexString.blockName(),n.IA5String.blockName(),n.GraphicString.blockName(),n.VisibleString.blockName(),n.GeneralString.blockName(),n.CharacterString.blockName()];if(t.constructor.blockName()===e.blockName()){if(this.type!==t.type)return!1;var s,u=[!1,!1],l=this.value.constructor.blockName(),c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,void 0):void 0}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}(r);try{for(c.s();!(s=c.n()).done;){var f=s.value;l===f&&(u[0]=!0),t.value.constructor.blockName()===f&&(u[1]=!0)}}catch(m){c.e(m)}finally{c.f()}if(u[0]^u[1])return!1;if(u=u[0]&&u[1]){var h=(0,i.stringPrep)(this.value.valueBlock.value),d=(0,i.stringPrep)(t.value.valueBlock.value);if(0!==h.localeCompare(d))return!1}else if(!1===(0,a.isEqualBuffer)(this.value.valueBeforeDecode,t.value.valueBeforeDecode))return!1;return!0}return t instanceof ArrayBuffer&&(0,a.isEqualBuffer)(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.type||""}),new n.Any({name:t.value||""})]})}},{key:"blockName",value:function(){return"AttributeTypeAndValue"}}]),e}();t.default=u},81957:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(60294)),s=l(r(71030)),o=l(r(78544)),u=l(r(38570));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function v(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.safeContents=(0,a.getParametersValue)(t,"safeContents",e.defaultValues("safeContents")),"parsedValue"in t&&(this.parsedValue=(0,a.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["contentInfos"]);var r=n.compareSchema(t,t,e.schema({names:{contentInfos:"contentInfos"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(r.result.contentInfos,function(e){return new i.default({schema:e})})}},{key:"toSchema",value:function(){return new n.Sequence({value:Array.from(this.safeContents,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeContents:Array.from(this.safeContents,function(e){return e.toJSON()})}}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==0)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==0)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');var r=Promise.resolve();this.parsedValue={safeContents:[]};var i,l=m(this.safeContents.entries());try{for(l.s();!(i=l.n()).done;){var c=h(i.value,2),f=c[0],d=c[1];switch(d.contentType){case"1.2.840.113549.1.7.1":if(d.content instanceof n.OctetString==0)return Promise.reject('Wrong type of "this.safeContents[j].content"');var v=new ArrayBuffer(0);if(d.content.valueBlock.isConstructed){var p,g=m(d.content.valueBlock.value);try{for(g.s();!(p=g.n()).done;)v=(0,a.utilConcatBuf)(v,p.value.valueBlock.valueHex)}catch(k){g.e(k)}finally{g.f()}}else v=d.content.valueBlock.valueHex;var y=n.fromBER(v);if(-1===y.offset)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new s.default({schema:y.result})});break;case"1.2.840.113549.1.7.3":var b=function(){var a=new o.default({schema:d.content});if("recipientCertificate"in e.safeContents[f]==0)return{v:Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"')};var i=e.safeContents[f].recipientCertificate;if("recipientKey"in e.safeContents[f]==0)return{v:Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"')};var u=e.safeContents[f].recipientKey;r=(r=r.then(function(){return a.decrypt(0,{recipientCertificate:i,recipientPrivateKey:u})})).then(function(e){var r=n.fromBER(e);return-1===r.offset?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:2,value:new s.default({schema:r.result})}),Promise.resolve())})}();if("object"==typeof b)return b.v;break;case"1.2.840.113549.1.7.6":var w=function(){var a=new u.default({schema:d.content});if("password"in e.safeContents[f]==0)return{v:Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"')};var i=e.safeContents[f].password;r=(r=r.then(function(){return a.decrypt({password:i})},function(e){return Promise.reject(e)})).then(function(e){var r=n.fromBER(e);return-1===r.offset?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:1,value:new s.default({schema:r.result})}),Promise.resolve())},function(e){return Promise.reject(e)})}();if("object"==typeof w)return w.v;break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '.concat(d.contentType))}}}catch(k){l.e(k)}finally{l.f()}return r}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==0)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==0)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==0)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==0)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==0)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');var r=Promise.resolve();this.safeContents=[];var a,l=m(this.parsedValue.safeContents.entries());try{for(l.s();!(a=l.n()).done;){var c=h(a.value,2),f=c[0],d=c[1];if("privacyMode"in d==0)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in d==0)return Promise.reject('The "value" is a mandatory parameter for "content"');if(d.value instanceof s.default==0)return Promise.reject('The "content.value" must has "SafeContents" type');switch(d.privacyMode){case 0:!function(){var e=d.value.toSchema().toBER(!1);r=r.then(function(){t.safeContents.push(new i.default({contentType:"1.2.840.113549.1.7.1",content:new n.OctetString({valueHex:e})}))})}();break;case 1:!function(){var n=new u.default,a=e.safeContents[f];a.contentToEncrypt=d.value.toSchema().toBER(!1),r=(r=r.then(function(){return n.encrypt(a)},function(e){return Promise.reject(e)})).then(function(){t.safeContents.push(new i.default({contentType:"1.2.840.113549.1.7.6",content:n.toSchema()}))},function(e){return Promise.reject(e)})}();break;case 2:var v=function(){var n=new o.default,a=d.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[f]==0)return{v:Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"')};if("encryptionAlgorithm"in e.safeContents[f]==0)return{v:Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"')};switch(!0){case"aes-cbc"===e.safeContents[f].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[f].encryptionAlgorithm.name.toLowerCase():break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '.concat(e.safeContents[f].encryptionAlgorithm))}}switch(!0){case 128===e.safeContents[f].encryptionAlgorithm.length:case 192===e.safeContents[f].encryptionAlgorithm.length:case 256===e.safeContents[f].encryptionAlgorithm.length:break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '.concat(e.safeContents[f].encryptionAlgorithm.length))}}var s=e.safeContents[f].encryptionAlgorithm;n.addRecipientByCertificate(e.safeContents[f].encryptingCertificate),r=(r=r.then(function(){return n.encrypt(s,a)})).then(function(){t.safeContents.push(new i.default({contentType:"1.2.840.113549.1.7.3",content:n.toSchema()}))})}();if("object"==typeof v)return v.v;break;default:return Promise.reject('Incorrect value for "content.privacyMode": '.concat(d.privacyMode))}}}catch(p){l.e(p)}finally{l.f()}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: ".concat(e))})}}],[{key:"defaultValues",value:function(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error("Invalid member name for AuthenticatedSafe class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for AuthenticatedSafe class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.contentInfos||"",value:i.default.schema()})]})}}]),e}();t.default=g},96988:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"keyIdentifier"in t&&(this.keyIdentifier=(0,i.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=(0,i.getParametersValue)(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=(0,i.getParametersValue)(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["keyIdentifier","authorityCertIssuer","authorityCertSerialNumber"]);var r=a.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(this.keyIdentifier=new a.OctetString({valueHex:r.result.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new s.default({schema:e})})),"authorityCertSerialNumber"in r.result&&(this.authorityCertSerialNumber=new a.Integer({valueHex:r.result.authorityCertSerialNumber.valueBlock.valueHex}))}},{key:"toSchema",value:function(){var e=[];return"keyIdentifier"in this&&e.push(new a.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})),"authorityCertSerialNumber"in this&&e.push(new a.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHex})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new a.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new a.Integer;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new a.Repeated({name:t.authorityCertIssuer||"",value:s.default.schema()})]}),new a.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}();t.default=u},39670:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.cA=(0,a.getParametersValue)(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=(0,a.getParametersValue)(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["cA","pathLenConstraint"]);var r=n.compareSchema(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.isHexOnly?r.result.pathLenConstraint:r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new n.Boolean({value:this.cA})),"pathLenConstraint"in this&&t.push(this.pathLenConstraint instanceof n.Integer?this.pathLenConstraint:new n.Integer({value:this.pathLenConstraint})),new n.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(t.pathLenConstraint=this.pathLenConstraint instanceof n.Integer?this.pathLenConstraint.toJSON():this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Boolean({optional:!0,name:t.cA||""}),new n.Integer({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}();t.default=s},77597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=m(r(73229)),o=m(r(4987)),u=m(r(35585)),l=m(r(42689)),c=m(r(2446)),h=m(r(20624));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.tbsResponseData=(0,a.getParametersValue)(t,"tbsResponseData",e.defaultValues("tbsResponseData")),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,a.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["BasicOCSPResponse.tbsResponseData","BasicOCSPResponse.signatureAlgorithm","BasicOCSPResponse.signature","BasicOCSPResponse.certs"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for BasicOCSPResponse");this.tbsResponseData=new s.default({schema:r.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new o.default({schema:r.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=r.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in r.result&&(this.certs=Array.from(r.result["BasicOCSPResponse.certs"],function(e){return new u.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}},{key:"getCertificateStatus",value:function(e,t){var r,n=this,a=Promise.resolve(),s={isForCertificate:!1,status:2},o={},u=[],c=[],f=g(this.tbsResponseData.responses);try{for(f.s();!(r=f.n()).done;){var h=r.value,d=(0,i.getAlgorithmByOID)(h.certID.hashAlgorithm.algorithmId);if("name"in d==0)return Promise.reject("Wrong CertID hashing algorithm: ".concat(h.certID.hashAlgorithm.algorithmId));if(d.name in o==0){o[d.name]=1;var m=new l.default;u.push(m),c.push(m.createForCertificate(e,{hashAlgorithm:d.name,issuerCertificate:t}))}}}catch(v){f.e(v)}finally{f.f()}return a=(a=a.then(function(){return Promise.all(c)})).then(function(){var e,t=g(n.tbsResponseData.responses);try{for(t.s();!(e=t.n()).done;){var r,a=e.value,i=g(u);try{for(i.s();!(r=i.n()).done;)if(a.certID.isEqual(r.value)){s.isForCertificate=!0;try{switch(a.certStatus.idBlock.isConstructed){case!0:1===a.certStatus.idBlock.tagNumber&&(s.status=1);break;case!1:switch(a.certStatus.idBlock.tagNumber){case 0:s.status=0;break;case 2:s.status=2}}}catch(o){}return s}}catch(v){i.e(v)}finally{i.f()}}}catch(v){t.e(v)}finally{t.f()}return s})}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");var a,s=Promise.resolve(),o=(0,i.getEngine)();return s=(s=(s=(s=(s=s.then(function(){return o.subtle.getSignatureParameters(e,r)})).then(function(e){a=e.parameters,t.signatureAlgorithm=e.signatureAlgorithm})).then(function(){t.tbsResponseData.tbs=t.tbsResponseData.toSchema(!0).toBER(!1)})).then(function(){return o.subtle.signWithPrivateKey(t.tbsResponseData.tbs,e,a)})).then(function(e){t.signature=new n.BitString({valueHex:e})})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,s=-1,o=Promise.resolve(),u=[],l=this,f=(0,i.getEngine)();if("certs"in this==0)return Promise.reject("No certificates attached to the BasicOCSPResponce");"trustedCerts"in t&&(u=t.trustedCerts);var d=(0,i.getCrypto)();if(void 0===d)return Promise.reject("Unable to create WebCrypto object");switch(!0){case this.tbsResponseData.responderID instanceof c.default:o=o.then(function(){var e,t=g(l.certs.entries());try{for(t.s();!(e=t.n()).done;){var r=p(e.value,2),n=r[0];if(r[1].subject.isEqual(l.tbsResponseData.responderID)){s=n;break}}}catch(a){t.e(a)}finally{t.f()}});break;case this.tbsResponseData.responderID instanceof n.OctetString:o=o.then(function(){return Promise.all(Array.from(l.certs,function(e){return d.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var t,r=g(l.certs.entries());try{for(r.s();!(t=r.n()).done;){var n=p(t.value,1)[0];if((0,a.isEqualBuffer)(e[n],l.tbsResponseData.responderID.valueBlock.valueHex)){s=n;break}}}catch(i){r.e(i)}finally{r.f()}})});break;default:return Promise.reject("Wrong value for responderID")}return o=(o=o.then(function(){return-1===s?Promise.reject("Correct certificate was not found in OCSP response"):(r=e.certs[s],Promise.all(Array.from(l.certs,function(e){return function(e){if(!0===e.issuer.isEqual(r.issuer)&&!0===e.serialNumber.isEqual(r.serialNumber))return null;var t,n=!1,a=g(e.extensions);try{for(a.s();!(t=a.n()).done;){var i=t.value;"2.5.29.19"===i.extnID&&"cA"in i.parsedValue&&!0===i.parsedValue.cA&&(n=!0)}}catch(s){a.e(s)}finally{a.f()}return n?e:null}(e)})).then(function(e){var t=[];t.push(r);var n,a=g(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;null!==i&&t.push(i)}}catch(s){a.e(s)}finally{a.f()}return new h.default({certs:t,trustedCerts:u}).verify().then(function(e){return!0===e.result?Promise.resolve():Promise.reject("Validation of signer's certificate failed")},function(e){return Promise.reject("Validation of signer's certificate failed with error: ".concat(e instanceof Object?e.resultMessage:e))})},function(e){return Promise.reject("Error during checking certificates for CA flag: ".concat(e))}))})).then(function(){return f.subtle.verifyWithPublicKey(e.tbsResponseData.tbs,e.signature,e.certs[s].subjectPublicKeyInfo,e.signatureAlgorithm)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsResponseData":return new s.default;case"signatureAlgorithm":return new o.default;case"signature":return new n.BitString;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":var n=s.default.compareWithDefault("tbs",r.tbs)&&s.default.compareWithDefault("responderID",r.responderID)&&s.default.compareWithDefault("producedAt",r.producedAt)&&s.default.compareWithDefault("responses",r.responses);return"responseExtensions"in r&&(n=n&&s.default.compareWithDefault("responseExtensions",r.responseExtensions)),n;case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"BasicOCSPResponse",value:[s.default.schema(t.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),o.default.schema(t.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new n.BitString({name:t.signature||"BasicOCSPResponse.signature"}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Sequence({value:[new n.Repeated({name:"BasicOCSPResponse.certs",value:u.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=w},43199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.certificateIndex=(0,a.getParametersValue)(t,"certificateIndex",e.defaultValues("certificateIndex")),this.keyIndex=(0,a.getParametersValue)(t,"keyIndex",e.defaultValues("keyIndex")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(e){if(e.constructor.blockName()!==n.Integer.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");var t=e.valueBlock.valueHex.slice(0),r=new Uint8Array(t);switch(!0){case t.byteLength<4:var a=new ArrayBuffer(4);new Uint8Array(a).set(r,4-t.byteLength),t=a.slice(0);break;case t.byteLength>4:var i=new ArrayBuffer(4);new Uint8Array(i).set(r.slice(0,4)),t=i.slice(0)}var s=t.slice(0,2),o=new Uint8Array(s),u=o[0];o[0]=o[1],o[1]=u;var l=new Uint16Array(s);this.keyIndex=l[0];var c=t.slice(2),f=new Uint8Array(c);u=f[0],f[0]=f[1],f[1]=u;var h=new Uint16Array(c);this.certificateIndex=h[0]}},{key:"toSchema",value:function(){var e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;var t=new Uint8Array(e),r=t[0];t[0]=t[1],t[1]=r;var i=new ArrayBuffer(2);new Uint16Array(i)[0]=this.keyIndex;var s=new Uint8Array(i);return r=s[0],s[0]=s[1],s[1]=r,new n.Integer({valueHex:(0,a.utilConcatBuf)(i,e)})}},{key:"toJSON",value:function(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificateIndex":case"keyIndex":return 0;default:throw new Error("Invalid member name for CAVersion class: ".concat(e))}}},{key:"schema",value:function(){return new n.Integer}}]),e}();t.default=s},62983:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(79394))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.crlId=(0,i.getParametersValue)(t,"crlId",e.defaultValues("crlId")),this.crlValue=(0,i.getParametersValue)(t,"crlValue",e.defaultValues("crlValue")),"parsedValue"in t&&(this.parsedValue=(0,i.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["crlId","crlValue"]);var r=a.compareSchema(t,t,e.schema({names:{id:"crlId",value:"crlValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=r.result.crlId.valueBlock.toString(),this.crlValue=r.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":var n=a.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new s.default({schema:n.result});break;default:throw new Error('Incorrect "crlId" value in CRLBag: '.concat(this.crlId))}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new a.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new a.Sequence({value:[new a.ObjectIdentifier({value:this.crlId}),new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"crlId":return"";case"crlValue":return new a.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CRLBag class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof a.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CRLBag class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.ObjectIdentifier({name:t.id||"id"}),new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new a.Any({name:t.value||"value"})]})]})}}]),e}();t.default=u},91439:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(70300))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.distributionPoints=(0,i.getParametersValue)(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["distributionPoints"]);var r=a.compareSchema(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.distributionPoints||"",value:s.default.schema()})]})}}]),e}();t.default=u},78342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(35585)),s=o(r(73766));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.certId=(0,a.getParametersValue)(t,"certId",e.defaultValues("certId")),this.certValue=(0,a.getParametersValue)(t,"certValue",e.defaultValues("certValue")),"parsedValue"in t&&(this.parsedValue=(0,a.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["certId","certValue"]);var r=n.compareSchema(t,t,e.schema({names:{id:"certId",value:"certValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=r.result.certId.valueBlock.toString(),this.certValue=r.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":var o=n.fromBER(this.certValue.valueBlock.valueHex);try{this.parsedValue=new i.default({schema:o.result})}catch(l){this.parsedValue=new s.default({schema:o.result})}break;case"1.2.840.113549.1.9.22.3":var u=n.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new s.default({schema:u.result});break;case"1.2.840.113549.1.9.22.2":default:throw new Error('Incorrect "certId" value in CertBag: '.concat(this.certId))}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="acinfo"in this.parsedValue?"1.2.840.113549.1.9.22.3":"1.2.840.113549.1.9.22.1",this.certValue=new n.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new n.Sequence({value:[new n.ObjectIdentifier({value:this.certId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}},{key:"toJSON",value:function(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certId":return"";case"certValue":return new n.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CertBag class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof n.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CertBag class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||"id"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.value||"value"})]})]})}}]),e}();t.default=l},42689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=r(97226),o=(n=r(4987))&&n.__esModule?n:{default:n};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.hashAlgorithm=(0,i.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.issuerNameHash=(0,i.getParametersValue)(t,"issuerNameHash",e.defaultValues("issuerNameHash")),this.issuerKeyHash=(0,i.getParametersValue)(t,"issuerKeyHash",e.defaultValues("issuerKeyHash")),this.serialNumber=(0,i.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["hashAlgorithm","issuerNameHash","issuerKeyHash","serialNumber"]);var r=a.compareSchema(t,t,e.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new o.default({schema:r.result.hashAlgorithm}),this.issuerNameHash=r.result.issuerNameHash,this.issuerKeyHash=r.result.issuerKeyHash,this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}},{key:"isEqual",value:function(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&!1!==(0,i.isEqualBuffer)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)&&!1!==(0,i.isEqualBuffer)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)&&!!this.serialNumber.isEqual(e.serialNumber)}},{key:"createForCertificate",value:function(e,t){var r,n=this,i=Promise.resolve(),u=(0,s.getCrypto)();if(void 0===u)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==0)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');var l=(0,s.getOIDByAlgorithm)({name:t.hashAlgorithm});return""===l?Promise.reject('Incorrect "hashAlgorithm": '.concat(this.hashAlgorithm)):(this.hashAlgorithm=new o.default({algorithmId:l,algorithmParams:new a.Null}),"issuerCertificate"in t?(r=t.issuerCertificate,this.serialNumber=e.serialNumber,i=(i=i.then(function(){return u.digest({name:t.hashAlgorithm},r.subject.toSchema().toBER(!1))},function(e){return Promise.reject(e)})).then(function(e){return n.issuerNameHash=new a.OctetString({valueHex:e}),u.digest({name:t.hashAlgorithm},r.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex)},function(e){return Promise.reject(e)}).then(function(e){n.issuerKeyHash=new a.OctetString({valueHex:e})},function(e){return Promise.reject(e)})):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new o.default;case"issuerNameHash":case"issuerKeyHash":return new a.OctetString;case"serialNumber":return new a.Integer;default:throw new Error("Invalid member name for CertID class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for CertID class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[o.default.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||""}}),new a.OctetString({name:t.issuerNameHash||""}),new a.OctetString({name:t.issuerKeyHash||""}),new a.Integer({name:t.serialNumber||""})]})}}]),e}();t.default=l},35585:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=m(r(4987)),o=m(r(2446)),u=m(r(26466)),l=m(r(20720)),c=m(r(51090)),h=m(r(39327));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"tbsCertificate",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new n.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),s.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),o.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new n.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[u.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),u.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),o.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),l.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new n.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[h.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.tbs=(0,a.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.serialNumber=(0,a.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,a.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.notBefore=(0,a.getParametersValue)(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=(0,a.getParametersValue)(t,"notAfter",e.defaultValues("notAfter")),this.subject=(0,a.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,a.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,a.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=(0,a.getParametersValue)(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=(0,a.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,a.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["tbsCertificate","tbsCertificate.extensions","tbsCertificate.version","tbsCertificate.serialNumber","tbsCertificate.signature","tbsCertificate.issuer","tbsCertificate.notBefore","tbsCertificate.notAfter","tbsCertificate.subject","tbsCertificate.subjectPublicKeyInfo","tbsCertificate.issuerUniqueID","tbsCertificate.subjectUniqueID","signatureAlgorithm","signatureValue"]);var r=n.compareSchema(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Certificate");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new s.default({schema:r.result["tbsCertificate.signature"]}),this.issuer=new o.default({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new u.default({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new u.default({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new o.default({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new l.default({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.subjectUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new c.default({schema:e})})),this.signatureAlgorithm=new s.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new n.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new n.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new n.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"extensions"in this&&t.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new n.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new n.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(!1===t){if(0===this.tbs.length)return e.schema().value[0];r=n.fromBER(this.tbs).result}else r=this.encodeTBS();return new n.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,a.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=(0,a.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=(0,a.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,i.getEngine)().subtle.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}},{key:"getKeyHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SHA-1",t=(0,i.getCrypto)();return void 0===t?Promise.reject("Unable to create WebCrypto object"):t.digest({name:e},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");var a,s=Promise.resolve(),o=(0,i.getEngine)();return s=(s=(s=(s=(s=s.then(function(){return o.subtle.getSignatureParameters(e,r)})).then(function(e){a=e.parameters,t.signature=e.signatureAlgorithm,t.signatureAlgorithm=e.signatureAlgorithm})).then(function(){t.tbs=t.encodeTBS().toBER(!1)})).then(function(){return o.subtle.signWithPrivateKey(t.tbs,e,a)})).then(function(e){t.signatureValue=new n.BitString({valueHex:e})})}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};return null!==e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),t instanceof l.default==0?Promise.reject("Please provide issuer certificate as a parameter"):(0,i.getEngine)().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,t,this.signatureAlgorithm)}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new n.Integer;case"signature":return new s.default;case"issuer":return new o.default;case"notBefore":case"notAfter":return new u.default;case"subject":return new o.default;case"subjectPublicKeyInfo":return new l.default;case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error("Invalid member name for Certificate class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[p(t.tbsCertificate),s.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=g},20624:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(1971),i=n(97226);function s(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){s(i,n,a,o,u,"next",e)}function u(e){s(i,n,a,o,u,"throw",e)}o(void 0)})}}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.trustedCerts=(0,a.getParametersValue)(t,"trustedCerts",this.defaultValues("trustedCerts")),this.certs=(0,a.getParametersValue)(t,"certs",this.defaultValues("certs")),this.crls=(0,a.getParametersValue)(t,"crls",this.defaultValues("crls")),this.ocsps=(0,a.getParametersValue)(t,"ocsps",this.defaultValues("ocsps")),this.checkDate=(0,a.getParametersValue)(t,"checkDate",this.defaultValues("checkDate")),this.findOrigin=(0,a.getParametersValue)(t,"findOrigin",this.defaultValues("findOrigin")),this.findIssuer=(0,a.getParametersValue)(t,"findIssuer",this.defaultValues("findIssuer"))}return d(e,[{key:"defaultFindIssuer",value:function(e,t){return o(regeneratorRuntime.mark(function r(){var n,i,s,o,l,c,f,h,d,m,v,p,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(h=function(t){if(null!==i&&"extensions"in t){var r,l=!1,c=u(t.extensions);try{for(c.s();!(r=c.n()).done;){var f=r.value;if("2.5.29.14"===f.extnID){l=!0,(0,a.isEqualBuffer)(f.parsedValue.valueBlock.valueHex,i.valueBlock.valueHex)&&n.push(t);break}}}catch(d){c.e(d)}finally{c.f()}if(l)return}var h=!1;null!==o&&(h=t.serialNumber.isEqual(o)),null!==s?t.subject.isEqual(s)&&h&&n.push(t):e.issuer.isEqual(t.subject)&&n.push(t)},n=[],i=null,s=null,o=null,!e.subject.isEqual(e.issuer)){r.next=14;break}return r.prev=3,r.t0=!0,r.next=7,e.verify();case 7:if(r.t1=r.sent,r.t0!==r.t1){r.next=10;break}return r.abrupt("return",[e]);case 10:r.next=14;break;case 12:r.prev=12,r.t2=r.catch(3);case 14:if(!("extensions"in e)){r.next=33;break}c=u(e.extensions),r.prev=16,c.s();case 18:if((l=c.n()).done){r.next=25;break}if("2.5.29.35"!==(f=l.value).extnID){r.next=23;break}return"keyIdentifier"in f.parsedValue?i=f.parsedValue.keyIdentifier:("authorityCertIssuer"in f.parsedValue&&(s=f.parsedValue.authorityCertIssuer),"authorityCertSerialNumber"in f.parsedValue&&(o=f.parsedValue.authorityCertSerialNumber)),r.abrupt("break",25);case 23:r.next=18;break;case 25:r.next=30;break;case 27:r.prev=27,r.t3=r.catch(16),c.e(r.t3);case 30:return r.prev=30,c.f(),r.finish(30);case 33:m=u(t.trustedCerts);try{for(m.s();!(d=m.n()).done;)h(d.value)}catch(y){m.e(y)}finally{m.f()}p=u(t.certs);try{for(p.s();!(v=p.n()).done;)h(v.value)}catch(y){p.e(y)}finally{p.f()}g=0;case 38:if(!(g<n.length)){r.next=55;break}return r.prev=39,r.t4=!1,r.next=43,e.verify(n[g]);case 43:if(r.t5=r.sent,r.t6=r.t4===r.t5,!r.t6){r.next=47;break}n.splice(g,1);case 47:r.next=52;break;case 49:r.prev=49,r.t7=r.catch(39),n.splice(g,1);case 52:g++,r.next=38;break;case 55:return r.abrupt("return",n);case 56:case"end":return r.stop()}},r,null,[[3,12],[16,27,30,33],[39,49]])}))()}},{key:"defaultValues",value:function(t){switch(t){case"trustedCerts":case"certs":case"crls":case"ocsps":return[];case"checkDate":return new Date;case"findOrigin":return e.defaultFindOrigin;case"findIssuer":return this.defaultFindIssuer;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: ".concat(t))}}},{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this;return o(regeneratorRuntime.mark(function n(){var s,l,c,f,h,d,m,v,p,g,y,b,w,k,S,P,A,C,I,O,B,_,j,x;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:y=function(){return(y=o(regeneratorRuntime.mark(function t(r,n){var a,i,s,o,c,f,d,v,g,y,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<r.length)){t.next=7;break}if(!(r[a].notBefore.value>n||r[a].notAfter.value<n)){t.next=4;break}return t.abrupt("return",{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"});case 4:a++,t.next=1;break;case 7:if(!(r.length<2)){t.next=9;break}return t.abrupt("return",{result:!1,resultCode:9,resultMessage:"Too short certificate path"});case 9:i=r.length-2;case 10:if(!(i>=0)){t.next=16;break}if(!1!==r[i].issuer.isEqual(r[i].subject)||!1!==r[i].issuer.isEqual(r[i+1].subject)){t.next=13;break}return t.abrupt("return",{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"});case 13:i--,t.next=10;break;case 16:if(0===l.crls.length&&0===l.ocsps.length){t.next=64;break}s=0;case 18:if(!(s<r.length-1)){t.next=64;break}if(o=2,c={status:0,statusMessage:""},0===l.ocsps.length){t.next=29;break}return t.next=23,m(r[s],r[s+1]);case 23:o=t.sent,t.t0=o,t.next=0===t.t0?27:1===t.t0?28:29;break;case 27:return t.abrupt("continue",61);case 28:return t.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"});case 29:if(0===l.crls.length){t.next=53;break}return t.next=32,h(r[s]);case 32:if(0!==(c=t.sent).status){t.next=49;break}f=0;case 35:if(!(f<c.result.length)){t.next=47;break}if(!c.result[f].crl.isCertificateRevoked(r[s])){t.next=38;break}return t.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"});case 38:return t.t1=!1,t.next=41,p(c.result[f].certificate,!0);case 41:if(t.t2=t.sent.result,t.t1!==t.t2){t.next=44;break}return t.abrupt("return",{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"});case 44:f++,t.next=35;break;case 47:t.next=51;break;case 49:if(!1!==e){t.next=51;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: ".concat(c.statusMessage)};case 51:t.next=55;break;case 53:if(2!==o){t.next=55;break}return t.abrupt("return",{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"});case 55:if(2!==o||2!==c.status||!e){t.next=61;break}if(d=r[s+1],v=!1,"extensions"in d){y=u(d.extensions);try{for(y.s();!(g=y.n()).done;)switch(g.value.extnID){case"2.5.29.31":case"2.5.29.46":case"1.3.6.1.5.5.7.1.1":v=!0}}catch(w){y.e(w)}finally{y.f()}}if(!v){t.next=61;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: ".concat(c.statusMessage)};case 61:s++,t.next=18;break;case 64:b=1;case 65:if(!(b<r.length)){t.next=75;break}return t.t3=!1,t.next=69,p(r[b]);case 69:if(t.t4=t.sent.result,t.t3!==t.t4){t.next=72;break}return t.abrupt("return",{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"});case 72:b++,t.next=65;break;case 75:return t.abrupt("return",{result:!0});case 76:case"end":return t.stop()}},t)}))).apply(this,arguments)},g=function(){return(g=o(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,o,u,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]&&l[1],n=!1,a=!1,i=!1,s=!1,!("extensions"in t)){e.next=18;break}o=0;case 4:if(!(o<t.extensions.length)){e.next=12;break}if(!0!==t.extensions[o].critical||"parsedValue"in t.extensions[o]!=0){e.next=7;break}return e.abrupt("return",{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: ".concat(t.extensions[o].extnID)});case 7:"2.5.29.15"===t.extensions[o].extnID&&(i=!0,4==(4&(u=new Uint8Array(t.extensions[o].parsedValue.valueBlock.valueHex))[0])&&(a=!0),2==(2&u[0])&&(s=!0)),"2.5.29.19"===t.extensions[o].extnID&&"cA"in t.extensions[o].parsedValue&&!0===t.extensions[o].parsedValue.cA&&(n=!0);case 9:o++,e.next=4;break;case 12:if(!0!==a||!1!==n){e.next=14;break}return e.abrupt("return",{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'});case 14:if(!0!==i||!0!==n||!1!==a){e.next=16;break}return e.abrupt("return",{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'});case 16:if(!0!==n||!0!==i||!r||!1!==s){e.next=18;break}return e.abrupt("return",{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'});case 18:return e.abrupt("return",!1===n?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:""});case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)},p=function(e){return g.apply(this,arguments)},v=function(){return(v=o(regeneratorRuntime.mark(function e(t,r){var n,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("name"in(n=(0,i.getAlgorithmByOID)(t.signatureAlgorithm.algorithmId))!=0){e.next=3;break}return e.abrupt("return",1);case 3:if("hash"in n!=0){e.next=5;break}return e.abrupt("return",1);case 5:a=0;case 6:if(!(a<l.ocsps.length)){e.next=15;break}return e.next=9,l.ocsps[a].getCertificateStatus(t,r);case 9:if(!(s=e.sent).isForCertificate){e.next=12;break}return e.abrupt("return",0===s.status?0:1);case 12:a++,e.next=6;break;case 15:return e.abrupt("return",2);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)},m=function(e,t){return v.apply(this,arguments)},d=function(){return(d=o(regeneratorRuntime.mark(function e(r){var n,a,i,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],i=[],(n=[]).push.apply(n,t(s.filter(function(e){return r.issuer.isEqual(e.subject)}))),0!==n.length){e.next=3;break}return e.abrupt("return",{status:1,statusMessage:"No certificate's issuers"});case 3:if(a.push.apply(a,t(l.crls.filter(function(e){return e.issuer.isEqual(r.issuer)}))),0!==a.length){e.next=5;break}return e.abrupt("return",{status:2,statusMessage:"No CRLs for specific certificate issuer"});case 5:o=0;case 6:if(!(o<a.length)){e.next=26;break}if(a[o].nextUpdate.value<l.checkDate){e.next=23;break}u=0;case 9:if(!(u<n.length)){e.next=23;break}return e.prev=10,e.next=13,a[o].verify({issuerCertificate:n[u]});case 13:if(!e.sent){e.next=16;break}return i.push({crl:a[o],certificate:n[u]}),e.abrupt("break",23);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(10);case 20:u++,e.next=9;break;case 23:o++,e.next=6;break;case 26:return e.abrupt("return",i.length?{status:0,statusMessage:"",result:i}:{status:3,statusMessage:"No valid CRLs found"});case 27:case"end":return e.stop()}},e,null,[[10,18]])}))).apply(this,arguments)},h=function(e){return d.apply(this,arguments)},f=function(){return(f=o(regeneratorRuntime.mark(function e(t){var r,n,i,s,o,u,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){for(var t=!0,r=0;r<e.length;r++){for(var n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t},r=[],e.next=4,l.findIssuer(t,l);case 4:if(0!==(i=e.sent).length){e.next=7;break}throw new Error("No valid certificate paths found");case 7:s=0;case 8:if(!(s<i.length)){e.next=19;break}if(!(0,a.isEqualBuffer)(i[s].tbs,t.tbs)){e.next=12;break}return r.push([i[s]]),e.abrupt("continue",16);case 12:return e.next=14,c(i[s]);case 14:for(o=e.sent,u=0;u<o.length;u++)(f=o[u].slice()).splice(0,0,i[s]),n(f)?r.push(f):r.push(o[u]);case 16:s++,e.next=8;break;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)},c=function(e){return f.apply(this,arguments)},l=r,(s=[]).push.apply(s,t(l.trustedCerts)),s.push.apply(s,t(l.certs)),b=0;case 12:if(!(b<s.length)){n.next=24;break}w=0;case 14:if(!(w<s.length)){n.next=21;break}if(b===w||!(0,a.isEqualBuffer)(s[b].tbs,s[w].tbs)){n.next=18;break}return s.splice(w,1),b=0,n.abrupt("break",21);case 18:w++,n.next=14;break;case 21:b++,n.next=12;break;case 24:return S=[s[s.length-1]],n.next=27,c(s[s.length-1]);case 27:if(0!==(k=n.sent).length){n.next=30;break}return n.abrupt("return",{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"});case 30:P=0;case 31:if(!(P<k.length)){n.next=53;break}A=!1,C=0;case 34:if(!(C<k[P].length)){n.next=49;break}I=k[P][C],O=0;case 37:if(!(O<l.trustedCerts.length)){n.next=44;break}if(!(0,a.isEqualBuffer)(I.tbs,l.trustedCerts[O].tbs)){n.next=41;break}return A=!0,n.abrupt("break",44);case 41:O++,n.next=37;break;case 44:if(!A){n.next=46;break}return n.abrupt("break",49);case 46:C++,n.next=34;break;case 49:A||(k.splice(P,1),P=0);case 50:P++,n.next=31;break;case 53:if(0!==k.length){n.next=55;break}throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};case 55:for(B=k[0].length,_=0,j=0;j<k.length;j++)k[j].length<B&&(B=k[j].length,_=j);for(x=0;x<k[_].length;x++)S.push(k[_][x]);return n.next=60,function(e,t){return y.apply(this,arguments)}(S,l.checkDate);case 60:if(!1!==(k=n.sent).result){n.next=63;break}throw k;case 63:return n.abrupt("return",S);case 64:case"end":return n.stop()}},n)}))()}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return o(regeneratorRuntime.mark(function r(){var n,a,s,o,u,l,c,f,h,d,m,v,p,g,y,b,w,k,S,P,A,C,I,O,B,_,j,x,E,N,V,D,M,R,T,U,L,H,K,F,W,q,z,J,G,Z,$,Q,X,Y,ee,te,re,ne,ae,ie,se,oe,ue,le,ce,fe,he,de,me,ve,pe,ge,ye,be,we,ke,Se,Pe,Ae,Ce,Ie,Oe,Be,_e,je,xe,Ee,Ne,Ve;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=function(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;for(var r=!0,n=0,a=0;a<t.typesAndValues.length;a++){for(var i=!1,s=n;s<e.typesAndValues.length;s++)if(i=e.typesAndValues[s].isEqual(t.typesAndValues[a]),e.typesAndValues[s].type===t.typesAndValues[a].type&&(r=r&&i),!0===i){if(0===n||n===s){n=s+1;break}return!1}if(!1===i)return!1}return 0!==n&&r},o=function(e,t){var r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(var a=0;a<4;a++)if((r[a]^n[a])&n[a+4])return!1;return!0}if(16===r.length&&32===n.length){for(var i=0;i<16;i++)if((r[i]^n[i])&n[i+16])return!1;return!0}return!1},s=function(e,t){var r=(0,i.stringPrep)(e),a=(0,i.stringPrep)(t),s=r.split("/");if(a.split("/").length>1)return!1;if(s.length>1)for(var o=0;o<s.length;o++)if(s[o].length>0&&":"!==s[o].charAt(s[o].length-1)){r=s[o].split(":")[0];break}if(n(r,a)){var u=r.split("."),l=a.split(".");return 0===l[0].length||u.length===l.length}return!1},a=function(e,t){var r=(0,i.stringPrep)(e),a=(0,i.stringPrep)(t),s=r.split("@"),o=a.split("@");if(0===s.length||0===o.length||s.length<o.length)return!1;if(1===o.length){if(n(s[1],o[0])){var u=s[1].split("."),l=o[0].split(".");return 0===l[0].length||u.length===l.length}return!1}return 0===r.localeCompare(a)},n=function(e,t){var r=(0,i.stringPrep)(e),n=(0,i.stringPrep)(t),a=r.split("."),s=n.split("."),o=a.length,u=s.length;if(0===o||0===u||o<u)return!1;for(var l=0;l<o;l++)if(0===a[l].length)return!1;for(var c=0;c<u;c++)if(0===s[c].length){if(0===c){if(1===u)return!1;continue}return!1}for(var f=0;f<u;f++)if(0!==s[u-1-f].length&&0!==a[o-1-f].localeCompare(s[u-1-f]))return!1;return!0},r.prev=5,0!==t.certs.length){r.next=8;break}throw"Empty certificate array";case 8:return l=!1,"passedWhenNotRevValues"in e&&(l=e.passedWhenNotRevValues),(c=[]).push("2.5.29.32.0"),f=!1,h=!1,d=!1,m=[],v=[],p=[],"initialPolicySet"in e&&(c=e.initialPolicySet),"initialExplicitPolicy"in e&&(f=e.initialExplicitPolicy),"initialPolicyMappingInhibit"in e&&(h=e.initialPolicyMappingInhibit),"initialInhibitPolicy"in e&&(d=e.initialInhibitPolicy),"initialPermittedSubtreesSet"in e&&(m=e.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in e&&(v=e.initialExcludedSubtreesSet),"initialRequiredNameForms"in e&&(p=e.initialRequiredNameForms),g=f,y=h,b=d,(w=new Array(3))[0]=!1,w[1]=!1,w[2]=!1,k=0,S=0,P=0,A=m,C=v,I=p,1,r.next=22,t.sort(l);case 22:for(t.certs=r.sent,(O=[]).push("2.5.29.32.0"),B=[],_=new Array(t.certs.length-1),j=0;j<t.certs.length-1;j++)_[j]=!0;B.push(_),x=new Array(t.certs.length-1),E=new Array(t.certs.length-1),N=g?t.certs.length-1:-1,V=t.certs.length-2;case 31:if(!(V>=0)){r.next=83;break}if(!("extensions"in t.certs[V])){r.next=80;break}D=0;case 34:if(!(D<t.certs[V].extensions.length)){r.next=68;break}if("2.5.29.32"!==t.certs[V].extensions[D].extnID){r.next=60;break}E[V]=t.certs[V].extensions[D].parsedValue,M=0;case 38:if(!(M<O.length)){r.next=45;break}if("2.5.29.32.0"!==O[M]){r.next=42;break}return delete B[M][V],r.abrupt("break",45);case 42:M++,r.next=38;break;case 45:R=0;case 46:if(!(R<t.certs[V].extensions[D].parsedValue.certificatePolicies.length)){r.next=60;break}T=-1,U=0;case 49:if(!(U<O.length)){r.next=56;break}if(t.certs[V].extensions[D].parsedValue.certificatePolicies[R].policyIdentifier!==O[U]){r.next=53;break}return T=U,r.abrupt("break",56);case 53:U++,r.next=49;break;case 56:-1===T?(O.push(t.certs[V].extensions[D].parsedValue.certificatePolicies[R].policyIdentifier),(L=new Array(t.certs.length-1))[V]=!0,B.push(L)):B[T][V]=!0;case 57:R++,r.next=46;break;case 60:if("2.5.29.33"!==t.certs[V].extensions[D].extnID){r.next=64;break}if(!y){r.next=63;break}return r.abrupt("return",{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"});case 63:x[V]=t.certs[V].extensions[D].parsedValue;case 64:"2.5.29.36"===t.certs[V].extensions[D].extnID&&!1===g&&(0===t.certs[V].extensions[D].parsedValue.requireExplicitPolicy?(g=!0,N=V):!1===w[0]?(w[0]=!0,k=t.certs[V].extensions[D].parsedValue.requireExplicitPolicy):k=k>t.certs[V].extensions[D].parsedValue.requireExplicitPolicy?t.certs[V].extensions[D].parsedValue.requireExplicitPolicy:k,0===t.certs[V].extensions[D].parsedValue.inhibitPolicyMapping?y=!0:!1===w[1]?(w[1]=!0,S=t.certs[V].extensions[D].parsedValue.inhibitPolicyMapping+1):S=S>t.certs[V].extensions[D].parsedValue.inhibitPolicyMapping+1?t.certs[V].extensions[D].parsedValue.inhibitPolicyMapping+1:S),"2.5.29.54"===t.certs[V].extensions[D].extnID&&!1===b&&(0===t.certs[V].extensions[D].parsedValue.valueBlock.valueDec?b=!0:!1===w[2]?(w[2]=!0,P=t.certs[V].extensions[D].parsedValue.valueBlock.valueDec):P=P>t.certs[V].extensions[D].parsedValue.valueBlock.valueDec?t.certs[V].extensions[D].parsedValue.valueBlock.valueDec:P);case 65:D++,r.next=34;break;case 68:if(!0!==b){r.next=79;break}H=-1,K=0;case 71:if(!(K<O.length)){r.next=78;break}if("2.5.29.32.0"!==O[K]){r.next=75;break}return H=K,r.abrupt("break",78);case 75:K++,r.next=71;break;case 78:-1!==H&&delete B[0][V];case 79:!1===g&&!0===w[0]&&(0===--k&&(g=!0,N=V,w[0]=!1)),!1===y&&!0===w[1]&&(0===--S&&(y=!0,w[1]=!1)),!1===b&&!0===w[2]&&(0===--P&&(b=!0,w[2]=!1));case 80:V--,r.next=31;break;case 83:F=0;case 84:if(!(F<t.certs.length-1)){r.next=100;break}if(!(F<t.certs.length-2&&void 0!==x[F+1])){r.next=97;break}W=0;case 87:if(!(W<x[F+1].mappings.length)){r.next=97;break}if("2.5.29.32.0"!==x[F+1].mappings[W].issuerDomainPolicy&&"2.5.29.32.0"!==x[F+1].mappings[W].subjectDomainPolicy){r.next=90;break}return r.abrupt("return",{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'});case 90:for(q=-1,z=-1,J=0;J<O.length;J++)O[J]===x[F+1].mappings[W].issuerDomainPolicy&&(q=J),O[J]===x[F+1].mappings[W].subjectDomainPolicy&&(z=J);for(void 0!==B[q][F]&&delete B[q][F],G=0;G<E[F].certificatePolicies.length;G++)if(x[F+1].mappings[W].subjectDomainPolicy===E[F].certificatePolicies[G].policyIdentifier&&-1!==q&&-1!==z)for(Z=0;Z<=F;Z++)void 0!==B[z][Z]&&(B[q][Z]=!0,delete B[z][Z]);case 94:W++,r.next=87;break;case 97:F++,r.next=84;break;case 100:for($=0;$<O.length;$++)if("2.5.29.32.0"===O[$])for(Q=0;Q<N;Q++)delete B[$][Q];X=[],Y=0;case 103:if(!(Y<B.length)){r.next=131;break}ee=!0,te=0;case 106:if(!(te<t.certs.length-1)){r.next=127;break}if(re=!1,!(te<N&&"2.5.29.32.0"===O[Y]&&O.length>1)){r.next=111;break}return ee=!1,r.abrupt("break",127);case 111:if(void 0!==B[Y][te]){r.next=124;break}if(!(te>=N)){r.next=121;break}ne=0;case 114:if(!(ne<O.length)){r.next=121;break}if("2.5.29.32.0"!==O[ne]){r.next=118;break}return!0===B[ne][te]&&(re=!0),r.abrupt("break",121);case 118:ne++,r.next=114;break;case 121:if(re){r.next=124;break}return ee=!1,r.abrupt("break",127);case 124:te++,r.next=106;break;case 127:!0===ee&&X.push(O[Y]);case 128:Y++,r.next=103;break;case 131:if(ae=[],1!==c.length||"2.5.29.32.0"!==c[0]||!1!==g){r.next=136;break}ae=c,r.next=153;break;case 136:if(1!==X.length||"2.5.29.32.0"!==X[0]){r.next=140;break}ae=c,r.next=153;break;case 140:ie=0;case 141:if(!(ie<X.length)){r.next=153;break}se=0;case 143:if(!(se<c.length)){r.next=150;break}if(c[se]!==X[ie]&&"2.5.29.32.0"!==c[se]){r.next=147;break}return ae.push(X[ie]),r.abrupt("break",150);case 147:se++,r.next=143;break;case 150:ie++,r.next=141;break;case 153:if(oe={result:ae.length>0,resultCode:0,resultMessage:ae.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:X,userConstrPolicies:ae,explicitPolicyIndicator:g,policyMappings:x,certificatePath:t.certs},0!==ae.length){r.next=156;break}return r.abrupt("return",oe);case 156:if(!1!==oe.result){r.next=158;break}return r.abrupt("return",oe);case 158:1,ue=t.certs.length-2;case 160:if(!(ue>=0)){r.next=260;break}if(le=[],ce=[],fe=[],"extensions"in t.certs[ue])for(he=0;he<t.certs[ue].extensions.length;he++)"2.5.29.30"===t.certs[ue].extensions[he].extnID&&("permittedSubtrees"in t.certs[ue].extensions[he].parsedValue&&(ce=ce.concat(t.certs[ue].extensions[he].parsedValue.permittedSubtrees)),"excludedSubtrees"in t.certs[ue].extensions[he].parsedValue&&(fe=fe.concat(t.certs[ue].extensions[he].parsedValue.excludedSubtrees))),"2.5.29.17"===t.certs[ue].extensions[he].extnID&&(le=le.concat(t.certs[ue].extensions[he].parsedValue.altNames));de=I.length<=0,me=0;case 165:if(!(me<I.length)){r.next=185;break}r.t0=I[me].base.type,r.next=4===r.t0?169:182;break;case 169:if(I[me].base.value.typesAndValues.length===t.certs[ue].subject.typesAndValues.length){r.next=171;break}return r.abrupt("continue",182);case 171:de=!0,ve=0;case 173:if(!(ve<t.certs[ue].subject.typesAndValues.length)){r.next=180;break}if(t.certs[ue].subject.typesAndValues[ve].type===I[me].base.value.typesAndValues[ve].type){r.next=177;break}return de=!1,r.abrupt("break",180);case 177:ve++,r.next=173;break;case 180:if(!0!==de){r.next=182;break}return r.abrupt("break",182);case 182:me++,r.next=165;break;case 185:if(!1!==de){r.next=187;break}throw oe.result=!1,oe.resultCode=21,oe.resultMessage="No neccessary name form found",oe;case 187:(pe=[])[0]=[],pe[1]=[],pe[2]=[],pe[3]=[],pe[4]=[],ge=0;case 190:if(!(ge<A.length)){r.next=206;break}r.t1=A[ge].base.type,r.next=1===r.t1?194:2===r.t1?196:4===r.t1?198:6===r.t1?200:7===r.t1?202:203;break;case 194:return pe[0].push(A[ge]),r.abrupt("break",203);case 196:return pe[1].push(A[ge]),r.abrupt("break",203);case 198:return pe[2].push(A[ge]),r.abrupt("break",203);case 200:return pe[3].push(A[ge]),r.abrupt("break",203);case 202:pe[4].push(A[ge]);case 203:ge++,r.next=190;break;case 206:ye=0;case 207:if(!(ye<5)){r.next=234;break}be=!1,we=!1,ke=pe[ye],Se=0;case 211:if(!(Se<ke.length)){r.next=229;break}r.t2=ye,r.next=0===r.t2?215:1===r.t2?217:2===r.t2?219:3===r.t2?221:4===r.t2?223:224;break;case 215:if(le.length>0)for(Pe=0;Pe<le.length;Pe++)1===le[Pe].type&&(we=!0,be=be||a(le[Pe].value,ke[Se].base.value));else for(Ae=0;Ae<t.certs[ue].subject.typesAndValues.length;Ae++)"1.2.840.113549.1.9.1"!==t.certs[ue].subject.typesAndValues[Ae].type&&"0.9.2342.19200300.100.1.3"!==t.certs[ue].subject.typesAndValues[Ae].type||(we=!0,be=be||a(t.certs[ue].subject.typesAndValues[Ae].value.valueBlock.value,ke[Se].base.value));return r.abrupt("break",224);case 217:if(le.length>0)for(Ce=0;Ce<le.length;Ce++)2===le[Ce].type&&(we=!0,be=be||n(le[Ce].value,ke[Se].base.value));return r.abrupt("break",224);case 219:return we=!0,be=u(t.certs[ue].subject,ke[Se].base.value),r.abrupt("break",224);case 221:if(le.length>0)for(Ie=0;Ie<le.length;Ie++)6===le[Ie].type&&(we=!0,be=be||s(le[Ie].value,ke[Se].base.value));return r.abrupt("break",224);case 223:if(le.length>0)for(Oe=0;Oe<le.length;Oe++)7===le[Oe].type&&(we=!0,be=be||o(le[Oe].value,ke[Se].base.value));case 224:if(!be){r.next=226;break}return r.abrupt("break",229);case 226:Se++,r.next=211;break;case 229:if(!(!1===be&&ke.length>0&&we)){r.next=231;break}throw oe.result=!1,oe.resultCode=41,oe.resultMessage='Failed to meet "permitted sub-trees" name constraint',oe;case 231:ye++,r.next=207;break;case 234:Be=!1,_e=0;case 236:if(!(_e<C.length)){r.next=254;break}r.t3=C[_e].base.type,r.next=1===r.t3?240:2===r.t3?242:4===r.t3?244:6===r.t3?246:7===r.t3?248:249;break;case 240:if(le.length>=0)for(je=0;je<le.length;je++)1===le[je].type&&(Be=Be||a(le[je].value,C[_e].base.value));else for(xe=0;xe<t.certs[ue].subject.typesAndValues.length;xe++)"1.2.840.113549.1.9.1"!==t.certs[ue].subject.typesAndValues[xe].type&&"0.9.2342.19200300.100.1.3"!==t.certs[ue].subject.typesAndValues[xe].type||(Be=Be||a(t.certs[ue].subject.typesAndValues[xe].value.valueBlock.value,C[_e].base.value));return r.abrupt("break",249);case 242:if(le.length>0)for(Ee=0;Ee<le.length;Ee++)2===le[Ee].type&&(Be=Be||n(le[Ee].value,C[_e].base.value));return r.abrupt("break",249);case 244:return Be=Be||u(t.certs[ue].subject,C[_e].base.value),r.abrupt("break",249);case 246:if(le.length>0)for(Ne=0;Ne<le.length;Ne++)6===le[Ne].type&&(Be=Be||s(le[Ne].value,C[_e].base.value));return r.abrupt("break",249);case 248:if(le.length>0)for(Ve=0;Ve<le.length;Ve++)7===le[Ve].type&&(Be=Be||o(le[Ve].value,C[_e].base.value));case 249:if(!Be){r.next=251;break}return r.abrupt("break",254);case 251:_e++,r.next=236;break;case 254:if(!0!==Be){r.next=256;break}throw oe.result=!1,oe.resultCode=42,oe.resultMessage='Failed to meet "excluded sub-trees" name constraint',oe;case 256:A=A.concat(ce),C=C.concat(fe);case 257:ue--,r.next=160;break;case 260:return r.abrupt("return",oe);case 263:if(r.prev=263,r.t4=r.catch(5),!(r.t4 instanceof Object)){r.next=270;break}if(!("resultMessage"in r.t4)){r.next=268;break}return r.abrupt("return",r.t4);case 268:if(!("message"in r.t4)){r.next=270;break}return r.abrupt("return",{result:!1,resultCode:-1,resultMessage:r.t4.message});case 270:return r.abrupt("return",{result:!1,resultCode:-1,resultMessage:r.t4});case 271:case"end":return r.stop()}},r,null,[[5,263]])}))()}}],[{key:"defaultFindOrigin",value:function(e,t){0===e.tbs.byteLength&&(e.tbs=e.encodeTBS());var r,n=u(t.certs);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(0===i.tbs.byteLength&&(i.tbs=i.encodeTBS()),(0,a.isEqualBuffer)(e.tbs,i.tbs))return"Intermediate Certificates"}}catch(c){n.e(c)}finally{n.f()}var s,o=u(t.trustedCerts);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(0===l.tbs.byteLength&&(l.tbs=l.encodeTBS()),(0,a.isEqualBuffer)(e.tbs,l.tbs))return"Trusted Certificates"}}catch(c){o.e(c)}finally{o.f()}return"Unknown"}}]),e}();r.default=c},22104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(9490))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.certificatePolicies=(0,i.getParametersValue)(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["certificatePolicies"]);var r=a.compareSchema(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.certificatePolicies||"",value:s.default.schema()})]})}}]),e}();t.default=u},79394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=h(r(4987)),o=h(r(2446)),u=h(r(26466)),l=h(r(27414)),c=h(r(39327));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"tbsCertList",value:[new n.Integer({optional:!0,name:t.tbsCertListVersion||"tbsCertList.version",value:2}),s.default.schema(t.signature||{names:{blockName:"tbsCertList.signature"}}),o.default.schema(t.issuer||{names:{blockName:"tbsCertList.issuer"}}),u.default.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),u.default.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new n.Sequence({optional:!0,value:[new n.Repeated({name:t.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new n.Sequence({value:[new n.Integer,u.default.schema(),c.default.schema({},!0)]})})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[c.default.schema(t.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.tbs=(0,a.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,a.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.thisUpdate=(0,a.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,a.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"revokedCertificates"in t&&(this.revokedCertificates=(0,a.getParametersValue)(t,"revokedCertificates",e.defaultValues("revokedCertificates"))),"crlExtensions"in t&&(this.crlExtensions=(0,a.getParametersValue)(t,"crlExtensions",e.defaultValues("crlExtensions"))),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,a.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["tbsCertList","tbsCertList.version","tbsCertList.signature","tbsCertList.issuer","tbsCertList.thisUpdate","tbsCertList.nextUpdate","tbsCertList.revokedCertificates","tbsCertList.extensions","signatureAlgorithm","signatureValue"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificateRevocationList");this.tbs=r.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new s.default({schema:r.result["tbsCertList.signature"]}),this.issuer=new o.default({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new u.default({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new u.default({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result&&(this.revokedCertificates=Array.from(r.result["tbsCertList.revokedCertificates"],function(e){return new l.default({schema:e})})),"tbsCertList.extensions"in r.result&&(this.crlExtensions=new c.default({schema:r.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new s.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return this.version!==e.defaultValues("version")&&t.push(new n.Integer({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&t.push(new n.Sequence({value:Array.from(this.revokedCertificates,function(e){return e.toSchema()})})),"crlExtensions"in this&&t.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new n.Sequence({value:t})}},{key:"toSchema",value:function(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===r){if(0===this.tbs.length)return e.schema();t=n.fromBER(this.tbs).result}else t=this.encodeTBS();return new n.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,a.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==e.defaultValues("version")&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(t.revokedCertificates=Array.from(this.revokedCertificates,function(e){return e.toJSON()})),"crlExtensions"in this&&(t.crlExtensions=this.crlExtensions.toJSON()),t}},{key:"isCertificateRevoked",value:function(e){if(!1===this.issuer.isEqual(e.issuer))return!1;if("revokedCertificates"in this==0)return!1;var t,r=v(this.revokedCertificates);try{for(r.s();!(t=r.n()).done;)if(t.value.userCertificate.isEqual(e.serialNumber))return!0}catch(n){r.e(n)}finally{r.f()}return!1}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");var a,s=Promise.resolve(),o=(0,i.getEngine)();return s=(s=(s=(s=(s=s.then(function(){return o.subtle.getSignatureParameters(e,r)})).then(function(e){a=e.parameters,t.signature=e.signatureAlgorithm,t.signatureAlgorithm=e.signatureAlgorithm})).then(function(){t.tbs=t.encodeTBS().toBER(!1)})).then(function(){return o.subtle.signWithPrivateKey(t.tbs,e,a)})).then(function(e){t.signatureValue=new n.BitString({valueHex:e})})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=-1,a=(0,i.getEngine)();if("issuerCertificate"in t&&(n=t.issuerCertificate.subjectPublicKeyInfo,!1===this.issuer.isEqual(t.issuerCertificate.subject)))return Promise.resolve(!1);if("publicKeyInfo"in t&&(n=t.publicKeyInfo),"subjectPublicKey"in n==0)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var s,o=v(this.crlExtensions.extensions);try{for(o.s();!(s=o.n()).done;){var u=s.value;if(u.critical&&"parsedValue"in u==0)return Promise.resolve(!1)}}catch(l){o.e(l)}finally{o.f()}}return r=r.then(function(){return a.subtle.verifyWithPublicKey(e.tbs,e.signatureValue,n,e.signatureAlgorithm)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new s.default;case"issuer":return new o.default;case"thisUpdate":case"nextUpdate":return new u.default;case"revokedCertificates":return[];case"crlExtensions":return new c.default;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error("Invalid member name for CertificateRevocationList class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"CertificateList",value:[g(e),s.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=y},545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(35585)),s=l(r(64445)),o=l(r(73766)),u=l(r(99600));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.certificates=(0,a.getParametersValue)(t,"certificates",e.defaultValues("certificates")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["certificates"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificateSet");this.certificates=Array.from(r.result.certificates||[],function(e){var t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new i.default({schema:e});var r=new n.Sequence({value:e.valueBlock.value});switch(t){case 1:return 1===r.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new o.default({schema:r}):new s.default({schema:r});case 2:return new o.default({schema:r});case 3:return new u.default({schema:r})}return e})}},{key:"toSchema",value:function(){return new n.Set({value:Array.from(this.certificates,function(e){switch(!0){case e instanceof i.default:return e.toSchema();case e instanceof s.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof o.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof u.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e})})}},{key:"toJSON",value:function(){return{certificates:Array.from(this.certificates,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificates":return[];default:throw new Error("Invalid member name for Attribute class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Set({name:t.blockName||"",value:[new n.Repeated({name:t.certificates||"certificates",value:new n.Choice({value:[i.default.schema(),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any]}),new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new n.Sequence]}),new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:o.default.schema().valueBlock.value}),new n.Constructed({idBlock:{tagClass:3,tagNumber:3},value:u.default.schema().valueBlock.value})]})})]})}}]),e}();t.default=h},83804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.templateID=(0,a.getParametersValue)(t,"templateID",e.defaultValues("templateID")),"templateMajorVersion"in t&&(this.templateMajorVersion=(0,a.getParametersValue)(t,"templateMajorVersion",e.defaultValues("templateMajorVersion"))),"templateMinorVersion"in t&&(this.templateMinorVersion=(0,a.getParametersValue)(t,"templateMinorVersion",e.defaultValues("templateMinorVersion"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["templateID","templateMajorVersion","templateMinorVersion"]);var r=n.compareSchema(t,t,e.schema({names:{templateID:"templateID",templateMajorVersion:"templateMajorVersion",templateMinorVersion:"templateMinorVersion"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificateTemplate");this.templateID=r.result.templateID.valueBlock.toString(),"templateMajorVersion"in r.result&&(this.templateMajorVersion=r.result.templateMajorVersion.valueBlock.valueDec),"templateMinorVersion"in r.result&&(this.templateMinorVersion=r.result.templateMinorVersion.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];return e.push(new n.ObjectIdentifier({value:this.templateID})),"templateMajorVersion"in this&&e.push(new n.Integer({value:this.templateMajorVersion})),"templateMinorVersion"in this&&e.push(new n.Integer({value:this.templateMinorVersion})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={extnID:this.templateID};return"templateMajorVersion"in this&&(e.templateMajorVersion=this.templateMajorVersion),"templateMinorVersion"in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}],[{key:"defaultValues",value:function(e){switch(e){case"templateID":return"";case"templateMajorVersion":case"templateMinorVersion":return 0;default:throw new Error("Invalid member name for CertificateTemplate class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.templateID||""}),new n.Integer({name:t.templateMajorVersion||"",optional:!0}),new n.Integer({name:t.templateMinorVersion||"",optional:!0})]})}}]),e}();t.default=s},93108:function(e,t,r){"use strict";t.Z=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=c(r(20720)),o=c(r(2446)),u=c(r(4987)),l=c(r(68681));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new n.Integer({name:t.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),o.default.schema(t.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),s.default.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:l.default.schema(t.attributes||{})})]})]})}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.tbs=(0,a.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.subject=(0,a.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,a.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"attributes"in t&&(this.attributes=(0,a.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,a.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["CertificationRequestInfo","CertificationRequestInfo.version","CertificationRequestInfo.subject","CertificationRequestInfo.subjectPublicKeyInfo","CertificationRequestInfo.attributes","signatureAlgorithm","signatureValue"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificationRequest");this.tbs=r.result.CertificationRequestInfo.valueBeforeDecode,this.version=r.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new o.default({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new s.default({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result&&(this.attributes=Array.from(r.result["CertificationRequestInfo.attributes"],function(e){return new l.default({schema:e})})),this.signatureAlgorithm=new u.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var e=[new n.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toSchema",value:function(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===r){if(0===this.tbs.byteLength)return e.schema();t=n.fromBER(this.tbs).result}else t=this.encodeTBS();return new n.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var e={tbs:(0,a.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");var a,s=Promise.resolve(),o=(0,i.getEngine)();return s=(s=(s=(s=(s=s.then(function(){return o.subtle.getSignatureParameters(e,r)})).then(function(e){a=e.parameters,t.signatureAlgorithm=e.signatureAlgorithm})).then(function(){t.tbs=t.encodeTBS().toBER(!1)})).then(function(){return o.subtle.signWithPrivateKey(t.tbs,e,a)})).then(function(e){t.signatureValue=new n.BitString({valueHex:e})})}},{key:"verify",value:function(){return(0,i.getEngine)().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,i.getEngine)().getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new o.default;case"subjectPublicKeyInfo":return new s.default;case"attributes":return[];case"signatureAlgorithm":return new u.default;case"signatureValue":return new n.BitString;default:throw new Error("Invalid member name for CertificationRequest class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({value:[m(t.certificationRequestInfo||{}),new n.Sequence({name:t.signatureAlgorithm||"signatureAlgorithm",value:[new n.ObjectIdentifier,new n.Any({optional:!0})]}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.Z=v},60294:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.contentType=(0,a.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.content=(0,a.getParametersValue)(t,"content",e.defaultValues("content")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["contentType","content"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.content=r.result.content}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.contentType}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}},{key:"toJSON",value:function(){var e={contentType:this.contentType};return this.content instanceof n.Any||(e.content=this.content.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"content":return new n.Any;default:throw new Error("Invalid member name for ContentInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof n.Any;default:throw new Error("Invalid member name for ContentInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new n.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new n.ObjectIdentifier({name:t.contentType||"contentType"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.content||"content"})]})]})}}]),e}();t.default=s},48435:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(n(75530)),i=n(1971),s=n(97226),o=p(n(20720)),u=p(n(46721)),l=p(n(4987)),c=p(n(96427)),h=p(n(13272)),m=p(n(30033)),v=p(n(71045));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,r,n,a,i,s){var o,u,l=[];switch(r.toUpperCase()){case"SHA-1":o=20,u=64;break;case"SHA-256":o=32,u=64;break;case"SHA-384":o=48,u=128;break;case"SHA-512":o=64,u=128;break;default:throw new Error("Unsupported hashing algorithm")}for(var c=new Uint8Array(a),f=new ArrayBuffer(2*a.byteLength+2),h=new Uint8Array(f),d=0;d<c.length;d++)h[2*d]=0,h[2*d+1]=c[d];h[h.length-2]=0,h[h.length-1]=0,a=f.slice(0);for(var m=new ArrayBuffer(u),v=new Uint8Array(m),p=0;p<m.byteLength;p++)v[p]=3;for(var g=i.byteLength,y=u*Math.ceil(g/u),b=new ArrayBuffer(y),w=new Uint8Array(b),k=new Uint8Array(i),S=0;S<y;S++)w[S]=k[S%g];for(var P=a.byteLength,A=u*Math.ceil(P/u),C=new ArrayBuffer(A),I=new Uint8Array(C),O=new Uint8Array(a),B=0;B<A;B++)I[B]=O[B%P];var _=new ArrayBuffer(b.byteLength+C.byteLength),j=new Uint8Array(_);j.set(w),j.set(I,w.length);for(var x=Math.ceil((n>>3)/o),E=Promise.resolve(_),N=0;N<=x;N++){E=E.then(function(e){var t=new ArrayBuffer(m.byteLength+e.byteLength),r=new Uint8Array(t);return r.set(v),r.set(j,v.length),t});for(var V=0;V<s;V++)E=E.then(function(t){return e.digest({name:r},new Uint8Array(t))});E=E.then(function(e){for(var r=new ArrayBuffer(u),n=new Uint8Array(r),a=0;a<r.byteLength;a++)n[a]=e[a%e.length];for(var i=Math.ceil(g/u)+Math.ceil(P/u),s=[],o=0,c=u,f=0;f<i;f++){var h=Array.from(new Uint8Array(_.slice(o,o+c)));(o+=u)+u>_.byteLength&&(c=_.byteLength-o);for(var d=511,m=r.byteLength-1;m>=0;m--)d>>=8,d+=n[m]+h[m],h[m]=255&d;s.push.apply(s,t(h))}return _=new ArrayBuffer(s.length),(j=new Uint8Array(_)).set(s),l.push.apply(l,t(new Uint8Array(e))),_})}return E=E.then(function(){var e=new ArrayBuffer(n>>3);return new Uint8Array(e).set(new Uint8Array(l).slice(0,n>>3)),e})}r.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.crypto=(0,i.getParametersValue)(t,"crypto",{}),this.subtle=(0,i.getParametersValue)(t,"subtle",{}),this.name=(0,i.getParametersValue)(t,"name","")}return d(e,[{key:"importKey",value:function(e,t,r,n,s){var l=this,c={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,n,s);case"spki":var f=a.fromBER(t);if(-1===f.offset)return Promise.reject("Incorrect keyData");var h=new o.default;try{h.fromSchema(f.result)}catch(J){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="PS1";break;case"SHA-256":c.alg="PS256";break;case"SHA-384":c.alg="PS384";break;case"SHA-512":c.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":if(s=["verify"],c.kty="RSA",c.ext=n,c.key_ops=s,"1.2.840.113549.1.1.1"!==h.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: ".concat(h.algorithm.algorithmId));if("alg"in c==0)switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="RS1";break;case"SHA-256":c.alg="RS256";break;case"SHA-384":c.alg="RS384";break;case"SHA-512":c.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var d=h.toJSON(),m=0,v=Object.keys(d);m<v.length;m++){var p=v[m];c[p]=d[p]}break;case"ECDSA":s=["verify"];case"ECDH":if(c={kty:"EC",ext:n,key_ops:s},"1.2.840.10045.2.1"!==h.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: ".concat(h.algorithm.algorithmId));for(var g=h.toJSON(),y=0,b=Object.keys(g);y<b.length;y++){var w=b[y];c[w]=g[w]}break;case"RSA-OAEP":if(c.kty="RSA",c.ext=n,c.key_ops=s,"safari"===this.name.toLowerCase())c.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="RSA-OAEP";break;case"SHA-256":c.alg="RSA-OAEP-256";break;case"SHA-384":c.alg="RSA-OAEP-384";break;case"SHA-512":c.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var k=h.toJSON(),S=0,P=Object.keys(k);S<P.length;S++){var A=P[S];c[A]=k[A]}break;case"RSAES-PKCS1-V1_5":c.kty="RSA",c.ext=n,c.key_ops=s,c.alg="PS1";for(var C=h.toJSON(),I=0,O=Object.keys(C);I<O.length;I++){var B=O[I];c[B]=C[B]}break;default:return Promise.reject("Incorrect algorithm name: ".concat(r.name.toUpperCase()))}break;case"pkcs8":var _=new u.default,j=a.fromBER(t);if(-1===j.offset)return Promise.reject("Incorrect keyData");try{_.fromSchema(j.result)}catch(J){return Promise.reject("Incorrect keyData")}if("parsedKey"in _==0)return Promise.reject("Incorrect keyData");switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="PS1";break;case"SHA-256":c.alg="PS256";break;case"SHA-384":c.alg="PS384";break;case"SHA-512":c.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":if(s=["sign"],c.kty="RSA",c.ext=n,c.key_ops=s,"1.2.840.113549.1.1.1"!==_.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: ".concat(_.privateKeyAlgorithm.algorithmId));if("alg"in c==0)switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="RS1";break;case"SHA-256":c.alg="RS256";break;case"SHA-384":c.alg="RS384";break;case"SHA-512":c.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var x=_.toJSON(),E=0,N=Object.keys(x);E<N.length;E++){var V=N[E];c[V]=x[V]}break;case"ECDSA":s=["sign"];case"ECDH":if(c={kty:"EC",ext:n,key_ops:s},"1.2.840.10045.2.1"!==_.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: ".concat(_.privateKeyAlgorithm.algorithmId));for(var D=_.toJSON(),M=0,R=Object.keys(D);M<R.length;M++){var T=R[M];c[T]=D[T]}break;case"RSA-OAEP":if(c.kty="RSA",c.ext=n,c.key_ops=s,"safari"===this.name.toLowerCase())c.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":c.alg="RSA-OAEP";break;case"SHA-256":c.alg="RSA-OAEP-256";break;case"SHA-384":c.alg="RSA-OAEP-384";break;case"SHA-512":c.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var U=_.toJSON(),L=0,H=Object.keys(U);L<H.length;L++){var K=H[L];c[K]=U[K]}break;case"RSAES-PKCS1-V1_5":s=["decrypt"],c.kty="RSA",c.ext=n,c.key_ops=s,c.alg="PS1";for(var F=_.toJSON(),W=0,q=Object.keys(F);W<q.length;W++){var z=q[W];c[z]=F[z]}break;default:return Promise.reject("Incorrect algorithm name: ".concat(r.name.toUpperCase()))}break;case"jwk":c=t;break;default:return Promise.reject("Incorrect format: ".concat(e))}return"safari"===this.name.toLowerCase()?Promise.resolve().then(function(){return l.subtle.importKey("jwk",(0,i.stringToArrayBuffer)(JSON.stringify(c)),r,n,s)}).then(function(e){return e},function(){return l.subtle.importKey("jwk",c,r,n,s)}):this.subtle.importKey("jwk",c,r,n,s)}},{key:"exportKey",value:function(e,t){var r=this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return e instanceof ArrayBuffer?JSON.parse((0,i.arrayBufferToString)(e)):e})),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new o.default;try{t.fromJSON(e)}catch(r){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new u.default;try{t.fromJSON(e)}catch(r){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: ".concat(e))}return r}},{key:"convert",value:function(e,t,r,n,a,i){var s=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return s.importKey("raw",r,n,a,i)}).then(function(e){return s.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return s.importKey("raw",r,n,a,i)}).then(function(e){return s.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return s.importKey("raw",r,n,a,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("spki",r,n,a,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return s.importKey("spki",r,n,a,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("pkcs8",r,n,a,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return s.importKey("pkcs8",r,n,a,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("jwk",r,n,a,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return s.importKey("jwk",r,n,a,i)}).then(function(e){return s.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return s.importKey("jwk",r,n,a,i)}).then(function(e){return s.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: ".concat(t))}default:return Promise.reject("Incorrect inputFormat: ".concat(e))}}},{key:"encrypt",value:function(){var e;return(e=this.subtle).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.subtle).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.subtle).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.subtle).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.subtle).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.subtle).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.subtle).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.subtle).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.subtle).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.subtle).unwrapKey.apply(e,arguments)}},{key:"getRandomValues",value:function(e){if("getRandomValues"in this.crypto==0)throw new Error("No support for getRandomValues");return this.crypto.getRandomValues(e)}},{key:"getAlgorithmByOID",value:function(e){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}},{key:"getOIDByAlgorithm",value:function(e){var t="";switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":t="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}},{key:"getAlgorithmParameters",value:function(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}},{key:"getHashAlgorithm",value:function(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new h.default({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in n==0)return"";t=n.name}else t="SHA-1"}catch(a){}}return t}},{key:"encryptEncryptedContentInfo",value:function(e){var t=this;if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==0)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');if("contentType"in e==0)return Promise.reject('Absent mandatory parameter "contentType"');var r=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var n=this.getOIDByAlgorithm({name:"PBKDF2"});if(""===n)return Promise.reject("Can not find OID for PBKDF2");var i=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===i)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '.concat(e.hmacHashAlgorithm));var s=Promise.resolve(),o=new ArrayBuffer(16),u=new Uint8Array(o);this.getRandomValues(u);var f=new ArrayBuffer(64),h=new Uint8Array(f);this.getRandomValues(h);var d=new Uint8Array(e.contentToEncrypt),p=new m.default({salt:new a.OctetString({valueHex:f}),iterationCount:e.iterationCount,prf:new l.default({algorithmId:i,algorithmParams:new a.Null})});return s=(s=(s=(s=s.then(function(){var r=new Uint8Array(e.password);return t.importKey("raw",r,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(r){return t.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:h,iterations:e.iterationCount},r,e.contentEncryptionAlgorithm,!1,["encrypt"])},function(e){return Promise.reject(e)})).then(function(r){return t.encrypt({name:e.contentEncryptionAlgorithm.name,iv:u},r,d)},function(e){return Promise.reject(e)})).then(function(t){var i=new v.default({keyDerivationFunc:new l.default({algorithmId:n,algorithmParams:p.toSchema()}),encryptionScheme:new l.default({algorithmId:r,algorithmParams:new a.OctetString({valueHex:o})})});return new c.default({contentType:e.contentType,contentEncryptionAlgorithm:new l.default({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:i.toSchema()}),encryptedContent:new a.OctetString({valueHex:t})})},function(e){return Promise.reject(e)})}},{key:"decryptEncryptedContentInfo",value:function(e){var t=this;if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("encryptedContentInfo"in e==0)return Promise.reject('Absent mandatory parameter "encryptedContentInfo"');if("1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '.concat(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));var r,n,a=Promise.resolve();try{r=new v.default({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(h){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}try{n=new m.default({schema:r.keyDerivationFunc.algorithmParams})}catch(h){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var s=this.getAlgorithmByOID(r.encryptionScheme.algorithmId);if("name"in s==0)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '.concat(r.encryptionScheme.algorithmId));var o=new Uint8Array(r.encryptionScheme.algorithmParams.valueBlock.valueHex),u=new Uint8Array(n.salt.valueBlock.valueHex),l=n.iterationCount,c="SHA-1";if("prf"in n){var f=this.getAlgorithmByOID(n.prf.algorithmId);if("name"in f==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");c=f.hash.name}return a=(a=(a=a.then(function(){return t.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(e){return t.deriveKey({name:"PBKDF2",hash:{name:c},salt:u,iterations:l},e,s,!1,["decrypt"])},function(e){return Promise.reject(e)})).then(function(r){var n=new ArrayBuffer(0);if(!1===e.encryptedContentInfo.encryptedContent.idBlock.isConstructed)n=e.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var a,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return y(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,void 0):void 0}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(e.encryptedContentInfo.encryptedContent.valueBlock.value);try{for(u.s();!(a=u.n()).done;)n=(0,i.utilConcatBuf)(n,a.value.valueBlock.valueHex)}catch(l){u.e(l)}finally{u.f()}}return t.decrypt({name:s.name,iv:o},r,n)},function(e){return Promise.reject(e)})}},{key:"stampDataWithPassword",value:function(e){var t,r=this;if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToStamp"in e==0)return Promise.reject('Absent mandatory parameter "contentToStamp"');switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}var n=Promise.resolve(),a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return n=(n=(n=n.then(function(){return b(r,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)})).then(function(e){return r.importKey("raw",new Uint8Array(e),a,!1,["sign"])})).then(function(t){return r.sign(a,t,new Uint8Array(e.contentToStamp))},function(e){return Promise.reject(e)})}},{key:"verifyDataStampedWithPassword",value:function(e){var t,r=this;if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToVerify"in e==0)return Promise.reject('Absent mandatory parameter "contentToVerify"');if("signatureToVerify"in e==0)return Promise.reject('Absent mandatory parameter "signatureToVerify"');switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}var n=Promise.resolve(),a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return n=(n=(n=n.then(function(){return b(r,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)})).then(function(e){return r.importKey("raw",new Uint8Array(e),a,!1,["verify"])})).then(function(t){return r.verify(a,t,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))},function(e){return Promise.reject(e)})}},{key:"getSignatureParameters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(""===this.getOIDByAlgorithm({name:t}))return Promise.reject("Unsupported hash algorithm: ".concat(t));var r=new l.default,n=this.getAlgorithmParameters(e.algorithm.name,"sign");switch(n.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(n.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":n.algorithm.saltLength=32;break;case"SHA-384":n.algorithm.saltLength=48;break;case"SHA-512":n.algorithm.saltLength=64}var i={};if("SHA-1"!==t.toUpperCase()){var s=this.getOIDByAlgorithm({name:t});if(""===s)return Promise.reject("Unsupported hash algorithm: ".concat(t));i.hashAlgorithm=new l.default({algorithmId:s,algorithmParams:new a.Null}),i.maskGenAlgorithm=new l.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==n.algorithm.saltLength&&(i.saltLength=n.algorithm.saltLength);var o=new h.default(i);r.algorithmId="1.2.840.113549.1.1.10",r.algorithmParams=o.toSchema();break;default:return Promise.reject("Unsupported signature algorithm: ".concat(e.algorithm.name))}return Promise.resolve().then(function(){return{signatureAlgorithm:r,parameters:n}})}},{key:"signWithPrivateKey",value:function(e,t,r){return this.sign(r.algorithm,t,new Uint8Array(e)).then(function(e){return"ECDSA"===r.algorithm.name&&(e=(0,s.createCMSECDSASignature)(e)),e},function(e){return Promise.reject("Signing error: ".concat(e))})}},{key:"fillPublicKeyParameters",value:function(e,t){var r,n={},a=this.getHashAlgorithm(t);if(""===a)return Promise.reject("Unsupported signature algorithm: ".concat(t.algorithmId));r="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;var i=this.getAlgorithmByOID(r);if("name"in i==="")return Promise.reject("Unsupported public key algorithm: ".concat(t.algorithmId));if(n.algorithm=this.getAlgorithmParameters(i.name,"importkey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=a),"ECDSA"===i.name){var s=!1;if("algorithmParams"in e.algorithm==1&&"idBlock"in e.algorithm.algorithmParams&&1===e.algorithm.algorithmParams.idBlock.tagClass&&6===e.algorithm.algorithmParams.idBlock.tagNumber&&(s=!0),!1===s)return Promise.reject("Incorrect type for ECDSA public key parameters");var o=this.getAlgorithmByOID(e.algorithm.algorithmParams.valueBlock.toString());if("name"in o==0)return Promise.reject("Unsupported named curve algorithm: ".concat(e.algorithm.algorithmParams.valueBlock.toString()));n.algorithm.algorithm.namedCurve=o.name}return n}},{key:"getPublicKey",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=this.fillPublicKeyParameters(e,t));var n=e.toSchema().toBER(!1),a=new Uint8Array(n);return this.importKey("spki",a,r.algorithm.algorithm,!0,r.algorithm.usages)}},{key:"verifyWithPublicKey",value:function(e,t,r,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=Promise.resolve();if(null===o){if(""===(o=this.getHashAlgorithm(n)))return Promise.reject("Unsupported signature algorithm: ".concat(n.algorithmId));u=u.then(function(){return i.getPublicKey(r,n)})}else{var l,c={};l="1.2.840.113549.1.1.10"===n.algorithmId?n.algorithmId:r.algorithm.algorithmId;var f=this.getAlgorithmByOID(l);if("name"in f==="")return Promise.reject("Unsupported public key algorithm: ".concat(n.algorithmId));if(c.algorithm=this.getAlgorithmParameters(f.name,"importkey"),"hash"in c.algorithm.algorithm&&(c.algorithm.algorithm.hash.name=o),"ECDSA"===f.name){var d=!1;if("algorithmParams"in r.algorithm==1&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(d=!0),!1===d)return Promise.reject("Incorrect type for ECDSA public key parameters");var m=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString());if("name"in m==0)return Promise.reject("Unsupported named curve algorithm: ".concat(r.algorithm.algorithmParams.valueBlock.toString()));c.algorithm.algorithm.namedCurve=m.name}u=u.then(function(){return i.getPublicKey(r,null,c)})}return u=u.then(function(r){var u=i.getAlgorithmParameters(r.algorithm.name,"verify");"hash"in u.algorithm&&(u.algorithm.hash.name=o);var l=t.valueBlock.valueHex;if("ECDSA"===r.algorithm.name){var c=a.fromBER(l);l=(0,s.createECDSASignatureFromCMS)(c.result)}if("RSA-PSS"===r.algorithm.name){var f;try{f=new h.default({schema:n.algorithmParams})}catch(v){return Promise.reject(v)}u.algorithm.saltLength="saltLength"in f?f.saltLength:20;var d="SHA-1";if("hashAlgorithm"in f){var m=i.getAlgorithmByOID(f.hashAlgorithm.algorithmId);if("name"in m==0)return Promise.reject("Unrecognized hash algorithm: ".concat(f.hashAlgorithm.algorithmId));d=m.name}u.algorithm.hash.name=d}return i.verify(u.algorithm,r,new Uint8Array(l),new Uint8Array(e))})}}]),e}()},60571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.digestAlgorithm=(0,i.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.digest=(0,i.getParametersValue)(t,"digest",e.defaultValues("digest")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["digestAlgorithm","digest"]);var r=a.compareSchema(t,t,e.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new s.default({schema:r.result.digestAlgorithm}),this.digest=r.result.digest}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}},{key:"toJSON",value:function(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"digestAlgorithm":return new s.default;case"digest":return new a.OctetString;default:throw new Error("Invalid member name for DigestInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"digestAlgorithm":return s.default.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==0;case"digest":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for DigestInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new a.OctetString({name:t.digest||"digest"})]})}}]),e}();t.default=u},70300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(29260)),s=o(r(2446));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,a.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=(0,a.getParametersValue)(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=(0,a.getParametersValue)(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["distributionPoint","distributionPointNames","reasons","cRLIssuer","cRLIssuerNames"]);var r=n.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new i.default({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new s.default({schema:new n.Sequence({value:r.result.distributionPoint.valueBlock.value})}))),"reasons"in r.result&&(this.reasons=new n.BitString({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new i.default({schema:e})}))}},{key:"toSchema",value:function(){var e,t=[];"distributionPoint"in this&&(e=new n.Constructed(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),t.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[e]})));return"reasons"in this&&t.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&t.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new n.Sequence({value:t})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,function(e){return e.toJSON()}):this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new n.BitString;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Choice({value:[new n.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.distributionPointNames||"",value:i.default.schema()})]}),new n.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})]}),new n.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new n.Repeated({name:t.cRLIssuerNames||"",value:i.default.schema()})]})]})}}]),e}();t.default=l},58057:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.keyInfo=(0,i.getParametersValue)(t,"keyInfo",e.defaultValues("keyInfo")),"entityUInfo"in t&&(this.entityUInfo=(0,i.getParametersValue)(t,"entityUInfo",e.defaultValues("entityUInfo"))),this.suppPubInfo=(0,i.getParametersValue)(t,"suppPubInfo",e.defaultValues("suppPubInfo")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["keyInfo","entityUInfo","suppPubInfo"]);var r=a.compareSchema(t,t,e.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ECCCMSSharedInfo");this.keyInfo=new s.default({schema:r.result.keyInfo}),"entityUInfo"in r.result&&(this.entityUInfo=r.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=r.result.suppPubInfo.valueBlock.value[0]}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyInfo":return new s.default;case"entityUInfo":case"suppPubInfo":return new a.OctetString;default:throw new Error("Invalid member name for ECCCMSSharedInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyInfo":case"entityUInfo":case"suppPubInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ECCCMSSharedInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.keyInfo||{}),new a.Constructed({name:t.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new a.OctetString]}),new a.Constructed({name:t.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new a.OctetString]})]})}}]),e}();t.default=u},54363:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){f(this,e)}return d(e,null,[{key:"register",value:function(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}},{key:"find",value:function(e){return this.namedCurves[e.toLowerCase()]||null}}]),e}();t.default=r,r.namedCurves={},r.register("P-256","1.2.840.10045.3.1.7",32),r.register("P-384","1.3.132.0.34",48),r.register("P-521","1.3.132.0.35",66),r.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),r.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),r.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)},43818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(15962))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,i.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKey=(0,i.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=(0,i.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=(0,i.getParametersValue)(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["version","privateKey","namedCurve","publicKey"]);var r=a.compareSchema(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new s.default(n)}}},{key:"toSchema",value:function(){var e=[new a.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new a.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new a.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==0||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:(0,i.toBase64)((0,i.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0,!1)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');var r=(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.d,!0));if(r.byteLength<t){var n=new ArrayBuffer(t),o=new Uint8Array(n),u=new Uint8Array(r);o.set(u,1),this.privateKey=new a.OctetString({valueHex:n})}else this.privateKey=new a.OctetString({valueHex:r.slice(0,t)});"x"in e&&"y"in e&&(this.publicKey=new s.default({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new a.OctetString;case"namedCurve":return"";case"publicKey":return new s.default;default:throw new Error("Invalid member name for ECCPrivateKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return s.default.compareWithDefault("namedCurve",r.namedCurve)&&s.default.compareWithDefault("x",r.x)&&s.default.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Integer({name:t.version||""}),new a.OctetString({name:t.privateKey||""}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new a.ObjectIdentifier({name:t.namedCurve||""})]}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new a.BitString({name:t.publicKey||""})]})]})}}]),e}();t.default=u},15962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(54363))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.x=(0,i.getParametersValue)(t,"x",e.defaultValues("x")),this.y=(0,i.getParametersValue)(t,"y",e.defaultValues("y")),this.namedCurve=(0,i.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==0)throw new Error("Object's schema was not verified against input data for ECPublicKey");if(4!==new Uint8Array(e)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=s.default.find(this.namedCurve);if(!t)throw new Error("Incorrect curve OID: ".concat(this.namedCurve));var r=t.size;if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}},{key:"toSchema",value:function(){return new a.RawData({data:(0,i.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e=s.default.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:(0,i.toBase64)((0,i.arrayBufferToString)(this.x),!0,!0,!1),y:(0,i.toBase64)((0,i.arrayBufferToString)(this.y),!0,!0,!1)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');var r=s.default.find(e.crv);if(r&&(this.namedCurve=r.id,t=r.size),!("x"in e))throw new Error('Absent mandatory parameter "x"');var n=(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.x,!0));if(n.byteLength<t){this.x=new ArrayBuffer(t);var a=new Uint8Array(this.x),o=new Uint8Array(n);a.set(o,1)}else this.x=n.slice(0,t);if(!("y"in e))throw new Error('Absent mandatory parameter "y"');var u=(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.y,!0));if(u.byteLength<t){this.y=new ArrayBuffer(t);var l=new Uint8Array(this.y),c=new Uint8Array(u);l.set(c,1)}else this.y=u.slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return(0,i.isEqualBuffer)(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: ".concat(t))}}},{key:"schema",value:function(){return new a.RawData}}]),e}();t.default=u},63788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(f(this,e),this.eContentType=(0,a.getParametersValue)(t,"eContentType",e.defaultValues("eContentType")),"eContent"in t&&(this.eContent=(0,a.getParametersValue)(t,"eContent",e.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){for(var r=new n.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),i=0,s=this.eContent.valueBlock.valueHex.byteLength;s>0;){for(var o=new Uint8Array(this.eContent.valueBlock.valueHex,i,i+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-i:65536),u=new ArrayBuffer(o.length),l=new Uint8Array(u),c=0;c<l.length;c++)l[c]=o[c];r.valueBlock.value.push(new n.OctetString({valueHex:u})),s-=o.length,i+=o.length}this.eContent=r}"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["eContentType","eContent"]);var r=n.compareSchema(t,t,e.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=r.result.eContentType.valueBlock.toString(),"eContent"in r.result&&(this.eContent=r.result.eContent)}},{key:"toSchema",value:function(){var t=[];return t.push(new n.ObjectIdentifier({value:this.eContentType})),"eContent"in this&&!1===e.compareWithDefault("eContent",this.eContent)&&t.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new n.Sequence({value:t})}},{key:"toJSON",value:function(){var t={eContentType:this.eContentType};return"eContent"in this&&!1===e.compareWithDefault("eContent",this.eContent)&&(t.eContent=this.eContent.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"eContentType":return"";case"eContent":return new n.OctetString;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"eContentType":return""===r;case"eContent":return 1===r.idBlock.tagClass&&4===r.idBlock.tagNumber&&r.isEqual(e.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.eContentType||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.eContent||""})]})]})}}]),e}();t.default=s},96427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(f(this,e),this.contentType=(0,i.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=(0,i.getParametersValue)(t,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in t&&(this.encryptedContent=t.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed)){for(var r=new a.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,s=this.encryptedContent.valueBlock.valueHex.byteLength;s>0;){for(var o=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),u=new ArrayBuffer(o.length),l=new Uint8Array(u),c=0;c<l.length;c++)l[c]=o[c];r.valueBlock.value.push(new a.OctetString({valueHex:u})),s-=o.length,n+=o.length}this.encryptedContent=r}"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["contentType","contentEncryptionAlgorithm","encryptedContent"]);var r=a.compareSchema(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new s.default({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new a.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new a.Sequence({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new s.default;case"encryptedContent":return new a.OctetString;default:throw new Error("Invalid member name for EncryptedContentInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.ObjectIdentifier({name:t.contentType||""}),s.default.schema(t.contentEncryptionAlgorithm||{}),new a.Choice({value:[new a.Constructed({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new a.Repeated({value:new a.OctetString})]}),new a.Primitive({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}();t.default=u},38570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=u(r(96427)),o=u(r(68681));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.encryptedContentInfo=(0,a.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,a.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","encryptedContentInfo","unprotectedAttrs"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncryptedData");this.version=r.result.version.valueBlock.valueDec,this.encryptedContentInfo=new s.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new o.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new n.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"encrypt",value:function(e){var t=this;if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');var r=(0,i.getEngine)();return void 0===r?Promise.reject("Unable to initialize cryptographic engine"):(e.contentType="1.2.840.113549.1.7.1","encryptEncryptedContentInfo"in r.subtle?r.subtle.encryptEncryptedContentInfo(e).then(function(e){t.encryptedContentInfo=e}):Promise.reject('No support for "encryptEncryptedContentInfo" in current crypto engine '.concat(r.name)))}},{key:"decrypt",value:function(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');var t=(0,i.getEngine)();return void 0===t?Promise.reject("Unable to initialize cryptographic engine"):(e.encryptedContentInfo=this.encryptedContentInfo,"decryptEncryptedContentInfo"in t.subtle?t.subtle.decryptEncryptedContentInfo(e):Promise.reject('No support for "decryptEncryptedContentInfo" in current crypto engine '.concat(t.name)))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new s.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EncryptedData class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return s.default.compareWithDefault("contentType",t.contentType)&&s.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&s.default.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error("Invalid member name for EncryptedData class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),s.default.schema(t.encryptedContentInfo||{}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.unprotectedAttrs||"",value:o.default.schema()})]})]})}}]),e}();t.default=c},78544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=B(r(5771)),o=B(r(16475)),u=B(r(96427)),l=B(r(68681)),c=B(r(4987)),h=B(r(56701)),m=B(r(20332)),v=B(r(35529)),p=B(r(35717)),g=B(r(38847)),y=B(r(70785)),b=B(r(52857)),w=B(r(2428)),k=B(r(40590)),S=B(r(87979)),P=B(r(30033)),A=B(r(60242)),C=B(r(58057)),I=B(r(75815)),O=B(r(35344));function B(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,a)}function E(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){x(i,n,a,s,o,"next",e)}function o(e){x(i,n,a,s,o,"throw",e)}s(void 0)})}}var N={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},V={"P-256":256,"P-384":384,"P-521":528},D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),"originatorInfo"in t&&(this.originatorInfo=(0,a.getParametersValue)(t,"originatorInfo",e.defaultValues("originatorInfo"))),this.recipientInfos=(0,a.getParametersValue)(t,"recipientInfos",e.defaultValues("recipientInfos")),this.encryptedContentInfo=(0,a.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,a.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","originatorInfo","recipientInfos","encryptedContentInfo","unprotectedAttrs"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EnvelopedData");this.version=r.result.version.valueBlock.valueDec,"originatorInfo"in r.result&&(this.originatorInfo=new s.default({schema:new n.Sequence({value:r.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(r.result.recipientInfos,function(e){return new o.default({schema:e})}),this.encryptedContentInfo=new u.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new l.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new n.Integer({value:this.version})),"originatorInfo"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new n.Set({value:Array.from(this.recipientInfos,function(e){return e.toSchema()})})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,function(e){return e.toJSON()}),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"addRecipientByCertificate",value:function(e,t,r){var a=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},N,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))r=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error("Unknown type of certificate's public key: ".concat(e.subjectPublicKeyInfo.algorithm.algorithmId));r=2}switch(r){case 1:var s,u;if(!0===a.useOAEP){if(""===(s=(0,i.getOIDByAlgorithm)({name:"RSA-OAEP"})))throw new Error("Can not find OID for RSA-OAEP");var l=(0,i.getOIDByAlgorithm)({name:a.oaepHashAlgorithm});if(""===l)throw new Error("Unknown OAEP hash algorithm: ".concat(a.oaepHashAlgorithm));var f=new c.default({algorithmId:l,algorithmParams:new n.Null});u=new h.default({hashAlgorithm:f,maskGenAlgorithm:new c.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:f.toSchema()})}).toSchema()}else{if(""===(s=(0,i.getOIDByAlgorithm)({name:"RSAES-PKCS1-v1_5"})))throw new Error("Can not find OID for RSAES-PKCS1-v1_5");u=new n.Null}var d=new m.default({version:0,rid:new v.default({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new c.default({algorithmId:s,algorithmParams:u}),recipientCertificate:e});this.recipientInfos.push(new o.default({variant:1,value:d}));break;case 2:var p=new y.default({variant:1,value:new v.default({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(p,a,{recipientCertificate:e});break;default:throw new Error('Unknown "variant" value: '.concat(r))}return!0}},{key:"addRecipientByPreDefinedData",value:function(e,t,r){var a=t||{};if(e instanceof ArrayBuffer==0)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in a==0){var s=new ArrayBuffer(16),u=new Uint8Array(s);(0,i.getRandomValues)(u),a.keyIdentifier=s}switch("hmacHashAlgorithm"in a==0&&(a.hmacHashAlgorithm="SHA-512"),"iterationCount"in a==0&&(a.iterationCount=2048),"keyEncryptionAlgorithm"in a==0&&(a.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in a==0&&(a.keyEncryptionAlgorithmParams=new n.Null),r){case 1:var l=(0,i.getOIDByAlgorithm)(a.keyEncryptionAlgorithm);if(""===l)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var f=new k.default({version:4,kekid:new S.default({keyIdentifier:new n.OctetString({valueHex:a.keyIdentifier})}),keyEncryptionAlgorithm:new c.default({algorithmId:l,algorithmParams:a.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new o.default({variant:3,value:f}));break;case 2:var h=(0,i.getOIDByAlgorithm)({name:"PBKDF2"});if(""===h)throw new Error("Can not find OID for PBKDF2");var d=new ArrayBuffer(64),m=new Uint8Array(d);(0,i.getRandomValues)(m);var v=(0,i.getOIDByAlgorithm)({name:"HMAC",hash:{name:a.hmacHashAlgorithm}});if(""===v)throw new Error('Incorrect value for "hmacHashAlgorithm": '.concat(a.hmacHashAlgorithm));var p=new P.default({salt:new n.OctetString({valueHex:d}),iterationCount:a.iterationCount,prf:new c.default({algorithmId:v,algorithmParams:new n.Null})}),g=(0,i.getOIDByAlgorithm)(a.keyEncryptionAlgorithm);if(""===g)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var y=new A.default({version:0,keyDerivationAlgorithm:new c.default({algorithmId:h,algorithmParams:p.toSchema()}),keyEncryptionAlgorithm:new c.default({algorithmId:g,algorithmParams:a.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new o.default({variant:4,value:y}));break;default:throw new Error('Unknown value for "variant": '.concat(r))}}},{key:"addRecipientByKeyIdentifier",value:function(e,t,r){var a=Object.assign({},N,r||{}),i=new y.default({variant:2,value:new p.default({subjectKeyIdentifier:new n.OctetString({valueHex:t})})});this._addKeyAgreeRecipientInfo(i,a,{recipientPublicKey:e})}},{key:"_addKeyAgreeRecipientInfo",value:function(e,t,r){var a=new g.default({rid:e}),s=(0,i.getOIDByAlgorithm)({name:"AES-KW",length:t.kekEncryptionLength});if(""===s)throw new Error("Unknown length for key encryption algorithm: ".concat(t.kekEncryptionLength));var u=new c.default({algorithmId:s}),l=(0,i.getOIDByAlgorithm)({name:"ECDH",kdf:t.kdfAlgorithm});if(""===l)throw new Error("Unknown KDF algorithm: ".concat(t.kdfAlgorithm));var f=new ArrayBuffer(64),h=new Uint8Array(f);(0,i.getRandomValues)(h);var d={version:3,ukm:new n.OctetString({valueHex:f}),keyEncryptionAlgorithm:new c.default({algorithmId:l,algorithmParams:u.toSchema()}),recipientEncryptedKeys:new w.default({encryptedKeys:[a]})},m=new b.default(Object.assign(d,r));this.recipientInfos.push(new o.default({variant:2,value:m}))}},{key:"encrypt",value:function(e,t){var r=this,a=Promise.resolve(),s=new ArrayBuffer(16),o=new Uint8Array(s);(0,i.getRandomValues)(o);var l,f,d,m=new Uint8Array(t),v=[],p=this,g=(0,i.getOIDByAlgorithm)(e);if(""===g)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var y=(0,i.getCrypto)();if(void 0===y)return Promise.reject("Unable to create WebCrypto object");function b(e){var t,r,a,s,o,u,f=Promise.resolve(),h=p.recipientInfos[e];return f=(f=(f=(f=(f=(f=(f=(f=(f=f.then(function(){if(h.value.recipientPublicKey)return s=h.value.recipientPublicKey.algorithm.namedCurve,h.value.recipientPublicKey;var t=h.value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject('Incorrect "recipientCertificate" for index '.concat(e));switch(t.valueBlock.toString()){case"1.2.840.10045.3.1.7":s="P-256";break;case"1.3.132.0.34":s="P-384";break;case"1.3.132.0.35":s="P-521";break;default:return Promise.reject("Incorrect curve OID for index ".concat(e))}return h.value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:s},usages:[]}})},function(e){return Promise.reject(e)})).then(function(e){return a=e,o=V[s],y.generateKey({name:"ECDH",namedCurve:s},!0,["deriveBits"])},function(e){return Promise.reject(e)})).then(function(e){return t=e.publicKey,r=e.privateKey,y.exportKey("spki",t)},function(e){return Promise.reject(e)})).then(function(e){u=e},function(e){return Promise.reject(e)})).then(function(){return y.deriveBits({name:"ECDH",public:a},r,o)},function(e){return Promise.reject(e)})).then(function(e){var t=new c.default({schema:h.value.keyEncryptionAlgorithm.algorithmParams}),r=(0,i.getAlgorithmByOID)(t.algorithmId);if("name"in r==0)return Promise.reject("Incorrect OID for key encryption algorithm: ".concat(t.algorithmId));for(var a=r.length,s=new ArrayBuffer(4),o=new Uint8Array(s),u=3;u>=0;u--)o[u]=a,a>>=8;var l=new C.default({keyInfo:new c.default({algorithmId:t.algorithmId}),entityUInfo:h.value.ukm,suppPubInfo:new n.OctetString({valueHex:s})}).toSchema().toBER(!1),f=(0,i.getAlgorithmByOID)(h.value.keyEncryptionAlgorithm.algorithmId);return"name"in f==0?Promise.reject("Incorrect OID for key encryption algorithm: ".concat(h.value.keyEncryptionAlgorithm.algorithmId)):(0,i.kdf)(f.kdf,e,r.length,l)},function(e){return Promise.reject(e)})).then(function(e){return y.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"])},function(e){return Promise.reject(e)})).then(function(e){return y.wrapKey("raw",l,e,{name:"AES-KW"})},function(e){return Promise.reject(e)})).then(function(e){var t=n.fromBER(u),a=new I.default;return a.variant=3,a.value=new O.default({schema:t.result}),h.value.originator=a,h.value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new n.OctetString({valueHex:e}),{ecdhPrivateKey:r}},function(e){return Promise.reject(e)})}function w(e){return k.apply(this,arguments)}function k(){return(k=E(regeneratorRuntime.mark(function e(t){var r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("name"in(r=(0,i.getAlgorithmByOID)(p.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmId))!=0){e.next=3;break}throw new Error("Unknown keyEncryptionAlgorithm: ".concat(p.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmId));case 3:if("RSA-OAEP"!==r.name){e.next=7;break}if(a=new h.default({schema:p.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmParams}),r.hash=(0,i.getAlgorithmByOID)(a.hashAlgorithm.algorithmId),"name"in r.hash!=0){e.next=7;break}throw new Error("Incorrect OID for hash algorithm: ".concat(a.hashAlgorithm.algorithmId));case 7:return e.prev=7,e.next=10,p.recipientInfos[t].value.recipientCertificate.getPublicKey({algorithm:{algorithm:r,usages:["encrypt","wrapKey"]}});case 10:return s=e.sent,e.next=13,y.encrypt(s.algorithm,s,d);case 13:o=e.sent,p.recipientInfos[t].value.encryptedKey=new n.OctetString({valueHex:o}),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(7);case 19:case"end":return e.stop()}},e,null,[[7,17]])}))).apply(this,arguments)}function S(e){var t,r=Promise.resolve();return r=(r=(r=r.then(function(){return"name"in(t=(0,i.getAlgorithmByOID)(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==0?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '.concat(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId)):y.importKey("raw",new Uint8Array(p.recipientInfos[e].value.preDefinedKEK),t,!0,["wrapKey"])},function(e){return Promise.reject(e)})).then(function(e){return y.wrapKey("raw",l,e,t)},function(e){return Promise.reject(e)})).then(function(t){p.recipientInfos[e].value.encryptedKey=new n.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function A(e){var t,r,a=Promise.resolve();return a=(a=(a=(a=(a=a.then(function(){if("keyDerivationAlgorithm"in p.recipientInfos[e].value==0)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in p.recipientInfos[e].value.keyDerivationAlgorithm==0)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{t=new P.default({schema:p.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(r){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},function(e){return Promise.reject(e)})).then(function(){var t=new Uint8Array(p.recipientInfos[e].value.password);return y.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(n){if("name"in(r=(0,i.getAlgorithmByOID)(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==0)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '.concat(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId));var a="SHA-1";if("prf"in t){var s=(0,i.getAlgorithmByOID)(t.prf.algorithmId);if("name"in s==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");a=s.hash.name}var o=new Uint8Array(t.salt.valueBlock.valueHex);return y.deriveKey({name:"PBKDF2",hash:{name:a},salt:o,iterations:t.iterationCount},n,r,!0,["wrapKey"])},function(e){return Promise.reject(e)})).then(function(e){return y.wrapKey("raw",l,e,r)},function(e){return Promise.reject(e)})).then(function(t){p.recipientInfos[e].value.encryptedKey=new n.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}return a=(a=(a=(a=(a=a.then(function(){return y.generateKey(e,!0,["encrypt"])})).then(function(t){return l=t,y.encrypt({name:e.name,iv:o},l,m)},function(e){return Promise.reject(e)})).then(function(e){return f=e,y.exportKey("raw",l)},function(e){return Promise.reject(e)}).then(function(e){return d=e,!0},function(e){return Promise.reject(e)})).then(function(){r.version=2,r.encryptedContentInfo=new u.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new c.default({algorithmId:g,algorithmParams:new n.OctetString({valueHex:s})}),encryptedContent:new n.OctetString({valueHex:f})})},function(e){return Promise.reject(e)})).then(function(){for(var e=0;e<r.recipientInfos.length;e++){var t=Promise.resolve();switch(r.recipientInfos[e].variant){case 1:t=w(e);break;case 2:t=b(e);break;case 3:t=S(e);break;case 4:t=A(e);break;default:return Promise.reject("Uknown recipient type in array with index ".concat(e))}v.push(t)}return Promise.all(v)},function(e){return Promise.reject(e)})}},{key:"decrypt",value:function(e,t){var r=this,s=Promise.resolve(),o=t||{},u=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));var l=(0,i.getCrypto)();if(void 0===l)return Promise.reject("Unable to create WebCrypto object");function f(){return(f=E(regeneratorRuntime.mark(function e(t){var r,n,a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("recipientPrivateKey"in o!=0){e.next=2;break}throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');case 2:if("name"in(r=(0,i.getAlgorithmByOID)(u.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmId))!=0){e.next=5;break}throw new Error("Unknown keyEncryptionAlgorithm: ".concat(u.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmId));case 5:if("RSA-OAEP"!==r.name){e.next=9;break}if(n=new h.default({schema:u.recipientInfos[t].value.keyEncryptionAlgorithm.algorithmParams}),r.hash=(0,i.getAlgorithmByOID)(n.hashAlgorithm.algorithmId),"name"in r.hash!=0){e.next=9;break}throw new Error("Incorrect OID for hash algorithm: ".concat(n.hashAlgorithm.algorithmId));case 9:return e.next=11,l.importKey("pkcs8",o.recipientPrivateKey,r,!0,["decrypt"]);case 11:return a=e.sent,e.next=14,l.decrypt(a.algorithm,a,u.recipientInfos[t].value.encryptedKey.valueBlock.valueHex);case 14:if(s=e.sent,"name"in(c=(0,i.getAlgorithmByOID)(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId))!=0){e.next=18;break}throw new Error('Incorrect "contentEncryptionAlgorithm": '.concat(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));case 18:return e.abrupt("return",l.importKey("raw",s,c,!0,["decrypt"]));case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}return s=(s=s.then(function(){var t=Promise.resolve();switch(r.recipientInfos[e].variant){case 1:t=function(e){return f.apply(this,arguments)}(e);break;case 2:t=function(e){var t,r,a,s,f,h=Promise.resolve(),d=u.recipientInfos[e].value.originator;function m(t){t=t||!1;var r=new c.default({schema:u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),a=(0,i.getAlgorithmByOID)(r.algorithmId);if("name"in a==0)return Promise.reject("Incorrect OID for key encryption algorithm: ".concat(r.algorithmId));for(var s=a.length,o=new ArrayBuffer(4),l=new Uint8Array(o),h=3;h>=0;h--)l[h]=s,s>>=8;var d={algorithmId:r.algorithmId};t&&(d.algorithmParams=new n.Null);var m=new C.default({keyInfo:new c.default(d),entityUInfo:u.recipientInfos[e].value.ukm,suppPubInfo:new n.OctetString({valueHex:o})}).toSchema().toBER(!1),v=(0,i.getAlgorithmByOID)(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in v==0?Promise.reject("Incorrect OID for key encryption algorithm: ".concat(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId)):(0,i.kdf)(v.kdf,f,a.length,m)}function v(e){return l.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])}function p(t){var r=(0,i.getAlgorithmByOID)(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==0?Promise.reject('Incorrect "contentEncryptionAlgorithm": '.concat(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)):l.unwrapKey("raw",u.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])}return h=(h=(h=(h=(h=(h=h.then(function(){if("recipientCertificate"in o){var i=o.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(i.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject('Incorrect "recipientCertificate" for index '.concat(e));a=i.valueBlock.toString()}else{if(!("algorithmParams"in d.value.algorithm))return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');var s=d.value.algorithm.algorithmParams;if(s.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject("Incorrect originator for index ".concat(e));a=s.valueBlock.toString()}if("recipientPrivateKey"in o==0)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(a){case"1.2.840.10045.3.1.7":t="P-256",r=256;break;case"1.3.132.0.34":t="P-384",r=384;break;case"1.3.132.0.35":t="P-521",r=528;break;default:return Promise.reject("Incorrect curve OID for index ".concat(e))}return l.importKey("pkcs8",o.recipientPrivateKey,{name:"ECDH",namedCurve:t},!0,["deriveBits"])},function(e){return Promise.reject(e)})).then(function(e){s=e,"algorithmParams"in d.value.algorithm==0&&(d.value.algorithm.algorithmParams=new n.ObjectIdentifier({value:a}));var r=d.value.toSchema().toBER(!1);return l.importKey("spki",r,{name:"ECDH",namedCurve:t},!0,[])},function(e){return Promise.reject(e)})).then(function(e){return l.deriveBits({name:"ECDH",public:e},s,r)},function(e){return Promise.reject(e)})).then(function(e){return f=e,m()},function(e){return Promise.reject(e)})).then(v,function(e){return Promise.reject(e)})).then(function(e){return p(e).catch(function(){return m(!0).then(v).then(p)})},function(e){return Promise.reject(e)})}(e);break;case 3:t=function(e){var t,r=Promise.resolve();return r=(r=r.then(function(){return"preDefinedData"in o==0?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):"name"in(t=(0,i.getAlgorithmByOID)(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==0?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '.concat(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId)):l.importKey("raw",o.preDefinedData,t,!0,["unwrapKey"])},function(e){return Promise.reject(e)})).then(function(r){var n=(0,i.getAlgorithmByOID)(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==0?Promise.reject('Incorrect "contentEncryptionAlgorithm": '.concat(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)):l.unwrapKey("raw",u.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,r,t,n,!0,["decrypt"])},function(e){return Promise.reject(e)})}(e);break;case 4:t=function(e){var t,r,n=Promise.resolve();return n=(n=(n=n.then(function(){if("preDefinedData"in o==0)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in u.recipientInfos[e].value==0)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in u.recipientInfos[e].value.keyDerivationAlgorithm==0)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{t=new P.default({schema:u.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(r){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return l.importKey("raw",o.preDefinedData,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(n){if("name"in(r=(0,i.getAlgorithmByOID)(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==0)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '.concat(u.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId));var a="SHA-1";if("prf"in t){var s=(0,i.getAlgorithmByOID)(t.prf.algorithmId);if("name"in s==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");a=s.hash.name}var o=new Uint8Array(t.salt.valueBlock.valueHex);return l.deriveKey({name:"PBKDF2",hash:{name:a},salt:o,iterations:t.iterationCount},n,r,!0,["unwrapKey"])},function(e){return Promise.reject(e)})).then(function(t){var n=(0,i.getAlgorithmByOID)(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==0?Promise.reject('Incorrect "contentEncryptionAlgorithm": '.concat(u.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)):l.unwrapKey("raw",u.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,n,!0,["decrypt"])},function(e){return Promise.reject(e)})}(e);break;default:return Promise.reject("Uknown recipient type in array with index ".concat(e))}return t},function(e){return Promise.reject(e)})).then(function(e){var t=(0,i.getAlgorithmByOID)(r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==0)return Promise.reject('Incorrect "contentEncryptionAlgorithm": '.concat(r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));var n=new Uint8Array(r.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex),s=new ArrayBuffer(0);if(!1===r.encryptedContentInfo.encryptedContent.idBlock.isConstructed)s=r.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var o,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return j(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,void 0):void 0}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(r.encryptedContentInfo.encryptedContent.valueBlock.value);try{for(u.s();!(o=u.n()).done;)s=(0,a.utilConcatBuf)(s,o.value.valueBlock.valueHex)}catch(c){u.e(c)}finally{u.f()}}return l.decrypt({name:t.name,iv:n},e,s)},function(e){return Promise.reject(e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originatorInfo":return new s.default;case"recipientInfos":return[];case"encryptedContentInfo":return new u.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EnvelopedData class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"originatorInfo":return 0===r.certs.certificates.length&&0===r.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===r.length;case"encryptedContentInfo":return u.default.compareWithDefault("contentType",r.contentType)&&u.default.compareWithDefault("contentEncryptionAlgorithm",r.contentEncryptionAlgorithm)&&u.default.compareWithDefault("encryptedContent",r.encryptedContent);default:throw new Error("Invalid member name for EnvelopedData class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Constructed({name:t.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:s.default.schema().valueBlock.value}),new n.Set({value:[new n.Repeated({name:t.recipientInfos||"",value:o.default.schema()})]}),u.default.schema(t.encryptedContentInfo||{}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.unprotectedAttrs||"",value:l.default.schema()})]})]})}}]),e}();t.default=D},50024:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.keyPurposes=(0,a.getParametersValue)(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["keyPurposes"]);var r=n.compareSchema(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new n.Sequence({value:Array.from(this.keyPurposes,function(e){return new n.ObjectIdentifier({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.keyPurposes||"",value:new n.ObjectIdentifier})]})}}]),e}();t.default=s},51090:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=I(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=C(r(32488)),s=C(r(17455)),o=C(r(28165)),u=C(r(39670)),l=C(r(33838)),c=C(r(70374)),h=C(r(83366)),m=C(r(91439)),v=C(r(22104)),p=C(r(58220)),g=C(r(96988)),y=C(r(71907)),b=C(r(50024)),w=C(r(15599)),k=C(r(34840)),S=C(r(83804)),P=C(r(43199)),A=C(r(11663));function C(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.extnID=(0,a.getParametersValue)(t,"extnID",e.defaultValues("extnID")),this.critical=(0,a.getParametersValue)(t,"critical",e.defaultValues("critical")),this.extnValue="extnValue"in t?new n.OctetString({valueHex:t.extnValue}):e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=(0,a.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["extnID","critical","extnValue"]);var r=n.compareSchema(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Extension");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,-1!==(r=n.fromBER(this.extnValue.valueBlock.valueHex)).offset)switch(this.extnID){case"2.5.29.9":try{this.parsedValue=new i.default({schema:r.result})}catch(f){this.parsedValue=new i.default,this.parsedValue.parsingError="Incorrectly formated SubjectDirectoryAttributes"}break;case"2.5.29.14":case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":try{this.parsedValue=new s.default({schema:r.result})}catch(f){this.parsedValue=new s.default,this.parsedValue.parsingError="Incorrectly formated PrivateKeyUsagePeriod"}break;case"2.5.29.17":case"2.5.29.18":try{this.parsedValue=new o.default({schema:r.result})}catch(f){this.parsedValue=new o.default,this.parsedValue.parsingError="Incorrectly formated AltName"}break;case"2.5.29.19":try{this.parsedValue=new u.default({schema:r.result})}catch(f){this.parsedValue=new u.default,this.parsedValue.parsingError="Incorrectly formated BasicConstraints"}break;case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":try{this.parsedValue=new l.default({schema:r.result})}catch(f){this.parsedValue=new l.default,this.parsedValue.parsingError="Incorrectly formated IssuingDistributionPoint"}break;case"2.5.29.29":try{this.parsedValue=new c.default({schema:r.result})}catch(f){this.parsedValue=new c.default,this.parsedValue.parsingError="Incorrectly formated GeneralNames"}break;case"2.5.29.30":try{this.parsedValue=new h.default({schema:r.result})}catch(f){this.parsedValue=new h.default,this.parsedValue.parsingError="Incorrectly formated NameConstraints"}break;case"2.5.29.31":case"2.5.29.46":try{this.parsedValue=new m.default({schema:r.result})}catch(f){this.parsedValue=new m.default,this.parsedValue.parsingError="Incorrectly formated CRLDistributionPoints"}break;case"2.5.29.32":case"1.3.6.1.4.1.311.21.10":try{this.parsedValue=new v.default({schema:r.result})}catch(f){this.parsedValue=new v.default,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.33":try{this.parsedValue=new p.default({schema:r.result})}catch(f){this.parsedValue=new p.default,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.35":try{this.parsedValue=new g.default({schema:r.result})}catch(f){this.parsedValue=new g.default,this.parsedValue.parsingError="Incorrectly formated AuthorityKeyIdentifier"}break;case"2.5.29.36":try{this.parsedValue=new y.default({schema:r.result})}catch(f){this.parsedValue=new y.default,this.parsedValue.parsingError="Incorrectly formated PolicyConstraints"}break;case"2.5.29.37":try{this.parsedValue=new b.default({schema:r.result})}catch(f){this.parsedValue=new b.default,this.parsedValue.parsingError="Incorrectly formated ExtKeyUsage"}break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":try{this.parsedValue=new w.default({schema:r.result})}catch(f){this.parsedValue=new w.default,this.parsedValue.parsingError="Incorrectly formated InfoAccess"}break;case"1.3.6.1.4.1.11129.2.4.2":try{this.parsedValue=new k.default({schema:r.result})}catch(f){this.parsedValue=new k.default,this.parsedValue.parsingError="Incorrectly formated SignedCertificateTimestampList"}break;case"1.3.6.1.4.1.311.20.2":case"1.3.6.1.4.1.311.21.2":this.parsedValue=r.result;break;case"1.3.6.1.4.1.311.21.7":try{this.parsedValue=new S.default({schema:r.result})}catch(f){this.parsedValue=new S.default,this.parsedValue.parsingError="Incorrectly formated CertificateTemplate"}break;case"1.3.6.1.4.1.311.21.1":try{this.parsedValue=new P.default({schema:r.result})}catch(f){this.parsedValue=new P.default,this.parsedValue.parsingError="Incorrectly formated CAVersion"}break;case"1.3.6.1.5.5.7.1.3":try{this.parsedValue=new A.default({schema:r.result})}catch(f){this.parsedValue=new A.default,this.parsedValue.parsingError="Incorrectly formated QCStatements"}}}},{key:"toSchema",value:function(){var t=[];return t.push(new n.ObjectIdentifier({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new n.Boolean({value:this.critical})),t.push(this.extnValue),new n.Sequence({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&"toJSON"in this.parsedValue&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new n.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.extnID||""}),new n.Boolean({name:t.critical||"",optional:!0}),new n.OctetString({name:t.extnValue||""})]})}}]),e}();t.default=O},39327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(51090))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.extensions=(0,i.getParametersValue)(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["extensions"]);var r=a.compareSchema(t,t,e.schema({names:{extensions:"extensions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Extensions");this.extensions=Array.from(r.result.extensions,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({optional:t,name:r.blockName||"",value:[new a.Repeated({name:r.extensions||"",value:s.default.schema(r.extension||{})})]})}}]),e}();t.default=u},29260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(2446))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({optional:t,value:[new a.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new a.Choice({value:[new a.NumericString,new a.PrintableString]})]}),new a.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new a.Choice({value:[new a.NumericString,new a.PrintableString]})]}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new a.Choice({value:[new a.NumericString,new a.PrintableString]})]}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new a.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new a.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new a.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new a.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new a.Repeated({value:new a.PrintableString})]})]})}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new a.Sequence({optional:e,value:[new a.PrintableString,new a.PrintableString]})}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new a.Set({optional:e,value:[new a.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new a.Any]})]})}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.type=(0,i.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,i.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);var r=a.compareSchema(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralName");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var o=n.toBER(!1);this.value=a.fromBER(o).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new s.default({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new a.OctetString({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var u=r.result.blockName;u.idBlock.tagClass=1,u.idBlock.tagNumber=6;var l=u.toBER(!1);this.value=a.fromBER(l).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new a.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new a.IA5String({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new a.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new a.ObjectIdentifier({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type,value:""};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(t){}return e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Choice({value:[new a.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new a.ObjectIdentifier,new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new a.Any]})]}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new a.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[u(t.builtInStandardAttributes||{},!1),l(!0),c(!0)]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[s.default.schema(t.directoryName||{})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new a.Choice({value:[new a.TeletexString,new a.PrintableString,new a.UniversalString,new a.Utf8String,new a.BmpString]})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new a.Choice({value:[new a.TeletexString,new a.PrintableString,new a.UniversalString,new a.Utf8String,new a.BmpString]})]})]}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}();t.default=h},70374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.names=(0,i.getParametersValue)(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["names","generalNames"]);var r=a.compareSchema(t,t,e.schema({names:{blockName:"names",generalNames:"generalNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.generalNames,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({optional:t,name:r.blockName||"",value:[new a.Repeated({name:r.generalNames||"",value:s.default.schema()})]})}}]),e}();t.default=u},79907:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.base=(0,i.getParametersValue)(t,"base",e.defaultValues("base")),this.minimum=(0,i.getParametersValue)(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=(0,i.getParametersValue)(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["base","minimum","maximum"]);var r=a.compareSchema(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralSubtree");this.base=new s.default({schema:r.result.base}),"minimum"in r.result&&(this.minimum=r.result.minimum.valueBlock.isHexOnly?r.result.minimum:r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(this.maximum=r.result.maximum.valueBlock.isHexOnly?r.result.maximum:r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t;t=this.minimum instanceof a.Integer?this.minimum:new a.Integer({value:this.minimum}),e.push(new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r;r=this.maximum instanceof a.Integer?this.maximum:new a.Integer({value:this.maximum}),e.push(new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&(e.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),"maximum"in this&&(e.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new s.default;case"minimum":case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.base||{}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new a.Integer({name:t.minimum||""})]}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new a.Integer({name:t.maximum||""})]})]})}}]),e}();t.default=u},15599:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(88413))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.accessDescriptions=(0,i.getParametersValue)(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["accessDescriptions"]);var r=a.compareSchema(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.accessDescriptions||"",value:s.default.schema()})]})}}]),e}();t.default=u},35529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(2446))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.issuer=(0,i.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.serialNumber=(0,i.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["issuer","serialNumber"]);var r=a.compareSchema(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new s.default({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}},{key:"toJSON",value:function(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new s.default;case"serialNumber":return new a.Integer;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.issuer||{}),new a.Integer({name:t.serialNumber||""})]})}}]),e}();t.default=u},33838:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(29260)),s=o(r(2446));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,a.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,a.getParametersValue)(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,a.getParametersValue)(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=(0,a.getParametersValue)(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,a.getParametersValue)(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,a.getParametersValue)(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["distributionPoint","distributionPointNames","onlyContainsUserCerts","onlyContainsCACerts","onlySomeReasons","indirectCRL","onlyContainsAttributeCerts"]);var r=n.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new i.default({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new s.default({schema:new n.Sequence({value:r.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var o=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==o[0]}if("onlyContainsCACerts"in r.result){var u=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==u[0]}if("onlySomeReasons"in r.result){var l=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=l[0]}if("indirectCRL"in r.result){var c=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==c[0]}if("onlyContainsAttributeCerts"in r.result){var f=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==f[0]}}},{key:"toSchema",value:function(){var t,r=[];"distributionPoint"in this&&(this.distributionPoint instanceof Array?t=new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):((t=this.distributionPoint.toSchema()).idBlock.tagClass=3,t.idBlock.tagNumber=1),r.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]})));if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&r.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&r.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var a=new ArrayBuffer(1);new Uint8Array(a)[0]=this.onlySomeReasons,r.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:a}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&r.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&r.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new n.Sequence({value:r})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(t.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,function(e){return e.toJSON()}):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Choice({value:[new n.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.distributionPointNames||"",value:i.default.schema()})]}),new n.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})]}),new n.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new n.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new n.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new n.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}();t.default=l},87979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(32038))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.keyIdentifier=(0,i.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier")),"date"in t&&(this.date=(0,i.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,i.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["keyIdentifier","date","other"]);var r=a.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=r.result.keyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new s.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new a.OctetString;case"date":return new a.GeneralizedTime;case"other":return new s.default;default:throw new Error("Invalid member name for KEKIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyIdentifier":return r.isEqual(e.defaultValues("keyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return r.compareWithDefault("keyAttrId",r.keyAttrId)&&"keyAttr"in r==0;default:throw new Error("Invalid member name for KEKIdentifier class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.OctetString({name:t.keyIdentifier||""}),new a.GeneralizedTime({optional:!0,name:t.date||""}),s.default.schema(t.other||{})]})}}]),e}();t.default=u},40590:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(87979)),s=o(r(4987));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.kekid=(0,a.getParametersValue)(t,"kekid",e.defaultValues("kekid")),this.keyEncryptionAlgorithm=(0,a.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,a.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.preDefinedKEK=(0,a.getParametersValue)(t,"preDefinedKEK",e.defaultValues("preDefinedKEK")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","kekid","keyEncryptionAlgorithm","encryptedKey"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.kekid=new i.default({schema:r.result.kekid}),this.keyEncryptionAlgorithm=new s.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"kekid":return new i.default;case"keyEncryptionAlgorithm":return new s.default;case"encryptedKey":return new n.OctetString;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error("Invalid member name for KEKRecipientInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"KEKRecipientInfo":return r===e.defaultValues("version");case"kekid":return r.compareWithDefault("keyIdentifier",r.keyIdentifier)&&"date"in r==0&&"other"in r==0;case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===r.byteLength;default:throw new Error("Invalid member name for KEKRecipientInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),i.default.schema(t.kekid||{}),s.default.schema(t.keyEncryptionAlgorithm||{}),new n.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=l},70785:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(35529)),s=o(r(35717));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.variant=(0,a.getParametersValue)(t,"variant",e.defaultValues("variant")),this.value=(0,a.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["blockName"]);var r=n.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new i.default({schema:r.result.blockName})):(this.variant=2,this.value=new s.default({schema:new n.Sequence({value:r.result.blockName.valueBlock.value})}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new n.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Choice({value:[i.default.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||""}}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:s.default.schema(t.rKeyId||{names:{blockName:t.blockName||""}}).valueBlock.value})]})}}]),e}();t.default=l},52857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(75815)),s=l(r(4987)),o=l(r(2428)),u=l(r(35585));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.originator=(0,a.getParametersValue)(t,"originator",e.defaultValues("originator")),"ukm"in t&&(this.ukm=(0,a.getParametersValue)(t,"ukm",e.defaultValues("ukm"))),this.keyEncryptionAlgorithm=(0,a.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=(0,a.getParametersValue)(t,"recipientEncryptedKeys",e.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=(0,a.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),this.recipientPublicKey=(0,a.getParametersValue)(t,"recipientPublicKey",e.defaultValues("recipientPublicKey")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","originator","ukm","keyEncryptionAlgorithm","recipientEncryptedKeys"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.originator=new i.default({schema:r.result.originator}),"ukm"in r.result&&(this.ukm=r.result.ukm),this.keyEncryptionAlgorithm=new s.default({schema:r.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new o.default({schema:r.result.recipientEncryptedKeys})}},{key:"toSchema",value:function(){var e=[];return e.push(new n.Integer({value:this.version})),e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originator":return new i.default;case"ukm":return new n.OctetString;case"keyEncryptionAlgorithm":return new s.default;case"recipientEncryptedKeys":return new o.default;case"recipientCertificate":return new u.default;case"recipientPublicKey":return null;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return 0===r;case"originator":return-1===r.variant&&"value"in r==0;case"ukm":return r.isEqual(e.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"recipientEncryptedKeys":return 0===r.encryptedKeys.length;case"recipientCertificate":case"recipientPublicKey":return!1;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[i.default.schema(t.originator||{})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.OctetString({name:t.ukm||""})]}),s.default.schema(t.keyEncryptionAlgorithm||{}),o.default.schema(t.recipientEncryptedKeys||{})]})}}]),e}();t.default=h},20332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(4987)),s=l(r(35585)),o=l(r(56631)),u=l(r(35529));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.rid=(0,a.getParametersValue)(t,"rid",e.defaultValues("rid")),this.keyEncryptionAlgorithm=(0,a.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,a.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.recipientCertificate=(0,a.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","rid","keyEncryptionAlgorithm","encryptedKey"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.rid=3===r.result.rid.idBlock.tagClass?new n.OctetString({valueHex:r.result.rid.valueBlock.valueHex}):new u.default({schema:r.result.rid}),this.keyEncryptionAlgorithm=new i.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return this.rid instanceof u.default?(this.version=0,e.push(new n.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new n.Integer({value:this.version})),e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHex}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new n.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new i.default;case"encryptedKey":return new n.OctetString;case"recipientCertificate":return new s.default;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"rid":return 0===Object.keys(r).length;case"keyEncryptionAlgorithm":case"encryptedKey":return r.isEqual(e.defaultValues(t));case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),o.default.schema(t.rid||{}),i.default.schema(t.keyEncryptionAlgorithm||{}),new n.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},56002:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(60571))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.mac=(0,i.getParametersValue)(t,"mac",e.defaultValues("mac")),this.macSalt=(0,i.getParametersValue)(t,"macSalt",e.defaultValues("macSalt")),"iterations"in t&&(this.iterations=(0,i.getParametersValue)(t,"iterations",e.defaultValues("iterations"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["mac","macSalt","iterations"]);var r=a.compareSchema(t,t,e.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new s.default({schema:r.result.mac}),this.macSalt=r.result.macSalt,"iterations"in r.result&&(this.iterations=r.result.iterations.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new a.Integer({value:this.iterations})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"mac":return new s.default;case"macSalt":return new a.OctetString;case"iterations":return 1;default:throw new Error("Invalid member name for MacData class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"mac":return s.default.compareWithDefault("digestAlgorithm",r.digestAlgorithm)&&s.default.compareWithDefault("digest",r.digest);case"macSalt":return r.isEqual(e.defaultValues(t));case"iterations":return r===e.defaultValues(t);default:throw new Error("Invalid member name for MacData class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",optional:t.optional||!0,value:[s.default.schema(t.mac||{names:{blockName:"mac"}}),new a.OctetString({name:t.macSalt||"macSalt"}),new a.Integer({optional:!0,name:t.iterations||"iterations"})]})}}]),e}();t.default=u},84690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.hashAlgorithm=(0,i.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.hashedMessage=(0,i.getParametersValue)(t,"hashedMessage",e.defaultValues("hashedMessage")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["hashAlgorithm","hashedMessage"]);var r=a.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new s.default({schema:r.result.hashAlgorithm}),this.hashedMessage=r.result.hashedMessage}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new s.default;case"hashedMessage":return new a.OctetString;default:throw new Error("Invalid member name for MessageImprint class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"hashedMessage":return 0===r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for MessageImprint class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.hashAlgorithm||{}),new a.OctetString({name:t.hashedMessage||""})]})}}]),e}();t.default=u},83366:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(79907))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=(0,i.getParametersValue)(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=(0,i.getParametersValue)(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["permittedSubtrees","excludedSubtrees"]);var r=a.compareSchema(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new s.default({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new s.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})),"excludedSubtrees"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new a.Repeated({name:t.permittedSubtrees||"",value:s.default.schema()})]}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new a.Repeated({name:t.excludedSubtrees||"",value:s.default.schema()})]})]})}}]),e}();t.default=u},75815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(35529)),s=o(r(35344));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.variant=(0,a.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,a.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["blockName"]);var r=n.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new i.default({schema:r.result.blockName})):0===r.result.blockName.idBlock.tagNumber?(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=r.result.blockName):(this.variant=3,this.value=new s.default({schema:new n.Sequence({value:r.result.blockName.valueBlock.value})}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:var e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e;default:return new n.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Choice({value:[i.default.schema({names:{blockName:t.blockName||""}}),new n.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||""}),new n.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||"",value:s.default.schema().valueBlock.value})]})}}]),e}();t.default=l},5771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(545)),s=o(r(88367));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"certs"in t&&(this.certs=(0,a.getParametersValue)(t,"certs",e.defaultValues("certs"))),"crls"in t&&(this.crls=(0,a.getParametersValue)(t,"crls",e.defaultValues("crls"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["certs","crls"]);var r=n.compareSchema(t,t,e.schema({names:{certs:"certs",crls:"crls"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorInfo");"certs"in r.result&&(this.certs=new i.default({schema:new n.Set({value:r.result.certs.valueBlock.value})})),"crls"in r.result&&(this.crls=new s.default({schema:new n.Set({value:r.result.crls.valueBlock.value})}))}},{key:"toSchema",value:function(){var e=[];return"certs"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),"crls"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"certs"in this&&(e.certs=this.certs.toJSON()),"crls"in this&&(e.crls=this.crls.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certs":return new i.default;case"crls":return new s.default;default:throw new Error("Invalid member name for OriginatorInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error("Invalid member name for OriginatorInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({name:t.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:i.default.schema().valueBlock.value}),new n.Constructed({name:t.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})}}]),e}();t.default=l},35344:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.algorithm=(0,i.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.publicKey=(0,i.getParametersValue)(t,"publicKey",e.defaultValues("publicKey")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["algorithm","publicKey"]);var r=a.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new s.default({schema:r.result.algorithm}),this.publicKey=r.result.publicKey}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}},{key:"toJSON",value:function(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new s.default;case"publicKey":return new a.BitString;default:throw new Error("Invalid member name for OriginatorPublicKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"algorithm":case"publicKey":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for OriginatorPublicKey class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.algorithm||{}),new a.BitString({name:t.publicKey||""})]})}}]),e}();t.default=u},99600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.otherCertFormat=(0,a.getParametersValue)(t,"otherCertFormat",e.defaultValues("otherCertFormat")),this.otherCert=(0,a.getParametersValue)(t,"otherCert",e.defaultValues("otherCert")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["otherCertFormat","otherCert"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=r.result.otherCertFormat.valueBlock.toString(),this.otherCert=r.result.otherCert}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}},{key:"toJSON",value:function(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof n.Any||(e.otherCert=this.otherCert.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new n.Any;default:throw new Error("Invalid member name for OtherCertificateFormat class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.otherCertFormat||"otherCertFormat"}),new n.Any({name:t.otherCert||"otherCert"})]})}}]),e}();t.default=s},32038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.keyAttrId=(0,a.getParametersValue)(t,"keyAttrId",e.defaultValues("keyAttrId")),"keyAttr"in t&&(this.keyAttr=(0,a.getParametersValue)(t,"keyAttr",e.defaultValues("keyAttr"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["keyAttrId","keyAttr"]);var r=n.compareSchema(t,t,e.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=r.result.keyAttrId.valueBlock.toString(),"keyAttr"in r.result&&(this.keyAttr=r.result.keyAttr)}},{key:"toSchema",value:function(){var e=[];return e.push(new n.ObjectIdentifier({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error("Invalid member name for OtherKeyAttribute class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherKeyAttribute class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({optional:t.optional||!0,name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.keyAttrId||""}),new n.Any({optional:!0,name:t.keyAttr||""})]})}}]),e}();t.default=s},10176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.prime=(0,a.getParametersValue)(t,"prime",e.defaultValues("prime")),this.exponent=(0,a.getParametersValue)(t,"exponent",e.defaultValues("exponent")),this.coefficient=(0,a.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["prime","exponent","coefficient"]);var r=n.compareSchema(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:(0,a.toBase64)((0,a.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,a.toBase64)((0,a.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,a.toBase64)((0,a.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new n.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new n.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new n.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":case"exponent":case"coefficient":return new n.Integer;default:throw new Error("Invalid member name for OtherPrimeInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.prime||""}),new n.Integer({name:t.exponent||""}),new n.Integer({name:t.coefficient||""})]})}}]),e}();t.default=s},41751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.oriType=(0,a.getParametersValue)(t,"oriType",e.defaultValues("oriType")),this.oriValue=(0,a.getParametersValue)(t,"oriValue",e.defaultValues("oriValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["oriType","oriValue"]);var r=n.compareSchema(t,t,e.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=r.result.oriType.valueBlock.toString(),this.oriValue=r.result.oriValue}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.oriType}),this.oriValue]})}},{key:"toJSON",value:function(){var t={oriType:this.oriType};return!1===e.compareWithDefault("oriValue",this.oriValue)&&(t.oriValue=this.oriValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error("Invalid member name for OtherRecipientInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherRecipientInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.oriType||""}),new n.Any({name:t.oriValue||""})]})}}]),e}();t.default=s},75341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.otherRevInfoFormat=(0,a.getParametersValue)(t,"otherRevInfoFormat",e.defaultValues("otherRevInfoFormat")),this.otherRevInfo=(0,a.getParametersValue)(t,"otherRevInfo",e.defaultValues("otherRevInfo")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["otherRevInfoFormat","otherRevInfo"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=r.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=r.result.otherRevInfo}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}},{key:"toJSON",value:function(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof n.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new n.Any;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.otherRevInfoFormat||"otherRevInfoFormat"}),new n.Any({name:t.otherRevInfo||"otherRevInfo"})]})}}]),e}();t.default=s},71045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.keyDerivationFunc=(0,i.getParametersValue)(t,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=(0,i.getParametersValue)(t,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["keyDerivationFunc","encryptionScheme"]);var r=a.compareSchema(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBES2Params");this.keyDerivationFunc=new s.default({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new s.default({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":case"encryptionScheme":return new s.default;default:throw new Error("Invalid member name for PBES2Params class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.keyDerivationFunc||{}),s.default.schema(t.encryptionScheme||{})]})}}]),e}();t.default=u},30033:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.salt=(0,i.getParametersValue)(t,"salt",e.defaultValues("salt")),this.iterationCount=(0,i.getParametersValue)(t,"iterationCount",e.defaultValues("iterationCount")),"keyLength"in t&&(this.keyLength=(0,i.getParametersValue)(t,"keyLength",e.defaultValues("keyLength"))),"prf"in t&&(this.prf=(0,i.getParametersValue)(t,"prf",e.defaultValues("prf"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["salt","iterationCount","keyLength","prf"]);var r=a.compareSchema(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBKDF2Params");this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new s.default({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new a.Integer({value:this.iterationCount})),"keyLength"in this&&e.defaultValues("keyLength")!==this.keyLength&&t.push(new a.Integer({value:this.keyLength})),"prf"in this&&!1===e.defaultValues("prf").isEqual(this.prf)&&t.push(this.prf.toSchema()),new a.Sequence({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return"keyLength"in this&&e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),"prf"in this&&!1===e.defaultValues("prf").isEqual(this.prf)&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new a.Null});default:throw new Error("Invalid member name for PBKDF2Params class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Choice({value:[new a.OctetString({name:t.saltPrimitive||""}),s.default.schema(t.saltConstructed||{})]}),new a.Integer({name:t.iterationCount||""}),new a.Integer({name:t.keyLength||"",optional:!0}),s.default.schema(t.prf||{names:{optional:!0}})]})}}]),e}();t.default=u},9681:function(e,t,r){"use strict";t.Z=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=b(r(60294)),o=b(r(56002)),u=b(r(60571)),l=b(r(4987)),c=b(r(52386)),h=b(r(63788)),m=b(r(68681)),v=b(r(70815)),p=b(r(35529)),g=b(r(89945)),y=b(r(81957));function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.authSafe=(0,a.getParametersValue)(t,"authSafe",e.defaultValues("authSafe")),"macData"in t&&(this.macData=(0,a.getParametersValue)(t,"macData",e.defaultValues("macData"))),"parsedValue"in t&&(this.parsedValue=(0,a.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","authSafe","macData"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PFX");this.version=r.result.version.valueBlock.valueDec,this.authSafe=new s.default({schema:r.result.authSafe}),"macData"in r.result&&(this.macData=new o.default({schema:r.result.macData}))}},{key:"toSchema",value:function(){var e=[new n.Integer({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}},{key:"makeInternalValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==0)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==0)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');var r=Promise.resolve(),a=(0,i.getCrypto)();if(void 0===a)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==0)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:if("iterations"in t==0)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in t==0)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in t==0)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in t==0)return Promise.reject('Absent mandatory parameter "password"');var f=new ArrayBuffer(64),d=new Uint8Array(f);(0,i.getRandomValues)(d);var y=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new s.default({contentType:"1.2.840.113549.1.7.1",content:new n.OctetString({valueHex:y})});var b=(0,i.getEngine)();if("stampDataWithPassword"in b.subtle==0)return Promise.reject('No support for "stampDataWithPassword" in current engine "'.concat(b.name,'"'));r=(r=r.then(function(){return b.subtle.stampDataWithPassword({password:t.password,hashAlgorithm:t.hmacHashAlgorithm,salt:f,iterationCount:t.iterations,contentToStamp:y})})).then(function(r){e.macData=new o.default({mac:new u.default({digestAlgorithm:new l.default({algorithmId:(0,i.getOIDByAlgorithm)({name:t.hmacHashAlgorithm})}),digest:new n.OctetString({valueHex:r})}),macSalt:new n.OctetString({valueHex:f}),iterations:t.iterations})},function(e){return Promise.reject(e)});break;case 1:if("signingCertificate"in t==0)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in t==0)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in t==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');var w=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),k=new c.default({version:1,encapContentInfo:new h.default({eContentType:"1.2.840.113549.1.7.1",eContent:new n.OctetString({valueHex:w})}),certificates:[t.signingCertificate]});r=(r=(r=(r=r.then(function(){return a.digest({name:t.hashAlgorithm},new Uint8Array(w))})).then(function(e){var r=[];r.push(new m.default({type:"1.2.840.113549.1.9.3",values:[new n.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),r.push(new m.default({type:"1.2.840.113549.1.9.5",values:[new n.UTCTime({valueDate:new Date})]})),r.push(new m.default({type:"1.2.840.113549.1.9.4",values:[new n.OctetString({valueHex:e})]})),k.signerInfos.push(new v.default({version:1,sid:new p.default({issuer:t.signingCertificate.issuer,serialNumber:t.signingCertificate.serialNumber}),signedAttrs:new g.default({type:0,attributes:r})}))},function(e){return Promise.reject("Error during making digest for message: ".concat(e))})).then(function(){return k.sign(t.privateKey,0,t.hashAlgorithm)})).then(function(){e.authSafe=new s.default({contentType:"1.2.840.113549.1.7.2",content:k.toSchema(!0)})},function(e){return Promise.reject("Error during making signature: ".concat(e))});break;default:return Promise.reject('Parameter "integrityMode" has unknown value: '.concat(t.integrityMode))}return r}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==0&&(e.checkIntegrity=!0);var r=Promise.resolve();if(void 0===(0,i.getCrypto)())return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof n.OctetString==0)return Promise.reject('Wrong type of "this.authSafe.content"');var s=new ArrayBuffer(0);if(this.authSafe.content.valueBlock.isConstructed){var o,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return k(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,void 0):void 0}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(this.authSafe.content.valueBlock.value);try{for(u.s();!(o=u.n()).done;)s=(0,a.utilConcatBuf)(s,o.value.valueBlock.valueHex)}catch(g){u.e(g)}finally{u.f()}}else s=this.authSafe.content.valueBlock.valueHex;var l=n.fromBER(s);if(-1===l.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new y.default({schema:l.result}),e.checkIntegrity){if("macData"in this==0)return Promise.reject('Absent "macData" value, can not check PKCS#12 data integrity');var f=(0,i.getAlgorithmByOID)(this.macData.mac.digestAlgorithm.algorithmId);if("name"in f==0)return Promise.reject("Unsupported digest algorithm: ".concat(this.macData.mac.digestAlgorithm.algorithmId));var h=(0,i.getEngine)();r=(r=r.then(function(){return h.subtle.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:f.name,salt:t.macData.macSalt.valueBlock.valueHex,iterationCount:t.macData.iterations,contentToVerify:s,signatureToVerify:t.macData.mac.digest.valueBlock.valueHex})})).then(function(e){return!1===e?Promise.reject("Integrity for the PKCS#12 data is broken!"):Promise.resolve()},function(e){return Promise.reject(e)})}break;case"1.2.840.113549.1.7.2":this.parsedValue.integrityMode=1;var d=new c.default({schema:this.authSafe.content});if("eContent"in d.encapContentInfo==0)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(d.encapContentInfo.eContent instanceof n.OctetString==0)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');var m=new ArrayBuffer(0);if(!1===d.encapContentInfo.eContent.idBlock.isConstructed)m=d.encapContentInfo.eContent.valueBlock.valueHex;else for(var v=0;v<d.encapContentInfo.eContent.valueBlock.value.length;v++)m=(0,a.utilConcatBuf)(m,d.encapContentInfo.eContent.valueBlock.value[v].valueBlock.valueHex);var p=n.fromBER(m);if(-1===p.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new y.default({schema:p.result}),r=r.then(function(){return d.verify({signer:0,checkChain:!1})}).then(function(e){return!1===e?Promise.reject("Integrity for the PKCS#12 data is broken!"):Promise.resolve()},function(e){return Promise.reject("Error during integrity verification: ".concat(e))});break;default:return Promise.reject('Incorrect value for "this.authSafe.contentType": '.concat(this.authSafe.contentType))}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: ".concat(e))})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 3;case"authSafe":return new s.default;case"macData":return new o.default;case"parsedValue":return{};default:throw new Error("Invalid member name for PFX class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"authSafe":return s.default.compareWithDefault("contentType",r.contentType)&&s.default.compareWithDefault("content",r.content);case"macData":return o.default.compareWithDefault("mac",r.mac)&&o.default.compareWithDefault("macSalt",r.macSalt)&&o.default.compareWithDefault("iterations",r.iterations);case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PFX class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||"version"}),s.default.schema(t.authSafe||{names:{blockName:"authSafe"}}),o.default.schema(t.macData||{names:{blockName:"macData",optional:!0}})]})}}]),e}();t.Z=S},93085:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(4987)),s=l(r(38570)),o=l(r(96427)),u=l(r(46721));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.encryptionAlgorithm=(0,a.getParametersValue)(t,"encryptionAlgorithm",e.defaultValues("encryptionAlgorithm")),this.encryptedData=(0,a.getParametersValue)(t,"encryptedData",e.defaultValues("encryptedData")),"parsedValue"in t&&(this.parsedValue=(0,a.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["encryptionAlgorithm","encryptedData"]);var r=n.compareSchema(t,t,e.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new i.default({schema:r.result.encryptionAlgorithm}),this.encryptedData=r.result.encryptedData}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}},{key:"toJSON",value:function(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}},{key:"parseInternalValues",value:function(e){var t=this,r=Promise.resolve(),a=new s.default({encryptedContentInfo:new o.default({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return r=(r=r.then(function(){return a.decrypt(e)},function(e){return Promise.reject(e)})).then(function(e){var r=n.fromBER(e);return-1===r.offset?Promise.reject("Error during parsing ASN.1 data"):(t.parsedValue=new u.default({schema:r.result}),Promise.resolve())},function(e){return Promise.reject(e)})}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==0)return Promise.reject('Please initialize "parsedValue" first');var r=Promise.resolve(),n=new s.default;return r=(r=r.then(function(){return e.contentToEncrypt=t.parsedValue.toSchema().toBER(!1),n.encrypt(e)},function(e){return Promise.reject(e)})).then(function(){t.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,t.encryptedData=n.encryptedContentInfo.encryptedContent})}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptionAlgorithm":return new i.default;case"encryptedData":return new n.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"encryptionAlgorithm":return i.default.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==0;case"encryptedData":return r.isEqual(e.defaultValues(t));case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[i.default.schema(t.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new n.Choice({value:[new n.OctetString({name:t.encryptedData||"encryptedData"}),new n.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||"encryptedData"})]})]})}}]),e}();t.default=h},60242:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,i.getParametersValue)(t,"version",e.defaultValues("version")),"keyDerivationAlgorithm"in t&&(this.keyDerivationAlgorithm=(0,i.getParametersValue)(t,"keyDerivationAlgorithm",e.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=(0,i.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,i.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.password=(0,i.getParametersValue)(t,"password",e.defaultValues("password")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["version","keyDerivationAlgorithm","keyEncryptionAlgorithm","encryptedKey"]);var r=a.compareSchema(t,t,e.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=r.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in r.result&&(this.keyDerivationAlgorithm=new s.default({schema:new a.Sequence({value:r.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new s.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return e.push(new a.Integer({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new a.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return new s.default;case"encryptedKey":return new a.OctetString;case"password":return new ArrayBuffer(0);default:throw new Error("Invalid member name for PasswordRecipientinfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return-1===r;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==0;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"password":return 0===r.byteLength;default:throw new Error("Invalid member name for PasswordRecipientinfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Integer({name:t.version||""}),new a.Constructed({name:t.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:s.default.schema().valueBlock.value}),s.default.schema(t.keyEncryptionAlgorithm||{}),new a.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=u},71907:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=(0,a.getParametersValue)(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=(0,a.getParametersValue)(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["requireExplicitPolicy","inhibitPolicyMapping"]);var r=n.compareSchema(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var i=r.result.requireExplicitPolicy;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;var s=i.toBER(!1),o=n.fromBER(s);this.requireExplicitPolicy=o.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var u=r.result.inhibitPolicyMapping;u.idBlock.tagClass=1,u.idBlock.tagNumber=2;var l=u.toBER(!1),c=n.fromBER(l);this.inhibitPolicyMapping=c.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new n.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new n.Integer({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=s},9490:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(38745))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.policyIdentifier=(0,i.getParametersValue)(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=(0,i.getParametersValue)(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["policyIdentifier","policyQualifiers"]);var r=a.compareSchema(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new s.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new a.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new a.Sequence({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.ObjectIdentifier({name:t.policyIdentifier||""}),new a.Sequence({optional:!0,value:[new a.Repeated({name:t.policyQualifiers||"",value:s.default.schema()})]})]})}}]),e}();t.default=u},45632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.issuerDomainPolicy=(0,a.getParametersValue)(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,a.getParametersValue)(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["issuerDomainPolicy","subjectDomainPolicy"]);var r=n.compareSchema(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.issuerDomainPolicy}),new n.ObjectIdentifier({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new n.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}}]),e}();t.default=s},58220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(45632))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.mappings=(0,i.getParametersValue)(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["mappings"]);var r=a.compareSchema(t,t,e.schema({names:{mappings:"mappings"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.mappings||"",value:s.default.schema()})]})}}]),e}();t.default=u},38745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.policyQualifierId=(0,a.getParametersValue)(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=(0,a.getParametersValue)(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["policyQualifierId","qualifier"]);var r=n.compareSchema(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new n.Any;default:throw new Error("Invalid member name for PolicyQualifierInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.policyQualifierId||""}),new n.Any({name:t.qualifier||""})]})}}]),e}();t.default=s},46721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(4987)),s=l(r(68681)),o=l(r(43818)),u=l(r(66323));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=(0,a.getParametersValue)(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,a.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=(0,a.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=(0,a.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["version","privateKeyAlgorithm","privateKey","attributes"]);var r=n.compareSchema(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyInfo");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new i.default({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new s.default({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var l=n.fromBER(this.privateKey.valueBlock.valueHex);-1!==l.offset&&(this.parsedKey=new u.default({schema:l.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof n.ObjectIdentifier){var c=n.fromBER(this.privateKey.valueBlock.valueHex);-1!==c.offset&&(this.parsedKey=new o.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:c.result}))}}}},{key:"toSchema",value:function(){var e=[new n.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==0){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}for(var r=this.parsedKey.toJSON(),n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];t[i]=r[i]}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.default({json:e}),this.privateKeyAlgorithm=new i.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new u.default({json:e}),this.privateKeyAlgorithm=new i.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.Null});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.privateKey=new n.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new i.default;case"privateKey":return new n.OctetString;case"attributes":return[];case"parsedKey":return{};default:throw new Error("Invalid member name for PrivateKeyInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),i.default.schema(t.privateKeyAlgorithm||{}),new n.OctetString({name:t.privateKey||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.attributes||"",value:s.default.schema()})]})]})}}]),e}();t.default=h},17455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),"notBefore"in t&&(this.notBefore=(0,a.getParametersValue)(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=(0,a.getParametersValue)(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["notBefore","notAfter"]);var r=n.compareSchema(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var i=new n.GeneralizedTime;i.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=i.toDate()}if("notAfter"in r.result){var s=new n.GeneralizedTime({valueHex:r.result.notAfter.valueBlock.valueHex});s.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=s.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new n.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new n.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Primitive({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=s},20720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=l(r(4987)),o=l(r(15962)),u=l(r(59627));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.algorithm=(0,a.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=(0,a.getParametersValue)(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=(0,a.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["algorithm","subjectPublicKey"]);var r=n.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PublicKeyInfo");switch(this.algorithm=new s.default({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===n.ObjectIdentifier.blockName())try{this.parsedKey=new o.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex})}catch(l){}break;case"1.2.840.113549.1.1.1":var i=n.fromBER(this.subjectPublicKey.valueBlock.valueHex);if(-1!==i.offset)try{this.parsedKey=new u.default({schema:i.result})}catch(l){}}}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==0)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}for(var t=this.parsedKey.toJSON(),r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];e[a]=t[a]}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.default({json:e}),this.algorithm=new s.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new u.default({json:e}),this.algorithm=new s.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.Null});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.subjectPublicKey=new n.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if(void 0===e)return Promise.reject("Need to provide publicKey input parameter");var a=(0,i.getCrypto)();return void 0===a?Promise.reject("Unable to create WebCrypto object"):t=(t=t.then(function(){return a.exportKey("spki",e)})).then(function(e){var t=n.fromBER(e);try{r.fromSchema(t.result)}catch(a){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: ".concat(e))})}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new s.default;case"subjectPublicKey":return new n.BitString;default:throw new Error("Invalid member name for PublicKeyInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[s.default.schema(t.algorithm||{}),new n.BitString({name:t.subjectPublicKey||""})]})}}]),e}();t.default=h},11663:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QCStatement=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.id=(0,a.getParametersValue)(t,"id",e.defaultValues("id")),"type"in t&&(this.type=(0,a.getParametersValue)(t,"type",e.defaultValues("type"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["id","type"]);var r=n.compareSchema(t,t,e.schema({names:{id:"id",type:"type"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for QCStatement");this.id=r.result.id.valueBlock.toString(),"type"in r.result&&(this.type=r.result.type)}},{key:"toSchema",value:function(){var e=[new n.ObjectIdentifier({value:this.id})];return"type"in this&&e.push(this.type),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={id:this.id};return"type"in this&&(e.type=this.type.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"id":return"";case"type":return new n.Null;default:throw new Error("Invalid member name for QCStatement class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"id":return""===t;case"type":return t instanceof n.Null;default:throw new Error("Invalid member name for QCStatement class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||""}),new n.Any({name:t.type||"",optional:!0})]})}}]),e}();t.QCStatement=s;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.values=(0,a.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["values"]);var r=n.compareSchema(t,t,e.schema({names:{values:"values"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for QCStatements");this.values=Array.from(r.result.values,function(e){return new s({schema:e})})}},{key:"toSchema",value:function(){return new n.Sequence({value:Array.from(this.values,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"values":return[];default:throw new Error("Invalid member name for QCStatements class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"values":return 0===t.length;default:throw new Error("Invalid member name for QCStatements class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.values||"",value:s.schema(t.value||{})})]})}}]),e}();t.default=o},56701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.hashAlgorithm=(0,i.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,i.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=(0,i.getParametersValue)(t,"pSourceAlgorithm",e.defaultValues("pSourceAlgorithm")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["hashAlgorithm","maskGenAlgorithm","pSourceAlgorithm"]);var r=a.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new s.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new s.default({schema:r.result.maskGenAlgorithm})),"pSourceAlgorithm"in r.result&&(this.pSourceAlgorithm=new s.default({schema:r.result.pSourceAlgorithm}))}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new a.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||(t.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new a.Null});case"maskGenAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new a.Null}).toSchema()});case"pSourceAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new a.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error("Invalid member name for RSAESOAEPParams class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[s.default.schema(t.hashAlgorithm||{})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[s.default.schema(t.maskGenAlgorithm||{})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[s.default.schema(t.pSourceAlgorithm||{})]})]})}}]),e}();t.default=u},66323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(10176))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,i.getParametersValue)(t,"version",e.defaultValues("version")),this.modulus=(0,i.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,i.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=(0,i.getParametersValue)(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=(0,i.getParametersValue)(t,"prime1",e.defaultValues("prime1")),this.prime2=(0,i.getParametersValue)(t,"prime2",e.defaultValues("prime2")),this.exponent1=(0,i.getParametersValue)(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=(0,i.getParametersValue)(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=(0,i.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=(0,i.getParametersValue)(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["version","modulus","publicExponent","privateExponent","prime1","prime2","exponent1","exponent2","coefficient","otherPrimeInfos"]);var r=a.compareSchema(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new s.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new a.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new a.Sequence({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={n:(0,i.toBase64)((0,i.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,i.toBase64)((0,i.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:(0,i.toBase64)((0,i.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:(0,i.toBase64)((0,i.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:(0,i.toBase64)((0,i.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:(0,i.toBase64)((0,i.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:(0,i.toBase64)((0,i.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:(0,i.toBase64)((0,i.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new a.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new s.default({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new a.Integer;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Integer({name:t.version||""}),new a.Integer({name:t.modulus||""}),new a.Integer({name:t.publicExponent||""}),new a.Integer({name:t.privateExponent||""}),new a.Integer({name:t.prime1||""}),new a.Integer({name:t.prime2||""}),new a.Integer({name:t.exponent1||""}),new a.Integer({name:t.exponent2||""}),new a.Integer({name:t.coefficient||""}),new a.Sequence({optional:!0,value:[new a.Repeated({name:t.otherPrimeInfosName||"",value:s.default.schema(t.otherPrimeInfo||{})})]})]})}}]),e}();t.default=u},59627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.modulus=(0,a.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,a.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["modulus","publicExponent"]);var r=n.compareSchema(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new n.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:(0,a.toBase64)((0,a.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,a.toBase64)((0,a.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');var t=(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.n,!0));if(this.modulus=new n.Integer({valueHex:t.slice(0,Math.pow(2,(0,a.nearestPowerOf2)(t.byteLength)))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new n.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":case"publicExponent":return new n.Integer;default:throw new Error("Invalid member name for RSAPublicKey class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.modulus||""}),new n.Integer({name:t.publicExponent||""})]})}}]),e}();t.default=s},13272:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.hashAlgorithm=(0,i.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,i.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=(0,i.getParametersValue)(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=(0,i.getParametersValue)(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["hashAlgorithm","maskGenAlgorithm","saltLength","trailerField"]);var r=a.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSASSAPSSParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new s.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new s.default({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new a.Integer({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new a.Integer({value:this.trailerField})]})),new a.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new a.Null});case"maskGenAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new a.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[s.default.schema(t.hashAlgorithm||{})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[s.default.schema(t.maskGenAlgorithm||{})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new a.Integer({name:t.saltLength||""})]}),new a.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new a.Integer({name:t.trailerField||""})]})]})}}]),e}();t.default=u},38847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(70785))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.rid=(0,i.getParametersValue)(t,"rid",e.defaultValues("rid")),this.encryptedKey=(0,i.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["rid","encryptedKey"]);var r=a.compareSchema(t,t,e.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new s.default({schema:r.result.rid}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new a.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"rid":return new s.default;case"encryptedKey":return new a.OctetString;default:throw new Error("Invalid member name for RecipientEncryptedKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"rid":return-1===r.variant&&"value"in r==0;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));default:throw new Error("Invalid member name for RecipientEncryptedKey class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[s.default.schema(t.rid||{}),new a.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=u},2428:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(38847))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.encryptedKeys=(0,i.getParametersValue)(t,"encryptedKeys",e.defaultValues("encryptedKeys")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["RecipientEncryptedKeys"]);var r=a.compareSchema(t,t,e.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(r.result.RecipientEncryptedKeys,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.encryptedKeys,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{encryptedKeys:Array.from(this.encryptedKeys,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptedKeys":return[];default:throw new Error("Invalid member name for RecipientEncryptedKeys class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error("Invalid member name for RecipientEncryptedKeys class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.RecipientEncryptedKeys||"",value:s.default.schema()})]})}}]),e}();t.default=u},56631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(35529))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.variant=(0,i.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,i.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["blockName"]);var r=a.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new s.default({schema:r.result.blockName})):(this.variant=2,this.value=new a.OctetString({valueHex:r.result.blockName.valueBlock.valueHex}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new a.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHex});default:return new a.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"values":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for RecipientIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Choice({value:[s.default.schema({names:{blockName:t.blockName||""}}),new a.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0}})]})}}]),e}();t.default=u},16475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=c(r(20332)),s=c(r(52857)),o=c(r(40590)),u=c(r(60242)),l=c(r(41751));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.variant=(0,a.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,a.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["blockName"]);var r=n.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientInfo");if(1===r.result.blockName.idBlock.tagClass)this.variant=1,this.value=new i.default({schema:r.result.blockName});else{var c=new n.Sequence({value:r.result.blockName.valueBlock.value});switch(r.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new s.default({schema:c});break;case 2:this.variant=3,this.value=new o.default({schema:c});break;case 3:this.variant=4,this.value=new u.default({schema:c});break;case 4:this.variant=5,this.value=new l.default({schema:c});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}},{key:"toSchema",value:function(){var e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new n.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"variant":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for RecipientInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Choice({value:[i.default.schema({names:{blockName:t.blockName||""}}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:o.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:u.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:l.default.schema().valueBlock.value})]})}}]),e}();t.default=m},35717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(32038))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.subjectKeyIdentifier=(0,i.getParametersValue)(t,"subjectKeyIdentifier",e.defaultValues("subjectKeyIdentifier")),"date"in t&&(this.date=(0,i.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,i.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["subjectKeyIdentifier","date","other"]);var r=a.compareSchema(t,t,e.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=r.result.subjectKeyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new s.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new a.Sequence({value:e})}},{key:"toJSON",value:function(){var e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"subjectKeyIdentifier":return new a.OctetString;case"date":return new a.GeneralizedTime;case"other":return new s.default;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"subjectKeyIdentifier":return r.isEqual(e.defaultValues("subjectKeyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return""===r.keyAttrId&&"keyAttr"in r==0;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.OctetString({name:t.subjectKeyIdentifier||""}),new a.GeneralizedTime({optional:!0,name:t.date||""}),s.default.schema(t.other||{})]})}}]),e}();t.default=u},2446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(45402))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.typesAndValues=(0,i.getParametersValue)(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,i.getParametersValue)(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["RDN","typesAndValues"]);var r=a.compareSchema(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RelativeDistinguishedNames");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new s.default({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){return 0===this.valueBeforeDecode.byteLength?new a.Sequence({value:[new a.Set({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]}):a.fromBER(this.valueBeforeDecode).result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(this.typesAndValues.entries());try{for(n.s();!(r=n.n()).done;){var a=function(e){if(Array.isArray(e))return e}(s=r.value)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),2!==i.length);s=!0);}catch(u){o=!0,a=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(s)||u(s,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(!1===a[1].isEqual(t.typesAndValues[a[0]]))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}var s;return t instanceof ArrayBuffer&&(0,i.isEqualBuffer)(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.repeatedSequence||"",value:new a.Set({value:[new a.Repeated({name:t.repeatedSet||"",value:s.default.schema(t.typeAndValue||{})})]})})]})}}]),e}();t.default=c},73229:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=l(r(2446)),s=l(r(71852)),o=l(r(51090)),u=l(r(39327));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.tbs=(0,a.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.responderID=(0,a.getParametersValue)(t,"responderID",e.defaultValues("responderID")),this.producedAt=(0,a.getParametersValue)(t,"producedAt",e.defaultValues("producedAt")),this.responses=(0,a.getParametersValue)(t,"responses",e.defaultValues("responses")),"responseExtensions"in t&&(this.responseExtensions=(0,a.getParametersValue)(t,"responseExtensions",e.defaultValues("responseExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["ResponseData","ResponseData.version","ResponseData.responderID","ResponseData.producedAt","ResponseData.responses","ResponseData.responseExtensions"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ResponseData");this.tbs=r.result.ResponseData.valueBeforeDecode,"ResponseData.version"in r.result&&(this.version=r.result["ResponseData.version"].valueBlock.valueDec),this.responderID=1===r.result["ResponseData.responderID"].idBlock.tagNumber?new i.default({schema:r.result["ResponseData.responderID"].valueBlock.value[0]}):r.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=r.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(r.result["ResponseData.responses"],function(e){return new s.default({schema:e})}),"ResponseData.responseExtensions"in r.result&&(this.responseExtensions=Array.from(r.result["ResponseData.responseExtensions"].valueBlock.value,function(e){return new o.default({schema:e})}))}},{key:"toSchema",value:function(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===r){if(0===this.tbs.length)return e.schema();t=n.fromBER(this.tbs).result}else{var a=[];"version"in this&&a.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({value:this.version})]})),a.push(new n.Constructed(this.responderID instanceof i.default?{idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}:{idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),a.push(new n.GeneralizedTime({valueDate:this.producedAt})),a.push(new n.Sequence({value:Array.from(this.responses,function(e){return e.toSchema()})})),"responseExtensions"in this&&a.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new n.Sequence({value:Array.from(this.responseExtensions,function(e){return e.toSchema()})})]})),t=new n.Sequence({value:a})}return t}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,function(e){return e.toJSON()})),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"responderID":return 0===Object.keys(r).length;case"producedAt":return r===e.defaultValues(t);case"responses":case"responseExtensions":return 0===r.length;default:throw new Error("Invalid member name for ResponseData class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"ResponseData",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({name:t.version||"ResponseData.version"})]}),new n.Choice({value:[new n.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[i.default.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new n.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new n.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new n.GeneralizedTime({name:t.producedAt||"ResponseData.producedAt"}),new n.Sequence({value:[new n.Repeated({name:"ResponseData.responses",value:s.default.schema(t.response||{})})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[u.default.schema(t.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}}]),e}();t.default=h},88367:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(n(75530)),i=n(1971),s=u(n(79394)),o=u(n(75341));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.crls=(0,i.getParametersValue)(t,"crls",e.defaultValues("crls")),this.otherRevocationInfos=(0,i.getParametersValue)(t,"otherRevocationInfos",e.defaultValues("otherRevocationInfos")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["crls"]);var r=a.compareSchema(t,t,e.schema({names:{crls:"crls"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RevocationInfoChoices");var n,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,void 0):void 0}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}(r.result.crls);try{for(u.s();!(n=u.n()).done;){var l=n.value;1===l.idBlock.tagClass?this.crls.push(new s.default({schema:l})):this.otherRevocationInfos.push(new o.default({schema:l}))}}catch(f){u.e(f)}finally{u.f()}}},{key:"toSchema",value:function(){var e=[];return e.push.apply(e,t(Array.from(this.crls,function(e){return e.toSchema()}))),e.push.apply(e,t(Array.from(this.otherRevocationInfos,function(e){var t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new a.Set({value:e})}},{key:"toJSON",value:function(){return{crls:Array.from(this.crls,function(e){return e.toJSON()}),otherRevocationInfos:Array.from(this.otherRevocationInfos,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"crls":case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Set({name:t.blockName||"",value:[new a.Repeated({name:t.crls||"",value:new a.Choice({value:[s.default.schema(),new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new a.ObjectIdentifier,new a.Any]})]})})]})}}]),e}();r.default=h},27414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=o(r(26466)),s=o(r(39327));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.userCertificate=(0,a.getParametersValue)(t,"userCertificate",e.defaultValues("userCertificate")),this.revocationDate=(0,a.getParametersValue)(t,"revocationDate",e.defaultValues("revocationDate")),"crlEntryExtensions"in t&&(this.crlEntryExtensions=(0,a.getParametersValue)(t,"crlEntryExtensions",e.defaultValues("crlEntryExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["userCertificate","revocationDate","crlEntryExtensions"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RevokedCertificate");this.userCertificate=r.result.userCertificate,this.revocationDate=new i.default({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result&&(this.crlEntryExtensions=new s.default({schema:r.result.crlEntryExtensions}))}},{key:"toSchema",value:function(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"userCertificate":return new n.Integer;case"revocationDate":return new i.default;case"crlEntryExtensions":return new s.default;default:throw new Error("Invalid member name for RevokedCertificate class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.userCertificate||"userCertificate"}),i.default.schema({names:{utcTimeName:t.revocationDate||"revocationDate",generalTimeName:t.revocationDate||"revocationDate"}}),s.default.schema({names:{blockName:t.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}}]),e}();t.default=l},46826:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=m(r(68681)),s=m(r(46721)),o=m(r(93085)),u=m(r(78342)),l=m(r(62983)),c=m(r(30751)),h=m(r(71030));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.bagId=(0,a.getParametersValue)(t,"bagId",e.defaultValues("bagId")),this.bagValue=(0,a.getParametersValue)(t,"bagValue",e.defaultValues("bagValue")),"bagAttributes"in t&&(this.bagAttributes=(0,a.getParametersValue)(t,"bagAttributes",e.defaultValues("bagAttributes"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["bagId","bagValue","bagAttributes"]);var r=n.compareSchema(t,t,e.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=r.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new s.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new o.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new u.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new l.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new c.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new h.default({schema:r.result.bagValue});break;default:throw new Error('Invalid "bagId" for SafeBag: '.concat(this.bagId))}"bagAttributes"in r.result&&(this.bagAttributes=Array.from(r.result.bagAttributes,function(e){return new i.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[new n.ObjectIdentifier({value:this.bagId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new n.Set({value:Array.from(this.bagAttributes,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"bagId":return"";case"bagValue":return new n.Any;case"bagAttributes":return[];default:throw new Error("Invalid member name for SafeBag class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof n.Any;case"bagAttributes":return 0===t.length;default:throw new Error("Invalid member name for SafeBag class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.bagId||"bagId"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.bagValue||"bagValue"})]}),new n.Set({optional:!0,value:[new n.Repeated({name:t.bagAttributes||"bagAttributes",value:i.default.schema()})]})]})}}]),e}();t.default=p},71030:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(46826))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.safeBags=(0,i.getParametersValue)(t,"safeBags",e.defaultValues("safeBags")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["safeBags"]);var r=a.compareSchema(t,t,e.schema({names:{safeBags:"safeBags"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(r.result.safeBags,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.safeBags,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeBags:Array.from(this.safeBags,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"safeBags":return[];default:throw new Error("Invalid member name for SafeContents class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error("Invalid member name for SafeContents class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.safeBags||"",value:s.default.schema()})]})}}]),e}();t.default=u},30751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.secretTypeId=(0,a.getParametersValue)(t,"secretTypeId",e.defaultValues("secretTypeId")),this.secretValue=(0,a.getParametersValue)(t,"secretValue",e.defaultValues("secretValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["secretTypeId","secretValue"]);var r=n.compareSchema(t,t,e.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=r.result.secretTypeId.valueBlock.toString(),this.secretValue=r.result.secretValue}},{key:"toSchema",value:function(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.secretTypeId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"secretTypeId":return"";case"secretValue":return new n.Any;default:throw new Error("Invalid member name for SecretBag class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof n.Any;default:throw new Error("Invalid member name for SecretBag class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||"id"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.value||"value"})]})]})}}]),e}();t.default=s},89945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(68681))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.type=(0,i.getParametersValue)(t,"type",e.defaultValues("type")),this.attributes=(0,i.getParametersValue)(t,"attributes",e.defaultValues("attributes")),this.encodedValue=(0,i.getParametersValue)(t,"encodedValue",e.defaultValues("encodedValue")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["attributes"]);var r=a.compareSchema(t,t,e.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SignedAndUnsignedAttributes");if(this.type=r.result.idBlock.tagNumber,this.encodedValue=r.result.valueBeforeDecode,new Uint8Array(this.encodedValue)[0]=49,"attributes"in r.result!=0)this.attributes=Array.from(r.result.attributes,function(e){return new s.default({schema:e})});else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}},{key:"toSchema",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues("type");case"attributes":return 0===r.length;case"encodedValue":return 0===r.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Constructed({name:t.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber},value:[new a.Repeated({name:t.attributes||"",value:s.default.schema()})]})}}]),e}();t.default=u},34840:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SignedCertificateTimestamp=void 0,t.verifySCTsForCertificate=function(e,t,r){return y.apply(this,arguments)};var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=r(28807),o=r(97226),u=(n=r(20720))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){m(i,n,a,s,o,"next",e)}function o(e){m(i,n,a,s,o,"throw",e)}s(void 0)})}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,i.getParametersValue)(t,"version",e.defaultValues("version")),this.logID=(0,i.getParametersValue)(t,"logID",e.defaultValues("logID")),this.timestamp=(0,i.getParametersValue)(t,"timestamp",e.defaultValues("timestamp")),this.extensions=(0,i.getParametersValue)(t,"extensions",e.defaultValues("extensions")),this.hashAlgorithm=(0,i.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.signatureAlgorithm=(0,i.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,i.getParametersValue)(t,"signature",e.defaultValues("signature")),"schema"in t&&this.fromSchema(t.schema),"stream"in t&&this.fromStream(t.stream)}return d(e,[{key:"fromSchema",value:function(e){if(e instanceof a.RawData==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");var t=new s.SeqStream({stream:new s.ByteStream({buffer:e.data})});this.fromStream(t)}},{key:"fromStream",value:function(e){var t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date((0,i.utilFromBase)(new Uint8Array(e.getBlock(8)),8));var r=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm="anonymous";break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}var n=e.getUint16(),s=new Uint8Array(e.getBlock(n)).buffer.slice(0),o=a.fromBER(s);if(-1===o.offset)throw new Error("Object's stream was not correct for SignedCertificateTimestamp");if(this.signature=o.result,t!==47+r+n)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}},{key:"toSchema",value:function(){var e=this.toStream();return new a.RawData({data:e.stream.buffer})}},{key:"toStream",value:function(){var e=new s.SeqStream;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecode.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));var t,r,n=new ArrayBuffer(8),a=new Uint8Array(n),o=(0,i.utilToBase)(this.timestamp.valueOf(),8);switch(a.set(new Uint8Array(o),8-o.byteLength),e.appendView(a),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":t=0;break;case"md5":t=1;break;case"sha1":t=2;break;case"sha224":t=3;break;case"sha256":t=4;break;case"sha384":t=5;break;case"sha512":t=6;break;default:throw new Error("Incorrect data for hashAlgorithm: ".concat(this.hashAlgorithm))}switch(e.appendChar(t),this.signatureAlgorithm.toLowerCase()){case"anonymous":r=0;break;case"rsa":r=1;break;case"dsa":r=2;break;case"ecdsa":r=3;break;default:throw new Error("Incorrect data for signatureAlgorithm: ".concat(this.signatureAlgorithm))}e.appendChar(r);var u=this.signature.toBER(!1);return e.appendUint16(u.byteLength),e.appendView(new Uint8Array(u)),e}},{key:"toJSON",value:function(){return{version:this.version,logID:(0,i.bufferToHexCodes)(this.logID),timestamp:this.timestamp,extensions:(0,i.bufferToHexCodes)(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}},{key:"verify",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this;return v(regeneratorRuntime.mark(function l(){var f,h,d,m,v,p,g,y,b,w,k;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:h=(0,i.toBase64)((0,i.arrayBufferToString)(n.logID)),d=null,m=new s.SeqStream,p=c(e),l.prev=2,p.s();case 4:if((v=p.n()).done){l.next=11;break}if((g=v.value).log_id!==h){l.next=9;break}return d=g.key,l.abrupt("break",11);case 9:l.next=4;break;case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(2),p.e(l.t0);case 16:return l.prev=16,p.f(),l.finish(16);case 19:if(null!==d){l.next=21;break}throw new Error("Public key not found for CT with logId: ".concat(h));case 21:if(-1!==(y=a.fromBER((0,i.stringToArrayBuffer)((0,i.fromBase64)(d)))).offset){l.next=24;break}throw new Error("Incorrect key value for CT Log with logId: ".concat(h));case 24:return f=new u.default({schema:y.result}),m.appendChar(0),m.appendChar(0),b=new ArrayBuffer(8),w=new Uint8Array(b),k=(0,i.utilToBase)(n.timestamp.valueOf(),8),l.abrupt("return",(w.set(new Uint8Array(k),8-k.byteLength),m.appendView(w),m.appendUint16(r),0===r&&m.appendUint24(t.byteLength),m.appendView(new Uint8Array(t)),m.appendUint16(n.extensions.byteLength),0!==n.extensions.byteLength&&m.appendView(new Uint8Array(n.extensions)),(0,o.getEngine)().subtle.verifyWithPublicKey(m._stream._buffer.slice(0,m._length),{valueBlock:{valueHex:n.signature.toBER(!1)}},f,{algorithmId:""},"SHA-256")));case 27:case"end":return l.stop()}},l,null,[[2,13,16,19]])}))()}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"logID":case"extensions":return new ArrayBuffer(0);case"timestamp":return new Date(0);case"hashAlgorithm":case"signatureAlgorithm":return"";case"signature":return new a.Any;default:throw new Error("Invalid member name for SignedCertificateTimestamp class: ".concat(e))}}}]),e}();t.SignedCertificateTimestamp=p;var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.timestamps=(0,i.getParametersValue)(t,"timestamps",e.defaultValues("timestamps")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(e){if(e instanceof a.OctetString==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");var t=new s.SeqStream({stream:new s.ByteStream({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new p({stream:t}))}},{key:"toSchema",value:function(){var e,t=new s.SeqStream,r=0,n=[],i=c(this.timestamps);try{for(i.s();!(e=i.n()).done;){var o=e.value.toStream();n.push(o),r+=o.stream.buffer.byteLength}}catch(f){i.e(f)}finally{i.f()}t.appendUint16(r);for(var u=0,l=n;u<l.length;u++)t.appendView(l[u].stream.view);return new a.OctetString({valueHex:t.stream.buffer.slice(0)})}},{key:"toJSON",value:function(){return{timestamps:Array.from(this.timestamps,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"timestamps":return[];default:throw new Error("Invalid member name for SignedCertificateTimestampList class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"timestamps":return 0===t.length;default:throw new Error("Invalid member name for SignedCertificateTimestampList class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new a.OctetString({name:t.blockName||"SignedCertificateTimestampList",optional:t.optional})}}]),e}();function y(){return(y=v(regeneratorRuntime.mark(function e(t,r,n){var a,i,u,l,f,h,d,m,v,p,g,y,b,w=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=w.length>3&&void 0!==w[3]?w[3]:-1,l=null,f=new s.SeqStream,void 0!==(d=(0,o.getCrypto)())){e.next=6;break}return e.abrupt("return",Promise.reject("Unable to create WebCrypto object"));case 6:m=0;case 7:if(!(m<t.extensions.length)){e.next=17;break}e.t0=t.extensions[m].extnID,e.next="1.3.6.1.4.1.11129.2.4.2"===e.t0?11:14;break;case 11:if(0!==(l=t.extensions[m].parsedValue).timestamps.length){e.next=13;break}throw new Error("Nothing to verify in the certificate");case 13:t.extensions.splice(m,1);case 14:m++,e.next=7;break;case 17:if(null!==l){e.next=19;break}throw new Error("No SignedCertificateTimestampList extension in the specified certificate");case 19:return i=t.encodeTBS().toBER(!1),e.next=22,d.digest({name:"SHA-256"},new Uint8Array(r.subjectPublicKeyInfo.toSchema().toBER(!1)));case 22:if(u=e.sent,f.appendView(new Uint8Array(u)),f.appendUint24(i.byteLength),f.appendView(new Uint8Array(i)),h=f._stream._buffer.slice(0,f._length),-1!==a){e.next=49;break}v=[],g=c(l.timestamps),e.prev=30,g.s();case 32:if((p=g.n()).done){e.next=40;break}return y=p.value,e.next=36,y.verify(n,h,1);case 36:b=e.sent,v.push(b);case 38:e.next=32;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(30),g.e(e.t1);case 45:return e.prev=45,g.f(),e.finish(45);case 48:return e.abrupt("return",v);case 49:return a>=l.timestamps.length&&(a=l.timestamps.length-1),e.next=52,l.timestamps[a].verify(n,h,1);case 52:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 54:case"end":return e.stop()}},e,null,[[30,42,45,48]])}))).apply(this,arguments)}t.default=g},52386:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=C(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(n(75530)),i=n(1971),s=n(97226),o=A(n(4987)),u=A(n(63788)),l=A(n(35585)),c=A(n(79394)),h=A(n(75341)),m=A(n(70815)),v=A(n(545)),p=A(n(88367)),g=A(n(35529)),y=A(n(77126)),b=A(n(20624)),w=A(n(77597)),k=A(n(99600)),S=A(n(64445)),P=A(n(73766));function A(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function I(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,a)}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,i.getParametersValue)(t,"version",e.defaultValues("version")),this.digestAlgorithms=(0,i.getParametersValue)(t,"digestAlgorithms",e.defaultValues("digestAlgorithms")),this.encapContentInfo=(0,i.getParametersValue)(t,"encapContentInfo",e.defaultValues("encapContentInfo")),"certificates"in t&&(this.certificates=(0,i.getParametersValue)(t,"certificates",e.defaultValues("certificates"))),"crls"in t&&(this.crls=(0,i.getParametersValue)(t,"crls",e.defaultValues("crls"))),"ocsps"in t&&(this.ocsps=(0,i.getParametersValue)(t,"ocsps",e.defaultValues("ocsps"))),this.signerInfos=(0,i.getParametersValue)(t,"signerInfos",e.defaultValues("signerInfos")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["SignedData.version","SignedData.digestAlgorithms","SignedData.encapContentInfo","SignedData.certificates","SignedData.crls","SignedData.signerInfos"]);var r=a.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SignedData");if(this.version=r.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in r.result&&(this.digestAlgorithms=Array.from(r.result["SignedData.digestAlgorithms"],function(e){return new o.default({schema:e})})),this.encapContentInfo=new u.default({schema:r.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in r.result){var n=new v.default({schema:new a.Set({value:r.result["SignedData.certificates"].valueBlock.value})});this.certificates=n.certificates.slice(0)}"SignedData.crls"in r.result&&(this.crls=Array.from(r.result["SignedData.crls"],function(e){return 1===e.idBlock.tagClass?new c.default({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new h.default({schema:e}))})),"SignedData.signerInfos"in r.result&&(this.signerInfos=Array.from(r.result["SignedData.signerInfos"],function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[];if(this.version=this.certificates&&this.certificates.length&&this.certificates.some(function(e){return e instanceof k.default})||this.crls&&this.crls.length&&this.crls.some(function(e){return e instanceof h.default})?5:this.certificates&&this.certificates.length&&this.certificates.some(function(e){return e instanceof P.default})?4:this.certificates&&this.certificates.length&&this.certificates.some(function(e){return e instanceof S.default})||this.signerInfos.some(function(e){return 3===e.version})||this.encapContentInfo.eContentType!==e.ID_DATA?3:1,r.push(new a.Integer({value:this.version})),r.push(new a.Set({value:Array.from(this.digestAlgorithms,function(e){return e.toSchema(t)})})),r.push(this.encapContentInfo.toSchema()),"certificates"in this){var n=new v.default({certificates:this.certificates}).toSchema();r.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:0},value:n.valueBlock.value}))}return"crls"in this&&r.push(new a.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,function(e){if(e instanceof h.default){var r=e.toSchema(t);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return e.toSchema(t)})})),r.push(new a.Set({value:Array.from(this.signerInfos,function(e){return e.toSchema(t)})})),new a.Sequence({value:r})}},{key:"toJSON",value:function(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,function(e){return e.toJSON()}),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,function(e){return e.toJSON()})),"crls"in this&&(e.crls=Array.from(this.crls,function(e){return e.toJSON()})),e.signerInfos=Array.from(this.signerInfos,function(e){return e.toJSON()}),e}},{key:"verify",value:function(){var e,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.signer,u=void 0===o?-1:o,c=n.data,f=void 0===c?new ArrayBuffer(0):c,h=n.trustedCerts,d=void 0===h?[]:h,m=n.checkDate,v=void 0===m?new Date:m,p=n.checkChain,k=void 0!==p&&p,S=n.extendedMode,P=void 0!==S&&S,A=n.passedWhenNotRevValues,C=void 0!==A&&A,B=n.findOrigin,_=void 0===B?null:B,j=n.findIssuer,x=void 0===j?null:j,E=this,N=Promise.resolve(),V=new ArrayBuffer(0),D="",M={},R=null,T=[],U=(0,s.getEngine)(),L=(0,s.getCrypto)();return void 0===L?Promise.reject("Unable to create WebCrypto object"):-1===u?Promise.reject(P?{date:v,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"Unable to get signer index from input parameters"):"certificates"in this==0?Promise.reject(P?{date:v,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"No certificates attached to this signed data"):(N=(N=this.signerInfos[u].sid instanceof g.default?N.then(function(){var e,t=O(r.certificates);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n instanceof l.default!=0&&n.issuer.isEqual(r.signerInfos[u].sid.issuer)&&n.serialNumber.isEqual(r.signerInfos[u].sid.serialNumber))return M=n,Promise.resolve()}}catch(a){t.e(a)}finally{t.f()}return Promise.reject(P?{date:v,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"Unable to find signer certificate")}):(e=regeneratorRuntime.mark(function e(){var t,r,n,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=E.signerInfos[u].sid,r=t.idBlock.isConstructed?t.valueBlock.value[0].valueBlock.valueHex:t.valueBlock.valueHex,a=O(E.certificates),e.prev=3,a.s();case 5:if((n=a.n()).done){e.next=17;break}if((s=n.value)instanceof l.default){e.next=9;break}return e.abrupt("continue",15);case 9:return e.next=11,L.digest({name:"sha-1"},new Uint8Array(s.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex));case 11:if(o=e.sent,!(0,i.isEqualBuffer)(o,r)){e.next=15;break}return M=s,e.abrupt("break",17);case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if(M){e.next=27;break}throw new Error("Signing certificate not found");case 27:e.next=34;break;case 29:if(e.prev=29,e.t1=e.catch(0),!P){e.next=33;break}return e.abrupt("return",Promise.reject({date:v,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}));case 33:throw"Unable to find signer certificate";case 34:case"end":return e.stop()}},e,null,[[0,29],[3,19,22,25]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){I(i,n,a,s,o,"next",e)}function o(e){I(i,n,a,s,o,"throw",e)}s(void 0)})})()).then(function(){if("1.2.840.113549.1.9.16.1.4"===r.encapContentInfo.eContentType){if("eContent"in r.encapContentInfo==0)return!1;var e,t=a.fromBER(r.encapContentInfo.eContent.valueBlock.valueHex);try{e=new y.default({schema:t.result})}catch(n){return!1}return v=e.genTime,R=e.serialNumber.valueBlock.valueHex,0===f.byteLength?Promise.reject(P?{date:v,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:M,signerCertificateVerified:null}:"Missed detached data input array"):e.verify({data:f})}return!0}),k&&(N=N.then(function(e){var n;if(!1===e)return!1;var a=Array.from(r.certificates.filter(function(e){return e instanceof l.default}),function(e){return function(e){if(!0===e.issuer.isEqual(M.issuer)&&!0===e.serialNumber.isEqual(M.serialNumber))return null;var t=!1;if("extensions"in e){var r,n=O(e.extensions);try{for(n.s();!(r=n.n()).done;){var a=r.value;"2.5.29.19"===a.extnID&&"cA"in a.parsedValue&&!0===a.parsedValue.cA&&(t=!0)}}catch(i){n.e(i)}finally{n.f()}}return t?e:null}(e)}),i={checkDate:v,certs:Array.from(a.filter(function(e){return null!==e})),trustedCerts:d};null!==x&&(i.findIssuer=x),null!==_&&(i.findOrigin=_);var s=new b.default(i);if(s.certs.push(M),"crls"in r){var o,u=O(r.crls);try{for(u.s();!(o=u.n()).done;){var c=o.value;"thisUpdate"in c?s.crls.push(c):"1.3.6.1.5.5.7.48.1.1"===c.otherRevInfoFormat&&s.ocsps.push(new w.default({schema:c.otherRevInfo}))}}catch(f){u.e(f)}finally{u.f()}}return"ocsps"in r&&(n=s.ocsps).push.apply(n,t(r.ocsps)),s.verify({passedWhenNotRevValues:C}).then(function(e){return"certificatePath"in e&&(T=e.certificatePath),!0===e.result?Promise.resolve(!0):Promise.reject(P?{date:v,code:5,message:"Validation of signer's certificate failed: ".concat(e.resultMessage),signatureVerified:null,signerCertificate:M,signerCertificateVerified:!1}:"Validation of signer's certificate failed")},function(e){return Promise.reject(P?{date:v,code:5,message:"Validation of signer's certificate failed with error: ".concat(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:M,signerCertificateVerified:!1}:"Validation of signer's certificate failed with error: ".concat(e instanceof Object?e.resultMessage:e))})})),N=(N=(N=(N=(N=N.then(function(e){if(!1===e)return!1;var t=(0,s.getAlgorithmByOID)(r.signerInfos[u].digestAlgorithm.algorithmId);return"name"in t==0?Promise.reject(P?{date:v,code:7,message:"Unsupported signature algorithm: ".concat(r.signerInfos[u].digestAlgorithm.algorithmId),signatureVerified:null,signerCertificate:M,signerCertificateVerified:!0}:"Unsupported signature algorithm: ".concat(r.signerInfos[u].digestAlgorithm.algorithmId)):(D=t.name,!0)})).then(function(e){if(!1===e)return!1;if("eContent"in r.encapContentInfo)if(1===r.encapContentInfo.eContent.idBlock.tagClass&&4===r.encapContentInfo.eContent.idBlock.tagNumber)if(!1===r.encapContentInfo.eContent.idBlock.isConstructed)f=r.encapContentInfo.eContent.valueBlock.valueHex;else{var t,n=O(r.encapContentInfo.eContent.valueBlock.value);try{for(n.s();!(t=n.n()).done;)f=(0,i.utilConcatBuf)(f,t.value.valueBlock.valueHex)}catch(h){n.e(h)}finally{n.f()}}else f=r.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===f.byteLength)return Promise.reject(P?{date:v,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:M,signerCertificateVerified:!0}:"Missed detached data input array");if("signedAttrs"in r.signerInfos[u]){var a,s=!1,o=!1,l=O(r.signerInfos[u].signedAttrs.attributes);try{for(l.s();!(a=l.n()).done;){var c=a.value;if("1.2.840.113549.1.9.3"===c.type&&(s=!0),"1.2.840.113549.1.9.4"===c.type&&(o=!0,V=c.values[0].valueBlock.valueHex),s&&o)break}}catch(h){l.e(h)}finally{l.f()}if(!1===s)return Promise.reject(P?{date:v,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:M,signerCertificateVerified:!0}:'Attribute "content-type" is a mandatory attribute for "signed attributes"');if(!1===o)return Promise.reject(P?{date:v,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:M,signerCertificateVerified:!0}:'Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0})).then(function(e){return!1!==e&&(!("signedAttrs"in r.signerInfos[u])||L.digest(D,new Uint8Array(f)))}).then(function(e){return!1!==e&&(!("signedAttrs"in r.signerInfos[u])||!!(0,i.isEqualBuffer)(e,V)&&(f=r.signerInfos[u].signedAttrs.encodedValue,!0))})).then(function(e){return!1!==e&&U.subtle.verifyWithPublicKey(f,r.signerInfos[u].signature,M.subjectPublicKeyInfo,M.signatureAlgorithm,D)})).then(function(e){return P?{date:v,code:14,message:"",signatureVerified:e,signerCertificate:M,timestampSerial:R,signerCertificateVerified:!0,certificatePath:T}:e},function(e){return Promise.reject(P?"code"in e?e:{date:v,code:15,message:"Error during verification: ".concat(e.message),signatureVerified:null,signerCertificate:M,timestampSerial:R,signerCertificateVerified:!0}:e)}))}},{key:"sign",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SHA-1",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ArrayBuffer(0);if(void 0===e)return Promise.reject("Need to provide a private key for signing");var l,c=Promise.resolve(),f=(0,s.getEngine)(),h=(0,s.getOIDByAlgorithm)({name:n});return""===h?Promise.reject("Unsupported hash algorithm: ".concat(n)):(0===this.digestAlgorithms.filter(function(e){return e.algorithmId===h}).length&&this.digestAlgorithms.push(new o.default({algorithmId:h,algorithmParams:new a.Null})),this.signerInfos[t].digestAlgorithm=new o.default({algorithmId:h,algorithmParams:new a.Null}),c=(c=(c=(c=(c=c.then(function(){return f.subtle.getSignatureParameters(e,n)})).then(function(e){l=e.parameters,r.signerInfos[t].signatureAlgorithm=e.signatureAlgorithm})).then(function(){if("signedAttrs"in r.signerInfos[t])0!==r.signerInfos[t].signedAttrs.encodedValue.byteLength?u=r.signerInfos[t].signedAttrs.encodedValue:(u=r.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1),new Uint8Array(u)[0]=49);else if("eContent"in r.encapContentInfo)if(1===r.encapContentInfo.eContent.idBlock.tagClass&&4===r.encapContentInfo.eContent.idBlock.tagNumber)if(!1===r.encapContentInfo.eContent.idBlock.isConstructed)u=r.encapContentInfo.eContent.valueBlock.valueHex;else{var e,n=O(r.encapContentInfo.eContent.valueBlock.value);try{for(n.s();!(e=n.n()).done;)u=(0,i.utilConcatBuf)(u,e.value.valueBlock.valueHex)}catch(a){n.e(a)}finally{n.f()}}else u=r.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===u.byteLength)return Promise.reject("Missed detached data input array");return Promise.resolve()})).then(function(){return f.subtle.signWithPrivateKey(u,e,l)})).then(function(e){return r.signerInfos[t].signature=new a.OctetString({valueHex:e}),e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new u.default;case"certificates":case"crls":case"ocsps":case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"encapContentInfo":return new u.default;case"digestAlgorithms":case"certificates":case"crls":case"ocsps":case"signerInfos":return 0===r.length;default:throw new Error("Invalid member name for SignedData class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new a.Sequence({name:t.blockName||"SignedData",optional:t.optional,value:[new a.Integer({name:t.version||"SignedData.version"}),new a.Set({value:[new a.Repeated({name:t.digestAlgorithms||"SignedData.digestAlgorithms",value:o.default.schema()})]}),u.default.schema(t.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new a.Constructed({name:t.certificates||"SignedData.certificates",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:v.default.schema().valueBlock.value}),new a.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:p.default.schema(t.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new a.Set({value:[new a.Repeated({name:t.signerInfos||"SignedData.signerInfos",value:m.default.schema()})]})]})}}]),e}();r.default=_,_.ID_DATA="1.2.840.113549.1.7.1"},70815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=u(r(4987)),s=u(r(89945)),o=u(r(35529));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.sid=(0,a.getParametersValue)(t,"sid",e.defaultValues("sid")),this.digestAlgorithm=(0,a.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),"signedAttrs"in t&&(this.signedAttrs=(0,a.getParametersValue)(t,"signedAttrs",e.defaultValues("signedAttrs"))),this.signatureAlgorithm=(0,a.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,a.getParametersValue)(t,"signature",e.defaultValues("signature")),"unsignedAttrs"in t&&(this.unsignedAttrs=(0,a.getParametersValue)(t,"unsignedAttrs",e.defaultValues("unsignedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["SignerInfo.version","SignerInfo.sid","SignerInfo.digestAlgorithm","SignerInfo.signedAttrs","SignerInfo.signatureAlgorithm","SignerInfo.signature","SignerInfo.unsignedAttrs"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SignerInfo");this.version=r.result["SignerInfo.version"].valueBlock.valueDec;var u=r.result["SignerInfo.sid"];this.sid=1===u.idBlock.tagClass?new o.default({schema:u}):u,this.digestAlgorithm=new i.default({schema:r.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in r.result&&(this.signedAttrs=new s.default({type:0,schema:r.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new i.default({schema:r.result["SignerInfo.signatureAlgorithm"]}),this.signature=r.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in r.result&&(this.unsignedAttrs=new s.default({type:1,schema:r.result["SignerInfo.unsignedAttrs"]}))}},{key:"toSchema",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t=[];return t.push(new n.Integer({value:this.version})),t.push(this.sid instanceof o.default?this.sid.toSchema():this.sid),t.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&!1===e.compareWithDefault("signedAttrs",this.signedAttrs)&&t.push(this.signedAttrs.toSchema()),t.push(this.signatureAlgorithm.toSchema()),t.push(this.signature),"unsignedAttrs"in this&&!1===e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&t.push(this.unsignedAttrs.toSchema()),new n.Sequence({value:t})}},{key:"toJSON",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t={version:this.version};return this.sid instanceof n.Any||(t.sid=this.sid.toJSON()),t.digestAlgorithm=this.digestAlgorithm.toJSON(),!1===e.compareWithDefault("signedAttrs",this.signedAttrs)&&(t.signedAttrs=this.signedAttrs.toJSON()),t.signatureAlgorithm=this.signatureAlgorithm.toJSON(),t.signature=this.signature.toJSON(),!1===e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&(t.unsignedAttrs=this.unsignedAttrs.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"sid":return new n.Any;case"digestAlgorithm":return new i.default;case"signedAttrs":return new s.default({type:0});case"signatureAlgorithm":return new i.default;case"signature":return new n.OctetString;case"unsignedAttrs":return new s.default({type:1});default:throw new Error("Invalid member name for SignerInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return e.defaultValues("version")===r;case"sid":return r instanceof n.Any;case"digestAlgorithm":return r instanceof i.default!=0&&r.isEqual(e.defaultValues("digestAlgorithm"));case"signedAttrs":return s.default.compareWithDefault("type",r.type)&&s.default.compareWithDefault("attributes",r.attributes)&&s.default.compareWithDefault("encodedValue",r.encodedValue);case"signatureAlgorithm":return r instanceof i.default!=0&&r.isEqual(e.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return s.default.compareWithDefault("type",r.type)&&s.default.compareWithDefault("attributes",r.attributes)&&s.default.compareWithDefault("encodedValue",r.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:"SignerInfo",value:[new n.Integer({name:t.version||"SignerInfo.version"}),new n.Choice({value:[o.default.schema(t.sid||{names:{blockName:"SignerInfo.sid"}}),new n.Choice({value:[new n.Constructed({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new n.OctetString]}),new n.Primitive({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new n.OctetString]})]})]}),i.default.schema(t.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),s.default.schema(t.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),i.default.schema(t.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new n.OctetString({name:t.signature||"SignerInfo.signature"}),s.default.schema(t.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}}]),e}();t.default=c},71852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=u(r(42689)),s=u(r(51090)),o=u(r(39327));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.certID=(0,a.getParametersValue)(t,"certID",e.defaultValues("certID")),this.certStatus=(0,a.getParametersValue)(t,"certStatus",e.defaultValues("certStatus")),this.thisUpdate=(0,a.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,a.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"singleExtensions"in t&&(this.singleExtensions=(0,a.getParametersValue)(t,"singleExtensions",e.defaultValues("singleExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["certID","certStatus","thisUpdate","nextUpdate","singleExtensions"]);var r=n.compareSchema(t,t,e.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new i.default({schema:r.result.certID}),this.certStatus=r.result.certStatus,this.thisUpdate=r.result.thisUpdate.toDate(),"nextUpdate"in r.result&&(this.nextUpdate=r.result.nextUpdate.toDate()),"singleExtensions"in r.result&&(this.singleExtensions=Array.from(r.result.singleExtensions.valueBlock.value,function(e){return new s.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new n.GeneralizedTime({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.GeneralizedTime({valueDate:this.nextUpdate})]})),"singleExtensions"in this&&e.push(new n.Sequence({value:Array.from(this.singleExtensions,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certID":return new i.default;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"certID":return i.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&i.default.compareWithDefault("issuerNameHash",r.issuerNameHash)&&i.default.compareWithDefault("issuerKeyHash",r.issuerKeyHash)&&i.default.compareWithDefault("serialNumber",r.serialNumber);case"certStatus":return 0===Object.keys(r).length;case"thisUpdate":case"nextUpdate":return r===e.defaultValues(t);default:throw new Error("Invalid member name for SingleResponse class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[i.default.schema(t.certID||{}),new n.Choice({value:[new n.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new n.Constructed({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new n.GeneralizedTime,new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Enumerated]})]}),new n.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new n.GeneralizedTime({name:t.thisUpdate||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.GeneralizedTime({name:t.nextUpdate||""})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[o.default.schema(t.singleExtensions||{})]})]})}}]),e}();t.default=c},32488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(68681))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.attributes=(0,i.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,i.clearProps)(t,["attributes"]);var r=a.compareSchema(t,t,e.schema({names:{attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new s.default({schema:e})})}},{key:"toSchema",value:function(){return new a.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getParametersValue)(e,"names",{});return new a.Sequence({name:t.blockName||"",value:[new a.Repeated({name:t.attributes||"",value:s.default.schema()})]})}}]),e}();t.default=u},77126:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),i=r(97226),s=c(r(84690)),o=c(r(13264)),u=c(r(29260)),l=c(r(51090));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.version=(0,a.getParametersValue)(t,"version",e.defaultValues("version")),this.policy=(0,a.getParametersValue)(t,"policy",e.defaultValues("policy")),this.messageImprint=(0,a.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),this.serialNumber=(0,a.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.genTime=(0,a.getParametersValue)(t,"genTime",e.defaultValues("genTime")),"accuracy"in t&&(this.accuracy=(0,a.getParametersValue)(t,"accuracy",e.defaultValues("accuracy"))),"ordering"in t&&(this.ordering=(0,a.getParametersValue)(t,"ordering",e.defaultValues("ordering"))),"nonce"in t&&(this.nonce=(0,a.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"tsa"in t&&(this.tsa=(0,a.getParametersValue)(t,"tsa",e.defaultValues("tsa"))),"extensions"in t&&(this.extensions=(0,a.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["TSTInfo.version","TSTInfo.policy","TSTInfo.messageImprint","TSTInfo.serialNumber","TSTInfo.genTime","TSTInfo.accuracy","TSTInfo.ordering","TSTInfo.nonce","TSTInfo.tsa","TSTInfo.extensions"]);var r=n.compareSchema(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TSTInfo");this.version=r.result["TSTInfo.version"].valueBlock.valueDec,this.policy=r.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new s.default({schema:r.result["TSTInfo.messageImprint"]}),this.serialNumber=r.result["TSTInfo.serialNumber"],this.genTime=r.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in r.result&&(this.accuracy=new o.default({schema:r.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in r.result&&(this.ordering=r.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in r.result&&(this.nonce=r.result["TSTInfo.nonce"]),"TSTInfo.tsa"in r.result&&(this.tsa=new u.default({schema:r.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in r.result&&(this.extensions=Array.from(r.result["TSTInfo.extensions"],function(e){return new l.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new n.Integer({value:this.version})),e.push(new n.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new n.GeneralizedTime({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new n.Boolean({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new n.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),e}},{key:"verify",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Promise.resolve(),s=null,o=null,u=(0,i.getCrypto)();if(void 0===u)return Promise.reject("Unable to create WebCrypto object");if(!("data"in r))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');if(e=r.data,"notBefore"in r&&(s=r.notBefore),"notAfter"in r&&(o=r.notAfter),null!==s&&this.genTime<s)return Promise.reject("Generation time for TSTInfo object is less than notBefore value");if(null!==o&&this.genTime>o)return Promise.reject("Generation time for TSTInfo object is more than notAfter value");var l=(0,i.getAlgorithmByOID)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in l==0?Promise.reject("Unsupported signature algorithm: ".concat(this.messageImprint.hashAlgorithm.algorithmId)):n=n.then(function(){return u.digest(l.name,new Uint8Array(e))}).then(function(e){return(0,a.isEqualBuffer)(e,t.messageImprint.hashedMessage.valueBlock.valueHex)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new s.default;case"serialNumber":return new n.Integer;case"genTime":return new Date(0,0,0);case"accuracy":return new o.default;case"ordering":return!1;case"nonce":return new n.Integer;case"tsa":return new u.default;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"policy":case"genTime":case"ordering":return r===e.defaultValues(t);case"messageImprint":return s.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&s.default.compareWithDefault("hashedMessage",r.hashedMessage);case"serialNumber":case"nonce":return r.isEqual(e.defaultValues(t));case"accuracy":return o.default.compareWithDefault("seconds",r.seconds)&&o.default.compareWithDefault("millis",r.millis)&&o.default.compareWithDefault("micros",r.micros);case"tsa":return u.default.compareWithDefault("type",r.type)&&u.default.compareWithDefault("value",r.value);case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TSTInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"TSTInfo",value:[new n.Integer({name:t.version||"TSTInfo.version"}),new n.ObjectIdentifier({name:t.policy||"TSTInfo.policy"}),s.default.schema(t.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new n.Integer({name:t.serialNumber||"TSTInfo.serialNumber"}),new n.GeneralizedTime({name:t.genTime||"TSTInfo.genTime"}),o.default.schema(t.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new n.Boolean({name:t.ordering||"TSTInfo.ordering",optional:!0}),new n.Integer({name:t.nonce||"TSTInfo.nonce",optional:!0}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[u.default.schema(t.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.extensions||"TSTInfo.extensions",value:l.default.schema(t.extension||{})})]})]})}}]),e}();t.default=m},26466:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.type=(0,a.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,a.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return d(e,[{key:"fromSchema",value:function(t){(0,a.clearProps)(t,["utcTimeName","generalTimeName"]);var r=n.compareSchema(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Time");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new n.UTCTime({valueDate:this.value})),1===this.type&&(e=new n.GeneralizedTime({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,a.getParametersValue)(e,"names",{});return new n.Choice({optional:t,value:[new n.UTCTime({name:r.utcTimeName||""}),new n.GeneralizedTime({name:r.generalTimeName||""})]})}}]),e}();t.default=s},97226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCMSECDSASignature=function(e){if(e.byteLength%2!=0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t);new Uint8Array(r).set(new Uint8Array(e,0,t));var n=new a.Integer({valueHex:r}),i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(e,t,t));var s=new a.Integer({valueHex:i});return new a.Sequence({value:[n.convertToDER(),s.convertToDER()]}).toBER(!1)},t.createECDSASignatureFromCMS=function(e){if(e instanceof a.Sequence==0)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof a.Integer==0)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof a.Integer==0)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();switch(!0){case t.valueBlock.valueHex.byteLength<r.valueBlock.valueHex.byteLength:if(r.valueBlock.valueHex.byteLength-t.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");var n=r.valueBlock.valueHex.byteLength,s=new Uint8Array(t.valueBlock.valueHex),o=new ArrayBuffer(n),u=new Uint8Array(o);return u.set(s,1),u[0]=0,(0,i.utilConcatBuf)(o,r.valueBlock.valueHex);case t.valueBlock.valueHex.byteLength>r.valueBlock.valueHex.byteLength:if(t.valueBlock.valueHex.byteLength-r.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");var l=t.valueBlock.valueHex.byteLength,c=new Uint8Array(r.valueBlock.valueHex),f=new ArrayBuffer(l),h=new Uint8Array(f);return h.set(c,1),h[0]=0,(0,i.utilConcatBuf)(t.valueBlock.valueHex,f);default:if(t.valueBlock.valueHex.byteLength%2){var d=t.valueBlock.valueHex.byteLength+1,m=new Uint8Array(t.valueBlock.valueHex),v=new ArrayBuffer(d),p=new Uint8Array(v);p.set(m,1),p[0]=0;var g=new Uint8Array(r.valueBlock.valueHex),y=new ArrayBuffer(d),b=new Uint8Array(y);return b.set(g,1),b[0]=0,(0,i.utilConcatBuf)(v,y)}}return(0,i.utilConcatBuf)(t.valueBlock.valueHex,r.valueBlock.valueHex)},t.getAlgorithmByOID=function(e){return h().subtle.getAlgorithmByOID(e)},t.getAlgorithmParameters=function(e,t){return h().subtle.getAlgorithmParameters(e,t)},t.getCrypto=d,t.getEngine=h,t.getHashAlgorithm=function(e){return h().subtle.getHashAlgorithm(e)},t.getOIDByAlgorithm=function(e){return h().subtle.getOIDByAlgorithm(e)},t.getRandomValues=function(e){return h().subtle.getRandomValues(e)},t.kdf=function(e,t,r,n){var a=0,s=1,o=[];switch(e.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:return Promise.reject("Unknown hash function: ".concat(e))}if(t instanceof ArrayBuffer==0)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==0)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var l=r/a;Math.floor(l)>0&&(l-(s=Math.floor(l))>0&&s++);for(var c=1;c<=s;c++)o.push(m(e,t,c,n));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),n=1,a=!0;a;){a=!1;var s,o=u(e);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.counter===n){t=(0,i.utilConcatBuf)(t,l.result),a=!0;break}}}catch(m){o.e(m)}finally{o.f()}n++}if(t.byteLength>(r>>=3)){for(var c=new ArrayBuffer(r),f=new Uint8Array(c),h=new Uint8Array(t),d=0;d<r;d++)f[d]=h[d];return c}return t})},t.kdfWithCounter=m,t.setEngine=f,t.stringPrep=function(e){for(var t=!1,r="",n=e.trim(),a=0;a<n.length;a++)32===n.charCodeAt(a)?!1===t&&(t=!0):(t&&(r+=" ",t=!1),r+=n[a]);return r.toLowerCase()};var n,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),s=(n=r(48435))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={name:"none",crypto:null,subtle:null};function f(e,t,r){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){if(void 0===global[process.pid])global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error("Name global.".concat(process.pid," already exists and it is not an object"));if(void 0===global[process.pid].pkijs)global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error("Name global.".concat(process.pid,".pkijs already exists and it is not an object"));global[process.pid].pkijs.engine={name:e,crypto:t,subtle:r}}else c.name!==e&&(c={name:e,crypto:t,subtle:r})}function h(){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){var e;try{e=global[process.pid].pkijs.engine}catch(t){throw new Error('Please call "setEngine" before call to "getEngine"')}return e}return c}function d(){var e=h();if(null!==e.subtle)return e.subtle}function m(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: ".concat(e))}if(t instanceof ArrayBuffer==0)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==0)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var a=new ArrayBuffer(4),s=new Uint8Array(a);s[0]=0,s[1]=0,s[2]=0,s[3]=r;var o=new ArrayBuffer(0),u=d();return void 0===u?Promise.reject("Unable to create WebCrypto object"):(o=(0,i.utilConcatBuf)(o,t),o=(0,i.utilConcatBuf)(o,a),o=(0,i.utilConcatBuf)(o,n),u.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}!function(){if("undefined"!=typeof self&&"crypto"in self){var e,t="webcrypto",r=self.crypto;if("webkitSubtle"in self.crypto){try{e=self.crypto.webkitSubtle}catch(n){e=self.crypto.subtle}t="safari"}"subtle"in self.crypto&&(e=self.crypto.subtle),c=void 0===e?{name:t,crypto:r,subtle:null}:{name:t,crypto:r,subtle:new s.default({name:t,crypto:self.crypto,subtle:e})}}f(c.name,c.crypto,c.subtle)}()},27286:function(e,t){!function(e){"use strict";var t=function(){function e(){f(this,e)}return d(e,null,[{key:"isArrayBuffer",value:function(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}},{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){return this.toView(e,Uint8Array)}},{key:"toView",value:function(e,t){if("undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e))return new t(e.buffer,e.byteOffset,e.byteLength);if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}},{key:"isArrayBufferView",value:function(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}},{key:"isEqual",value:function(t,r){var n=e.toUint8Array(t),a=e.toUint8Array(r);if(n.length!==a.byteLength)return!1;for(var i=0;i<n.length;i++)if(n[i]!==a[i])return!1;return!0}}]),e}(),n=function(){function e(){f(this,e)}return d(e,null,[{key:"fromString",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"toString",value:function(e){for(var r=t.toUint8Array(e),n="",a=0;a<r.length;a++)n+=String.fromCharCode(r[a]);return decodeURIComponent(escape(n))}}]),e}(),a=function(){function e(){f(this,e)}return d(e,null,[{key:"toString",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.toArrayBuffer(e),a=new DataView(n),i="",s=0;s<n.byteLength;s+=2){var o=a.getUint16(s,r);i+=String.fromCharCode(o)}return i}},{key:"fromString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new ArrayBuffer(2*e.length),n=new DataView(r),a=0;a<e.length;a++)n.setUint16(2*a,e.charCodeAt(a),t);return r}}]),e}(),i=function(){var e=function(){function e(){f(this,e)}return d(e,null,[{key:"isHex",value:function(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}},{key:"isBase64",value:function(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{key:"isBase64Url",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}},{key:"ToString",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",n=t.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return a.toString(n,!0);case"utf16":case"utf16be":return a.toString(n);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return a.fromString(e,!0);case"utf16":case"utf16be":return a.fromString(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var r=t.toUint8Array(e);if("undefined"!=typeof btoa){var n=this.ToString(r,"binary");return btoa(n)}return Buffer.from(r).toString("base64")}},{key:"FromBase64",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}},{key:"FromBase64Url",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DEFAULT_UTF8_ENCODING;switch(r){case"ascii":return this.FromBinary(t);case"utf8":return n.fromString(t);case"utf16":case"utf16be":return a.fromString(t);case"utf16le":case"usc2":return a.fromString(t,!0);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}},{key:"ToUtf8String",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DEFAULT_UTF8_ENCODING;switch(r){case"ascii":return this.ToBinary(t);case"utf8":return n.toString(t);case"utf16":case"utf16be":return a.toString(t);case"utf16le":case"usc2":return a.toString(t,!0);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var r=t.toUint8Array(e),n="",a=0;a<r.length;a++)n+=String.fromCharCode(r[a]);return n}},{key:"ToHex",value:function(e){for(var r=t.toUint8Array(e),n=[],a=r.length,i=0;i<a;i++){var s=r[i].toString(16).padStart(2,"0");n.push(s)}return n.join("")}},{key:"FromHex",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r="0".concat(r));for(var n=new Uint8Array(r.length/2),a=0;a<r.length;a+=2){var i=r.slice(a,a+2);n[a/2]=parseInt(i,16)}return n.buffer}},{key:"ToUtf16String",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.toString(e,t)}},{key:"FromUtf16String",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.fromString(e,t)}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}},{key:"formatString",value:function(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}]),e}();return e.DEFAULT_UTF8_ENCODING="utf8",e}();e.BufferSourceConverter=t,e.Convert=i,e.assign=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=arguments[0],i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)a[o]=s[o]}return a},e.combine=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t}),i=new Uint8Array(a),s=0;return t.map(function(e){return new Uint8Array(e)}).forEach(function(e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;i[s++]=a}}catch(o){n.e(o)}finally{n.f()}}),i.buffer},e.isEqual=function(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<e.byteLength;a++)if(r[a]!==n[a])return!1;return!0},Object.defineProperty(e,"__esModule",{value:!0})}(t)},1971:function(e,t,n){"use strict";function a(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function i(e,t,r){var n;return e instanceof Object==0?r:null!==(n=e[t])&&void 0!==n?n:r}function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="",o=r(new Uint8Array(e,n,a));try{for(o.s();!(t=o.n()).done;){var u=t.value,l=u.toString(16).toUpperCase();1===l.length&&(s+="0"),s+=l,i&&(s+=" ")}}catch(c){o.e(c)}finally{o.f()}return s.trim()}function o(e,t,r,n){return t instanceof ArrayBuffer?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0&&(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)}function u(e,t){var r=0;if(1===e.length)return e[0];for(var n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function l(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=r,a=e,i=0,s=Math.pow(2,t),o=1;o<8;o++){if(e<s){var u=void 0;if(n<0)u=new ArrayBuffer(o),i=o;else{if(n<o)return new ArrayBuffer(0);u=new ArrayBuffer(n),i=n}for(var l=new Uint8Array(u),c=o-1;c>=0;c--){var f=Math.pow(2,c*t);l[i-c-1]=Math.floor(a/f),a-=l[i-c-1]*f}return u}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function c(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,s=n;i<s.length;i++){var o=s[i];e+=o.byteLength}for(var u=new ArrayBuffer(e),l=new Uint8Array(u),c=0,f=n;c<f.length;c++){var h=f[c];l.set(new Uint8Array(h),t),t+=h.byteLength}return u}function f(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,s=n;i<s.length;i++){var o=s[i];e+=o.length}for(var u=new ArrayBuffer(e),l=new Uint8Array(u),c=0,f=n;c<f.length;c++){var h=f[c];l.set(h,t),t+=h.length}return l}function h(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=0===e[0]&&0==(128&e[1]);(255===e[0]&&128&e[1]||t)&&this.warnings.push("Needlessly long format")}for(var r=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(r),a=0;a<this.valueHex.byteLength;a++)n[a]=0;n[0]=128&e[0];for(var i=u(n,8),s=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(s),l=0;l<this.valueHex.byteLength;l++)o[l]=e[l];return o[0]&=127,u(o,8)-i}function d(e){for(var t=e<0?-1*e:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var a=l(r-t,8,n);return new Uint8Array(a)[0]|=128,a}var i=l(t,8,n),s=new Uint8Array(i);if(128&s[0]){var o=i.slice(0),u=new Uint8Array(o);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(var c=0;c<o.byteLength;c++)s[c+1]=u[c];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function m(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}function v(e,t){var r=e.toString(10);if(t<r.length)return"";for(var n=t-r.length,a=new Array(n),i=0;i<n;i++)a[i]="0";return a.join("").concat(r)}n.r(t),n.d(t,{arrayBufferToString:function(){return w},bufferToHexCodes:function(){return s},checkBufferParams:function(){return o},clearProps:function(){return A},fromBase64:function(){return b},getParametersValue:function(){return i},getUTCDate:function(){return a},isEqualBuffer:function(){return m},nearestPowerOf2:function(){return P},padNumber:function(){return v},stringToArrayBuffer:function(){return k},toBase64:function(){return y},utilConcatBuf:function(){return c},utilConcatView:function(){return f},utilDecodeTC:function(){return h},utilEncodeTC:function(){return d},utilFromBase:function(){return u},utilToBase:function(){return l}});var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=0,i=0,s=0,o="",u=t?g:p;if(n){for(var l=0,c=0;c<e.length;c++)if(0!==e.charCodeAt(c)){l=c;break}e=e.slice(l)}for(;a<e.length;){var f=e.charCodeAt(a++);a>=e.length&&(i=1);var h=e.charCodeAt(a++);a>=e.length&&(s=1);var d=e.charCodeAt(a++),m=f>>2,v=(3&f)<<4|h>>4,y=(15&h)<<2|d>>6,b=63&d;1===i?y=b=64:1===s&&(b=64),o+=r?64===y?"".concat(u.charAt(m)).concat(u.charAt(v)):64===b?"".concat(u.charAt(m)).concat(u.charAt(v)).concat(u.charAt(y)):"".concat(u.charAt(m)).concat(u.charAt(v)).concat(u.charAt(y)).concat(u.charAt(b)):"".concat(u.charAt(m)).concat(u.charAt(v)).concat(u.charAt(y)).concat(u.charAt(b))}return o}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t?g:p;function a(e){for(var t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function i(e){return 64===e?0:e}for(var s=0,o="";s<e.length;){var u=a(e.charAt(s++)),l=s>=e.length?0:a(e.charAt(s++)),c=s>=e.length?0:a(e.charAt(s++)),f=s>=e.length?0:a(e.charAt(s++)),h=i(u)<<2|i(l)>>4,d=(15&i(l))<<4|i(c)>>2,m=(3&i(c))<<6|i(f);o+=String.fromCharCode(h),64!==c&&(o+=String.fromCharCode(d)),64!==f&&(o+=String.fromCharCode(m))}if(r){for(var v=-1,y=o.length-1;y>=0;y--)if(0!==o.charCodeAt(y)){v=y;break}o=-1!==v?o.slice(0,v+1):""}return o}function w(e){var t,n="",a=r(new Uint8Array(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;n+=String.fromCharCode(i)}}catch(s){a.e(s)}finally{a.f()}return n}function k(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r}var S=Math.log(2);function P(e){var t=Math.log(e)/S,r=Math.floor(t),n=Math.round(t);return r===n?r:n}function A(e,t){var n,a=r(t);try{for(a.s();!(n=a.n()).done;){delete e[n.value]}}catch(i){a.e(i)}finally{a.f()}}},57714:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(93576);t.Observable=n.Observable},46056:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(57714))},93576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15730),a=r(67104),i=r(96232),s=r(23915),o=r(68273),u=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=a.toSubscriber(e,t,r);if(i.add(n?n.call(i,this.source):this.source||o.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){o.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=l(t))(function(t,n){var a;a=r.subscribe(function(t){try{e(t)}catch(r){n(r),a&&a.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[i.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=l(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=o.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=u},16011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(68273),a=r(32434);t.empty={closed:!0,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling)throw e;a.hostReportError(e)},complete:function(){}}},67241:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(67382),s=r(16011),o=r(43984),u=r(81476),l=r(68273),c=r(32434),f=function(e){function t(r,n,a){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s.empty;break;case 1:if(!r){i.destination=s.empty;break}if("object"==typeof r){r instanceof t?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new h(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new h(i,r,n,a)}return i}return a(t,e),t.prototype[u.rxSubscriber]=function(){return this},t.create=function(e,r,n){var a=new t(e,r,n);return a.syncErrorThrowable=!1,a},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.Subscription);t.Subscriber=f;var h=function(e){function t(t,r,n,a){var o,u=e.call(this)||this;u._parentSubscriber=t;var l=u;return i.isFunction(r)?o=r:r&&(o=r.next,n=r.error,a=r.complete,r!==s.empty&&(l=Object.create(r),i.isFunction(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=o,u._error=n,u._complete=a,u}return a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):c.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;c.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw r;c.hostReportError(r)}},t.prototype.__tryOrSetError=function(e,t,r){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return l.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(c.hostReportError(n),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(f);t.SafeSubscriber=h},43984:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40993),a=r(54720),i=r(67382),s=r(18574),o=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this._parentOrParents,o=this._ctorUnsubscribe,l=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var f=0;f<r.length;++f)r[f].remove(this);if(i.isFunction(l)){o&&(this._unsubscribe=void 0);try{l.call(this)}catch(m){t=m instanceof s.UnsubscriptionError?u(m.errors):[m]}}if(n.isArray(c)){f=-1;for(var h=c.length;++f<h;){var d=c[f];if(a.isObject(d))try{d.unsubscribe()}catch(m){t=t||[],m instanceof s.UnsubscriptionError?t=t.concat(u(m.errors)):t.push(m)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=r._parentOrParents;if(null===a)r._parentOrParents=this;else if(a instanceof e){if(a===this)return r;r._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return r;a.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)},[])}t.Subscription=o},68273:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},96232:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},81476:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},18574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=r},15730:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67241);t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof n.Subscriber?t:null}return!0}},32434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}},72516:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e}},40993:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},67382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},54720:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},23915:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(72516);function a(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)},t.pipeFromArray=a},67104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67241),a=r(81476),i=r(16011);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[a.rxSubscriber])return e[a.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(i.empty)}},25865:function(r,n,a){"use strict";a.r(n),a.d(n,{ListViewModule:function(){return Ze}});var i=a(38583),o=a(37716),l=a(99763),c=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-list-view"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"router-outlet")},directives:[l.lC],encapsulation:2}),e}(),h=a(46056),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UTC";return new Intl.DateTimeFormat("en-GB",{timeZone:t}),new Date(e).toISOString().slice(0,19).replace("T"," ")},v={device:{id:{title:"ID",type:"number",description:"identifier"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of device",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},organization:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list"],required:!0},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list"],required:!0},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list"],required:!0},federationType:{title:"Federation type",type:"string",description:"OpenID Connect federation type",visibleFrom:["detail"],immutable:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},service:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of service",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},instanceVersion:{title:"Instance version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},oidcAccessType:{title:"Access type",type:"string",description:"OpenID Connect access type",visibleFrom:["detail"]},oidcClientId:{title:"OIDC client ID",type:"string",description:"OpenID Connect client ID",visibleFrom:["detail"]},vessel:{title:"Vessel",type:"string",description:"Correlated vessel",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},user:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},firstName:{title:"First name",type:"string",visibleFrom:["detail","list"],required:!0},lastName:{title:"Last name",type:"string",visibleFrom:["detail","list"],required:!0},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],immutable:!0,required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["detail","list"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},vessel:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of device",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},imoNumber:{title:"IMO number",type:"string",visibleFrom:["detail","list"]},mmsiNumber:{title:"MMSI number",type:"string",visibleFrom:["detail","list"]},callsign:{title:"Call sign",type:"string",visibleFrom:["detail","list"]},flagstate:{title:"Flag state",type:"string",visibleFrom:["detail","list"]},aisClass:{title:"AIS class",type:"string",visibleFrom:["detail","list"]},portOfRegister:{title:"Port of register",type:"string",visibleFrom:["detail","list"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},role:{id:{title:"ID",type:"number"},roleName:{title:"Role name",type:"string",visibleFrom:["detail","list"],required:!0},permission:{title:"Permission",type:"string",visibleFrom:["detail","list"],required:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},approveorg:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list"],required:!0},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list"],required:!0},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list"],required:!0},federationType:{title:"Federation type",type:"string",description:"OpenID Connect federation type",visibleFrom:["detail"],immutable:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},instance:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list"],required:!0},version:{title:"Instance version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},serviceType:{title:"Type",type:"string",description:"Type",visibleFrom:["detail","list"]},status:{title:"Status",type:"string",visibleFrom:["detail"]},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization",type:"string",visibleFrom:["detail"],immutable:!0,required:!0},keywords:{title:"Keywords",type:"string",visibleFrom:["detail"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},approvesvc:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"Unique identifier of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["detail"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},instanceVersion:{title:"Instance version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},oidcAccessType:{title:"Access type",type:"string",description:"OpenID Connect access type",visibleFrom:["detail"]},oidcClientId:{title:"OIDC client ID",type:"string",description:"OpenID Connect client ID",visibleFrom:["detail"]},vessel:{title:"Vessel",type:"string",description:"Correlated vessel",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:function(e){return m(e)},immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}}},p=a(70419),g=["device","vessel","user","service","organization","role","agent","instance","approveorg","approvesvc"],y=["device","vessel","user","service","organization","mms"],b=(function(e){e.Device="device",e.Organization="organization",e.Service="service",e.User="user",e.Vessel="vessel",e.MMS="mms"}(b||(b={})),b),w=["device","vessel","user","service","role","agent"],k={vessel:"vessel",device:"device",user:"user",organization:"organization",service:"service",role:"role",agent:"agent",mms:"mms",instance:"instance",unapprovedorg:"approveorg",approveorg:"unapproved organization",approvesvc:"unapproved service"},S={vessel:"ship",device:"hdd",user:"user",organization:"flag",service:"cog",role:"id-badge",agent:"user",mms:"forward",instance:"compass",approveorg:"clipboard",approvesvc:"clipboard"},P=a(77229),A=(function(e){e.AttributeNameEnum={ImoNumber:"imo-number",MmsiNumber:"mmsi-number",Callsign:"callsign",Flagstate:"flagstate",AisClass:"ais-class",PortOfRegister:"port-of-register"}}(A||(A={})),A),C=function(e){var t={};for(var r in e)if("attributes"===r){var n=function(n){var a=O(e[r][n].attributeName);Object.values(A.AttributeNameEnum).find(function(e){return e===a})&&(t[I(a)]=e[r][n].attributeValue)};for(var a in e[r])n(a)}else t[r]=r.endsWith("At")?m(parseInt(e[r])):e[r];return t},I=function(e){return e.split("-").reduce(function(e,t,r){return 0===r?t.toLowerCase():"".concat(e).concat(t.charAt(0).toUpperCase()).concat(t.substr(1).toLowerCase())},"")},O=function(e){return e.replace(/[A-Z]/g,function(e){return"-".concat(e.toLowerCase())})},B=a(47770),_=a(8996),j=a(76009),x=a(53542),E=(a(79774),a(34869),a(1502),a(21831)),N=a(67126),V=a(32826),D=a(36276);a(19454);var M={Unspecified:"unspecified",Keycompromise:"keycompromise",Cacompromise:"cacompromise",Affiliationchanged:"affiliationchanged",Superseded:"superseded",Cessationofoperation:"cessationofoperation",Certificatehold:"certificatehold",Removefromcrl:"removefromcrl",Privilegewithdrawn:"privilegewithdrawn",Aacompromise:"aacompromise"};a(43355),a(45556),a(18649);var R=a(33037),T=a(98609),U=a(50384);function L(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().onAddNew()}),o["\u0275\u0275text"](1,"Add new"),o["\u0275\u0275elementEnd"]()}}function H(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"ng2-smart-table",11),o["\u0275\u0275listener"]("edit",function(e){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().onEdit(e)})("delete",function(e){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().onDelete(e)}),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("settings",n.settings)("source",n.source)}}var K=function(){var r=function(){function r(e,t,n,a,i,s,o,u,l,c,d,m){var g=this;f(this,r),this.router=e,this.userControllerService=n,this.deviceControllerService=a,this.roleControllerService=i,this.vesselControllerService=s,this.serviceControllerService=o,this.instanceControllerService=u,this.mmsControllerService=l,this.organizationControllerService=c,this.notifierService=d,this.authService=m,this.menuType="device",this.title=" for ",this.contextForAttributes="list",this.orgName="MCC",this.orgMrn="",this.iconName="circle",this.menuTypeName="",this.data=[],this.isLoading=!1,this.mySettings={mode:"external",edit:{editButtonContent:'<i class="nb-compose"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:v[this.menuType],hideSubHeader:!0},this.showTables=!0,this.source=new p.nC,this.deleteData=function(e,t,r,n,a){return e===k.user?g.userControllerService.deleteUser(t,r):e===k.device?g.deviceControllerService.deleteDevice(t,r):e===k.vessel?g.vesselControllerService.deleteVessel(t,r):e===k.mms?g.mmsControllerService.deleteMMS(t,r):e===k.service&&n?g.serviceControllerService.deleteService(t,r,n):e===k.organization?g.organizationControllerService.deleteOrg(r):e===k.role&&a?g.roleControllerService.deleteRole(t,a):new h.Observable},this.loadMyOrganization=function(){return g.organizationControllerService.getOrganizationByMrn(g.authService.authState.orgMrn)},this.loadServiceInstances=function(){return g.instanceControllerService.getInstancesUsingGET()},this.loadDataContent=function(e,t){return e===k.user?g.userControllerService.getOrganizationUsers(t):e===k.device?g.deviceControllerService.getOrganizationDevices(t):e===k.vessel?g.vesselControllerService.getOrganizationVessels(t):e===k.mms?g.mmsControllerService.getOrganizationMMSes(t):e===k.service?g.serviceControllerService.getOrganizationServices(t):e===k.organization?g.organizationControllerService.getOrganization():e===k.unapprovedorg?g.organizationControllerService.getUnapprovedOrganizations():new h.Observable},this.loadRoles=function(e){return g.roleControllerService.getRoles(e)},this.isAdmin=function(){var e=g.menuType;return e===k.user?g.authService.authState.hasPermission(P.Xg.UserAdmin):e===k.device?g.authService.authState.hasPermission(P.Xg.DeviceAdmin):e===k.vessel?g.authService.authState.hasPermission(P.Xg.VesselAdmin):e===k.mms?g.authService.authState.hasPermission(P.Xg.MMSAdmin):e===k.service?g.authService.authState.hasPermission(P.Xg.ServiceAdmin):(e===k.organization||e===k.role)&&g.authService.authState.hasPermission(P.Xg.OrgAdmin)},this.menuType=this.router.url.split("/").pop(),this.menuType=this.menuType.replace("-","").substr(0,this.menuType.length-1),this.menuTypeName=k[this.menuType],this.iconName=S[this.menuType],this.orgMrn=this.authService.authState.orgMrn,t.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"})}return d(r,[{key:"ngOnInit",value:function(){this.fetchValues()}},{key:"fetchValues",value:function(){var r,n=this;if(!v.hasOwnProperty(this.menuType))throw this.isLoading=!1,new Error("There's no '".concat(this.menuType,"DataService' in ColumnForMenu"));if(this.mySettings.columns=Object.assign.apply(Object,[{}].concat(t(Object.entries(v[this.menuType]).filter(function(t){var r=e(t,2),a=(r[0],r[1]);return Array.isArray(a.visibleFrom)&&a.visibleFrom.includes(n.contextForAttributes)}).map(function(t){var r,n,a,i=e(t,2),s=i[0],o=i[1];return a=o,(n=s)in(r={})?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r})))),this.settings=Object.assign({},this.mySettings),this.title="".concat((r=this.menuTypeName,"string"!=typeof r?"":r.charAt(0).toUpperCase()+r.slice(1))," list").concat(w.includes(this.menuType)?" for "+this.authService.authState.orgName:""),this.isLoading=!0,!g.includes(this.menuType))throw this.isLoading=!1,new Error("There's no such thing as '".concat(this.menuType,"DataService'"));this.menuType===k.organization||this.menuType===k.unapprovedorg?this.loadDataContent(this.menuType).subscribe(function(e){n.source.load(n.formatResponse(e.content)),n.isLoading=!1},function(e){return n.notifierService.notify("error",e.message)}):this.menuType===k.role?this.loadMyOrganization().subscribe(function(e){return n.loadRoles(e.mrn).subscribe(function(e){n.source.load(e),n.isLoading=!1},function(e){return n.notifierService.notify("error",e.message)})},function(e){return n.notifierService.notify("error",e.message)}):this.menuType===k.instance?this.loadServiceInstances().subscribe(function(e){n.source.load(e),n.isLoading=!1},function(e){return n.notifierService.notify("error",e.message)}):this.loadMyOrganization().subscribe(function(e){return n.loadDataContent(n.menuType,e.mrn).subscribe(function(e){n.source.load(n.formatResponse(e.content)),n.isLoading=!1},function(e){return n.notifierService.notify("error",e.message)})},function(e){return n.notifierService.notify("error",e.message)})}},{key:"formatResponse",value:function(e){return e.map(function(e){return C(e)})}},{key:"onDelete",value:function(e){this.isAdmin()?this.delete(this.menuType,this.orgMrn,e.data.mrn,e.data.instanceVersion,e.data.id):this.notifierService.notify("error","You don't have right permission")}},{key:"delete",value:function(e,t,r,n,a){var i=this,s="Are you sure you want to delete?";s=y.indexOf(this.menuType)>=0?s+" All certificates under this entity will be revoked.":s,confirm(s)&&this.deleteData(e,t,r,n).subscribe(function(e){i.notifierService.notify("success",i.menuTypeName+" has been successfully deleted"),i.fetchValues()},function(e){return i.notifierService.notify("error","There was error in deletion - "+e.message)})}},{key:"onEdit",value:function(e){this.router.navigate([this.router.url,e.data.mrn?encodeURIComponent(e.data.mrn):e.data.id],{queryParams:{name:e.data.roleName?e.data.roleName:e.data.name?e.data.name:e.data.lastName+" "+e.data.firstName,version:e.data.instanceVersion}})}},{key:"onAddNew",value:function(){this.router.navigate([this.router.url,"new"])}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.source.setFilter([{field:"id",search:e},{field:"name",search:e},{field:"mrn",search:e}],!1)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(o["\u0275\u0275directiveInject"](l.F0),o["\u0275\u0275directiveInject"](B.B7b),o["\u0275\u0275directiveInject"](_.p),o["\u0275\u0275directiveInject"](j.$),o["\u0275\u0275directiveInject"](x.U),o["\u0275\u0275directiveInject"](D.H),o["\u0275\u0275directiveInject"](V.e),o["\u0275\u0275directiveInject"](R.$),o["\u0275\u0275directiveInject"](E.T),o["\u0275\u0275directiveInject"](N.r),o["\u0275\u0275directiveInject"](T.lG),o["\u0275\u0275directiveInject"](U.e))},r.\u0275cmp=o["\u0275\u0275defineComponent"]({type:r,selectors:[["ngx-list"]],decls:15,vars:5,consts:[[1,"row"],[1,"col","my-auto"],[1,"icon_header"],["pack","fas",3,"icon"],[1,"col-md-auto"],["type","button","nbButton","","status","primary",3,"click",4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["type","text","placeholder","Search...",1,"search",3,"keydown.enter"],["search",""],[3,"settings","source","edit","delete",4,"ngIf"],["type","button","nbButton","","status","primary",3,"click"],[3,"settings","source","edit","delete"]],template:function(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275elementStart"](2,"div",0),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"span",2),o["\u0275\u0275element"](5,"nb-icon",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275template"](8,L,2,0,"button",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"nb-card-body",6),o["\u0275\u0275elementStart"](10,"div"),o["\u0275\u0275elementStart"](11,"input",7,8),o["\u0275\u0275listener"]("keydown.enter",function(){o["\u0275\u0275restoreView"](r);var e=o["\u0275\u0275reference"](12);return t.onSearch(e.value)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,H,1,2,"ng2-smart-table",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](14,"notifier-container")}2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("icon",t.iconName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",t.title," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isAdmin()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbSpinner",t.isLoading),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.showTables))},directives:[B.Asz,B.ndF,B.fMN,i.O5,B.yKW,B.Q7R,T.TK,B.DPz,p.T5],styles:["nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}"]}),r}(),F=a(3679),W=function(e){switch(e){case M.Aacompromise:return{value:e,title:"AA compromised",description:"It is known or suspected that aspects of the AA validated in the attribute certificate have been compromised"};case M.Affiliationchanged:return{value:e,title:"Afiliation changed",description:"The subject's name or other information in the certificate has been modified but there is no cause to suspect that the private key has been compromised"};case M.Cacompromise:return{value:e,title:"CA compromised",description:"A CA certificate is compromised"};case M.Certificatehold:return{value:e,title:"Certificate Hold",description:"A certificate needs to be put on hold temporarily"};case M.Cessationofoperation:return{value:e,title:"Cessation of Operation",description:"An issued certificate is replaced"};case M.Keycompromise:return{value:e,title:"Key compromised",description:"It is known or suspected that the subject's private key, or other aspects of the subject validated in the certificate, have been compromised"};case M.Privilegewithdrawn:return{value:e,title:"Privilege withdrawn",description:"A certificate (public-key or attribute certificate) was revoked because a privilege contained within that certificate has been withdrawn"};case M.Removefromcrl:return{value:e,title:"Remove from CRL",description:"A CA is removed from the network"};case M.Superseded:return{value:e,title:"Superseded",description:"The certificate has been superseded but there is no cause to suspect that the private key has been compromised"};case M.Unspecified:return{value:e,title:"Unspecified",description:"Revoke certificates for reasons other than the specific codes"};default:return{value:e,title:M[e],description:"No description"}}},q=function(){var e=function(){function e(t,r,n,a,i,s){f(this,e),this.organizationsService=t,this.devicesService=r,this.servicesService=n,this.usersService=a,this.vesselsService=i,this.mmsService=s}return d(e,[{key:"ngOnInit",value:function(){}},{key:"formatCerts",value:function(e){var t=[];for(var r in e){var n=e[r];for(var a in n)e[r][a]=a.endsWith("At")||"end"===a||"start"===a?m(parseInt(n[a])):n[a];n.revoked&&(n.revokeInfo=n.revokedAt,n.revokeReasonText=W(n.revokeReason).title),t.push(n)}return t}},{key:"splitByRevokeStatus",value:function(e){var t=[],r=[];for(var n in e){var a=e[n];a.revoked?r.push(a):t.push(a)}return t.sort(function(e,t){return e.end-t.end}),r.sort(function(e,t){return e.end-t.end}),{activeCertificates:this.formatCerts(t),revokedCertificates:this.formatCerts(r)}}},{key:"issueNewCertificateFromMIR",value:function(e,t,r,n){if(null==e||!t)throw new Error("Internal state lost");switch(e){case b.Organization:return this.organizationsService.newOrgCert(t);case b.Device:return this.devicesService.newDeviceCert(r,t);case b.Service:return this.servicesService.newServiceCert(r,t,n);case b.User:return this.usersService.newUserCert(r,t);case b.Vessel:return this.vesselsService.newVesselCert(r,t);case b.MMS:return this.mmsService.newMMSCert(r,t)}}},{key:"issueNewCertificate",value:function(e,t,r,n,a){if(null==t||!r)throw new Error("Internal state lost");switch(t){case b.Organization:return this.organizationsService.newOrgCertFromCsr(e,r);case b.Device:return this.devicesService.newDeviceCertFromCsr(e,n,r);case b.Service:return this.servicesService.newServiceCertFromCsr(e,n,r,a);case b.User:return this.usersService.newUserCertFromCsr(e,n,r);case b.Vessel:return this.vesselsService.newVesselCertFromCsr(e,n,r);case b.MMS:return this.mmsService.newMMSCertFromCsr(e,n,r)}}},{key:"revokeCertificate",value:function(e,t,r,n,a,i){if(null==e||!t)throw new Error("Internal state lost");switch(e){case b.Organization:return this.organizationsService.revokeOrgCert(a,t,n);case b.Device:return this.devicesService.revokeDeviceCert(a,r,t,n);case b.Service:return this.servicesService.revokeServiceCert(a,r,t,i,n);case b.User:return this.usersService.revokeUserCert(a,r,t,n);case b.Vessel:return this.vesselsService.revokeVesselCert(a,r,t,n);case b.MMS:return this.mmsService.revokeMMSCert(a,r,t,n)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](N.r),o["\u0275\u0275inject"](j.$),o["\u0275\u0275inject"](V.e),o["\u0275\u0275inject"](_.p),o["\u0275\u0275inject"](D.H),o["\u0275\u0275inject"](E.T))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),z=a(49670),J=function(){var e=function(){function e(t){f(this,e),this.authService=t,this.idpNamespace=z.X.IDP_NAMESPACE,this.mrnMCP="urn:mrn:mcp:"}return d(e,[{key:"shortIdFromMrn",value:function(e){var t=e.split(":");return t[t.length-1]}},{key:"mrnPreFix",value:function(){return this.mrnPreFixForOrg(this.authService.authState.orgMrn)}},{key:"mrnPreFixForOrg",value:function(e){return e.split(":org:")[0]+":"}},{key:"orgShortId",value:function(){return this.shortIdFromMrn(this.authService.authState.orgMrn)}},{key:"mrnMcpIdpRegexForOrg",value:function(){return"urn:mrn:mcp:(device|org|user|vessel|service|mms):"+this.idpNamespace+":((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$"}},{key:"mrnRegex",value:function(){return"urn:mrn:([a-z0-9]([a-z0-9]|-){0,20}[a-z0-9]):([a-z0-9][-a-z0-9]{0,20}[a-z0-9]):((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)((?+((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?(?=((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?)?(#(((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?$"}},{key:"mrnMcpIdpRegex",value:function(){return"urn:mrn:mcp:(device|org|user|vessel|service|mms):"+this.idpNamespace+":"+this.orgShortId()+"((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$"}},{key:"mrnMask",value:function(e){switch(e){case k.device:return this.mrnMaskForDevice();case k.user:return this.mrnMaskForUser();case k.organization:return this.mrnMaskForOrganization();case k.vessel:return this.mrnMaskForVessel();case k.instance:case k.service:return this.mrnMaskForInstance();case k.mms:return this.mrnMaskForMms();default:return this.mrnMaskForOrganization()}}},{key:"mrnPattern",value:function(){return"^((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$"}},{key:"mrnPatternError",value:function(){return"It should contain at least 3 characters and only a-z 0-9 + , / ~ - . : = @ ; $ _ ! * '"}},{key:"mrnMaskForVessel",value:function(){return this.mrnMCP+"vessel:"+this.idpNamespace+":"+this.orgShortId()+":"}},{key:"mrnMaskForMms",value:function(){return this.mrnMCP+"mms:"+this.idpNamespace+":"+this.orgShortId()+":"}},{key:"mrnMaskForDevice",value:function(){return this.mrnMCP+"device:"+this.idpNamespace+":"+this.orgShortId()+":"}},{key:"mrnMaskForOrganization",value:function(){return this.mrnMCP+"org:"+this.idpNamespace+":"}},{key:"mrnMaskForUserOfOrg",value:function(e){return this.mrnPreFixForOrg(e)+"user:"+this.idpNamespace+":"+this.shortIdFromMrn(e)+":"}},{key:"mrnMaskForUser",value:function(){return this.mrnMCP+"user:"+this.idpNamespace+":"+this.orgShortId()+":"}},{key:"mrnMaskForSpecification",value:function(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":specification:"}},{key:"mrnMaskForDesign",value:function(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":design:"}},{key:"mrnMaskForInstance",value:function(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":instance:"}},{key:"mrnMaskTextForInstance",value:function(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":instance:"}},{key:"checkMrnForSpecification",value:function(e){var t="^".concat(this.mrnMaskForSpecification(),"((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$");return console.log(t),new RegExp(t).test(e)}},{key:"checkMrnForDesign",value:function(e){var t="^".concat(this.mrnMaskForDesign(),"((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$");return new RegExp(t).test(e)}},{key:"checkMrnForInstance",value:function(e){var t="^".concat(this.mrnMaskForInstance(),"((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$");return new RegExp(t,"g").test(e)}},{key:"checkMrn",value:function(e,t){var r=this;try{var n=e.indexOf(t);if(n<0)return!1;var a=!0;return e.substring(n).split(":").forEach(function(e){e.toLowerCase().match(r.mrnPattern())||(a=!1)}),a}catch(i){return!1}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](U.e))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),G=function(){var e,t=function(e){s(r,e);var t=u(r);function r(){return f(this,r),t.apply(this,arguments)}return r}(B.O$F);return t.\u0275fac=function(r){return(e||(e=o["\u0275\u0275getInheritedFactory"](t)))(r||t)},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-day-cell"]],hostAttrs:[1,"day-cell"],hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("click",function(){return t.onClick()})},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:2,consts:[[1,"caption"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"span",0),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.day),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",(t.day+100)*t.day,"$"))},styles:[".nb-theme-default   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-default   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-default   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-default   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-dark   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-dark   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-dark   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-dark   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-cosmic   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-cosmic   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-cosmic   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-cosmic   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-corporate   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-corporate   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-corporate   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-corporate   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}"]}),t}();function Z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-option",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;o["\u0275\u0275property"]("value",r.value),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",r.title,"")}}var $=function(){var e=function(){function e(t){for(var r in f(this,e),this.ref=t,this.date=new Date,this.reasons=[],this.description="",this.dayCellComponent=G,this.isLoading=!1,M)this.reasons.push(W(r.toLocaleLowerCase()))}return d(e,[{key:"doRevoke",value:function(){var e=this;this.isLoading=!0;var t={revokedAt:this.date.getTime().toString(),revokationReason:this.revokationReason};this.certificateService.revokeCertificate(this.entityType,this.entityMrn,this.orgMrn,this.certificateId,t,this.instanceVersion).subscribe(function(t){e.ref.close(),e.notifierService.notify("success","Certificate has been successfully revoked"),e.isLoading=!1,e.updateCertificate()},function(t){e.isLoading=!1,410!==t.status?e.notifierService.notify("error","Error when trying to issue new certificate",t.message):e.notifierService.notify("error","Generating certificates with server generated keys is not supported by this ID provider")})}},{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){this.ref.close()}},{key:"onMenuItemSelected",value:function(e){var t=W(e);this.revokationReason=t.value,this.description=t.description}},{key:"onDateChange",value:function(e){this.date=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](B.X4l))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cert-revoke-dialog"]],inputs:{entityMrn:"entityMrn",entityTitle:"entityTitle",orgMrn:"orgMrn",certificateId:"certificateId",instanceVersion:"instanceVersion",entityType:"entityType",certificateService:"certificateService",notifierService:"notifierService",updateCertificate:"updateCertificate"},decls:29,vars:6,consts:[[1,"modal-window"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],[1,"container"],[1,"row"],[1,"col"],[1,"subtitle"],["fullWidth","","placeholder","Choose a reason",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","placeholder","Choose a date",3,"nbDatepicker"],[3,"dateChange"],["formpicker",""],[1,"headline"],[1,"buttons-row"],["type","button","nbButton","","status","primary",3,"click"],["type","button","nbButton","","status","danger",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card",0),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-card-body",1),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"span",5),o["\u0275\u0275text"](8," Revocation reason: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](9,"br"),o["\u0275\u0275elementStart"](10,"nb-select",6),o["\u0275\u0275listener"]("selectedChange",function(e){return t.onMenuItemSelected(e)}),o["\u0275\u0275template"](11,Z,2,2,"nb-option",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",4),o["\u0275\u0275elementStart"](13,"span",5),o["\u0275\u0275text"](14," Revocation date: "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](15,"br"),o["\u0275\u0275element"](16,"input",8),o["\u0275\u0275elementStart"](17,"nb-datepicker",9,10),o["\u0275\u0275listener"]("dateChange",function(e){return t.onDateChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",3),o["\u0275\u0275elementStart"](20,"div",4),o["\u0275\u0275elementStart"](21,"div",11),o["\u0275\u0275text"](22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"nb-card-footer"),o["\u0275\u0275elementStart"](24,"div",12),o["\u0275\u0275elementStart"](25,"button",13),o["\u0275\u0275listener"]("click",function(){return t.doRevoke()}),o["\u0275\u0275text"](26,"Revoke"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"button",14),o["\u0275\u0275listener"]("click",function(){return t.dismiss()}),o["\u0275\u0275text"](28,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275reference"](18);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" Revoke certificate for ",t.entityTitle," (",t.entityMrn,") "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbSpinner",t.isLoading),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngForOf",t.reasons),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("nbDatepicker",r),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",t.description," ")}},directives:[B.Asz,B.ndF,B.yKW,B.Q7R,B.rs,i.sg,B.h8i,B.$kf,B.B4C,B.XWE,B.DPz,B.q51],styles:[".modal-window[_ngcontent-%COMP%]{width:40rem}.headline[_ngcontent-%COMP%]{padding:10px}.nb-theme-default   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-default   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-dark   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-dark   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-cosmic   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-corporate   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-corporate   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}"]}),e}(),Q=a(27286),X=a(46721),Y=a(35585),ee=a(9681),te=a(46826),re=a(81957),ne=a(78342),ae=a(93108),ie=a(45402),se=a(1971),oe=a(71030),ue=a(93085),le=a(68681),ce=a(97226),fe=a(75530);function he(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1," Certificate issued with success "),o["\u0275\u0275elementEnd"]())}function de(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1," Select cert issue method "),o["\u0275\u0275elementEnd"]())}function me(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"p"),o["\u0275\u0275text"](2,"There are four ways to issue a new certificate:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",5),o["\u0275\u0275elementStart"](4,"nb-card",6),o["\u0275\u0275elementStart"](5,"nb-tabset",7),o["\u0275\u0275elementStart"](6,"nb-tab",8),o["\u0275\u0275elementStart"](7,"p"),o["\u0275\u0275text"](8,"Many operating systems and browsers require that certificates are imported as a password protected PKCS#12 keystore. If you want to manually generate the keystore, which is the recommended approach, click the corresponding button below and download the resulting zip file, unzip it and then use OpenSSL to generate the keystore using the following command: "),o["\u0275\u0275element"](9,"br"),o["\u0275\u0275element"](10,"br"),o["\u0275\u0275elementStart"](11,"pre"),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](13," This will prompt you for a passphrase to protect the keystore. If successful the command will result in a PKCS#12 keystore file called 'keystore.p12'. "),o["\u0275\u0275element"](14,"br"),o["\u0275\u0275text"](15,"If you don't want to generate a keystore at all you can just skip executing the OpenSSL command. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275elementStart"](17,"button",10),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().locallyWManualKeystore()}),o["\u0275\u0275text"](18,"Issue a cert locally with manual keystore setup"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"nb-tab",11),o["\u0275\u0275elementStart"](20,"p"),o["\u0275\u0275text"](21," Many operating systems and browsers require that certificates are imported as a password protected PKCS#12 keystore. You can let your browser generate a keystore for you. NOTE that this action will take a little while and the resulting keystore will NOT be compatible with most major operating systems and browsers. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](22,"div",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"nb-tab",12),o["\u0275\u0275elementStart"](24,"p"),o["\u0275\u0275text"](25," MIR API server generate it for you? NOTE that it is strongly recommended to NOT let the server generate the key pair for you as in case of a breach of the MIR API server, a malicious third party can potentially take control over your identity by stealing your private key when it is generated. Also note that the possibility of getting server generated key pairs will be removed completely in the future, and that MCP ID service providers can already choose to disable it now. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",9),o["\u0275\u0275elementStart"](27,"button",13),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().fromServer()}),o["\u0275\u0275text"](28,"Issue a cert from server"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"nb-tab",14),o["\u0275\u0275elementStart"](30,"span"),o["\u0275\u0275text"](31," You can generate the key pair and a CSR from scratch by yourself - an example on how to do this can be found "),o["\u0275\u0275elementStart"](32,"a",15),o["\u0275\u0275text"](33,"here"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](34,". "),o["\u0275\u0275element"](35,"br"),o["\u0275\u0275text"](36," .. and you are free to click 'Close' button to proceed. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"p"),o["\u0275\u0275text"](38," We strongly recommend to read the instructions throughly as the security impact significantly differs from each other. "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](12),o["\u0275\u0275textInterpolate2"]("openssl pkcs12 -export -out keystore.p12 -in Certificate_",n.nameNoSpaces,".pem -inkey PrivateKey_",n.nameNoSpaces,".pem")}}function ve(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275elementStart"](1,"button",16),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().zipAndDownload()}),o["\u0275\u0275text"](2,"Download certificate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}var pe=function(){var e=function(){function e(t){f(this,e),this.ref=t,this.serverGeneratedKeys=!1}return d(e,[{key:"ngOnInit",value:function(){this.isLoading=!1,this.entityMrn&&(this.generateLabelValues(),this.nameNoSpaces=this.entityTitle.split(" ").join("_"))}},{key:"dismiss",value:function(){this.ref.close(),this.certificateBundle&&this.updateCertificate()}},{key:"locallyWManualKeystore",value:function(){this.issueNewWithLocalKeys(!1)}},{key:"locallyFromBrowser",value:function(){this.issueNewWithLocalKeys(!0)}},{key:"fromServer",value:function(){this.issueNewWithServerKeys()}},{key:"zipAndDownload",value:function(){this.fileHelper.downloadPemCertificate(this.certificateBundle,this.entityTitle,this.serverGeneratedKeys,this.notifierService),this.notifierService.notify("success","Chosen certificate has downloaded")}},{key:"issueNewWithServerKeys",value:function(){var e=this;this.isLoading=!0,this.certificateService.issueNewCertificateFromMIR(this.entityType,this.entityMrn,this.orgMrn,this.instanceVersion).subscribe(function(t){e.certificateBundle=t,e.serverGeneratedKeys=!0,e.isLoading=!1,e.notifierService.notify("success","You can now download the issued certificate")},function(t){e.isLoading=!1,410!==t.status?e.notifierService.notify("error","Error when trying to issue new certificate",t.message):e.notifierService.notify("error","Generating certificates with server generated keys is not supported by this ID provider")})}},{key:"issueNewWithLocalKeys",value:function(e){var t=this;this.isLoading=!0,crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384",typedCurve:""},!0,["sign","verify"]).then(function(r){var n=new ae.Z;n.subject.typesAndValues.push(new ie.default({type:"2.5.4.3",value:new fe.PrintableString({value:"Test"})})),n.subjectPublicKeyInfo.importKey(r.publicKey).then(function(){n.sign(r.privateKey,"SHA-384").then(function(){var a=n.toSchema().toBER(!1),i=t.toPem(a,"CERTIFICATE REQUEST");t.certificateService.issueNewCertificate(i,t.entityType,t.entityMrn,t.orgMrn,t.instanceVersion).subscribe(function(e){},function(n){if(201===n.status){var a=n.error.text;crypto.subtle.exportKey("pkcs8",r.privateKey).then(function(n){crypto.subtle.exportKey("spki",r.publicKey).then(function(r){var i=new X.default({schema:(0,fe.fromBER)(n).result});if(e){var s=t.convertCertChain(a).map(function(e){return new Y.default({schema:(0,fe.fromBER)(e).result})}),o=t.generatePassword();Promise.resolve().then(function(){return t.generatePKCS12(i,s,o)}).then(function(e){t.certificateBundle={pemCertificate:{privateKey:t.toPem(n,"PRIVATE KEY"),publicKey:t.toPem(r,"PUBLIC KEY"),certificate:a},pkcs12Keystore:new TextDecoder("utf-8").decode(e),keystorePassword:o},t.isLoading=!1,t.notifierService.notify("success","You can now download the issued certificate")},function(e){t.isLoading=!1,t.notifierService.notify("error","PKCS#12 keystore could not be generated - "+e.message)})}else t.certificateBundle={pemCertificate:{privateKey:t.toPem(n,"PRIVATE KEY"),publicKey:t.toPem(r,"PUBLIC KEY"),certificate:a}},t.notifierService.notify("success","You can now download the issued certificate"),t.isLoading=!1},function(e){t.isLoading=!1,t.notifierService.notify("error","Public key could not be exported - "+e.message)})},function(e){t.isLoading=!1,t.notifierService.notify("error","Private key could not be exported - "+e.message)})}else t.isLoading=!1,t.notifierService.notify("error","Error when trying to issue new certificate - "+n.message)})})})},function(e){t.isLoading=!1,t.notifierService.notify("error","Error when trying to issue new certificate - "+e.message)})}},{key:"generateLabelValues",value:function(){this.labelValues=[],this.labelValues.push({label:"Name",valueHtml:this.entityTitle}),this.labelValues.push({label:"MRN",valueHtml:this.entityMrn.split("#\xa4#")[0]})}},{key:"toPem",value:function(e,t){for(var r=Q.Convert.ToBase64(e),n="";r.length>0;)n+=r.substring(0,64)+"\n",r=r.substring(64);return"-----BEGIN ".concat(t,"-----\n").concat(n,"-----END ").concat(t,"-----\n")}},{key:"convertCertChain",value:function(e){var t=e.split(/-----END CERTIFICATE-----/);return(t=t.slice(0,t.length-1)).map(function(e){return e.split(/-----BEGIN CERTIFICATE-----/)[1].replace(/\n/gm,"")}).map(function(e){return Q.Convert.FromBase64(e)})}},{key:"generatePassword",value:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_^$#&!%",t=new Uint32Array(26);crypto.getRandomValues(t);for(var r="",n=0;n<t.length;n++)r+=e[t[n]%e.length];return r}},{key:"generatePKCS12",value:function(e,t,r){var n=new ArrayBuffer(4),a=new Uint8Array(n);(0,ce.getRandomValues)(a);var i=new ArrayBuffer(4),s=new Uint8Array(i);(0,ce.getRandomValues)(s);var o=new ArrayBuffer(4),u=new Uint8Array(o);(0,ce.getRandomValues)(u);var l=new ArrayBuffer(1);new Uint8Array(l)[0]|=128;var c=new fe.BitString({valueHex:l,unusedBits:7});e.attributes=[new le.default({type:"2.5.29.15",values:[c]})];var f="";t[0].subject.typesAndValues.forEach(function(e){"2.5.4.3"===e.type&&(f=e.value.valueBlock.value)});var h="";t[1].subject.typesAndValues.forEach(function(e){"2.5.4.3"===e.type&&(h=e.value.valueBlock.value)});var d=new ee.Z({parsedValue:{integrityMode:0,authenticatedSafe:new re.default({parsedValue:{safeContents:[{privacyMode:0,value:new oe.default({safeBags:[new te.default({bagId:"1.2.840.113549.1.12.10.1.2",bagValue:new ue.default({parsedValue:e}),bagAttributes:[new le.default({type:"1.2.840.113549.1.9.20",values:[new fe.BmpString({value:"PKCS8ShroudedKeyBag from PKIjs"})]}),new le.default({type:"1.2.840.113549.1.9.21",values:[new fe.OctetString({valueHex:n})]}),new le.default({type:"1.3.6.1.4.1.311.17.1",values:[new fe.BmpString({value:"MCP using https://pkijs.org/"})]})]})]})},{privacyMode:1,value:new oe.default({safeBags:[new te.default({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new ne.default({parsedValue:t[0]}),bagAttributes:[new le.default({type:"1.2.840.113549.1.9.20",values:[new fe.BmpString({value:f})]}),new le.default({type:"1.2.840.113549.1.9.21",values:[new fe.OctetString({valueHex:i})]}),new le.default({type:"1.3.6.1.4.1.311.17.1",values:[new fe.BmpString({value:"MCP using https://pkijs.org/"})]})]}),new te.default({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new ne.default({parsedValue:t[1]}),bagAttributes:[new le.default({type:"1.2.840.113549.1.9.20",values:[new fe.BmpString({value:h})]}),new le.default({type:"1.2.840.113549.1.9.21",values:[new fe.OctetString({valueHex:o})]}),new le.default({type:"1.3.6.1.4.1.311.17.1",values:[new fe.BmpString({value:"MCP using https://pkijs.org/"})]})]})]})}]}})}}),m=(0,se.stringToArrayBuffer)(r),v=Promise.resolve();return(v=(v=(v=v.then(function(){return d.parsedValue.authenticatedSafe.parsedValue.safeContents[0].value.safeBags[0].bagValue.makeInternalValues({password:m,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-256",iterationCount:1e5})})).then(function(){return d.parsedValue.authenticatedSafe.makeInternalValues({safeContents:[{},{password:m,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-256",iterationCount:1e5}]})})).then(function(){return d.makeInternalValues({password:m,iterations:1e5,pbkdf2HashAlgorithm:"SHA-256",hmacHashAlgorithm:"SHA-256"})})).then(function(){return d.toSchema().toBER(!1)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](B.X4l))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cert-issue-dialog"]],inputs:{entityMrn:"entityMrn",entityTitle:"entityTitle",entityType:"entityType",orgMrn:"orgMrn",instanceVersion:"instanceVersion",notifierService:"notifierService",fileHelper:"fileHelper",certificateService:"certificateService",updateCertificate:"updateCertificate"},decls:11,vars:5,consts:[[4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["class","container",4,"ngIf"],[1,"buttons-row"],["nbButton","","status","danger",3,"click"],[1,"col-12"],["size","small"],["fullWidth",""],["tabTitle","Locally with manual keystore setup"],[1,"container"],["nbButton","","status","success",1,"w-100",3,"click"],["tabTitle","Locally from browser"],["tabTitle","From server"],["nbButton","","status","warning",1,"w-100",3,"click"],["tabTitle","Locally from scratch with OpenSSL"],["href","https://github.com/maritimeconnectivity/IdentityRegistry#certificate-issuing-by-certificate-signing-request","target","_blank"],["type","button","nbButton","","status","success",1,"w-100",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275template"](2,he,2,0,"div",0),o["\u0275\u0275template"](3,de,2,0,"div",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"nb-card-body",1),o["\u0275\u0275template"](5,me,39,2,"div",0),o["\u0275\u0275template"](6,ve,3,0,"div",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"nb-card-footer"),o["\u0275\u0275elementStart"](8,"div",3),o["\u0275\u0275elementStart"](9,"button",4),o["\u0275\u0275listener"]("click",function(){return t.dismiss()}),o["\u0275\u0275text"](10,"Close"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.certificateBundle),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.certificateBundle),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbSpinner",t.isLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.certificateBundle),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.certificateBundle))},directives:[B.Asz,B.ndF,i.O5,B.yKW,B.Q7R,B.XWE,B.DPz,B.kyn,B.TR4],styles:[""]}),e}(),ge={start:{title:"Valid from",type:"string"},end:{title:"Valid until",type:"string"}},ye={revokeInfo:{title:"Revoked from",type:"string"},revokeReasonText:{title:"Reason",type:"string"}},be=a(49457),we=a(7586),ke=function(){var e=function(){function e(){f(this,e)}return d(e,[{key:"downloadPemCertificate",value:function(e,t,r,n){try{var a=t.split(" ").join("_");r&&(e.pemCertificate.certificate=this.replaceNewLines(e.pemCertificate.certificate),e.pemCertificate.publicKey&&(e.pemCertificate.publicKey=this.replaceNewLines(e.pemCertificate.publicKey)),e.pemCertificate.privateKey&&(e.pemCertificate.privateKey=this.replaceNewLines(e.pemCertificate.privateKey)),e.pkcs12Keystore&&(e.pkcs12Keystore=this.convertBase64ToByteArray(e.pkcs12Keystore).toString()));var i=new we;if(i.file("Certificate_"+a+".pem",e.pemCertificate.certificate),e.pemCertificate.privateKey&&i.file("PrivateKey_"+a+".pem",e.pemCertificate.privateKey),e.pemCertificate.publicKey&&i.file("PublicKey_"+a+".pem",e.pemCertificate.publicKey),e.keystorePassword&&i.file("KeystorePassword.txt",this.replaceNewLines(e.keystorePassword)),e.jksKeystore){var s=this.convertBase64ToByteArray(e.jksKeystore),o=new Blob([s]);i.file("Keystore_"+a+".jks",o)}if(e.pkcs12Keystore){var u=new Blob([e.pkcs12Keystore]);i.file("Keystore_"+a+".p12",u)}i.generateAsync({type:"blob"}).then(function(e){be.saveAs(e,"Certificate_"+a+".zip")})}catch(l){n.notify("error","Error when trying to download file - "+l)}}},{key:"downloadXml",value:function(e,t){e?this.downloadFile(e.content,e.contentContentType,e.name,t):t.notify("error","No file to download")}},{key:"downloadDoc",value:function(e,t){if(e)if(e.filecontent.length>1&&e.filecontent.length<10)t.notify("error","File from Service Registry is in the wrong format. "+e.name);else{var r=e.filecontent.toString();this.downloadBase64File(r,e.filecontentContentType,e.name,t)}else t.notify("error","No file to download")}},{key:"downloadBase64File",value:function(e,t,r,n){try{var a=this.convertBase64ToByteArray(e),i=new Blob([a],{type:t});be.saveAs(i,r)}catch(s){n.notify("error","Error when trying to download file - "+s)}}},{key:"downloadFile",value:function(e,t,r,n){try{var a=new Blob([e],{type:t});be.saveAs(a,r)}catch(i){n.notify("error","Error when trying to download file - "+i)}}},{key:"convertBase64ToByteArray",value:function(e){for(var t=window.atob(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Uint8Array(r)}},{key:"replaceNewLines",value:function(e){var t="\n";return-1!=navigator.appVersion.indexOf("Win")&&(t="\r\n"),e?e.replace(/(\\n)/gm,t):""}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Se(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",4),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](2).openIssueDialog()}),o["\u0275\u0275text"](1,"Issue new certificate"),o["\u0275\u0275elementEnd"]()}}function Pe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275template"](2,Se,2,0,"button",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.hasPermission)}}var Ae=function(){var e=function(){function e(t,r,n,a){f(this,e),this.notifierService=t,this.fileHelper=r,this.certificateService=n,this.dialogService=a,this.settings={mode:"external",edit:{editButtonContent:'<small><i class="fas fa-file-download fa-xs"></i></small>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<small><i class="fas fa-ban fa-xs"></i></small>',confirmDelete:!0},hideSubHeader:!0,actions:{position:"right"}},this.source=new p.nC,this.onUpdate=new o.EventEmitter,this.certificateTitle="Certificate for "}return d(e,[{key:"ngOnInit",value:function(){this.forRevoked?(this.settings.actions=void 0,this.settings.columns=ye):this.settings.columns=ge}},{key:"openIssueDialog",value:function(){var e=this;this.hasPermission?this.dialogService.open(pe,{context:{entityMrn:this.entityMrn,entityTitle:this.entityTitle,entityType:this.entityType,orgMrn:this.orgMrn,instanceVersion:this.instanceVersion,notifierService:this.notifierService,fileHelper:this.fileHelper,certificateService:this.certificateService,updateCertificate:function(){return e.onUpdate.emit()}},closeOnBackdropClick:!1,closeOnEsc:!1}):this.notifierService.notify("error","You don't have right permission")}},{key:"openRevokeDialog",value:function(e){var t=this;this.hasPermission?this.dialogService.open($,{context:{entityMrn:this.entityMrn,entityTitle:this.entityTitle,entityType:this.entityType,orgMrn:this.orgMrn,certificateId:e.serialNumber,instanceVersion:this.instanceVersion,notifierService:this.notifierService,certificateService:this.certificateService,updateCertificate:function(){return t.onUpdate.emit()}},closeOnBackdropClick:!1,closeOnEsc:!1}):this.notifierService.notify("error","You don't have right permission")}},{key:"onEdit",value:function(e){this.download(e.data),this.notifierService.notify("success","Chosen certificate has downloaded")}},{key:"onDelete",value:function(e){this.openRevokeDialog(e.data)}},{key:"download",value:function(e){this.fileHelper.downloadPemCertificate({pemCertificate:{certificate:e.certificate}},"Certificate for "+this.entityTitle,!0,this.notifierService)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](T.lG),o["\u0275\u0275directiveInject"](ke),o["\u0275\u0275directiveInject"](q),o["\u0275\u0275directiveInject"](B.Gln))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-certificates"]],inputs:{data:"data",forRevoked:"forRevoked",entityMrn:"entityMrn",entityTitle:"entityTitle",entityType:"entityType",orgMrn:"orgMrn",instanceVersion:"instanceVersion",hasPermission:"hasPermission"},outputs:{onUpdate:"onUpdate"},decls:2,vars:3,consts:[[3,"settings","source","edit","delete"],[4,"ngIf"],[1,"container"],["class","w-100","status","primary","type","button","nbButton","",3,"click",4,"ngIf"],["status","primary","type","button","nbButton","",1,"w-100",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ng2-smart-table",0),o["\u0275\u0275listener"]("edit",function(e){return t.onEdit(e)})("delete",function(e){return t.onDelete(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](1,Pe,3,1,"div",1)),2&e&&(o["\u0275\u0275property"]("settings",t.settings)("source",t.data),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.forRevoked))},directives:[p.T5,i.O5,B.DPz],styles:[""]}),e}();function Ce(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",6),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"]().cancel()}),o["\u0275\u0275element"](2,"nb-icon",7),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" Back to ",n.entityTypeName," list ")}}function Ie(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).submit()}),o["\u0275\u0275text"](1,"Submit"),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("disabled",!n.formGroup.valid)}}function Oe(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).cancel()}),o["\u0275\u0275text"](1,"Cancel"),o["\u0275\u0275elementEnd"]()}}function Be(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",18),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).invertIsEditing()}),o["\u0275\u0275text"](1,"Edit"),o["\u0275\u0275elementEnd"]()}}function _e(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).delete()}),o["\u0275\u0275text"](1,"Delete"),o["\u0275\u0275elementEnd"]()}}function je(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).updateForNewVer()}),o["\u0275\u0275text"](1,"New version"),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("disabled",!n.formGroup.valid)}}function xe(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).submit()}),o["\u0275\u0275text"](1,"Update"),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("disabled",!n.formGroup.valid)}}function Ee(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](3).invertIsEditing()}),o["\u0275\u0275text"](1,"Cancel"),o["\u0275\u0275elementEnd"]()}}function Ne(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",12),o["\u0275\u0275template"](1,Ie,2,1,"button",13),o["\u0275\u0275template"](2,Oe,2,0,"button",14),o["\u0275\u0275template"](3,Be,2,0,"button",15),o["\u0275\u0275template"](4,_e,2,0,"button",14),o["\u0275\u0275template"](5,je,2,1,"button",13),o["\u0275\u0275template"](6,xe,2,1,"button",13),o["\u0275\u0275template"](7,Ee,2,0,"button",14),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isForNew),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isForNew),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isEditing&&!r.isForNew),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isEditing&&!r.isForNew),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isEditing&&!r.isForNew&&"service"===r.menuType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isEditing&&!r.isForNew),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isEditing&&!r.isForNew)}}function Ve(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card-header"),o["\u0275\u0275elementStart"](1,"div",0),o["\u0275\u0275elementStart"](2,"div",8),o["\u0275\u0275elementStart"](3,"span",9),o["\u0275\u0275element"](4,"nb-icon",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,Ne,8,7,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("icon",r.iconName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",r.name," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isAdmin())}}function De(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",8),o["\u0275\u0275elementStart"](2,"h1"),o["\u0275\u0275text"](3,"Failed to load"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function Me(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"label",24),o["\u0275\u0275text"](2,"Short ID for MRN"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",25),o["\u0275\u0275elementStart"](4,"input",26),o["\u0275\u0275listener"]("input",function(e){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](2).addShortIdToMrn(e.target.value)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("status",n.isShortIdValid?"success":"danger"),o["\u0275\u0275propertyInterpolate"]("value",n.shortId)}}function Re(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",30),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"]().$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.formGroup.get(r[0]).value)}}function Te(e,t){if(1&e&&o["\u0275\u0275element"](0,"input",31),2&e){var r=o["\u0275\u0275nextContext"]().$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275propertyInterpolate1"]("id","input_",r[0],""),o["\u0275\u0275propertyInterpolate"]("status",n.formGroup.get(r[0]).value?n.formGroup.get(r[0]).valid?"success":"danger":r[1].required?"danger":""),o["\u0275\u0275propertyInterpolate"]("formControlName",r[0]),o["\u0275\u0275propertyInterpolate"]("required",!0===r[1].required)}}function Ue(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"label",27),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",25),o["\u0275\u0275template"](4,Re,2,1,"p",28),o["\u0275\u0275template"](5,Te,1,4,"input",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("for","input",r[0],""),o["\u0275\u0275propertyInterpolate"]("nbPopover",r[1].description),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](r[1].title),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isEditing)}}function Le(e,t){if(1&e){var r=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"label",32),o["\u0275\u0275text"](2,"Active certificates"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275elementStart"](4,"ngx-certificates",34),o["\u0275\u0275listener"]("onUpdate",function(){return o["\u0275\u0275restoreView"](r),o["\u0275\u0275nextContext"](2).refreshData()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("data",n.activeCertificates)("forRevoked",!1)("entityType",n.menuType)("entityTitle",n.name)("entityMrn",n.entityMrn)("orgMrn",n.orgMrn)("instanceVersion",n.instanceVersion)("hasPermission",n.isAdmin())}}function He(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"label",35),o["\u0275\u0275text"](2,"Revoked certificates"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275element"](4,"ngx-certificates",36),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("data",r.revokedCertificates)("forRevoked",!0)("updateData",r.refreshData)}}function Ke(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",37),o["\u0275\u0275elementStart"](1,"button",38),o["\u0275\u0275text"](2,"Approve"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",39),o["\u0275\u0275text"](4,"Reject"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function Fe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",19),o["\u0275\u0275template"](1,Me,5,2,"div",20),o["\u0275\u0275template"](2,Ue,6,5,"div",21),o["\u0275\u0275template"](3,Le,5,8,"div",20),o["\u0275\u0275template"](4,He,5,3,"div",20),o["\u0275\u0275template"](5,Ke,5,0,"div",22),o["\u0275\u0275elementEnd"]()),2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formGroup",r.formGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isForNew&&"role"!==r.menuType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",r.columnForMenu),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isEntity&&!r.isForNew&&!r.isEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isEntity&&!r.isForNew&&!r.isEditing),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.isUnapprovedorg&&r.canApproveOrg)}}var We,qe,ze=[{path:"",component:c,children:[{path:"",component:K},{path:":id",component:(We=function(){function t(e,r,n,a,i,s,o,u,l,c,d,m,p,g,b,w){var I=this;f(this,t),this.route=e,this.router=r,this.location=n,this.formBuilder=a,this.iconsLibrary=i,this.userControllerService=s,this.deviceControllerService=o,this.roleControllerService=u,this.vesselControllerService=l,this.serviceControllerService=c,this.mmsControllerService=d,this.organizationControllerService=m,this.certificateService=p,this.notifierService=g,this.mrnHelperService=b,this.authService=w,this.name="",this.isLoading=!1,this.menuType="device",this.instanceVersion="",this.isMyOrgPage=!1,this.isForNew=!1,this.columnForMenu=v[this.menuType],this.contextForAttributes="detail",this.iconName="circle",this.menuTypeName="",this.isEntity=!1,this.entityMrn="",this.orgMrn="",this.isUnapprovedorg=!1,this.canApproveOrg=!1,this.values={},this.activeCertificates=[],this.revokedCertificates=[],this.isEditing=!1,this.shortId="",this.roleId=-1,this.isLoaded=!0,this.isShortIdValid=!1,this.registerData=function(e,t,r){return e===k.user?I.userControllerService.createUser(t,r):e===k.device?I.deviceControllerService.createDevice(t,r):e===k.vessel?I.vesselControllerService.createVessel(t,r):e===k.mms?I.mmsControllerService.createMMS(t,r):e===k.service?I.serviceControllerService.createService(t,r):e===k.organization?I.organizationControllerService.applyOrganization(t):e===k.role?I.roleControllerService.createRole(t,r):new h.Observable},this.updateData=function(e,t,r,n,a){return e===k.user?I.userControllerService.updateUser(t,r,n):e===k.device?I.deviceControllerService.updateDevice(t,r,n):e===k.vessel?I.vesselControllerService.updateVessel(function(e){var t=[],r=function(r){var n=O(r);Object.values(A.AttributeNameEnum).find(function(e){return e===n})&&(t.push({createdAt:new Date,updatedAt:new Date,attributeName:n,attributeValue:e[r]}),delete e[r])};for(var n in e)r(n);return e.attributes=t,e}(t),r,n):e===k.mms?I.mmsControllerService.updateMMS(t,r,n):e===k.service&&a?I.serviceControllerService.updateService(t,r,n,a):e===k.organization?I.organizationControllerService.updateOrganization(t,n):e===k.role?I.roleControllerService.updateRole(t,r,I.roleId):new h.Observable},this.deleteData=function(e,t,r,n){return e===k.user?I.userControllerService.deleteUser(t,r):e===k.device?I.deviceControllerService.deleteDevice(t,r):e===k.vessel?I.vesselControllerService.deleteVessel(t,r):e===k.mms?I.mmsControllerService.deleteMMS(t,r):e===k.service&&n?I.serviceControllerService.deleteService(t,r,n):e===k.organization?I.organizationControllerService.deleteOrg(r):e===k.role?I.roleControllerService.deleteRole(t,I.roleId):new h.Observable},this.loadDataContent=function(e,t,r,n){return e===k.user?I.userControllerService.getUser(t,r):e===k.device?I.deviceControllerService.getDevice(t,r):e===k.vessel?I.vesselControllerService.getVessel(t,r):e===k.mms?I.mmsControllerService.getMMS(t,r):e===k.service&&n?I.serviceControllerService.getServiceVersion(t,r,n):new h.Observable},this.isAdmin=function(){var e=I.menuType;return e===k.user?I.authService.authState.hasPermission(P.Xg.UserAdmin):e===k.device?I.authService.authState.hasPermission(P.Xg.DeviceAdmin):e===k.vessel?I.authService.authState.hasPermission(P.Xg.VesselAdmin):e===k.mms?I.authService.authState.hasPermission(P.Xg.MMSAdmin):e===k.service?I.authService.authState.hasPermission(P.Xg.ServiceAdmin):(e===k.organization||e===k.role)&&I.authService.authState.hasPermission(P.Xg.OrgAdmin)},this.loadOrgContent=function(e){return I.organizationControllerService.getOrganizationByMrn(e)},this.setFormWithValidators=function(){var e={};for(var t in I.columnForMenu)e[I.columnForMenu[t][0]]=[null,I.getValidators(I.columnForMenu[t])];I.formGroup=I.formBuilder.group(e)},this.adjustData=function(e){var t=C(e),r=function(e){var r=I.columnForMenu.filter(function(t){return t[0]===e})[0];if(r)if(!0===r[1].immutable&&I.formGroup.get(r[0]).disable(),"role"!==I.menuType&&"mrn"===r[0]){I.shortId=I.mrnHelperService.shortIdFromMrn(t[e]);var n=I.mrnHelperService.mrnMask(I.menuType)+I.shortId;I.isShortIdValid=I.validateMrn(n),I.formGroup.get(r[0]).setValue(n)}else I.formGroup.get(r[0]).setValue(t[e])};for(var n in t)r(n)};var B=this.router.url.split("/");this.menuType=B[B.length-2],this.menuType=this.menuType.replace("-","").substr(0,this.menuType.length-1),this.menuTypeName=k[this.menuType],this.iconName=S[this.menuType],this.isEntity=y.includes(this.menuType),this.entityMrn=decodeURIComponent(this.route.snapshot.paramMap.get("id")),this.orgMrn=this.authService.authState.orgMrn,this.isForNew="new"===this.entityMrn,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},this.route.queryParams.subscribe(function(e){I.isMyOrgPage=I.entityMrn===I.authService.authState.orgMrn&&void 0===e.name,I.name=e.name,I.instanceVersion=e.version}),i.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"}),this.roleControllerService.getMyRole(this.authService.authState.orgMrn).subscribe(function(e){I.authService.authState.permission=(0,P.Kc)(e),P.fQ.canApproveOrg(I.authService.authState.permission)&&(I.canApproveOrg=!0)})}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.isForNew&&(this.isEditing=!0),this.columnForMenu=Object.entries(v[this.menuType]).filter(function(r){var n=e(r,2),a=(n[0],n[1]);return Array.isArray(a.visibleFrom)&&a.visibleFrom.includes(t.contextForAttributes)&&(!t.isEditing||t.isForNew&&!0!==a.notShowOnEdit)}),this.setFormWithValidators(),this.isForNew?(this.name="New "+this.menuType,this.formGroup.get("mrn")&&(this.formGroup.get("mrn").setValue(this.mrnHelperService.mrnMask(this.menuType)),this.formGroup.get("mrn").disable()),this.isLoaded=!0):this.fetchFieldValues()}},{key:"updateForNewVer",value:function(){this.formGroup.get("instanceVersion").enable(),this.isForNew=!0}},{key:"settle",value:function(e){this.isLoading=!1,this.isLoaded=e}},{key:"addShortIdToMrn",value:function(e){var t=this.mrnHelperService.mrnMask(this.menuType)+e;this.formGroup.get("mrn").setValue(t),this.isShortIdValid=this.validateMrn(t)}},{key:"validateMrn",value:function(e){return this.menuTypeName===k.organization||this.menuTypeName===k.approveorg?new RegExp(this.mrnHelperService.mrnMcpIdpRegexForOrg()).test(e):new RegExp(this.mrnHelperService.mrnMcpIdpRegex()).test(e)}},{key:"getValidators",value:function(e){var t=[];return e[1].required&&t.push(F.kI.required),"email"===e[0]&&t.push(F.kI.email),"mrn"===e[0]&&t.push(F.kI.pattern(this.menuTypeName===k.organization||this.menuTypeName===k.approveorg?this.mrnHelperService.mrnMcpIdpRegexForOrg():this.mrnHelperService.mrnMcpIdpRegex())),t}},{key:"invertIsEditing",value:function(){this.isEditing=!this.isEditing}},{key:"fetchFieldValues",value:function(){var e=this;if(!v.hasOwnProperty(this.menuType))throw this.settle(!1),new Error("There's no '".concat(this.menuType,"DataService' in ColumnForMenu"));if(this.isLoading=!0,!g.includes(this.menuType))throw this.settle(!1),new Error("There's no such thing as '".concat(this.menuType,"DataService'"));if(this.menuType===k.organization)this.loadOrgContent(this.entityMrn).subscribe(function(t){e.settle(!0),e.name=t.name,e.adjustData(t);var r=e.certificateService.splitByRevokeStatus(t.certificates);e.activeCertificates=r.activeCertificates,e.revokedCertificates=r.revokedCertificates},function(t){e.notifierService.notify("error",t.message),e.router.navigateByUrl("/pages/404")});else if(this.menuType===k.unapprovedorg)this.isUnapprovedorg=!0,this.organizationControllerService.getUnapprovedOrganizations().subscribe(function(t){e.settle(!0),e.adjustData(t.content.filter(function(t){return t.mrn===e.entityMrn}).pop())},function(t){e.notifierService.notify("error",t.message),e.router.navigateByUrl("/pages/404")});else if(this.menuType===k.role){var t=parseInt(this.entityMrn);this.roleControllerService.getRole(this.orgMrn,t).subscribe(function(t){e.settle(!0),e.roleId=t.id,e.adjustData(t)},function(t){e.notifierService.notify("error",t.message),e.router.navigateByUrl("/pages/404")})}else this.route.queryParams.subscribe(function(t){return e.loadDataContent(e.menuType,e.authService.authState.user.organization,e.entityMrn,t.version).subscribe(function(t){e.settle(!0),e.adjustData(t);var r=e.certificateService.splitByRevokeStatus(t.certificates);e.activeCertificates=r.activeCertificates,e.revokedCertificates=r.revokedCertificates},function(t){e.notifierService.notify("error",t.message),e.router.navigateByUrl("/pages/404")})})}},{key:"refreshData",value:function(){this.fetchFieldValues()}},{key:"moveToListPage",value:function(){this.router.navigate(["../../"+this.menuType+"s"],{relativeTo:this.route})}},{key:"delete",value:function(){var e=this,t="Are you sure you want to delete?";t=y.indexOf(this.menuType)>=0?t+" All certificates under this entity will be revoked.":t,confirm(t)&&this.deleteData(this.menuType,this.orgMrn,this.entityMrn,this.instanceVersion).subscribe(function(t){e.notifierService.notify("success",e.name+" has been successfully deleted"),e.moveToListPage()},function(t){return e.notifierService.notify("error","There was error in deletion - "+t.message)})}},{key:"cancel",value:function(){this.location.back()}},{key:"submit",value:function(){var e=this,t=Object.assign({},this.formGroup.value);"role"===this.menuType?this.loadOrgContent(this.orgMrn).subscribe(function(r){return e.submitDateToBackend(Object.assign(Object.assign({},t),{idOrganization:r.id}))},function(t){return e.notifierService.notify("error","Error in fetching organization information")}):this.submitDateToBackend(Object.assign(Object.assign({},t),{mrn:this.formGroup.get("mrn").value}),this.formGroup.get("mrn").value),this.isLoading=!0}},{key:"submitDateToBackend",value:function(e,t){var r=this;this.isForNew?this.registerData(this.menuType,e,this.authService.authState.orgMrn).subscribe(function(e){r.notifierService.notify("success","New "+r.menuType+" has been created"),r.isLoading=!1,r.moveToListPage()},function(e){r.notifierService.notify("error","Creation has failed - "+e.message),r.isLoading=!1}):this.updateData(this.menuType,e,this.authService.authState.orgMrn,t,this.instanceVersion).subscribe(function(e){r.notifierService.notify("success",r.menuType+" has been updated"),r.isLoading=!1,r.isEditing=!1},function(e){r.notifierService.notify("error","Update has failed - "+e.message),r.isLoading=!1})}}]),t}(),We.\u0275fac=function(e){return new(e||We)(o["\u0275\u0275directiveInject"](l.gz),o["\u0275\u0275directiveInject"](l.F0),o["\u0275\u0275directiveInject"](i.Ye),o["\u0275\u0275directiveInject"](F.qu),o["\u0275\u0275directiveInject"](B.B7b),o["\u0275\u0275directiveInject"](_.p),o["\u0275\u0275directiveInject"](j.$),o["\u0275\u0275directiveInject"](x.U),o["\u0275\u0275directiveInject"](D.H),o["\u0275\u0275directiveInject"](V.e),o["\u0275\u0275directiveInject"](E.T),o["\u0275\u0275directiveInject"](N.r),o["\u0275\u0275directiveInject"](q),o["\u0275\u0275directiveInject"](T.lG),o["\u0275\u0275directiveInject"](J),o["\u0275\u0275directiveInject"](U.e))},We.\u0275cmp=o["\u0275\u0275defineComponent"]({type:We,selectors:[["ngx-detail"]],decls:9,vars:5,consts:[[1,"row"],[1,"col-lg-12"],[4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["class","row",4,"ngIf"],[3,"formGroup",4,"ngIf"],["nbButton","","status","info","ghost","",3,"click"],["icon","arrow-ios-back","pack","eva"],[1,"col","my-auto"],[1,"icon_header"],["pack","fas",3,"icon"],["class","col-md-auto",4,"ngIf"],[1,"col-md-auto"],["type","submit","nbButton","","status","primary",3,"disabled","click",4,"ngIf"],["type","button","nbButton","","status","danger",3,"click",4,"ngIf"],["type","button","nbButton","","status","primary",3,"click",4,"ngIf"],["type","submit","nbButton","","status","primary",3,"disabled","click"],["type","button","nbButton","","status","danger",3,"click"],["type","button","nbButton","","status","primary",3,"click"],[3,"formGroup"],["class","form-group row",4,"ngIf"],["class","form-group row",4,"ngFor","ngForOf"],["class","buttons-row",4,"ngIf"],[1,"form-group","row"],[1,"label","col-sm-3","col-form-label"],[1,"col-sm-9","my-auto"],["type","text","nbInput","","fullWidth","","id","input_shortId","required","true",1,"form-control",3,"status","value","input"],["nbPopoverTrigger","hint","nbPopoverPlacement","top",1,"label","col-sm-3","col-form-label",3,"for","nbPopover"],["class","my-auto","id","keyword.name",4,"ngIf"],["type","text","nbInput","","fullWidth","","class","form-control",3,"id","status","formControlName","required",4,"ngIf"],["id","keyword.name",1,"my-auto"],["type","text","nbInput","","fullWidth","",1,"form-control",3,"id","status","formControlName","required"],["for","inputActiveCert",1,"label","col-sm-3","col-form-label"],[1,"col"],[3,"data","forRevoked","entityType","entityTitle","entityMrn","orgMrn","instanceVersion","hasPermission","onUpdate"],["for","inputRevokedCert",1,"label","col-sm-3","col-form-label"],[3,"data","forRevoked","updateData"],[1,"buttons-row"],["type","button","nbButton","","status","primary"],["type","button","nbButton","","status","danger"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,Ce,4,1,"div",2),o["\u0275\u0275elementStart"](3,"nb-card"),o["\u0275\u0275template"](4,Ve,7,3,"nb-card-header",2),o["\u0275\u0275elementStart"](5,"nb-card-body",3),o["\u0275\u0275template"](6,De,4,0,"div",4),o["\u0275\u0275template"](7,Fe,6,6,"form",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"notifier-container")),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.isMyOrgPage&&!t.isForNew),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isLoaded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbSpinner",t.isLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isLoaded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isLoaded))},directives:[i.O5,B.Asz,B.yKW,B.Q7R,T.TK,B.DPz,B.fMN,B.ndF,F._Y,F.JL,F.sg,i.sg,B.h8i,B.ydg,F.Fj,F.JJ,F.u,F.Q7,Ae],styles:["nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}.nb-theme-default   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-default   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-dark   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-dark   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-cosmic   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-corporate   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-corporate   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}"]}),We)},{path:"**",component:a(55477).w}]}],Je=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[l.Bz.forChild(ze)],l.Bz]}),e}(),Ge=a(81718),Ze=((qe=function e(){f(this,e)}).\u0275fac=function(e){return new(e||qe)},qe.\u0275mod=o["\u0275\u0275defineNgModule"]({type:qe}),qe.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[T.lG],imports:[[i.ez,F.UX,B.nKr,B.zyh,B.KdK,B.uuI,B.EoG,B.T2N,B.spT,B.IIj,B.OA,p.ne,Je,T.Eb.withConfig(Ge.r)]]}),qe)}}])}();