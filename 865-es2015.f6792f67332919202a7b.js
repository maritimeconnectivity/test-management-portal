(self.webpackChunkmanagement_portal=self.webpackChunkmanagement_portal||[]).push([[865],{75530:function(e,t,r){"use strict";r.r(t),r.d(t,{HexBlock:function(){return o},ValueBlock:function(){return c},BaseBlock:function(){return h},Primitive:function(){return m},Constructed:function(){return p},EndOfContent:function(){return y},Boolean:function(){return b},Sequence:function(){return w},Set:function(){return k},Null:function(){return S},OctetString:function(){return A},BitString:function(){return I},Integer:function(){return B},Enumerated:function(){return _},ObjectIdentifier:function(){return E},Utf8String:function(){return x},RelativeObjectIdentifier:function(){return T},BmpString:function(){return U},UniversalString:function(){return H},NumericString:function(){return W},PrintableString:function(){return q},TeletexString:function(){return z},VideotexString:function(){return J},IA5String:function(){return $},GraphicString:function(){return G},VisibleString:function(){return Z},GeneralString:function(){return Q},CharacterString:function(){return X},UTCTime:function(){return Y},GeneralizedTime:function(){return ee},DATE:function(){return te},TimeOfDay:function(){return re},DateTime:function(){return ne},Duration:function(){return ie},TIME:function(){return ae},Choice:function(){return se},Any:function(){return oe},Repeated:function(){return ue},RawData:function(){return le},fromBER:function(){return he},compareSchema:function(){return fe},verifySchema:function(){return me},fromJSON:function(){return de}});var n=r(1971);function i(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}const a=[new Uint8Array([1])];class s{constructor(e={}){this.blockLength=(0,n.getParametersValue)(e,"blockLength",0),this.error=(0,n.getParametersValue)(e,"error",""),this.warnings=(0,n.getParametersValue)(e,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in e?e.valueBeforeDecode.slice(0):new ArrayBuffer(0)}static blockName(){return"baseBlock"}toJSON(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,n.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}const o=e=>class extends e{constructor(e={}){super(e),this.isHexOnly=(0,n.getParametersValue)(e,"isHexOnly",!1),this.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0)}static blockName(){return"hexBlock"}fromBER(e,t,r){return!1===(0,n.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}toBER(e=!1){return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}};class u extends(o(s)){constructor(e={}){super(),"idBlock"in e?(this.isHexOnly=(0,n.getParametersValue)(e.idBlock,"isHexOnly",!1),this.valueHex=(0,n.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),this.tagClass=(0,n.getParametersValue)(e.idBlock,"tagClass",-1),this.tagNumber=(0,n.getParametersValue)(e.idBlock,"tagNumber",-1),this.isConstructed=(0,n.getParametersValue)(e.idBlock,"isConstructed",!1)):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}static blockName(){return"identificationBlock"}toBER(e=!1){let t,r,i=0;switch(this.tagClass){case 1:i|=0;break;case 2:i|=64;break;case 3:i|=128;break;case 4:i|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(i|=32),this.tagNumber<31&&!this.isHexOnly){if(t=new ArrayBuffer(1),r=new Uint8Array(t),!e){let e=this.tagNumber;e&=31,i|=e,r[0]=i}return t}if(!1===this.isHexOnly){const a=(0,n.utilToBase)(this.tagNumber,7),s=new Uint8Array(a),o=a.byteLength;if(t=new ArrayBuffer(o+1),r=new Uint8Array(t),r[0]=31|i,!e){for(let e=0;e<o-1;e++)r[e+1]=128|s[e];r[o]=s[o-1]}return t}if(t=new ArrayBuffer(this.valueHex.byteLength+1),r=new Uint8Array(t),r[0]=31|i,!1===e){const e=new Uint8Array(this.valueHex);for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHex.byteLength]=e[e.length-1]}return t}fromBER(e,t,r){if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);if(0===i.length)return this.error="Zero buffer length",-1;switch(192&i[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&i[0]),this.isHexOnly=!1;const a=31&i[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{let e=1;this.valueHex=new ArrayBuffer(255);let t=255,r=new Uint8Array(this.valueHex);for(;128&i[e];){if(r[e-1]=127&i[e],e++,e>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(e===t){t+=255;const e=new ArrayBuffer(t),n=new Uint8Array(e);for(let t=0;t<r.length;t++)n[t]=r[t];this.valueHex=new ArrayBuffer(t),r=new Uint8Array(this.valueHex)}}this.blockLength=e+1,r[e-1]=127&i[e];const a=new ArrayBuffer(e),s=new Uint8Array(a);for(let n=0;n<e;n++)s[n]=r[n];this.valueHex=new ArrayBuffer(e),r=new Uint8Array(this.valueHex),r.set(s),this.blockLength<=9?this.tagNumber=(0,n.utilFromBase)(r,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}class l extends s{constructor(e={}){super(),"lenBlock"in e?(this.isIndefiniteForm=(0,n.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),this.longFormUsed=(0,n.getParametersValue)(e.lenBlock,"longFormUsed",!1),this.length=(0,n.getParametersValue)(e.lenBlock,"length",0)):(this.isIndefiniteForm=!1,this.longFormUsed=!1,this.length=0)}static blockName(){return"lengthBlock"}fromBER(e,t,r){if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);if(0===i.length)return this.error="Zero buffer length",-1;if(255===i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===i[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&i[0]),!1===this.longFormUsed)return this.length=i[0],this.blockLength=1,t+this.blockLength;const a=127&i[0];if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const s=new Uint8Array(a);for(let n=0;n<a;n++)s[n]=i[n+1];return 0===s[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,n.utilFromBase)(s,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=128),t;if(!0===this.longFormUsed){const i=(0,n.utilToBase)(this.length,8);if(i.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength+1),!0===e)return t;const a=new Uint8Array(i);r=new Uint8Array(t),r[0]=128|i.byteLength;for(let e=0;e<i.byteLength;e++)r[e+1]=a[e];return t}return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=this.length),t}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}class c extends s{constructor(e={}){super(e)}static blockName(){return"valueBlock"}fromBER(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}toBER(e=!1){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}class h extends s{constructor(e={},t=c){super(e),"name"in e&&(this.name=e.name),"optional"in e&&(this.optional=e.optional),"primitiveSchema"in e&&(this.primitiveSchema=e.primitiveSchema),this.idBlock=new u(e),this.lenBlock=new l(e),this.valueBlock=new t(e)}static blockName(){return"BaseBlock"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}toBER(e=!1){let t;const r=this.idBlock.toBER(e),i=this.valueBlock.toBER(!0);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);let s;if(t=(0,n.utilConcatBuf)(r,a),s=!1===e?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,n.utilConcatBuf)(t,s),!0===this.lenBlock.isIndefiniteForm){const r=new ArrayBuffer(2);if(!1===e){const e=new Uint8Array(r);e[0]=0,e[1]=0}t=(0,n.utilConcatBuf)(t,r)}return t}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(){return`${this.constructor.blockName()} : ${(0,n.bufferToHexCodes)(this.valueBlock.valueHex)}`}}class f extends c{constructor(e={}){super(e),this.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),this.isHexOnly=(0,n.getParametersValue)(e,"isHexOnly",!0)}fromBER(e,t,r){if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);if(0===i.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(i.length);const a=new Uint8Array(this.valueHex);for(let n=0;n<i.length;n++)a[n]=i[n];return this.blockLength=r,t+r}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"PrimitiveValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.valueHex=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}class m extends h{constructor(e={}){super(e,f),this.idBlock.isConstructed=!1}static blockName(){return"PRIMITIVE"}}class d extends c{constructor(e={}){super(e),this.value=(0,n.getParametersValue)(e,"value",[]),this.isIndefiniteForm=(0,n.getParametersValue)(e,"isIndefiniteForm",!1)}fromBER(e,t,r){const i=t,a=r;if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;let s=t;for(;(!0===this.isIndefiniteForm?1:r)>0;){const t=ce(e,s,r);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(s=t.offset,this.blockLength+=t.result.blockLength,r-=t.result.blockLength,this.value.push(t.result),!0===this.isIndefiniteForm&&t.result.constructor.blockName()===y.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===y.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(i,i+a),s}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);t=(0,n.utilConcatBuf)(t,i)}return t}static blockName(){return"ConstructedValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(let r=0;r<this.value.length;r++)e.value.push(this.value[r].toJSON());return e}}class p extends h{constructor(e={}){super(e,d),this.idBlock.isConstructed=!0}static blockName(){return"CONSTRUCTED"}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}toString(){const e=[];for(const r of this.valueBlock.value)e.push(r.toString().split("\n").map(e=>`  ${e}`).join("\n"));const t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.blockName();return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}class g extends c{constructor(e={}){super(e)}fromBER(e,t,r){return t}toBER(e=!1){return new ArrayBuffer(0)}static blockName(){return"EndOfContentValueBlock"}}class y extends h{constructor(e={}){super(e,g),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}static blockName(){return"EndOfContent"}}class v extends c{constructor(e={}){super(e),this.value=(0,n.getParametersValue)(e,"value",!1),this.isHexOnly=(0,n.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e?this.valueHex=e.valueHex.slice(0):(this.valueHex=new ArrayBuffer(1),!0===this.value&&(new Uint8Array(this.valueHex)[0]=255))}fromBER(e,t,r){if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(i.length);const a=new Uint8Array(this.valueHex);for(let n=0;n<i.length;n++)a[n]=i[n];return this.value=0!==n.utilDecodeTC.call(this),this.blockLength=r,t+r}toBER(e=!1){return this.valueHex}static blockName(){return"BooleanValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class b extends h{constructor(e={}){super(e,v),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}static blockName(){return"BOOLEAN"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class w extends p{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}static blockName(){return"SEQUENCE"}}class k extends p{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}static blockName(){return"SET"}}class S extends h{constructor(e={}){super(e,s),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}static blockName(){return"NULL"}fromBER(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e=!1){const t=new ArrayBuffer(2);if(!0===e)return t;const r=new Uint8Array(t);return r[0]=5,r[1]=0,t}toString(){return`${this.constructor.blockName()}`}}class P extends(o(d)){constructor(e={}){super(e),this.isConstructed=(0,n.getParametersValue)(e,"isConstructed",!1)}fromBER(e,t,r){let n=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,n=d.prototype.fromBER.call(this,e,t,r),-1===n)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.blockName();if(t===y.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==A.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e=!1){if(!0===this.isConstructed)return d.prototype.toBER.call(this,e);let t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength||(t=this.valueHex.slice(0)),t}static blockName(){return"OctetStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class A extends h{constructor(e={}){super(e,P),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const i=e.slice(t,t+r);try{const e=he(i);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}catch(n){}}return super.fromBER(e,t,r)}static blockName(){return"OCTET STRING"}isEqual(e){return e instanceof A!=0&&JSON.stringify(this)===JSON.stringify(e)}toString(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?p.prototype.toString.call(this):`${this.constructor.blockName()} : ${(0,n.bufferToHexCodes)(this.valueBlock.valueHex)}`}}class C extends(o(d)){constructor(e={}){super(e),this.unusedBits=(0,n.getParametersValue)(e,"unusedBits",0),this.isConstructed=(0,n.getParametersValue)(e,"isConstructed",!1),this.blockLength=this.valueHex.byteLength}fromBER(e,t,r){if(0===r)return t;let i=-1;if(!0===this.isConstructed){if(i=d.prototype.fromBER.call(this,e,t,r),-1===i)return i;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.blockName();if(t===y.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==I.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[e].valueBlock.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[e].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return i}if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const a=new Uint8Array(e,t,r);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const n=e.slice(t+1,t+r);try{const e=he(n);-1!==e.offset&&e.offset===r-1&&(this.value=[e.result])}catch(o){}}this.valueHex=new ArrayBuffer(a.length-1);const s=new Uint8Array(this.valueHex);for(let n=0;n<r-1;n++)s[n]=a[n+1];return this.blockLength=a.length,t+r}toBER(e=!1){if(!0===this.isConstructed)return d.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);const t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(let i=0;i<this.valueHex.byteLength;i++)n[i+1]=t[i];return r}static blockName(){return"BitStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class I extends h{constructor(e={}){super(e,C),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}static blockName(){return"BIT STRING"}fromBER(e,t,r){return 0===r?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r))}isEqual(e){return e instanceof I!=0&&JSON.stringify(this)===JSON.stringify(e)}toString(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return p.prototype.toString.call(this);{const e=[],t=new Uint8Array(this.valueBlock.valueHex);for(const r of t)e.push(r.toString(2).padStart(8,"0"));return`${this.constructor.blockName()} : ${e.join("")}`}}}class O extends(o(c)){constructor(e={}){super(e),"value"in e&&(this.valueDec=e.value)}set valueHex(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=n.utilDecodeTC.call(this)))}get valueHex(){return this._valueHex}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,n.utilEncodeTC)(e)}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const i=this.fromBER(e,t,r);if(-1===i)return i;const a=new Uint8Array(this._valueHex);if(0===a[0]&&0!=(128&a[1])){const e=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(e).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=e.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);const e=new ArrayBuffer(n);new Uint8Array(e).set(a,n-this._valueHex.byteLength),this._valueHex=e.slice(0)}return i}toDER(e=!1){const t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):{const e=new ArrayBuffer(this._valueHex.byteLength+1),r=new Uint8Array(e);r[0]=0,r.set(t,1),this._valueHex=e.slice(0)}break;case 0===t[0]&&0==(128&t[1]):{const e=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(e).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=e.slice(0)}}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);return-1===n?n:(this.blockLength=r,t+r)}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"IntegerValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.valueDec=this.valueDec,e}toString(){function e(e,t){const r=new Uint8Array([0]);let i=new Uint8Array(e),a=new Uint8Array(t),s=i.slice(0);const o=s.length-1;let u=a.slice(0);const l=u.length-1;let c=0,h=0;for(let f=l<o?o:l;f>=0;f--,h++){switch(!0){case h<u.length:c=s[o-h]+u[l-h]+r[0];break;default:c=s[o-h]+r[0]}switch(r[0]=c/10,!0){case h>=s.length:s=(0,n.utilConcatView)(new Uint8Array([c%10]),s);break;default:s[o-h]=c%10}}return r[0]>0&&(s=(0,n.utilConcatView)(r,s)),s.slice(0)}function t(e){if(e>=a.length)for(let t=a.length;t<=e;t++){const e=new Uint8Array([0]);let r=a[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10,r[t]=n[0]%10}e[0]>0&&(r=(0,n.utilConcatView)(e,r)),a.push(r)}return a[e]}function r(e,t){let r=0,n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0);const s=a.length-1;let o=i.slice(0);const u=o.length-1;let l,c=0;for(let h=u;h>=0;h--,c++)switch(l=a[s-c]-o[u-c]-r,!0){case l<0:r=1,a[s-c]=l+10;break;default:r=0,a[s-c]=l}if(r>0)for(let h=s-u+1;h>=0;h--,c++){if(l=a[s-c]-r,!(l<0)){r=0,a[s-c]=l;break}r=1,a[s-c]=l+10}return a.slice()}const i=8*this._valueHex.byteLength-1;let s,o=new Uint8Array(8*this._valueHex.byteLength/3),u=0;const l=new Uint8Array(this._valueHex);let c="",h=!1;for(let n=this._valueHex.byteLength-1;n>=0;n--){s=l[n];for(let n=0;n<8;n++){if(1==(1&s))switch(u){case i:o=r(t(u),o),c="-";break;default:o=e(o,t(u))}u++,s>>=1}}for(let n=0;n<o.length;n++)o[n]&&(h=!0),h&&(c+="0123456789".charAt(o[n]));return!1===h&&(c+="0123456789".charAt(0)),c}}class B extends h{constructor(e={}){super(e,O),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}static blockName(){return"INTEGER"}isEqual(e){return e instanceof B?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,n.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,n.isEqualBuffer)(this.valueBlock.valueHex,e)}convertToDER(){const e=new B({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}convertFromDER(){const e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new B({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}toString(){i();const e=(0,n.bufferToHexCodes)(this.valueBlock.valueHex),t=BigInt(`0x${e}`);return`${this.constructor.blockName()} : ${t.toString()}`}}class _ extends B{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}static blockName(){return"ENUMERATED"}}class j extends(o(s)){constructor(e={}){super(e),this.valueDec=(0,n.getParametersValue)(e,"valueDec",-1),this.isFirstSid=(0,n.getParametersValue)(e,"isFirstSid",!1)}static blockName(){return"sidBlock"}fromBER(e,t,r){if(0===r)return t;if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);let a=new Uint8Array(this.valueHex);for(let n=0;n<r&&(a[n]=127&i[n],this.blockLength++,0!=(128&i[n]));n++);const s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s);for(let n=0;n<this.blockLength;n++)o[n]=a[n];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&i[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,n.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){i();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const r=new Uint8Array(t.length/7);for(let n=0;n<r.length;n++)r[n]=parseInt(t.slice(7*n,7*n+7),2)+(n+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e=!1){let t,r;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);const n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(let e=0;e<this.blockLength-1;e++)r[e]=128|n[e];return r[this.blockLength-1]=n[this.blockLength-1],t}const i=(0,n.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),!1===e){const e=new Uint8Array(i);r=new Uint8Array(t);for(let t=0;t<i.byteLength-1;t++)r[t]=128|e[t];r[i.byteLength-1]=e[i.byteLength-1]}return t}toString(){let e="";if(!0===this.isHexOnly)e=(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}class N extends c{constructor(e={}){super(e),this.fromString((0,n.getParametersValue)(e,"value",""))}fromBER(e,t,r){let n=t;for(;r>0;){const t=new j;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(0===i.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,n.utilConcatBuf)(t,i)}return t}fromString(e){this.value=[];let t=0,r=0,n="",a=!1;do{if(r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1,a){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return this.value=[],!1}const r=parseInt(n,10);if(isNaN(r))return!0;e.valueDec=r+t,a=!1}else{const e=new j;if(n>Number.MAX_SAFE_INTEGER){i();const t=BigInt(n);e.valueBigInt=t}else if(e.valueDec=parseInt(n,10),isNaN(e.valueDec))return!0;0===this.value.length&&(e.isFirstSid=!0,a=!0),this.value.push(e)}}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,this.value[r].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}static blockName(){return"ObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}e.value=this.toString(),e.sidArray=[];for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}class E extends h{constructor(e={}){super(e,N),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}static blockName(){return"OBJECT IDENTIFIER"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.toString()}`}}class V extends(o(s)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"Utf8StringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.value=this.value,e}}class x extends h{constructor(e={}){super(e,V),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}static blockName(){return"UTF8String"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`)}}fromString(e){const t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);const n=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<r;i++)n[i]=t.charCodeAt(i);this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class D extends(o(s)){constructor(e={}){super(e),this.valueDec=(0,n.getParametersValue)(e,"valueDec",-1)}static blockName(){return"relativeSidBlock"}fromBER(e,t,r){if(0===r)return t;if(!1===(0,n.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);let a=new Uint8Array(this.valueHex);for(let n=0;n<r&&(a[n]=127&i[n],this.blockLength++,0!=(128&i[n]));n++);const s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s);for(let n=0;n<this.blockLength;n++)o[n]=a[n];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&i[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,n.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e=!1){let t,r;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);const n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(let e=0;e<this.blockLength-1;e++)r[e]=128|n[e];return r[this.blockLength-1]=n[this.blockLength-1],t}const i=(0,n.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),!1===e){const e=new Uint8Array(i);r=new Uint8Array(t);for(let t=0;t<i.byteLength-1;t++)r[t]=128|e[t];r[i.byteLength-1]=e[i.byteLength-1]}return t}toString(){let e="";return e=!0===this.isHexOnly?(0,n.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString(),e}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.valueDec=this.valueDec,e}}class M extends c{constructor(e={}){super(e),this.fromString((0,n.getParametersValue)(e,"value",""))}fromBER(e,t,r){let n=t;for(;r>0;){const t=new D;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(0===i.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,n.utilConcatBuf)(t,i)}return t}fromString(e){this.value=[];let t=0,r=0,n="";do{r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1;const i=new D;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,e+=n):e+=n}return e}static blockName(){return"RelativeObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}e.value=this.toString(),e.sidArray=[];for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}class T extends h{constructor(e={}){super(e,M),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}static blockName(){return"RelativeObjectIdentifier"}}class R extends(o(s)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"BmpStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.value=this.value,e}}class U extends h{constructor(e={}){super(e,R),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}static blockName(){return"BMPString"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){const t=e.slice(0),r=new Uint8Array(t);for(let n=0;n<r.length;n+=2){const e=r[n];r[n]=r[n+1],r[n+1]=e}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);const r=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<t;i++){const t=(0,n.utilToBase)(e.charCodeAt(i),8),a=new Uint8Array(t);if(a.length>2)continue;const s=2-a.length;for(let e=a.length-1;e>=0;e--)r[2*i+e+s]=a[e]}this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class L extends(o(s)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"UniversalStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.value=this.value,e}}class H extends h{constructor(e={}){super(e,L),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}static blockName(){return"UniversalString"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){const t=e.slice(0),r=new Uint8Array(t);for(let n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);const r=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<t;i++){const t=(0,n.utilToBase)(e.charCodeAt(i),8),a=new Uint8Array(t);if(a.length>4)continue;const s=4-a.length;for(let e=a.length-1;e>=0;e--)r[4*i+e+s]=a[e]}this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class K extends(o(s)){constructor(e={}){super(e),this.value="",this.isHexOnly=!0}static blockName(){return"SimpleStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.value=this.value,e}}class F extends h{constructor(e={}){super(e,K),"value"in e&&this.fromString(e.value)}static blockName(){return"SIMPLESTRING"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);const r=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class W extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}static blockName(){return"NumericString"}}class q extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}static blockName(){return"PrintableString"}}class z extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}static blockName(){return"TeletexString"}}class J extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}static blockName(){return"VideotexString"}}class $ extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}static blockName(){return"IA5String"}}class G extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}static blockName(){return"GraphicString"}}class Z extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}static blockName(){return"VisibleString"}}class Q extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}static blockName(){return"GeneralString"}}class X extends F{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}static blockName(){return"CharacterString"}}class Y extends Z{constructor(e={}){if(super(e),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<e.value.length;r++)t[r]=e.value.charCodeAt(r)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for convertion");const r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(){const e=new Array(7);return e[0]=(0,n.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,n.padNumber)(this.month,2),e[2]=(0,n.padNumber)(this.day,2),e[3]=(0,n.padNumber)(this.hour,2),e[4]=(0,n.padNumber)(this.minute,2),e[5]=(0,n.padNumber)(this.second,2),e[6]="Z",e.join("")}static blockName(){return"UTCTime"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}class ee extends Z{constructor(e={}){if(super(e),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<e.value.length;r++)t[r]=e.value.charCodeAt(r)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,n="",i="",a=0,s=0,o=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{let e=1,t=n.indexOf("+"),r="";if(-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(r=n.substr(t+1),n=n.substr(0,t),2!==r.length&&4!==r.length)throw new Error("Wrong input string for convertion");let i=new Number(r.substr(0,2));if(isNaN(i.valueOf()))throw new Error("Wrong input string for convertion");if(s=e*i,4===r.length){if(i=new Number(r.substr(2,2)),isNaN(i.valueOf()))throw new Error("Wrong input string for convertion");o=e*i}}}let u=n.indexOf(".");if(-1===u&&(u=n.indexOf(",")),-1!==u){const e=new Number(`0${n.substr(u)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for convertion");a=e.valueOf(),i=n.substr(0,u)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==u)throw new Error("Wrong input string for convertion");break;case 10===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let e=60*a;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let e=60*a;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===i.length:t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u&&(this.millisecond=Math.floor(1e3*a));break;default:throw new Error("Wrong input string for convertion")}const l=t.exec(i);if(null===l)throw new Error("Wrong input string for convertion");for(let c=1;c<l.length;c++)switch(c){case 1:this.year=parseInt(l[c],10);break;case 2:this.month=parseInt(l[c],10);break;case 3:this.day=parseInt(l[c],10);break;case 4:this.hour=parseInt(l[c],10)+s;break;case 5:this.minute=parseInt(l[c],10)+o;break;case 6:this.second=parseInt(l[c],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(){const e=[];return e.push((0,n.padNumber)(this.year,4)),e.push((0,n.padNumber)(this.month,2)),e.push((0,n.padNumber)(this.day,2)),e.push((0,n.padNumber)(this.hour,2)),e.push((0,n.padNumber)(this.minute,2)),e.push((0,n.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,n.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}static blockName(){return"GeneralizedTime"}toJSON(){let e={};try{e=super.toJSON()}catch(t){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}class te extends x{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}static blockName(){return"DATE"}}class re extends x{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}static blockName(){return"TimeOfDay"}}class ne extends x{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}static blockName(){return"DateTime"}}class ie extends x{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}static blockName(){return"Duration"}}class ae extends x{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}static blockName(){return"TIME"}}class se{constructor(e={}){this.value=(0,n.getParametersValue)(e,"value",[]),this.optional=(0,n.getParametersValue)(e,"optional",!1)}}class oe{constructor(e={}){this.name=(0,n.getParametersValue)(e,"name",""),this.optional=(0,n.getParametersValue)(e,"optional",!1)}}class ue{constructor(e={}){this.name=(0,n.getParametersValue)(e,"name",""),this.optional=(0,n.getParametersValue)(e,"optional",!1),this.value=(0,n.getParametersValue)(e,"value",new oe),this.local=(0,n.getParametersValue)(e,"local",!1)}}class le{constructor(e={}){this.data=(0,n.getParametersValue)(e,"data",new ArrayBuffer(0))}fromBER(e,t,r){return this.data=e.slice(t,r),t+r}toBER(e=!1){return this.data}}function ce(e,t,r){const i=t;let a=new h({},Object);const o=new s;if(!1===(0,n.checkBufferParams)(o,e,t,r))return a.error=o.error,{offset:-1,result:a};if(0===new Uint8Array(e,t,r).length)return a.error="Zero buffer length",{offset:-1,result:a};let u=a.idBlock.fromBER(e,t,r);if(a.warnings.concat(a.idBlock.warnings),-1===u)return a.error=a.idBlock.error,{offset:-1,result:a};if(u=a.lenBlock.fromBER(e,t=u,r-=a.idBlock.blockLength),a.warnings.concat(a.lenBlock.warnings),-1===u)return a.error=a.lenBlock.error,{offset:-1,result:a};if(t=u,r-=a.lenBlock.blockLength,!1===a.idBlock.isConstructed&&!0===a.lenBlock.isIndefiniteForm)return a.error="Indefinite length form used for primitive encoding form",{offset:-1,result:a};let l=h;switch(a.idBlock.tagClass){case 1:if(a.idBlock.tagNumber>=37&&!1===a.idBlock.isHexOnly)return a.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:a};switch(a.idBlock.tagNumber){case 0:if(!0===a.idBlock.isConstructed&&a.lenBlock.length>0)return a.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:a};l=y;break;case 1:l=b;break;case 2:l=B;break;case 3:l=I;break;case 4:l=A;break;case 5:l=S;break;case 6:l=E;break;case 10:l=_;break;case 12:l=x;break;case 13:l=T;break;case 14:l=ae;break;case 15:return a.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:a};case 16:l=w;break;case 17:l=k;break;case 18:l=W;break;case 19:l=q;break;case 20:l=z;break;case 21:l=J;break;case 22:l=$;break;case 23:l=Y;break;case 24:l=ee;break;case 25:l=G;break;case 26:l=Z;break;case 27:l=Q;break;case 28:l=H;break;case 29:l=X;break;case 30:l=U;break;case 31:l=te;break;case 32:l=re;break;case 33:l=ne;break;case 34:l=ie;break;default:{let e;e=!0===a.idBlock.isConstructed?new p:new m,e.idBlock=a.idBlock,e.lenBlock=a.lenBlock,e.warnings=a.warnings,a=e}}break;case 2:case 3:case 4:default:l=!0===a.idBlock.isConstructed?p:m}return a=function(e,t){if(e instanceof t)return e;const r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(a,l),u=a.fromBER(e,t,!0===a.lenBlock.isIndefiniteForm?r:a.lenBlock.length),a.valueBeforeDecode=e.slice(i,i+a.blockLength),{offset:u,result:a}}function he(e){if(0===e.byteLength){const e=new h({},Object);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ce(e,0,e.byteLength)}function fe(e,t,r){if(r instanceof se){const n=!1;for(let i=0;i<r.value.length;i++)if(!0===fe(e,t,r.value[i]).verified)return{verified:!0,result:e};if(!1===n){const e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(e.name=r.name),e}}if(r instanceof oe)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==0)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=r.idBlock.toBER(!1);if(0===n.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(n,0,n.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=new Uint8Array(r.idBlock.valueHex),i=new Uint8Array(t.idBlock.valueHex);if(n.length!==i.length)return{verified:!1,result:e};for(let t=0;t<n.length;t++)if(n[t]!==i[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){let n=0,i={verified:!1},a=r.valueBlock.value.length;if(a>0&&r.valueBlock.value[0]instanceof ue&&(a=t.valueBlock.value.length),0===a)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return!0===t?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let s=0;s<a;s++)if(s-n>=t.valueBlock.value.length){if(!1===r.valueBlock.value[s].optional){const t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof ue){if(i=fe(e,t.valueBlock.value[s],r.valueBlock.value[0].value),!1===i.verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),i;n++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};n="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e,void 0===n[r.valueBlock.value[0].name]&&(n[r.valueBlock.value[0].name]=[]),n[r.valueBlock.value[0].name].push(t.valueBlock.value[s])}}else if(i=fe(e,t.valueBlock.value[s-n],r.valueBlock.value[s]),!1===i.verified){if(!0!==r.valueBlock.value[s].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),i;n++}if(!1===i.verified){const t={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){const n=he(t.valueBlock.valueHex);if(-1===n.offset){const t={verified:!1,result:n.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}return fe(e,n.result,r.primitiveSchema)}return{verified:!0,result:e}}function me(e,t){if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const r=he(e);return-1===r.offset?{verified:!1,result:r.result}:fe(r.result,r.result,t)}function de(e){}},28807:function(e,t,r){"use strict";r.r(t),r.d(t,{ByteStream:function(){return n},SeqStream:function(){return i},parseByteMap:function(){return a},BitStream:function(){return o},SeqBitStream:function(){return u}});class n{constructor(e={}){this.clear();for(const t of Object.keys(e))switch(t){case"length":this.length=e.length;break;case"stub":for(let t=0;t<this._view.length;t++)this._view[t]=e.stub;break;case"view":this.fromUint8Array(e.view);break;case"buffer":this.fromArrayBuffer(e.buffer);break;case"string":this.fromString(e.string);break;case"hexstring":this.fromHexString(e.hexstring)}}set buffer(e){this._buffer=e.slice(0),this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this._buffer.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this.buffer=e}fromUint8Array(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}fromString(e){const t=e.length;this.length=t;for(let r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,t=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const r=new Map;r.set("0",0),r.set("1",1),r.set("2",2),r.set("3",3),r.set("4",4),r.set("5",5),r.set("6",6),r.set("7",7),r.set("8",8),r.set("9",9),r.set("A",10),r.set("a",10),r.set("B",11),r.set("b",11),r.set("C",12),r.set("c",12),r.set("D",13),r.set("d",13),r.set("E",14),r.set("e",14),r.set("F",15),r.set("f",15);let n=0,i=0;for(let a=0;a<t;a++)a%2?(i|=r.get(e.charAt(a)),this.view[n]=i,n++):i=r.get(e.charAt(a))<<4}toHexString(e=0,t=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let n=e;n<e+t;n++){const e=this.view[n].toString(16).toUpperCase();r=r+(1==e.length?"0":"")+e}return r}copy(e=0,t=this._buffer.byteLength-e){if(0===e&&0===this._buffer.byteLength)return new n;if(e<0||e>this._buffer.byteLength-1)throw new Error(`Wrong start position: ${e}`);const r=new n;return r._buffer=this._buffer.slice(e,e+t),r._view=new Uint8Array(r._buffer),r}slice(e=0,t=this._buffer.byteLength){if(0===e&&0===this._buffer.byteLength)return new n;if(e<0||e>this._buffer.byteLength-1)throw new Error(`Wrong start position: ${e}`);const r=new n;return r._buffer=this._buffer.slice(e,t),r._view=new Uint8Array(r._buffer),r}realloc(e){const t=new ArrayBuffer(e);new Uint8Array(t).set(e>this._view.length?this._view:new Uint8Array(this._buffer,0,e)),this._buffer=t.slice(0),this._view=new Uint8Array(this._buffer)}append(e){const t=this._buffer.byteLength,r=e._buffer.byteLength,n=e._view.slice();this.realloc(t+r),this._view.set(n,t)}insert(e,t=0,r=this._buffer.byteLength-t){return!(t>this._buffer.byteLength-1||(r>this._buffer.byteLength-t&&(r=this._buffer.byteLength-t),r>e._buffer.byteLength&&(r=e._buffer.byteLength),this._view.set(r==e._buffer.byteLength?e._view:e._view.slice(0,r),t),0))}isEqual(e){if(this._buffer.byteLength!=e._buffer.byteLength)return!1;for(let t=0;t<e._buffer.byteLength;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t=null,r=null,n=!1){null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));const i=e.buffer.byteLength;if(i>r)return-1;const a=[];for(let s=0;s<i;s++)a.push(e.view[s]);for(let s=0;s<=r-i;s++){let e=!0;const r=n?t-i-s:t+s;for(let t=0;t<i;t++)if(this.view[t+r]!=a[t]){e=!1;break}if(e)return n?t-i-s:t+i+s}return-1}findFirstIn(e,t=null,r=null,n=!1){null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));const i={id:-1,position:n?0:t+r,length:0};for(let a=0;a<e.length;a++){const s=this.findPattern(e[a],t,r,n);if(-1!=s){let t=!1;const r=e[a].length;n?s-r>=i.position-i.length&&(t=!0):s-r<=i.position-i.length&&(t=!0),t&&(i.position=s,i.id=a,i.length=r)}}return i}findAllIn(e,t=0,r=this.buffer.byteLength-t){const n=[];if(null==t&&(t=0),t>this.buffer.byteLength-1)return n;null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);let i={id:-1,position:t};for(;;){const t=i.position;if(i=this.findFirstIn(e,i.position,r),-1==i.id)break;r-=i.position-t,n.push({id:i.id,position:i.position})}return n}findAllPatternIn(e,t=0,r=this.buffer.byteLength-t){null==t&&(t=0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);const n=[],i=e.buffer.byteLength;if(i>r)return-1;const a=Array.from(e.view);for(let s=0;s<=r-i;s++){let e=!0;const r=t+s;for(let t=0;t<i;t++)if(this.view[t+r]!=a[t]){e=!1;break}e&&(n.push(t+i+s),s+=i-1)}return n}findFirstNotIn(e,t=null,r=null,i=!1){null==t&&(t=i?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),i?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));const a={left:{id:-1,position:t},right:{id:-1,position:0},value:new n};let s=r;for(;s>0;){if(a.right=this.findFirstIn(e,i?t-r+s:t+r-s,s,i),-1==a.right.id){r=s,i?t-=r:t=a.left.position,a.value=new n,a.value._buffer=this._buffer.slice(t,t+r),a.value._view=new Uint8Array(a.value._buffer);break}if(a.right.position!=(i?a.left.position-e[a.right.id].buffer.byteLength:a.left.position+e[a.right.id].buffer.byteLength)){i?(t=a.right.position+e[a.right.id].buffer.byteLength,r=a.left.position-a.right.position-e[a.right.id].buffer.byteLength):(t=a.left.position,r=a.right.position-a.left.position-e[a.right.id].buffer.byteLength),a.value=new n,a.value._buffer=this._buffer.slice(t,t+r),a.value._view=new Uint8Array(a.value._buffer);break}a.left=a.right,s-=e[a.right.id]._buffer.byteLength}if(i){const e=a.right;a.right=a.left,a.left=e}return a}findAllNotIn(e,t=null,r=null){const i=[];if(null==t&&(t=0),t>this.buffer.byteLength-1)return i;null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);let a={left:{id:-1,position:t},right:{id:-1,position:t},value:new n};do{const t=a.right.position;a=this.findFirstNotIn(e,a.right.position,r),r-=a.right.position-t,i.push({left:{id:a.left.id,position:a.left.position},right:{id:a.right.id,position:a.right.position},value:a.value})}while(-1!=a.right.id);return i}findFirstSequence(e,t=null,r=null,i=!1){null==t&&(t=i?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),i?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));const a=this.skipNotPatterns(e,t,r,i);if(-1==a)return{position:-1,value:new n};const s=this.skipPatterns(e,a,r-(i?t-a:a-t),i);i?(t=s,r=a-s):(t=a,r=s-a);const o=new n;return o._buffer=this._buffer.slice(t,t+r),o._view=new Uint8Array(o._buffer),{position:s,value:o}}findAllSequences(e,t=null,r=null){const i=[];if(null==t&&(t=0),t>this.buffer.byteLength-1)return i;null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);let a={position:t,value:new n};do{const t=a.position;a=this.findFirstSequence(e,a.position,r),-1!=a.position&&(r-=a.position-t,i.push({position:a.position,value:a.value}))}while(-1!=a.position);return i}findPairedPatterns(e,t,r=null,n=null){const i=[];if(e.isEqual(t))return i;if(null==r&&(r=0),r>this.buffer.byteLength-1)return i;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);let a=0;const s=this.findAllPatternIn(e,r,n);if(0==s.length)return i;const o=this.findAllPatternIn(t,r,n);if(0==o.length)return i;for(;a<s.length&&0!=o.length;)if(s[0]!=o[0]){if(s[a]>o[0])break;for(;s[a]<o[0]&&(a++,!(a>=s.length)););i.push({left:s[a-1],right:o[0]}),s.splice(a-1,1),o.splice(0,1),a=0}else i.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return i.sort((e,t)=>e.left-t.left),i}findPairedArrays(e,t,r=null,n=null){const i=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return i;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);let a=0;const s=this.findAllIn(e,r,n);if(0==s.length)return i;const o=this.findAllIn(t,r,n);if(0==o.length)return i;for(;a<s.length&&0!=o.length;)if(s[0].position!=o[0].position){if(s[a].position>o[0].position)break;for(;s[a].position<o[0].position&&(a++,!(a>=s.length)););i.push({left:s[a-1],right:o[0]}),s.splice(a-1,1),o.splice(0,1),a=0}else i.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return i.sort((e,t)=>e.left.position-t.left.position),i}replacePattern(e,t,r=null,n=null,i=null){let a,s;const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]};if(null==r&&(r=0),r>this.buffer.byteLength-1)return!1;if(null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r),null==i){if(a=this.findAllIn([e],r,n),0==a.length)return o}else a=i;o.searchPatternPositions.push(...Array.from(a,e=>e.position));const u=e.buffer.byteLength-t.buffer.byteLength,l=new ArrayBuffer(this.view.length-a.length*u),c=new Uint8Array(l);for(c.set(new Uint8Array(this.buffer,0,r)),s=0;s<a.length;s++){const n=0==s?r:a[s-1].position;c.set(new Uint8Array(this.buffer,n,a[s].position-e.buffer.byteLength-n),n-s*u),c.set(t.view,a[s].position-e.buffer.byteLength-s*u),o.replacePatternPositions.push(a[s].position-e.buffer.byteLength-s*u)}return s--,c.set(new Uint8Array(this.buffer,a[s].position,this.buffer.byteLength-a[s].position),a[s].position-e.buffer.byteLength+t.buffer.byteLength-s*u),this.buffer=l,this.view=new Uint8Array(this.buffer),o.status=1,o}skipPatterns(e,t=null,r=null,n=!1){null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));let i=t;for(let a=0;a<e.length;a++){const s=e[a].buffer.byteLength,o=n?i-s:i;let u=!0;for(let t=0;t<s;t++)if(this.view[t+o]!=e[a].view[t]){u=!1;break}if(u)if(a=-1,n){if(i-=s,i<=0)return i}else if(i+=s,i>=t+r)return i}return i}skipNotPatterns(e,t=null,r=null,n=!1){null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));let i=-1;for(let a=0;a<r;a++){for(let r=0;r<e.length;r++){const s=e[r].buffer.byteLength,o=n?t-a-s:t+a;let u=!0;for(let t=0;t<s;t++)if(this.view[t+o]!=e[r].view[t]){u=!1;break}if(u){i=n?t-a:t+a;break}}if(-1!=i)break}return i}}class i{constructor(e={}){this.stream=new n,this._length=0,this.backward=!1,this._start=0,this.appendBlock=0,this.prevLength=0,this.prevStart=0;for(const t of Object.keys(e))switch(t){case"stream":this.stream=e.stream;break;case"backward":this.backward=e.backward,this._start=this.stream.buffer.byteLength;break;case"length":this._length=e.length;break;case"start":this._start=e.start;break;case"appendBlock":this.appendBlock=e.appendBlock;break;case"view":this.stream=new n({view:e.view});break;case"buffer":this.stream=new n({buffer:e.buffer});break;case"string":this.stream=new n({string:e.string});break;case"hexstring":this.stream=new n({hexstring:e.hexstring})}}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e._buffer.byteLength,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.buffer.byteLength||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream._buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);const r=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==r)return r;if(this.backward){if(r<this.start-e.buffer.byteLength-t)return-1}else if(r>this.start+e.buffer.byteLength+t)return-1;return this.start=r,r}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);const r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==r.id)return r;if(this.backward){if(r.position<this.start-e[r.id].buffer.byteLength-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(r.position>this.start+e[r.id].buffer.byteLength+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=r.position,r}findAllIn(e){return this.stream.findAllIn(e,this.backward?this.start-this.length:this.start,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);const r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==r.left.id&&-1==r.right.id)return r;if(this.backward){if(-1!=r.right.id&&r.right.position<this._start-e[r.right.id]._buffer.byteLength-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new n}}else if(-1!=r.left.id&&r.left.position>this._start+e[r.left.id]._buffer.byteLength+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new n};return this.start=this.backward?-1==r.left.id?0:r.left.position:-1==r.right.id?this._start+this._length:r.right.position,r}findAllNotIn(e){return this._stream.findAllNotIn(e,this.backward?this._start-this._length:this._start,this._length)}findFirstSequence(e,t=null,r=null){(null==t||t>this._length)&&(t=this._length),(null==r||r>t)&&(r=t);const i=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==i.value.buffer.byteLength)return i;if(this.backward){if(i.position<this._start-i.value._buffer.byteLength-r)return{position:-1,value:new n}}else if(i.position>this._start+i.value._buffer.byteLength+r)return{position:-1,value:new n};return this.start=i.position,i}findAllSequences(e){return this.stream.findAllSequences(e,this.backward?this.start-this.length:this.start,this.length)}findPairedPatterns(e,t,r=null){(null==r||r>this.length)&&(r=this.length);const n=this.stream.findPairedPatterns(e,t,this.backward?this.start-this.length:this.start,this.length);if(n.length)if(this.backward){if(n[0].right<this.start-t.buffer.byteLength-r)return[]}else if(n[0].left>this.start+e.buffer.byteLength+r)return[];return n}findPairedArrays(e,t,r=null){(null==r||r>this.length)&&(r=this.length);const n=this.stream.findPairedArrays(e,t,this.backward?this.start-this.length:this.start,this.length);if(n.length)if(this.backward){if(n[0].right.position<this.start-t[n[0].right.id].buffer.byteLength-r)return[]}else if(n[0].left.position>this.start+e[n[0].left.id].buffer.byteLength+r)return[];return n}replacePattern(e,t){return this.stream.replacePattern(e,t,this.backward?this.start-this.length:this.start,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this._start+e._buffer.byteLength>this._stream._buffer.byteLength&&(e._buffer.byteLength>this.appendBlock&&(this.appendBlock=e._buffer.byteLength+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e._view,this._start),this._length+=2*e._buffer.byteLength,this.start=this._start+e._buffer.byteLength,this.prevLength-=2*e._buffer.byteLength}appendView(e){this._start+e.length>this._stream._buffer.byteLength&&(e.length>this.appendBlock&&(this.appendBlock=e.length+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this._start+1>this._stream._buffer.byteLength&&(1>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this._start+2>this._stream._buffer.byteLength&&(2>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));const t=new Uint16Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[1],this._stream._view[this._start+1]=r[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this._start+3>this._stream._buffer.byteLength&&(3>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));const t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[2],this._stream._view[this._start+1]=r[1],this._stream._view[this._start+2]=r[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this._start+4>this._stream._buffer.byteLength&&(4>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));const t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[3],this._stream._view[this._start+1]=r[2],this._stream._view[this._start+2]=r[1],this._stream._view[this._start+3]=r[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return[];let r;if(this._length<e&&(e=this._length),this.backward){const t=this._stream._buffer.slice(this._length-e,this._length),n=new Uint8Array(t);r=new Array(e);for(let i=0;i<e;i++)r[e-1-i]=n[i]}else{const t=this._stream._buffer.slice(this._start,this._start+e);r=Array.from(new Uint8Array(t))}return t&&(this.start+=this.backward?-1*e:e),r}getUint16(e=!0){const t=this.getBlock(2,e);if(t.length<2)return 0;const r=new Uint16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}getInt16(e=!0){const t=this.getBlock(2,e);if(t.length<2)return 0;const r=new Int16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}getUint24(e=!0){const t=this.getBlock(3,e);if(t.length<3)return 0;const r=new Uint32Array(1),n=new Uint8Array(r.buffer);for(let i=3;i>=1;i--)n[3-i]=t[i-1];return r[0]}getUint32(e=!0){const t=this.getBlock(4,e);if(t.length<4)return 0;const r=new Uint32Array(1),n=new Uint8Array(r.buffer);for(let i=3;i>=0;i--)n[3-i]=t[i];return r[0]}getInt32(e=!0){const t=this.getBlock(4,e);if(t.length<4)return 0;const r=new Int32Array(1),n=new Uint8Array(r.buffer);for(let i=3;i>=0;i--)n[3-i]=t[i];return r[0]}}function a(e,t,r,n=null,i=null){if(null===n&&(n=0),n>e.buffer.byteLength-1)return!1;let a;null===i&&(i=e.buffer.byteLength-n),i>e.buffer.byteLength-n&&(i=e.buffer.byteLength-n),a=0==n&&i==e.buffer.byteLength?e.view:new Uint8Array(e.buffer,n,i);const s=new Array(r);let o=0,u=0;const l=t.length;for(;u<i;){let e=0;s[o]={};for(let r=0;r<l;r++){if(0==t[r].maxlength){"defaultValue"in t[r]&&(s[o][t[r].name]=t[r].defaultValue);continue}const n=new Array(t[r].maxlength);for(let e=0;e<t[r].maxlength;e++)n[e]=a[u++];const i=t[r].func(n);if(-1==i.status)return 1==s.length?[]:s.slice(0,s.length-1);"check"!=t[r].type&&(s[o][t[r].name]=i.value),u-=t[r].maxlength-i.length,e+=i.length}s[o++].structureLength=e}return s}const s=["00000000","00000001","00000010","00000011","00000100","00000101","00000110","00000111","00001000","00001001","00001010","00001011","00001100","00001101","00001110","00001111","00010000","00010001","00010010","00010011","00010100","00010101","00010110","00010111","00011000","00011001","00011010","00011011","00011100","00011101","00011110","00011111","00100000","00100001","00100010","00100011","00100100","00100101","00100110","00100111","00101000","00101001","00101010","00101011","00101100","00101101","00101110","00101111","00110000","00110001","00110010","00110011","00110100","00110101","00110110","00110111","00111000","00111001","00111010","00111011","00111100","00111101","00111110","00111111","01000000","01000001","01000010","01000011","01000100","01000101","01000110","01000111","01001000","01001001","01001010","01001011","01001100","01001101","01001110","01001111","01010000","01010001","01010010","01010011","01010100","01010101","01010110","01010111","01011000","01011001","01011010","01011011","01011100","01011101","01011110","01011111","01100000","01100001","01100010","01100011","01100100","01100101","01100110","01100111","01101000","01101001","01101010","01101011","01101100","01101101","01101110","01101111","01110000","01110001","01110010","01110011","01110100","01110101","01110110","01110111","01111000","01111001","01111010","01111011","01111100","01111101","01111110","01111111","10000000","10000001","10000010","10000011","10000100","10000101","10000110","10000111","10001000","10001001","10001010","10001011","10001100","10001101","10001110","10001111","10010000","10010001","10010010","10010011","10010100","10010101","10010110","10010111","10011000","10011001","10011010","10011011","10011100","10011101","10011110","10011111","10100000","10100001","10100010","10100011","10100100","10100101","10100110","10100111","10101000","10101001","10101010","10101011","10101100","10101101","10101110","10101111","10110000","10110001","10110010","10110011","10110100","10110101","10110110","10110111","10111000","10111001","10111010","10111011","10111100","10111101","10111110","10111111","11000000","11000001","11000010","11000011","11000100","11000101","11000110","11000111","11001000","11001001","11001010","11001011","11001100","11001101","11001110","11001111","11010000","11010001","11010010","11010011","11010100","11010101","11010110","11010111","11011000","11011001","11011010","11011011","11011100","11011101","11011110","11011111","11100000","11100001","11100010","11100011","11100100","11100101","11100110","11100111","11101000","11101001","11101010","11101011","11101100","11101101","11101110","11101111","11110000","11110001","11110010","11110011","11110100","11110101","11110110","11110111","11111000","11111001","11111010","11111011","11111100","11111101","11111110","11111111"];class o{constructor(e={}){this.buffer=new ArrayBuffer(0),this.view=new Uint8Array(this.buffer),this.bitsCount=0;for(const t of Object.keys(e))switch(t){case"byteStream":this.fromByteStream(e.byteStream);break;case"view":this.fromUint8Array(e.view);break;case"buffer":this.fromArrayBuffer(e.buffer);break;case"string":this.fromString(e.string);break;case"uint32":this.fromUint32(e.uint32);break;case"bitsCount":this.bitsCount=e.bitsCount}}clear(){this.buffer=new ArrayBuffer(0),this.view=new Uint8Array(this.buffer),this.bitsCount=0}fromByteStream(e){this.buffer=e.buffer.slice(0),this.view=new Uint8Array(this.buffer),this.bitsCount=this.view.length<<3}fromArrayBuffer(e){this.buffer=e.slice(0),this.view=new Uint8Array(this.buffer),this.bitsCount=this.view.length<<3}fromUint8Array(e){this.buffer=new ArrayBuffer(e.length),this.view=new Uint8Array(this.buffer),this.view.set(e),this.bitsCount=this.view.length<<3}fromString(e){const t=e.length;this.buffer=new ArrayBuffer((t>>3)+(t%8?1:0)),this.view=new Uint8Array(this.buffer),this.bitsCount=1+(t>>3)<<3;let r=0;for(let n=0;n<t;n++)"1"==e[n]&&(this.view[r]|=1<<7-n%8),n&&(n+1)%8==0&&r++;t%8&&this.shiftRight(8-t%8),this.bitsCount=t}fromUint32(e){this.buffer=new ArrayBuffer(4),this.view=new Uint8Array(this.buffer);const t=new Uint32Array([e]),r=new Uint8Array(t.buffer);for(let n=3;n>=0;n--)this.view[n]=r[3-n];this.bitsCount=32}toString(e=null,t=null){null==e&&(e=0),(e>=this.view.length||e<0)&&(e=0),null==t&&(t=this.view.length-e),(t>=this.view.length||t<0)&&(t=this.view.length-e);const r=[];for(let n=e;n<e+t;n++)r.push(s[this.view[n]]);return r.join("").slice((this.view.length<<3)-this.bitsCount)}shiftRight(e,t=!0){if(0==this.view.length)return;if(e<0||e>8)throw new Error('The "shift" parameter must be in range 0-8');if(e>this.bitsCount)throw new Error('The "shift" parameter can not be bigger than "this.bitsCount"');const r=255>>8-e;this.view[this.view.length-1]>>=e;for(let n=this.view.length-2;n>=0;n--)this.view[n+1]|=(this.view[n]&r)<<8-e,this.view[n]>>=e;this.bitsCount-=e,0==this.bitsCount&&this.clear(),t&&this.shrink()}shiftLeft(e){if(0==this.view.length)return;if(e<0||e>8)throw new Error('The "shift" parameter must be in range 0-8');if(e>this.bitsCount)throw new Error('The "shift" parameter can not be bigger than "this.bitsCount"');const t=7&this.bitsCount;if(t>e)this.view[0]&=255>>t+e;else{const r=new ArrayBuffer(this.buffer.byteLength-1),n=new Uint8Array(r);n.set(new Uint8Array(this.buffer,1,this.buffer.byteLength-1)),n[0]&=255>>e-t,this.buffer=r.slice(0),this.view=new Uint8Array(this.buffer)}this.bitsCount-=e,0==this.bitsCount&&this.clear()}slice(e=null,t=null){let r=0;if(this.bitsCount%8&&(r=8-this.bitsCount%8),t+=r,null==(e+=r)&&(e=0),e<0||e>(this.view.length<<3)-1)return new o;if(null==t&&(t=(this.view.length<<3)-1),t<0||t>(this.view.length<<3)-1)return new o;if(t-e+1>this.bitsCount)return new o;const n=e>>3,i=7&e,a=t>>3,s=7&t,u=a-n==0?1:a-n+1,l=new o;return l.buffer=new ArrayBuffer(u),l.view=new Uint8Array(l.buffer),l.bitsCount=u<<3,l.view.set(new Uint8Array(this.buffer,n,u)),l.view[0]&=255>>i,l.view[u]&=255<<7-s,7-s&&l.shiftRight(7-s,!1),l.bitsCount=t-e+1,l.shrink(),l}copy(e=null,t=null){return e<0||e>(this.view.length<<3)-1?new o:(null===t&&(t=(this.view.length<<3)-e-1),t>this.bitsCount?new o:this.slice(e,e+t-1))}shrink(){const e=(this.bitsCount>>3)+(this.bitsCount%8?1:0);if(e<this.buffer.byteLength){const t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer,this.buffer.byteLength-e,e)),this.buffer=t.slice(0),this.view=new Uint8Array(this.buffer)}}reverseBytes(){for(let e=0;e<this.view.length;e++)this.view[e]=65793*(2050*this.view[e]&139536|32800*this.view[e]&558144)>>16;this.bitsCount%8&&(this.view[this.view.length-((this.bitsCount>>3)+(this.bitsCount%8?1:0))]>>=8-(7&this.bitsCount))}reverseValue(){const e=this.toString(),t=e.length,r=new Array(t);for(let n=0;n<t;n++)r[t-1-n]=e[n];this.fromString(r.join(""))}getNumberValue(){const e=this.buffer.byteLength-1;if(e>3)return-1;if(-1==e)return 0;const t=new Uint32Array(1),r=new Uint8Array(t.buffer);for(let n=e;n>=0;n--)r[e-n]=this.view[n];return t[0]}findPattern(e,t=null,r=null,i=!1){const a=new n({string:this.toString()}),s=new n({string:e.toString()});return a.findPattern(s,t,r,i)}findFirstIn(e,t=null,r=null,i=!1){const a=new n({string:this.toString()}),s=new Array(e.length);for(let o=0;o<e.length;o++)s[o]=new n({string:e[o].toString()});return a.findFirstIn(s,t,r,i)}findAllIn(e,t=null,r=null){const i=new n({string:this.toString()}),a=new Array(e.length);for(let s=0;s<e.length;s++)a[s]=new n({string:e[s].toString()});return i.findAllIn(a,t,r)}findAllPatternIn(e,t=null,r=null){const i=new n({string:this.toString()}),a=new n({string:e.toString()});return i.findAllPatternIn(a,t,r)}findFirstNotIn(e,t=null,r=null,i=!1){const a=new n({string:this.toString()}),s=new Array(e.length);for(let o=0;o<e.length;o++)s[o]=new n({string:e[o].toString()});return a.findFirstNotIn(s,t,r,i)}findAllNotIn(e,t=null,r=null){const i=new n({string:this.toString()}),a=new Array(e.length);for(let s=0;s<e.length;s++)a[s]=new n({string:e[s].toString()});return i.findAllNotIn(a,t,r)}findFirstSequence(e,t=null,r=null,i=!1){const a=new n({string:this.toString()}),s=new Array(e.length);for(let o=0;o<e.length;o++)s[o]=new n({string:e[o].toString()});return a.findFirstSequence(s,t,r,i)}findAllSequences(e,t,r){const i=new n({string:this.toString()}),a=new Array(e.length);for(let s=0;s<e.length;s++)a[s]=new n({string:e[s].toString()});return i.findAllSequences(a,t,r)}findPairedPatterns(e,t,r=null,i=null){const a=new n({string:this.toString()}),s=new n({string:e.toString()}),o=new n({string:t.toString()});return a.findPairedPatterns(s,o,r,i)}findPairedArrays(e,t,r=null,i=null){const a=new n({string:this.toString()}),s=new Array(e.length);for(let u=0;u<e.length;u++)s[u]=new n({string:e[u].toString()});const o=new Array(t.length);for(let u=0;u<t.length;u++)o[u]=new n({string:t[u].toString()});return a.findPairedArrays(s,o,r,i)}replacePattern(e,t,r=null,i=null){const a=new n({string:this.toString()}),s=new n({string:e.toString()}),o=new n({string:t.toString()});return!!a.findPairedPatterns(s,o,r,i)&&(this.fromString(a.toString()),!0)}skipPatterns(e,t,r,i){const a=new n({string:this.toString()}),s=new Array(e.length);for(let o=0;o<e.length;o++)s[o]=new n({string:e[o].toString()});return a.skipPatterns(s,t,r,i)}skipNotPatterns(e,t,r,i){const a=new n({string:this.toString()}),s=new Array(e.length);for(let o=0;o<e.length;o++)s[o]=new n({string:e[o].toString()});return a.skipNotPatterns(s,t,r,i)}append(e){this.fromString([this.toString(),e.toString()].join(""))}}class u{constructor(e={}){this.stream=new o,this._start=0,this._length=this.stream.bitsCount,this.backward=!1,this.appendBlock=0;for(const t of Object.keys(e))switch(t){case"stream":case"start":case"length":case"backward":case"appendBlock":this[t]=e[t]}}set start(e){e>this.stream.bitsCount||(this._length-=this.backward?this._start-e:e-this._start,this._start=e,this.prevStart=this._start,this.prevLength=this._length)}get start(){return this._start}set length(e){e>this.stream.bitsCount||(this.prevLength=this._length,this._length=e)}get length(){return this._length}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.bitsCount,this.prevStart=this._start,this._start=this.backward?this.length:0}get stream(){return this._stream}getBits(e){let t;return this.start+e>this.stream.bitsCount&&(e=this.stream.bitsCount-this.start),this.backward?(t=this.stream.copy(this.start-e,e),this.start-=t.bitsCount):(t=this.stream.copy(this.start,e),this.start+=t.bitsCount),t}getBitsString(e){this.start+e>this.stream.bitsCount&&(e=this.stream.bitsCount-this.start);let t,r=[];t=this.backward?this.start-e:this.start;let n=this.start+e-1,i=0;this.stream.bitsCount%8&&(i=8-this.stream.bitsCount%8),t+=i,n+=i;const a=t>>3,o=7&t,u=n>>3,l=7&n,c=a+(u-a==0?1:u-a+1);for(let h=a;h<c;h++){let e=s[this.stream.view[h]];h==a&&(e=e.slice(o)),h==c-1&&(e=e.slice(0,l-7+e.length)),r.push(e)}return r=r.join(""),this.backward?this.start-=r.length:this.start+=r.length,r}getBitsReversedValue(e){const t=this.getBitsString(e),r=t.length;let n;const i=8-r%8,a=new Array(r),s=new Uint32Array(1),o=new Uint8Array(s.buffer,0,4);let u;if(r>32)return-1;for(n=32==e?3:r-1>>3,u=0;u<r;u++)a[r-1-u]=t[u];for(u=i;u<i+r;u++)"1"==a[u-i]&&(o[n]|=1<<7-u%8),u&&(u+1)%8==0&&n--;return s[0]}toString(){return this.stream.copy(this.start,this.length).toString()}}},49457:function(e,t){var r,n;void 0===(n="function"==typeof(r=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,a,s){var o=i.URL||i.webkitURL,u=document.createElement("a");u.download=a=a||e.name||"download",u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?n(u):r(u.href)?t(e,a,s):n(u,u.target="_blank")):(u.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(u.href)},4e4),setTimeout(function(){n(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),i);else if(r(e))t(e,i,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){n(s)})}}:function(e,r,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var o="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&u||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},c.readAsDataURL(e)}else{var h=i.URL||i.webkitURL,f=h.createObjectURL(e);s?s.location=f:location.href=f,s=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,[]):r)||(e.exports=n)},7586:function(e){e.exports=function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var a=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,s,o,u,l=[],c=0,h=e.length,f=h,m="string"!==n.getTypeOf(e);c<e.length;)f=h-c,i=m?(t=e[c++],r=c<h?e[c++]:0,c<h?e[c++]:0):(t=e.charCodeAt(c++),r=c<h?e.charCodeAt(c++):0,c<h?e.charCodeAt(c++):0),s=(3&t)<<4|r>>4,o=1<f?(15&r)<<2|i>>6:64,u=2<f?63&i:64,l.push(a.charAt(t>>2)+a.charAt(s)+a.charAt(o)+a.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,s,o,u,l=0,c=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,m=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&m--,e.charAt(e.length-2)===a.charAt(64)&&m--,m%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|m):new Array(0|m);l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(s=a.indexOf(e.charAt(l++)))>>4,r=(15&s)<<4|(o=a.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(u=a.indexOf(e.charAt(l++))),f[c++]=t,64!==o&&(f[c++]=r),64!==u&&(f[c++]=n);return f}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var a=i,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,r,n){var a=i,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^a[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=n?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",a.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,s,c){var h,f,m=e.file,d=e.compression,p=c!==o.utf8encode,g=a.transformTo("string",c(m.name)),y=a.transformTo("string",o.utf8encode(m.name)),v=m.comment,b=a.transformTo("string",c(v)),w=a.transformTo("string",o.utf8encode(v)),k=y.length!==m.name.length,S=w.length!==v.length,P="",A="",C="",I=m.dir,O=m.date,B={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(B.crc32=e.crc32,B.compressedSize=e.compressedSize,B.uncompressedSize=e.uncompressedSize);var _=0;t&&(_|=8),p||!k&&!S||(_|=2048);var j=0,N=0;I&&(j|=16),"UNIX"===s?(N=798,j|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(m.unixPermissions,I)):(N=20,j|=function(e){return 63&(e||0)}(m.dosPermissions)),h=O.getUTCHours(),h<<=6,h|=O.getUTCMinutes(),h<<=5,h|=O.getUTCSeconds()/2,f=O.getUTCFullYear()-1980,f<<=4,f|=O.getUTCMonth()+1,f<<=5,f|=O.getUTCDate(),k&&(A=n(1,1)+n(u(g),4)+y,P+="up"+n(A.length,2)+A),S&&(C=n(1,1)+n(u(b),4)+w,P+="uc"+n(C.length,2)+C);var E="";return E+="\n\0",E+=n(_,2),E+=d.magic,E+=n(h,2),E+=n(f,2),E+=n(B.crc32,4),E+=n(B.compressedSize,4),E+=n(B.uncompressedSize,4),E+=n(g.length,2),E+=n(P.length,2),{fileRecord:l.LOCAL_FILE_HEADER+E+g+P,dirRecord:l.CENTRAL_FILE_HEADER+n(N,2)+E+n(b.length,2)+"\0\0\0\0"+n(j,4)+n(i,4)+g+P+b}}var a=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),u=e("../crc32"),l=e("../signature");function c(e,t,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(c,s),c.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=function(e,t,r,i,s){var o=a.transformTo("string",s(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(o.length,2)+o}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},c.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},c.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var a=new i(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,r){s++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),o=r.dir,u=r.date;r._compressWorker(i,r.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:o,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(a)}),a.entriesCount=s}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.7.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),a=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new i.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new s(t);return r.load(e),r}).then(function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var a=0;a<n.length;a++)r.push(l(n[a]));return i.Promise.all(r)}).then(function(e){for(var n=e.shift(),i=n.files,a=0;a<i.length;a++){var s=i[a];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),r&&r(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,i,o=a.getTypeOf(t),h=a.extend(r||{},u);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(e=p(e)),h.createFolders&&(n=d(e))&&g.call(this,n,!0),r&&void 0!==r.binary||(h.binary=!("string"===o&&!1===h.binary&&!1===h.base64)),(t instanceof l&&0===t.uncompressedSize||h.dir||!t||0===t.length)&&(h.base64=!1,h.binary=!0,t="",h.compression="STORE",o="string"),i=t instanceof l||t instanceof s?t:f.isNode&&f.isStream(t)?new m(e,t):a.prepareContent(e,t,h.binary,h.optimizedBinaryString,h.base64);var y=new c(e,i,h);this.files[e]=y}var i=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),u=e("./defaults"),l=e("./compressedObject"),c=e("./zipObject"),h=e("./generate"),f=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),d=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:u.createFolders,e=p(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1!==arguments.length)return n.call(this,e=this.root+e,t,r),this;if(y(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(y(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=g.call(this,this.root+e),r=this.clone();return r.root=t.name,r},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS"),t=h.generateWorker(this,r,r.comment||this.comment||"")}catch(e){(t=new s("error")).error(e)}return new o(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new u(n.transformTo("uint8array",e)):new a(n.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function a(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,n),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,n),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(a,i),a.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),o=e("../support"),u=e("../external"),l=null;if(o.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t,r){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=r,n.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}c.prototype={accumulate:function(e){return function(e,t){return new u.Promise(function(r,i){var a=[],o=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",function(e,r){a.push(e),t&&t(r)}).on("error",function(e){a=[],i(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(u,function(e,t){var r,n=0,i=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,a),l);r(e)}catch(e){i(e)}a=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return this._worker.on(e,"data"===e?function(e){t.call(r,e.data,e.meta)}:function(){n.delay(t,arguments,r)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),u=0;u<256;u++)o[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,r,n,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),a=s=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,a,s=e.length,u=new Array(2*s);for(t=r=0;t<s;)if((i=e[t++])<128)u[r++]=i;else if(4<(a=o[i]))u[r++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<s;)i=i<<6|63&e[t++],a--;1<a?u[r++]=65533:i<65536?u[r++]=i:(u[r++]=55296|(i-=65536)>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(l,s),l.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}(t),u=t;s!==t.length&&(i.uint8array?(u=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(u=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(c,s),c.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("set-immediate-shim"),o=e("./external");function u(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(t,n){r.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,r){var n=[],i=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;i<a;)n.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+r,a)):e.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function f(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=h;var m={};m.string={string:u,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return m.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.allocBuffer(e.length))}},m.array={string:h,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},m.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},m.uint8array={string:h,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return a.newBufferFrom(e)}},m.nodebuffer={string:h,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return m.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:u},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return m[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&a.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){s(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,a,s,u){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var c=r.getTypeOf(t);return c?("arraybuffer"===c?t=r.transformTo("uint8array",t):"string"===c&&(u?t=i.decode(t):a&&!0!==s&&(t=function(e){return l(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=i.transformTo(o.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!n&&(t=t.pipe(new s.Utf8EncodeWorker)),!a&&n&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)n.prototype[l[h]]=c;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,s=new i(c),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&m(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n(function(){var n;try{n=t(r)}catch(n){return a.reject(e,n)}n===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,n)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var r=!1;function n(t){r||(r=!0,a.reject(e,t))}function i(t){r||(r=!0,a.resolve(e,t))}var s=d(function(){t(i,n)});"error"===s.status&&n(s.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==u?h(r,this.state===o?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){a.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=d(f,t);if("error"===r.status)return a.reject(e,r.value);var n=r.value;if(n)m(e,n);else{e.state=o,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return a.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,u=-1,l=new this(i);++u<r;)c(e[u],u);return l;function c(e,i){t.resolve(e).then(function(e){s[i]=e,++o!==r||n||(n=!0,a.resolve(l,s))},function(e){n||(n=!0,a.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n=-1,s=new this(i);++n<t;)this.resolve(e[n]).then(function(e){r||(r=!0,a.resolve(s,e))},function(e){r||(r=!0,a.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(s[r]);this._dict_set=!0}}function c(e,t){var r=new l(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}l.prototype.push=function(e,t){var r,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,o.input="string"==typeof e?a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=n.deflate(o,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?a.buf2binstring(i.shrinkBuf(o.output,o.next_out)):i.shrinkBuf(o.output,o.next_out))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(o.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=l,r.deflate=c,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function f(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(e,t){var r,o,u,l,h,f,m=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,m.input="string"==typeof e?a.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?new Uint8Array(e):e,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new i.Buf8(d),m.next_out=0,m.avail_out=d),(r=n.inflate(m,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(f="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===c.call(p)?new Uint8Array(p):p,r=n.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&!0===g&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);m.next_out&&(0!==m.avail_out&&r!==s.Z_STREAM_END&&(0!==m.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(m.output,m.next_out),l=m.next_out-u,h=a.buf2string(m.output,u),m.next_out=l,m.avail_out=d-l,l&&i.arraySet(m.output,m.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(g=!0)}while((0<m.avail_in||0===m.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(m.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,s;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s.set(a=e[t],i),i+=a.length;return s}},a={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function u(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),a=s=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,a,o=t||e.length,l=new Array(2*o);for(r=n=0;r<o;)if((i=e[r++])<128)l[n++]=i;else if(4<(a=s[i]))l[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&r<o;)i=i<<6|63&e[r++],a--;1<a?l[n++]=65533:i<65536?l[n++]=i:(l[n++]=55296|(i-=65536)>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(i=i+t[n++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var a=n,s=i+r;e^=-1;for(var o=i;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),l=-2,c=258,h=262,f=113;function m(e,t){return e.msg=u[t],t}function d(e){return(e<<1)-(4<e?9:0)}function p(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function y(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,l=e.window,f=e.w_mask,m=e.prev,d=e.strstart+c,p=l[a+s-1],g=l[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+s]===g&&l[r+s-1]===p&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<d);if(n=c-(d-a),a=d-c,s<n){if(e.match_start=t,o<=(s=n))break;p=l[a+s-1],g=l[a+s]}}}while((t=m[t&f])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function k(e){var t,r,n,a,u,l,c,f,m,d,p=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-h)){for(i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=r=e.hash_size;n=e.head[--t],e.head[t]=p<=n?n-p:0,--r;);for(t=r=p;n=e.prev[--t],e.prev[t]=p<=n?n-p:0,--r;);a+=p}if(0===e.strm.avail_in)break;if(c=e.window,f=e.strstart+e.lookahead,d=void 0,(m=a)<(d=(l=e.strm).avail_in)&&(d=m),r=0===d?0:(l.avail_in-=d,i.arraySet(c,l.input,l.next_in,d,f),1===l.state.wrap?l.adler=s(l.adler,c,d,f):2===l.state.wrap&&(l.adler=o(l.adler,c,d,f)),l.next_in+=d,l.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=3)for(e.ins_h=e.window[u=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function S(e,t){for(var r,n;;){if(e.lookahead<h){if(k(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-h&&(e.match_length=w(e,r)),e.match_length>=3)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function P(e,t){for(var r,n,i;;){if(e.lookahead<h){if(k(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-h&&(e.match_length=w(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function A(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),p(this.dyn_ltree),p(this.dyn_dtree),p(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),p(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),p(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):m(e,l)}function O(e){var t=I(e);return 0===t&&function(e){e.window_size=2*e.w_size,p(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function B(e,t,r,n,a,s){if(!e)return l;var o=1;if(-1===t&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),a<1||9<a||8!==r||n<8||15<n||t<0||9<t||s<0||4<s)return m(e,l);8===n&&(n=9);var u=new C;return(e.state=u).strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,O(e)}n=[new A(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&y(e,!1),1)}),new A(4,4,8,4,S),new A(4,5,16,8,S),new A(4,6,32,32,S),new A(4,4,16,16,P),new A(8,16,32,32,P),new A(8,16,128,128,P),new A(8,32,128,256,P),new A(32,128,258,1024,P),new A(32,258,258,4096,P)],r.deflateInit=function(e,t){return B(e,t,8,15,8,0)},r.deflateInit2=B,r.deflateReset=O,r.deflateResetKeep=I,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},r.deflate=function(e,t){var r,i,s,u;if(!e||!e.state||5<t||t<0)return e?m(e,l):l;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return m(e,0===e.avail_out?-5:l);if(i.strm=e,r=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,v(i,31),v(i,139),v(i,8),i.gzhead?(v(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),v(i,255&i.gzhead.time),v(i,i.gzhead.time>>8&255),v(i,i.gzhead.time>>16&255),v(i,i.gzhead.time>>24&255),v(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),v(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(v(i,255&i.gzhead.extra.length),v(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(v(i,0),v(i,0),v(i,0),v(i,0),v(i,0),v(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),v(i,3),i.status=f);else{var h=8+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=f,b(i,h),0!==i.strstart&&(b(i,e.adler>>>16),b(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),g(e),s=i.pending,i.pending!==i.pending_buf_size));)v(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),g(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,v(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),g(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,v(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&g(e),i.pending+2<=i.pending_buf_size&&(v(i,255&e.adler),v(i,e.adler>>8&255),e.adler=0,i.status=f)):i.status=f),0!==i.pending){if(g(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&d(t)<=d(r)&&4!==t)return m(e,-5);if(666===i.status&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var w=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=c){if(k(e),e.lookahead<=c&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=e.strstart+c;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=c-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==w&&4!==w||(i.status=666),1===w||3===w)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===w&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(p(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),g(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(v(i,255&e.adler),v(i,e.adler>>8&255),v(i,e.adler>>16&255),v(i,e.adler>>24&255),v(i,255&e.total_in),v(i,e.total_in>>8&255),v(i,e.total_in>>16&255),v(i,e.total_in>>24&255)):(b(i,e.adler>>>16),b(i,65535&e.adler)),g(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==f&&666!==t?m(e,l):(e.state=null,t===f?m(e,-3):0):l},r.deflateSetDictionary=function(e,t){var r,n,a,o,u,c,h,f,m=t.length;if(!e||!e.state)return l;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return l;for(1===o&&(e.adler=s(e.adler,t,m,0)),r.wrap=0,m>=r.w_size&&(0===o&&(p(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,t,m-r.w_size,r.w_size,0),t=f,m=r.w_size),u=e.avail_in,c=e.next_in,h=e.input,e.avail_in=m,e.next_in=0,e.input=t,k(r);r.lookahead>=3;){for(n=r.strstart,a=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--a;);r.strstart=n,r.lookahead=2,k(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=c,e.input=h,e.avail_in=u,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,a,s,o,u,l,c,h,f,m,d,p,g,y,v,b,w,k,S,P,A,C,I;C=e.input,i=(n=e.next_in)+(e.avail_in-5),I=e.output,s=(a=e.next_out)-(t-e.avail_out),o=a+(e.avail_out-257),u=(r=e.state).dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,m=r.hold,d=r.bits,p=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{d<15&&(m+=C[n++]<<d,m+=C[n++]<<(d+=8),d+=8),b=p[m&y];t:for(;;){if(m>>>=w=b>>>24,d-=w,0==(w=b>>>16&255))I[a++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=p[(65535&b)+(m&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}k=65535&b,(w&=15)&&(d<w&&(m+=C[n++]<<d,d+=8),k+=m&(1<<w)-1,m>>>=w,d-=w),d<15&&(m+=C[n++]<<d,m+=C[n++]<<(d+=8),d+=8),b=g[m&v];r:for(;;){if(m>>>=w=b>>>24,d-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(m&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(S=65535&b,d<(w&=15)&&(m+=C[n++]<<d,(d+=8)<w&&(m+=C[n++]<<d,d+=8)),u<(S+=m&(1<<w)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(m>>>=w,d-=w,(w=a-s)<S){if(c<(w=S-w)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(A=f,(P=0)===h){if(P+=l-w,w<k){for(k-=w;I[a++]=f[P++],--w;);P=a-S,A=I}}else if(h<w){if(P+=l+h-w,(w-=h)<k){for(k-=w;I[a++]=f[P++],--w;);if(P=0,h<k){for(k-=w=h;I[a++]=f[P++],--w;);P=a-S,A=I}}}else if(P+=h-w,w<k){for(k-=w;I[a++]=f[P++],--w;);P=a-S,A=I}for(;2<k;)I[a++]=A[P++],I[a++]=A[P++],I[a++]=A[P++],k-=3;k&&(I[a++]=A[P++],1<k&&(I[a++]=A[P++]))}else{for(P=a-S;I[a++]=I[P++],I[a++]=I[P++],I[a++]=I[P++],2<(k-=3););k&&(I[a++]=I[P++],1<k&&(I[a++]=I[P++]))}break}}break}}while(n<i&&a<o);n-=k=d>>3,m&=(1<<(d-=k<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=m,r.bits=d}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),u=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):u}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):u}function m(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,f(e))):u}function d(e,t){var r,n;return e?(n=new c,(e.state=n).window=null,0!==(r=m(e,t))&&(e.state=null),r):u}var p,g,y=!0;function v(e){if(y){var t;for(p=new n.Buf32(512),g=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,g,0,e.work,{bits:5}),y=!1}e.lencode=p,e.lenbits=9,e.distcode=g,e.distbits=5}function b(e,t,r,i){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(a=s.wsize-s.wnext)&&(a=i),n.arraySet(s.window,t,r-i,a,s.wnext),(i-=a)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}r.inflateReset=f,r.inflateReset2=m,r.inflateResetKeep=h,r.inflateInit=function(e){return d(e,15)},r.inflateInit2=d,r.inflate=function(e,t){var r,c,h,f,m,d,p,g,y,w,k,S,P,A,C,I,O,B,_,j,N,E,V,x,D=0,M=new n.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(r=e.state).mode&&(r.mode=13),m=e.next_out,h=e.output,f=e.next_in,c=e.input,g=r.hold,y=r.bits,w=d=e.avail_in,k=p=e.avail_out,E=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(2&r.wrap&&35615===g){M[r.check=0]=255&g,M[1]=g>>>8&255,r.check=a(r.check,M,2,0),y=g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",r.mode=30;break}if(y-=4,N=8+(15&(g>>>=4)),0===r.wbits)r.wbits=N;else if(N>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<N,e.adler=r.check=1,r.mode=512&g?10:12,y=g=0;break;case 2:for(;y<16;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(r.flags=g,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(M[0]=255&g,M[1]=g>>>8&255,r.check=a(r.check,M,2,0)),y=g=0,r.mode=3;case 3:for(;y<32;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.head&&(r.head.time=g),512&r.flags&&(M[0]=255&g,M[1]=g>>>8&255,M[2]=g>>>16&255,M[3]=g>>>24&255,r.check=a(r.check,M,4,0)),y=g=0,r.mode=4;case 4:for(;y<16;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(M[0]=255&g,M[1]=g>>>8&255,r.check=a(r.check,M,2,0)),y=g=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(M[0]=255&g,M[1]=g>>>8&255,r.check=a(r.check,M,2,0)),y=g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d<(S=r.length)&&(S=d),S&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,f,S,N)),512&r.flags&&(r.check=a(r.check,c,S,f)),d-=S,f+=S,r.length-=S),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===d)break e;for(S=0;N=c[f+S++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N)),N&&S<d;);if(512&r.flags&&(r.check=a(r.check,c,S,f)),d-=S,f+=S,N)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===d)break e;for(S=0;N=c[f+S++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N)),N&&S<d;);if(512&r.flags&&(r.check=a(r.check,c,S,f)),d-=S,f+=S,N)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(g!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}y=g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}e.adler=r.check=l(g),y=g=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=m,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=g,r.bits=y,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){g>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}switch(r.last=1&g,y-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(v(r),r.mode=20,6!==t)break;g>>>=2,y-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,y=g=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(S=r.length){if(d<S&&(S=d),p<S&&(S=p),0===S)break e;n.arraySet(h,c,f,S,m),d-=S,f+=S,p-=S,m+=S,r.length-=S;break}r.mode=12;break;case 17:for(;y<14;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(r.nlen=257+(31&g),y-=5,r.ndist=1+(31&(g>>>=5)),y-=5,r.ncode=4+(15&(g>>>=5)),g>>>=4,y-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.lens[T[r.have++]]=7&g,g>>>=3,y-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E=o(0,r.lens,0,19,r.lencode,0,r.work,V={bits:r.lenbits}),r.lenbits=V.bits,E){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(D=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=y);){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(O<16)g>>>=C,y-=C,r.lens[r.have++]=O;else{if(16===O){for(x=C+2;y<x;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(g>>>=C,y-=C,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}N=r.lens[r.have-1],S=3+(3&g),g>>>=2,y-=2}else if(17===O){for(x=C+3;y<x;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}y-=C,N=0,S=3+(7&(g>>>=C)),g>>>=3,y-=3}else{for(x=C+7;y<x;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}y-=C,N=0,S=11+(127&(g>>>=C)),g>>>=7,y-=7}if(r.have+S>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=N}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,E=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,V={bits:r.lenbits}),r.lenbits=V.bits,E){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,E=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V={bits:r.distbits}),r.distbits=V.bits,E){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=d&&258<=p){e.next_out=m,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=g,r.bits=y,s(e,k),m=e.next_out,h=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,g=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;I=(D=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=y);){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(I&&0==(240&I)){for(B=C,_=I,j=O;I=(D=r.lencode[j+((g&(1<<B+_)-1)>>B)])>>>16&255,O=65535&D,!(B+(C=D>>>24)<=y);){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}g>>>=B,y-=B,r.back+=B}if(g>>>=C,y-=C,r.back+=C,r.length=O,0===I){r.mode=26;break}if(32&I){r.back=-1,r.mode=12;break}if(64&I){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&I,r.mode=22;case 22:if(r.extra){for(x=r.extra;y<x;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(D=r.distcode[g&(1<<r.distbits)-1])>>>16&255,O=65535&D,!((C=D>>>24)<=y);){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(0==(240&I)){for(B=C,_=I,j=O;I=(D=r.distcode[j+((g&(1<<B+_)-1)>>B)])>>>16&255,O=65535&D,!(B+(C=D>>>24)<=y);){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}g>>>=B,y-=B,r.back+=B}if(g>>>=C,y-=C,r.back+=C,64&I){e.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&I,r.mode=24;case 24:if(r.extra){for(x=r.extra;y<x;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break e;if(r.offset>(S=k-p)){if((S=r.offset-S)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}P=S>r.wnext?r.wsize-(S-=r.wnext):r.wnext-S,S>r.length&&(S=r.length),A=r.window}else A=h,P=m-r.offset,S=r.length;for(p<S&&(S=p),p-=S,r.length-=S;h[m++]=A[P++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===p)break e;h[m++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===d)break e;d--,g|=c[f++]<<y,y+=8}if(e.total_out+=k-=p,r.total+=k,k&&(e.adler=r.check=r.flags?a(r.check,h,k,m-k):i(r.check,h,k,m-k)),k=p,(r.flags?g:l(g))!==r.check){e.msg="incorrect data check",r.mode=30;break}y=g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===d)break e;d--,g+=c[f++]<<y,y+=8}if(g!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}y=g=0}r.mode=29;case 29:E=1;break e;case 30:E=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=m,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=g,r.bits=y,(r.wsize||k!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&b(e,e.output,e.next_out,k-e.avail_out)?(r.mode=31,-4):(k-=e.avail_out,e.total_in+=w-=e.avail_in,e.total_out+=k,r.total+=k,r.wrap&&k&&(e.adler=r.check=r.flags?a(r.check,h,k,e.next_out-k):i(r.check,h,k,e.next_out-k)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==w&&0===k||4===t)&&0===E&&(E=-5),E)},r.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?u:((r.head=t).done=!1,0):u},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,t,n,0)!==r.check?-3:b(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,l,c,h,f){var m,d,p,g,y,v,b,w,k,S=f.bits,P=0,A=0,C=0,I=0,O=0,B=0,_=0,j=0,N=0,E=0,V=null,x=0,D=new n.Buf16(16),M=new n.Buf16(16),T=null,R=0;for(P=0;P<=15;P++)D[P]=0;for(A=0;A<u;A++)D[t[r+A]]++;for(O=S,I=15;1<=I&&0===D[I];I--);if(I<O&&(O=I),0===I)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(C=1;C<I&&0===D[C];C++);for(O<C&&(O=C),P=j=1;P<=15;P++)if(j<<=1,(j-=D[P])<0)return-1;if(0<j&&(0===e||1!==I))return-1;for(M[1]=0,P=1;P<15;P++)M[P+1]=M[P]+D[P];for(A=0;A<u;A++)0!==t[r+A]&&(h[M[t[r+A]]++]=A);if(v=0===e?(V=T=h,19):1===e?(V=i,x-=257,T=a,R-=257,256):(V=s,T=o,-1),P=C,y=c,_=A=E=0,p=-1,g=(N=1<<(B=O))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(b=P-_,k=h[A]<v?(w=0,h[A]):h[A]>v?(w=T[R+h[A]],V[x+h[A]]):(w=96,0),m=1<<P-_,C=d=1<<B;l[y+(E>>_)+(d-=m)]=b<<24|w<<16|k|0,0!==d;);for(m=1<<P-1;E&m;)m>>=1;if(0!==m?(E&=m-1,E+=m):E=0,A++,0==--D[P]){if(P===I)break;P=t[r+h[A]]}if(O<P&&(E&g)!==p){for(0===_&&(_=O),y+=C,j=1<<(B=P-_);B+_<I&&!((j-=D[B+_])<=0);)B++,j<<=1;if(N+=1<<B,1===e&&852<N||2===e&&592<N)return 1;l[p=E&g]=O<<24|B<<16|y-c|0}}return 0!==E&&(l[y+E]=P-_<<24|64<<16|0),f.bits=O,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var h=new Array(512);i(h);var f=new Array(256);i(f);var m=new Array(29);i(m);var d,p,g,y=new Array(30);function v(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?h[e]:h[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function P(e,t,r){S(e,r[2*t],r[2*t+1])}function A(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function C(e,t,r){var n,i,a=new Array(16),s=0;for(n=1;n<=15;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=A(a[o]++,o))}}function I(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function O(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function _(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&B(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!B(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function j(e,t,r){var n,i,o,u,l=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===n?P(e,i,t):(P(e,(o=f[i])+256+1,t),0!==(u=a[o])&&S(e,i-=m[o],u),P(e,o=w(--n),r),0!==(u=s[o])&&S(e,n-=y[o],u)),l<e.last_lit;);P(e,256,t)}function N(e,t){var r,n,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)_(e,a,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,_(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,s,o,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,d=t.stat_desc.max_length,p=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)d<(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)&&(a=d,p++),u[2*n+1]=a,l<n||(e.bl_count[a]++,s=0,m<=n&&(s=f[n-m]),e.opt_len+=(o=u[2*n])*(a+s),h&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==p){do{for(a=d-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[d]--,p-=2}while(0<p);for(a=d;0!==a;a--)for(n=e.bl_count[a];0!==n;)l<(i=e.heap[--r])||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),C(a,l,e.bl_count)}function E(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=i,l=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function V(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<l)for(;P(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==a&&(P(e,i,e.bl_tree),o--),P(e,16,e.bl_tree),S(e,o-3,2)):o<=10?(P(e,17,e.bl_tree),S(e,o-3,3)):(P(e,18,e.bl_tree),S(e,o-11,7));a=i,l=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}i(y);var x=!1;function D(e,t,r,i){S(e,0+(i?1:0),3),function(e,t,r,i){O(e),k(e,r),k(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){x||(function(){var e,t,r,n,i,u=new Array(16);for(n=r=0;n<28;n++)for(m[n]=r,e=0;e<1<<a[n];e++)f[r++]=n;for(f[r-1]=n,n=i=0;n<16;n++)for(y[n]=i,e=0;e<1<<s[n];e++)h[i++]=n;for(i>>=7;n<30;n++)for(y[n]=i<<7,e=0;e<1<<s[n]-7;e++)h[256+i++]=n;for(t=0;t<=15;t++)u[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,u[8]++;for(;e<=255;)l[2*e+1]=9,e++,u[9]++;for(;e<=279;)l[2*e+1]=7,e++,u[7]++;for(;e<=287;)l[2*e+1]=8,e++,u[8]++;for(C(l,287,u),e=0;e<30;e++)c[2*e+1]=5,c[2*e]=A(e,5);d=new v(l,a,257,286,15),p=new v(c,s,0,30,15),g=new v(new Array(0),o,0,19,7)}(),x=!0),e.l_desc=new b(e.dyn_ltree,d),e.d_desc=new b(e.dyn_dtree,p),e.bl_desc=new b(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,I(e)},r._tr_stored_block=D,r._tr_flush_block=function(e,t,r,n){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),s=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(a=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?D(e,t,r,n):4===e.strategy||a===i?(S(e,2+(n?1:0),3),j(e,l,c)):(S(e,4+(n?1:0),3),function(e,t,r,n){var i;for(S(e,t-257,5),S(e,r-1,5),S(e,n-4,4),i=0;i<n;i++)S(e,e.bl_tree[2*u[i]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),j(e,e.dyn_ltree,e.dyn_dtree)),I(e),n&&O(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(f[r]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){S(e,2,3),P(e,256,l),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)},88413:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.accessMethod=(0,a.getParametersValue)(e,"accessMethod",u.defaultValues("accessMethod")),this.accessLocation=(0,a.getParametersValue)(e,"accessLocation",u.defaultValues("accessLocation")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"accessMethod":return"";case"accessLocation":return new s.default;default:throw new Error(`Invalid member name for AccessDescription class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.ObjectIdentifier({name:t.accessMethod||""}),s.default.schema(t.accessLocation||{})]})}fromSchema(e){(0,a.clearProps)(e,["accessMethod","accessLocation"]);const t=i.compareSchema(e,e,u.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new s.default({schema:t.result.accessLocation})}toSchema(){return new i.Sequence({value:[new i.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}t.default=u},13264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){"seconds"in e&&(this.seconds=(0,i.getParametersValue)(e,"seconds",s.defaultValues("seconds"))),"millis"in e&&(this.millis=(0,i.getParametersValue)(e,"millis",s.defaultValues("millis"))),"micros"in e&&(this.micros=(0,i.getParametersValue)(e,"micros",s.defaultValues("micros"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error(`Invalid member name for Accuracy class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"seconds":case"millis":case"micros":return t===s.defaultValues(e);default:throw new Error(`Invalid member name for Accuracy class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",optional:!0,value:[new n.Integer({optional:!0,name:t.seconds||""}),new n.Primitive({name:t.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){(0,i.clearProps)(e,["seconds","millis","micros"]);const t=n.compareSchema(e,e,s.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Accuracy");if("seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const e=new n.Integer({valueHex:t.result.millis.valueBlock.valueHex});this.millis=e.valueBlock.valueDec}if("micros"in t.result){const e=new n.Integer({valueHex:t.result.micros.valueBlock.valueHex});this.micros=e.valueBlock.valueDec}}toSchema(){const e=[];if("seconds"in this&&e.push(new n.Integer({value:this.seconds})),"millis"in this){const t=new n.Integer({value:this.millis});e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){const t=new n.Integer({value:this.micros});e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHex}))}return new n.Sequence({value:e})}toJSON(){const e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}t.default=s},4987:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.algorithmId=(0,i.getParametersValue)(e,"algorithmId",s.defaultValues("algorithmId")),"algorithmParams"in e&&(this.algorithmParams=(0,i.getParametersValue)(e,"algorithmParams",s.defaultValues("algorithmParams"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new n.Any;default:throw new Error(`Invalid member name for AlgorithmIdentifier class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof n.Any;default:throw new Error(`Invalid member name for AlgorithmIdentifier class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new n.ObjectIdentifier({name:t.algorithmIdentifier||""}),new n.Any({name:t.algorithmParams||"",optional:!0})]})}fromSchema(e){(0,i.clearProps)(e,["algorithm","params"]);const t=n.compareSchema(e,e,s.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=t.result.algorithm.valueBlock.toString(),"params"in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new n.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof n.Any==0&&e.push(this.algorithmParams),new n.Sequence({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof n.Any==0&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof s!=0&&this.algorithmId===e.algorithmId&&("algorithmParams"in this?"algorithmParams"in e&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!("algorithmParams"in e))}}t.default=s},28165:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.altNames=(0,a.getParametersValue)(e,"altNames",u.defaultValues("altNames")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"altNames":return[];default:throw new Error(`Invalid member name for AltName class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.altNames||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["altNames"]);const t=i.compareSchema(e,e,u.schema({names:{altNames:"altNames"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in t.result&&(this.altNames=Array.from(t.result.altNames,e=>new s.default({schema:e})))}toSchema(){return new i.Sequence({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}t.default=u},68681:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.type=(0,i.getParametersValue)(e,"type",s.defaultValues("type")),this.values=(0,i.getParametersValue)(e,"values",s.defaultValues("values")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return"";case"values":return[];default:throw new Error(`Invalid member name for Attribute class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error(`Invalid member name for Attribute class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.type||""}),new n.Set({name:t.setName||"",value:[new n.Repeated({name:t.values||"",value:new n.Any})]})]})}fromSchema(e){(0,i.clearProps)(e,["type","values"]);const t=n.compareSchema(e,e,s.schema({names:{type:"type",values:"values"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Attribute");this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.type}),new n.Set({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}t.default=s},64445:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IssuerSerial=t.AttributeCertificateInfoV1=t.AttCertValidityPeriod=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(70374)),s=l(r(4987)),o=l(r(68681)),u=l(r(39327));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.notBeforeTime=(0,i.getParametersValue)(e,"notBeforeTime",h.defaultValues("notBeforeTime")),this.notAfterTime=(0,i.getParametersValue)(e,"notAfterTime",h.defaultValues("notAfterTime")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"notBeforeTime":case"notAfterTime":return new Date(0,0,0);default:throw new Error(`Invalid member name for AttCertValidityPeriod class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.GeneralizedTime({name:t.notBeforeTime||""}),new n.GeneralizedTime({name:t.notAfterTime||""})]})}fromSchema(e){(0,i.clearProps)(e,["notBeforeTime","notAfterTime"]);const t=n.compareSchema(e,e,h.schema({names:{notBeforeTime:"notBeforeTime",notAfterTime:"notAfterTime"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttCertValidityPeriod");this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new n.Sequence({value:[new n.GeneralizedTime({valueDate:this.notBeforeTime}),new n.GeneralizedTime({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}t.AttCertValidityPeriod=h;class f{constructor(e={}){this.issuer=(0,i.getParametersValue)(e,"issuer",f.defaultValues("issuer")),this.serialNumber=(0,i.getParametersValue)(e,"serialNumber",f.defaultValues("serialNumber")),"issuerUID"in e&&(this.issuerUID=(0,i.getParametersValue)(e,"issuerUID",f.defaultValues("issuerUID"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuer":return new a.default;case"serialNumber":return new n.Integer;case"issuerUID":return new n.BitString;default:throw new Error(`Invalid member name for IssuerSerial class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[a.default.schema(t.issuer||{}),new n.Integer({name:t.serialNumber||""}),new n.BitString({optional:!0,name:t.issuerUID||""})]})}fromSchema(e){(0,i.clearProps)(e,["issuer","serialNumber","issuerUID"]);const t=n.compareSchema(e,e,f.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber",issuerUID:"issuerUID"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for IssuerSerial");this.issuer=new a.default({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,"issuerUID"in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new n.Sequence({value:[this.issuer.toSchema(),this.serialNumber]});return"issuerUID"in this&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return"issuerUID"in this&&(e.issuerUID=this.issuerUID.toJSON()),e}}t.IssuerSerial=f;class m{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",m.defaultValues("version")),"baseCertificateID"in e&&(this.baseCertificateID=(0,i.getParametersValue)(e,"baseCertificateID",m.defaultValues("baseCertificateID"))),"subjectName"in e&&(this.subjectName=(0,i.getParametersValue)(e,"subjectName",m.defaultValues("subjectName"))),this.issuer=(0,i.getParametersValue)(e,"issuer",m.defaultValues("issuer")),this.signature=(0,i.getParametersValue)(e,"signature",m.defaultValues("signature")),this.serialNumber=(0,i.getParametersValue)(e,"serialNumber",m.defaultValues("serialNumber")),this.attrCertValidityPeriod=(0,i.getParametersValue)(e,"attrCertValidityPeriod",m.defaultValues("attrCertValidityPeriod")),this.attributes=(0,i.getParametersValue)(e,"attributes",m.defaultValues("attributes")),"issuerUniqueID"in e&&(this.issuerUniqueID=(0,i.getParametersValue)(e,"issuerUniqueID",m.defaultValues("issuerUniqueID"))),"extensions"in e&&(this.extensions=(0,i.getParametersValue)(e,"extensions",m.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"baseCertificateID":return new f;case"subjectName":return new a.default;case"issuer":return{};case"signature":return new s.default;case"serialNumber":return new n.Integer;case"attrCertValidityPeriod":return new h;case"attributes":return[];case"issuerUniqueID":return new n.BitString;case"extensions":return new u.default;default:throw new Error(`Invalid member name for AttributeCertificateInfoV1 class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Choice({value:[new n.Constructed({name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:f.schema().valueBlock.value}),new n.Constructed({name:t.subjectName||"",idBlock:{tagClass:3,tagNumber:1},value:a.default.schema().valueBlock.value})]}),a.default.schema({names:{blockName:t.issuer||""}}),s.default.schema(t.signature||{}),new n.Integer({name:t.serialNumber||""}),h.schema(t.attrCertValidityPeriod||{}),new n.Sequence({name:t.attributes||"",value:[new n.Repeated({value:o.default.schema()})]}),new n.BitString({optional:!0,name:t.issuerUniqueID||""}),u.default.schema(t.extensions||{},!0)]})}fromSchema(e){(0,i.clearProps)(e,["version","baseCertificateID","subjectName","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]);const t=n.compareSchema(e,e,m.schema({names:{version:"version",baseCertificateID:"baseCertificateID",subjectName:"subjectName",issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV1");this.version=t.result.version.valueBlock.valueDec,"baseCertificateID"in t.result&&(this.baseCertificateID=new f({schema:new n.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),"subjectName"in t.result&&(this.subjectName=new a.default({schema:new n.Sequence({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new s.default({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new h({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,e=>new o.default({schema:e})),"issuerUniqueID"in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),"extensions"in t.result&&(this.extensions=new u.default({schema:t.result.extensions}))}toSchema(){const e=new n.Sequence({value:[new n.Integer({value:this.version})]});return"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"subjectName"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new n.Sequence({value:Array.from(this.attributes,e=>e.toSchema())})),"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"subjectName"in this&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,e=>e.toJSON()),"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}t.AttributeCertificateInfoV1=m;class d{constructor(e={}){this.acinfo=(0,i.getParametersValue)(e,"acinfo",d.defaultValues("acinfo")),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",d.defaultValues("signatureAlgorithm")),this.signatureValue=(0,i.getParametersValue)(e,"signatureValue",d.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"acinfo":return new m;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error(`Invalid member name for AttributeCertificateV1 class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[m.schema(t.acinfo||{}),s.default.schema(t.signatureAlgorithm||{}),new n.BitString({name:t.signatureValue||""})]})}fromSchema(e){(0,i.clearProps)(e,["acinfo","signatureValue","signatureAlgorithm"]);const t=n.compareSchema(e,e,d.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV1");this.acinfo=new m({schema:t.result.acinfo}),this.signatureAlgorithm=new s.default({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new n.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}t.default=d},73766:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.V2Form=t.ObjectDigestInfo=t.Holder=t.AttributeCertificateInfoV2=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=c(r(70374)),s=c(r(4987)),o=c(r(68681)),u=c(r(39327)),l=r(64445);function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}class f{constructor(e={}){this.digestedObjectType=(0,i.getParametersValue)(e,"digestedObjectType",f.defaultValues("digestedObjectType")),"otherObjectTypeID"in e&&(this.otherObjectTypeID=(0,i.getParametersValue)(e,"otherObjectTypeID",f.defaultValues("otherObjectTypeID"))),this.digestAlgorithm=(0,i.getParametersValue)(e,"digestAlgorithm",f.defaultValues("digestAlgorithm")),this.objectDigest=(0,i.getParametersValue)(e,"objectDigest",f.defaultValues("objectDigest")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"digestedObjectType":return new n.Enumerated;case"otherObjectTypeID":return new n.ObjectIdentifier;case"digestAlgorithm":return new s.default;case"objectDigest":return new n.BitString;default:throw new Error(`Invalid member name for ObjectDigestInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Enumerated({name:t.digestedObjectType||""}),new n.ObjectIdentifier({optional:!0,name:t.otherObjectTypeID||""}),s.default.schema(t.digestAlgorithm||{}),new n.BitString({name:t.objectDigest||""})]})}fromSchema(e){(0,i.clearProps)(e,["digestedObjectType","otherObjectTypeID","digestAlgorithm","objectDigest"]);const t=n.compareSchema(e,e,f.schema({names:{digestedObjectType:"digestedObjectType",otherObjectTypeID:"otherObjectTypeID",digestAlgorithm:{names:{blockName:"digestAlgorithm"}},objectDigest:"objectDigest"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ObjectDigestInfo");this.digestedObjectType=t.result.digestedObjectType,"otherObjectTypeID"in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new s.default({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new n.Sequence({value:[this.digestedObjectType]});return"otherObjectTypeID"in this&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON()};return"otherObjectTypeID"in this&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e.digestAlgorithm=this.digestAlgorithm.toJSON(),e.objectDigest=this.objectDigest.toJSON(),e}}t.ObjectDigestInfo=f;class m{constructor(e={}){"issuerName"in e&&(this.issuerName=(0,i.getParametersValue)(e,"issuerName",m.defaultValues("issuerName"))),"baseCertificateID"in e&&(this.baseCertificateID=(0,i.getParametersValue)(e,"baseCertificateID",m.defaultValues("baseCertificateID"))),"objectDigestInfo"in e&&(this.objectDigestInfo=(0,i.getParametersValue)(e,"objectDigestInfo",m.defaultValues("objectDigestInfo"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuerName":return new a.default;case"baseCertificateID":return new l.IssuerSerial;case"objectDigestInfo":return new f;default:throw new Error(`Invalid member name for V2Form class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[a.default.schema({names:{blockName:t.issuerName}},!0),new n.Constructed({optional:!0,name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:l.IssuerSerial.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:1},value:f.schema().valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["issuerName","baseCertificateID","objectDigestInfo"]);const t=n.compareSchema(e,e,m.schema({names:{issuerName:"issuerName",baseCertificateID:"baseCertificateID",objectDigestInfo:"objectDigestInfo"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for V2Form");"issuerName"in t.result&&(this.issuerName=new a.default({schema:t.result.issuerName})),"baseCertificateID"in t.result&&(this.baseCertificateID=new l.IssuerSerial({schema:new n.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),"objectDigestInfo"in t.result&&(this.objectDigestInfo=new f({schema:new n.Sequence({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new n.Sequence;return"issuerName"in this&&e.valueBlock.value.push(this.issuerName.toSchema()),"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return"issuerName"in this&&(e.issuerName=this.issuerName.toJSON()),"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}t.V2Form=m;class d{constructor(e={}){"baseCertificateID"in e&&(this.baseCertificateID=(0,i.getParametersValue)(e,"baseCertificateID",d.defaultValues("baseCertificateID"))),"entityName"in e&&(this.entityName=(0,i.getParametersValue)(e,"entityName",d.defaultValues("entityName"))),"objectDigestInfo"in e&&(this.objectDigestInfo=(0,i.getParametersValue)(e,"objectDigestInfo",d.defaultValues("objectDigestInfo"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"baseCertificateID":return new l.IssuerSerial;case"entityName":return new a.default;case"objectDigestInfo":return new f;default:throw new Error(`Invalid member name for Holder class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,name:t.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:l.IssuerSerial.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.entityName||"",idBlock:{tagClass:3,tagNumber:1},value:a.default.schema().valueBlock.value}),new n.Constructed({optional:!0,name:t.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:2},value:f.schema().valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["baseCertificateID","entityName","objectDigestInfo"]);const t=n.compareSchema(e,e,d.schema({names:{baseCertificateID:"baseCertificateID",entityName:"entityName",objectDigestInfo:"objectDigestInfo"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Holder");"baseCertificateID"in t.result&&(this.baseCertificateID=new l.IssuerSerial({schema:new n.Sequence({value:t.result.baseCertificateID.valueBlock.value})})),"entityName"in t.result&&(this.entityName=new a.default({schema:new n.Sequence({value:t.result.entityName.valueBlock.value})})),"objectDigestInfo"in t.result&&(this.objectDigestInfo=new f({schema:new n.Sequence({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new n.Sequence;return"baseCertificateID"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"entityName"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"entityName"in this&&(e.entityName=this.entityName.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}t.Holder=d;class p{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",p.defaultValues("version")),this.holder=(0,i.getParametersValue)(e,"holder",p.defaultValues("holder")),this.issuer=(0,i.getParametersValue)(e,"issuer",p.defaultValues("issuer")),this.signature=(0,i.getParametersValue)(e,"signature",p.defaultValues("signature")),this.serialNumber=(0,i.getParametersValue)(e,"serialNumber",p.defaultValues("serialNumber")),this.attrCertValidityPeriod=(0,i.getParametersValue)(e,"attrCertValidityPeriod",p.defaultValues("attrCertValidityPeriod")),this.attributes=(0,i.getParametersValue)(e,"attributes",p.defaultValues("attributes")),"issuerUniqueID"in e&&(this.issuerUniqueID=(0,i.getParametersValue)(e,"issuerUniqueID",p.defaultValues("issuerUniqueID"))),"extensions"in e&&(this.extensions=(0,i.getParametersValue)(e,"extensions",p.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 1;case"holder":return new d;case"issuer":return{};case"signature":return new s.default;case"serialNumber":return new n.Integer;case"attrCertValidityPeriod":return new l.AttCertValidityPeriod;case"attributes":return[];case"issuerUniqueID":return new n.BitString;case"extensions":return new u.default;default:throw new Error(`Invalid member name for AttributeCertificateInfoV2 class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),d.schema(t.holder||{}),new n.Choice({value:[a.default.schema({names:{blockName:t.issuer||""}}),new n.Constructed({name:t.issuer||"",idBlock:{tagClass:3,tagNumber:0},value:m.schema().valueBlock.value})]}),s.default.schema(t.signature||{}),new n.Integer({name:t.serialNumber||""}),l.AttCertValidityPeriod.schema(t.attrCertValidityPeriod||{}),new n.Sequence({name:t.attributes||"",value:[new n.Repeated({value:o.default.schema()})]}),new n.BitString({optional:!0,name:t.issuerUniqueID||""}),u.default.schema(t.extensions||{},!0)]})}fromSchema(e){(0,i.clearProps)(e,["version","holder","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]);const t=n.compareSchema(e,e,p.schema({names:{version:"version",holder:{names:{blockName:"holder"}},issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV2");switch(this.version=t.result.version.valueBlock.valueDec,this.holder=new d({schema:t.result.holder}),t.result.issuer.idBlock.tagClass){case 3:this.issuer=new m({schema:new n.Sequence({value:t.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new s.default({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new l.AttCertValidityPeriod({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,e=>new o.default({schema:e})),"issuerUniqueID"in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),"extensions"in t.result&&(this.extensions=new u.default({schema:t.result.extensions}))}toSchema(){const e=new n.Sequence({value:[new n.Integer({value:this.version}),this.holder.toSchema(),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new n.Sequence({value:Array.from(this.attributes,e=>e.toSchema())})]});return"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,e=>e.toJSON())};return"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}t.AttributeCertificateInfoV2=p;class g{constructor(e={}){this.acinfo=(0,i.getParametersValue)(e,"acinfo",g.defaultValues("acinfo")),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",g.defaultValues("signatureAlgorithm")),this.signatureValue=(0,i.getParametersValue)(e,"signatureValue",g.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"acinfo":return new p;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error(`Invalid member name for AttributeCertificateV2 class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[p.schema(t.acinfo||{}),s.default.schema(t.signatureAlgorithm||{}),new n.BitString({name:t.signatureValue||""})]})}fromSchema(e){(0,i.clearProps)(e,["acinfo","signatureAlgorithm","signatureValue"]);const t=n.compareSchema(e,e,g.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV2");this.acinfo=new p({schema:t.result.acinfo}),this.signatureAlgorithm=new s.default({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new n.Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}t.default=g},45402:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class u{constructor(e={}){this.type=(0,i.getParametersValue)(e,"type",u.defaultValues("type")),this.value=(0,i.getParametersValue)(e,"value",u.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return"";case"value":return{};default:throw new Error(`Invalid member name for AttributeTypeAndValue class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.type||""}),new n.Any({name:t.value||""})]})}static blockName(){return"AttributeTypeAndValue"}fromSchema(e){(0,i.clearProps)(e,["type","typeValue"]);const t=n.compareSchema(e,e,u.schema({names:{type:"type",value:"typeValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AttributeTypeAndValue");this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return e.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,e}isEqual(e){const t=[n.Utf8String.blockName(),n.BmpString.blockName(),n.UniversalString.blockName(),n.NumericString.blockName(),n.PrintableString.blockName(),n.TeletexString.blockName(),n.VideotexString.blockName(),n.IA5String.blockName(),n.GraphicString.blockName(),n.VisibleString.blockName(),n.GeneralString.blockName(),n.CharacterString.blockName()];if(e.constructor.blockName()===u.blockName()){if(this.type!==e.type)return!1;let n=[!1,!1];const u=this.value.constructor.blockName();var r,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,void 0):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}(t);try{for(s.s();!(r=s.n()).done;){const t=r.value;u===t&&(n[0]=!0),e.value.constructor.blockName()===t&&(n[1]=!0)}}catch(l){s.e(l)}finally{s.f()}if(n[0]^n[1])return!1;if(n=n[0]&&n[1],n){const t=(0,a.stringPrep)(this.value.valueBlock.value),r=(0,a.stringPrep)(e.value.valueBlock.value);if(0!==t.localeCompare(r))return!1}else if(!1===(0,i.isEqualBuffer)(this.value.valueBeforeDecode,e.value.valueBeforeDecode))return!1;return!0}return e instanceof ArrayBuffer&&(0,i.isEqualBuffer)(this.value.valueBeforeDecode,e)}}t.default=u},81957:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(60294)),s=l(r(71030)),o=l(r(78544)),u=l(r(38570));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){o=!0,i=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function m(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class p{constructor(e={}){this.safeContents=(0,i.getParametersValue)(e,"safeContents",p.defaultValues("safeContents")),"parsedValue"in e&&(this.parsedValue=(0,i.getParametersValue)(e,"parsedValue",p.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error(`Invalid member name for AuthenticatedSafe class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error(`Invalid member name for AuthenticatedSafe class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.contentInfos||"",value:a.default.schema()})]})}fromSchema(e){(0,i.clearProps)(e,["contentInfos"]);const t=n.compareSchema(e,e,p.schema({names:{contentInfos:"contentInfos"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(t.result.contentInfos,e=>new a.default({schema:e}))}toSchema(){return new n.Sequence({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}parseInternalValues(e){if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==0)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==0)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');let t=Promise.resolve();this.parsedValue={safeContents:[]};var r,a=f(this.safeContents.entries());try{for(a.s();!(r=a.n()).done;){const a=h(r.value,2),d=a[0],p=a[1];switch(p.contentType){case"1.2.840.113549.1.7.1":{if(p.content instanceof n.OctetString==0)return Promise.reject('Wrong type of "this.safeContents[j].content"');let e=new ArrayBuffer(0);if(p.content.valueBlock.isConstructed){var l,c=f(p.content.valueBlock.value);try{for(c.s();!(l=c.n()).done;)e=(0,i.utilConcatBuf)(e,l.value.valueBlock.valueHex)}catch(m){c.e(m)}finally{c.f()}}else e=p.content.valueBlock.valueHex;const t=n.fromBER(e);if(-1===t.offset)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new s.default({schema:t.result})})}break;case"1.2.840.113549.1.7.3":{const r=new o.default({schema:p.content});if("recipientCertificate"in e.safeContents[d]==0)return Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"');const i=e.safeContents[d].recipientCertificate;if("recipientKey"in e.safeContents[d]==0)return Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"');const a=e.safeContents[d].recipientKey;t=t.then(()=>r.decrypt(0,{recipientCertificate:i,recipientPrivateKey:a})),t=t.then(e=>{const t=n.fromBER(e);return-1===t.offset?Promise.reject("Error during parsing of decrypted data"):(this.parsedValue.safeContents.push({privacyMode:2,value:new s.default({schema:t.result})}),Promise.resolve())})}break;case"1.2.840.113549.1.7.6":{const r=new u.default({schema:p.content});if("password"in e.safeContents[d]==0)return Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"');const i=e.safeContents[d].password;t=t.then(()=>r.decrypt({password:i}),e=>Promise.reject(e)),t=t.then(e=>{const t=n.fromBER(e);return-1===t.offset?Promise.reject("Error during parsing of decrypted data"):(this.parsedValue.safeContents.push({privacyMode:1,value:new s.default({schema:t.result})}),Promise.resolve())},e=>Promise.reject(e))}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${p.contentType}`)}}}catch(m){a.e(m)}finally{a.f()}return t}makeInternalValues(e){if("parsedValue"in this==0)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==0)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==0)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==0)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==0)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');let t=Promise.resolve();this.safeContents=[];var r,i=f(this.parsedValue.safeContents.entries());try{for(i.s();!(r=i.n()).done;){const i=h(r.value,2),l=i[0],c=i[1];if("privacyMode"in c==0)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in c==0)return Promise.reject('The "value" is a mandatory parameter for "content"');if(c.value instanceof s.default==0)return Promise.reject('The "content.value" must has "SafeContents" type');switch(c.privacyMode){case 0:{const e=c.value.toSchema().toBER(!1);t=t.then(()=>{this.safeContents.push(new a.default({contentType:"1.2.840.113549.1.7.1",content:new n.OctetString({valueHex:e})}))})}break;case 1:{const r=new u.default,n=e.safeContents[l];n.contentToEncrypt=c.value.toSchema().toBER(!1),t=t.then(()=>r.encrypt(n),e=>Promise.reject(e)),t=t.then(()=>{this.safeContents.push(new a.default({contentType:"1.2.840.113549.1.7.6",content:r.toSchema()}))},e=>Promise.reject(e))}break;case 2:{const r=new o.default,n=c.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[l]==0)return Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"');if("encryptionAlgorithm"in e.safeContents[l]==0)return Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"');switch(!0){case"aes-cbc"===e.safeContents[l].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[l].encryptionAlgorithm.name.toLowerCase():break;default:return Promise.reject(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${e.safeContents[l].encryptionAlgorithm}`)}switch(!0){case 128===e.safeContents[l].encryptionAlgorithm.length:case 192===e.safeContents[l].encryptionAlgorithm.length:case 256===e.safeContents[l].encryptionAlgorithm.length:break;default:return Promise.reject(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${e.safeContents[l].encryptionAlgorithm.length}`)}const i=e.safeContents[l].encryptionAlgorithm;r.addRecipientByCertificate(e.safeContents[l].encryptingCertificate),t=t.then(()=>r.encrypt(i,n)),t=t.then(()=>{this.safeContents.push(new a.default({contentType:"1.2.840.113549.1.7.3",content:r.toSchema()}))})}break;default:return Promise.reject(`Incorrect value for "content.privacyMode": ${c.privacyMode}`)}}}catch(l){i.e(l)}finally{i.f()}return t.then(()=>this,e=>Promise.reject(`Error during parsing: ${e}`))}}t.default=p},96988:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){"keyIdentifier"in e&&(this.keyIdentifier=(0,a.getParametersValue)(e,"keyIdentifier",u.defaultValues("keyIdentifier"))),"authorityCertIssuer"in e&&(this.authorityCertIssuer=(0,a.getParametersValue)(e,"authorityCertIssuer",u.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in e&&(this.authorityCertSerialNumber=(0,a.getParametersValue)(e,"authorityCertSerialNumber",u.defaultValues("authorityCertSerialNumber"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyIdentifier":return new i.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new i.Integer;default:throw new Error(`Invalid member name for AuthorityKeyIdentifier class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.Repeated({name:t.authorityCertIssuer||"",value:s.default.schema()})]}),new i.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){(0,a.clearProps)(e,["keyIdentifier","authorityCertIssuer","authorityCertSerialNumber"]);const t=i.compareSchema(e,e,u.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in t.result&&(this.keyIdentifier=new i.OctetString({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,e=>new s.default({schema:e}))),"authorityCertSerialNumber"in t.result&&(this.authorityCertSerialNumber=new i.Integer({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return"keyIdentifier"in this&&e.push(new i.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,e=>e.toSchema())})),"authorityCertSerialNumber"in this&&e.push(new i.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHex})),new i.Sequence({value:e})}toJSON(){const e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,e=>e.toJSON())),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}t.default=u},39670:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.cA=(0,i.getParametersValue)(e,"cA",!1),"pathLenConstraint"in e&&(this.pathLenConstraint=(0,i.getParametersValue)(e,"pathLenConstraint",0)),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"cA":return!1;default:throw new Error(`Invalid member name for BasicConstraints class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Boolean({optional:!0,name:t.cA||""}),new n.Integer({optional:!0,name:t.pathLenConstraint||""})]})}fromSchema(e){(0,i.clearProps)(e,["cA","pathLenConstraint"]);const t=n.compareSchema(e,e,s.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in t.result&&(this.cA=t.result.cA.valueBlock.value),"pathLenConstraint"in t.result&&(this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.isHexOnly?t.result.pathLenConstraint:t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==s.defaultValues("cA")&&e.push(new n.Boolean({value:this.cA})),"pathLenConstraint"in this&&e.push(this.pathLenConstraint instanceof n.Integer?this.pathLenConstraint:new n.Integer({value:this.pathLenConstraint})),new n.Sequence({value:e})}toJSON(){const e={};return this.cA!==s.defaultValues("cA")&&(e.cA=this.cA),"pathLenConstraint"in this&&(e.pathLenConstraint=this.pathLenConstraint instanceof n.Integer?this.pathLenConstraint.toJSON():this.pathLenConstraint),e}}t.default=s},77597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=f(r(73229)),o=f(r(4987)),u=f(r(35585)),l=f(r(42689)),c=f(r(2446)),h=f(r(20624));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){o=!0,i=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function g(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class v{constructor(e={}){this.tbsResponseData=(0,i.getParametersValue)(e,"tbsResponseData",v.defaultValues("tbsResponseData")),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",v.defaultValues("signatureAlgorithm")),this.signature=(0,i.getParametersValue)(e,"signature",v.defaultValues("signature")),"certs"in e&&(this.certs=(0,i.getParametersValue)(e,"certs",v.defaultValues("certs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbsResponseData":return new s.default;case"signatureAlgorithm":return new o.default;case"signature":return new n.BitString;case"certs":return[];default:throw new Error(`Invalid member name for BasicOCSPResponse class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"type":{let e=s.default.compareWithDefault("tbs",t.tbs)&&s.default.compareWithDefault("responderID",t.responderID)&&s.default.compareWithDefault("producedAt",t.producedAt)&&s.default.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(e=e&&s.default.compareWithDefault("responseExtensions",t.responseExtensions)),e}case"signatureAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"signature":return t.isEqual(v.defaultValues(e));case"certs":return 0===t.length;default:throw new Error(`Invalid member name for BasicOCSPResponse class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"BasicOCSPResponse",value:[s.default.schema(t.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),o.default.schema(t.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new n.BitString({name:t.signature||"BasicOCSPResponse.signature"}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Sequence({value:[new n.Repeated({name:"BasicOCSPResponse.certs",value:u.default.schema(t.certs||{})})]})]})]})}fromSchema(e){(0,i.clearProps)(e,["BasicOCSPResponse.tbsResponseData","BasicOCSPResponse.signatureAlgorithm","BasicOCSPResponse.signature","BasicOCSPResponse.certs"]);const t=n.compareSchema(e,e,v.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for BasicOCSPResponse");this.tbsResponseData=new s.default({schema:t.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new o.default({schema:t.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=t.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in t.result&&(this.certs=Array.from(t.result["BasicOCSPResponse.certs"],e=>new u.default({schema:e})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Sequence({value:Array.from(this.certs,e=>e.toSchema())})]})),new n.Sequence({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,e=>e.toJSON())),e}getCertificateStatus(e,t){let r=Promise.resolve();const n={isForCertificate:!1,status:2},i={},s=[],o=[];var u,c=p(this.tbsResponseData.responses);try{for(c.s();!(u=c.n()).done;){const r=u.value,n=(0,a.getAlgorithmByOID)(r.certID.hashAlgorithm.algorithmId);if("name"in n==0)return Promise.reject(`Wrong CertID hashing algorithm: ${r.certID.hashAlgorithm.algorithmId}`);if(n.name in i==0){i[n.name]=1;const r=new l.default;s.push(r),o.push(r.createForCertificate(e,{hashAlgorithm:n.name,issuerCertificate:t}))}}}catch(h){c.e(h)}finally{c.f()}return r=r.then(()=>Promise.all(o)),r=r.then(()=>{var e,t=p(this.tbsResponseData.responses);try{for(t.s();!(e=t.n()).done;){const t=e.value;var r,i=p(s);try{for(i.s();!(r=i.n()).done;)if(t.certID.isEqual(r.value)){n.isForCertificate=!0;try{switch(t.certStatus.idBlock.isConstructed){case!0:1===t.certStatus.idBlock.tagNumber&&(n.status=1);break;case!1:switch(t.certStatus.idBlock.tagNumber){case 0:n.status=0;break;case 2:n.status=2}}}catch(a){}return n}}catch(h){i.e(h)}finally{i.f()}}}catch(h){t.e(h)}finally{t.f()}return n}),r}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,i=Promise.resolve();const s=(0,a.getEngine)();return i=i.then(()=>s.subtle.getSignatureParameters(e,t)),i=i.then(e=>{r=e.parameters,this.signatureAlgorithm=e.signatureAlgorithm}),i=i.then(()=>{this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1)}),i=i.then(()=>s.subtle.signWithPrivateKey(this.tbsResponseData.tbs,e,r)),i=i.then(e=>{this.signature=new n.BitString({valueHex:e})}),i}verify(e={}){let t=null,r=-1,s=Promise.resolve(),o=[];const u=this,l=(0,a.getEngine)();if("certs"in this==0)return Promise.reject("No certificates attached to the BasicOCSPResponce");"trustedCerts"in e&&(o=e.trustedCerts);const f=(0,a.getCrypto)();if(void 0===f)return Promise.reject("Unable to create WebCrypto object");switch(!0){case this.tbsResponseData.responderID instanceof c.default:s=s.then(()=>{var e,t=p(u.certs.entries());try{for(t.s();!(e=t.n()).done;){const t=d(e.value,2),n=t[0];if(t[1].subject.isEqual(u.tbsResponseData.responderID)){r=n;break}}}catch(n){t.e(n)}finally{t.f()}});break;case this.tbsResponseData.responderID instanceof n.OctetString:s=s.then(()=>Promise.all(Array.from(u.certs,e=>f.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex)))).then(e=>{var t,n=p(u.certs.entries());try{for(n.s();!(t=n.n()).done;){const n=d(t.value,1)[0];if((0,i.isEqualBuffer)(e[n],u.tbsResponseData.responderID.valueBlock.valueHex)){r=n;break}}}catch(a){n.e(a)}finally{n.f()}}));break;default:return Promise.reject("Wrong value for responderID")}return s=s.then(()=>-1===r?Promise.reject("Correct certificate was not found in OCSP response"):(t=this.certs[r],Promise.all(Array.from(u.certs,e=>function(e){if(!0===e.issuer.isEqual(t.issuer)&&!0===e.serialNumber.isEqual(t.serialNumber))return null;let r=!1;var n,i=p(e.extensions);try{for(i.s();!(n=i.n()).done;){const e=n.value;"2.5.29.19"===e.extnID&&"cA"in e.parsedValue&&!0===e.parsedValue.cA&&(r=!0)}}catch(a){i.e(a)}finally{i.f()}return r?e:null}(e))).then(e=>{const r=[];r.push(t);var n,i=p(e);try{for(i.s();!(n=i.n()).done;){const e=n.value;null!==e&&r.push(e)}}catch(a){i.e(a)}finally{i.f()}return new h.default({certs:r,trustedCerts:o}).verify().then(e=>!0===e.result?Promise.resolve():Promise.reject("Validation of signer's certificate failed"),e=>Promise.reject(`Validation of signer's certificate failed with error: ${e instanceof Object?e.resultMessage:e}`))},e=>Promise.reject(`Error during checking certificates for CA flag: ${e}`)))),s=s.then(()=>l.subtle.verifyWithPublicKey(this.tbsResponseData.tbs,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)),s}}t.default=v},43199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.certificateIndex=(0,i.getParametersValue)(e,"certificateIndex",s.defaultValues("certificateIndex")),this.keyIndex=(0,i.getParametersValue)(e,"keyIndex",s.defaultValues("keyIndex")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certificateIndex":case"keyIndex":return 0;default:throw new Error(`Invalid member name for CAVersion class: ${e}`)}}static schema(e={}){return new n.Integer}fromSchema(e){if(e.constructor.blockName()!==n.Integer.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const r=new Uint8Array(t);switch(!0){case t.byteLength<4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(r,4-t.byteLength),t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(r.slice(0,4)),t=e.slice(0)}}const i=t.slice(0,2),a=new Uint8Array(i);let s=a[0];a[0]=a[1],a[1]=s;const o=new Uint16Array(i);this.keyIndex=o[0];const u=t.slice(2),l=new Uint8Array(u);s=l[0],l[0]=l[1],l[1]=s;const c=new Uint16Array(u);this.certificateIndex=c[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const t=new Uint8Array(e);let r=t[0];t[0]=t[1],t[1]=r;const a=new ArrayBuffer(2);new Uint16Array(a)[0]=this.keyIndex;const s=new Uint8Array(a);return r=s[0],s[0]=s[1],s[1]=r,new n.Integer({valueHex:(0,i.utilConcatBuf)(a,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}t.default=s},62983:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(79394))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.crlId=(0,a.getParametersValue)(e,"crlId",u.defaultValues("crlId")),this.crlValue=(0,a.getParametersValue)(e,"crlValue",u.defaultValues("crlValue")),"parsedValue"in e&&(this.parsedValue=(0,a.getParametersValue)(e,"parsedValue",u.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"crlId":return"";case"crlValue":return new i.Any;case"parsedValue":return{};default:throw new Error(`Invalid member name for CRLBag class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof i.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error(`Invalid member name for CRLBag class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.ObjectIdentifier({name:t.id||"id"}),new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new i.Any({name:t.value||"value"})]})]})}fromSchema(e){(0,a.clearProps)(e,["crlId","crlValue"]);const t=i.compareSchema(e,e,u.schema({names:{id:"crlId",value:"crlValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":{const e=i.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new s.default({schema:e.result})}break;default:throw new Error(`Incorrect "crlId" value in CRLBag: ${this.crlId}`)}}toSchema(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new i.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new i.Sequence({value:[new i.ObjectIdentifier({value:this.crlId}),new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}t.default=u},91439:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(70300))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.distributionPoints=(0,a.getParametersValue)(e,"distributionPoints",u.defaultValues("distributionPoints")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"distributionPoints":return[];default:throw new Error(`Invalid member name for CRLDistributionPoints class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.distributionPoints||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["distributionPoints"]);const t=i.compareSchema(e,e,u.schema({names:{distributionPoints:"distributionPoints"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(t.result.distributionPoints,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}t.default=u},78342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(35585)),s=o(r(73766));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.certId=(0,i.getParametersValue)(e,"certId",l.defaultValues("certId")),this.certValue=(0,i.getParametersValue)(e,"certValue",l.defaultValues("certValue")),"parsedValue"in e&&(this.parsedValue=(0,i.getParametersValue)(e,"parsedValue",l.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certId":return"";case"certValue":return new n.Any;case"parsedValue":return{};default:throw new Error(`Invalid member name for CertBag class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof n.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error(`Invalid member name for CertBag class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||"id"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.value||"value"})]})]})}fromSchema(e){(0,i.clearProps)(e,["certId","certValue"]);const t=n.compareSchema(e,e,l.schema({names:{id:"certId",value:"certValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":{const e=n.fromBER(this.certValue.valueBlock.valueHex);try{this.parsedValue=new a.default({schema:e.result})}catch(r){this.parsedValue=new s.default({schema:e.result})}}break;case"1.2.840.113549.1.9.22.3":{const e=n.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new s.default({schema:e.result})}break;case"1.2.840.113549.1.9.22.2":default:throw new Error(`Incorrect "certId" value in CertBag: ${this.certId}`)}}toSchema(){return"parsedValue"in this&&(this.certId="acinfo"in this.parsedValue?"1.2.840.113549.1.9.22.3":"1.2.840.113549.1.9.22.1",this.certValue=new n.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new n.Sequence({value:[new n.ObjectIdentifier({value:this.certId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}t.default=l},42689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=r(97226),o=(n=r(4987))&&n.__esModule?n:{default:n};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.hashAlgorithm=(0,a.getParametersValue)(e,"hashAlgorithm",l.defaultValues("hashAlgorithm")),this.issuerNameHash=(0,a.getParametersValue)(e,"issuerNameHash",l.defaultValues("issuerNameHash")),this.issuerKeyHash=(0,a.getParametersValue)(e,"issuerKeyHash",l.defaultValues("issuerKeyHash")),this.serialNumber=(0,a.getParametersValue)(e,"serialNumber",l.defaultValues("serialNumber")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new o.default;case"issuerNameHash":case"issuerKeyHash":return new i.OctetString;case"serialNumber":return new i.Integer;default:throw new Error(`Invalid member name for CertID class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"hashAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return t.isEqual(l.defaultValues(e));default:throw new Error(`Invalid member name for CertID class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[o.default.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||""}}),new i.OctetString({name:t.issuerNameHash||""}),new i.OctetString({name:t.issuerKeyHash||""}),new i.Integer({name:t.serialNumber||""})]})}fromSchema(e){(0,a.clearProps)(e,["hashAlgorithm","issuerNameHash","issuerKeyHash","serialNumber"]);const t=i.compareSchema(e,e,l.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new o.default({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new i.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&!1!==(0,a.isEqualBuffer)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)&&!1!==(0,a.isEqualBuffer)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)&&!!this.serialNumber.isEqual(e.serialNumber)}createForCertificate(e,t){let r,n=Promise.resolve();const a=(0,s.getCrypto)();if(void 0===a)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==0)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');const u=(0,s.getOIDByAlgorithm)({name:t.hashAlgorithm});return""===u?Promise.reject(`Incorrect "hashAlgorithm": ${this.hashAlgorithm}`):(this.hashAlgorithm=new o.default({algorithmId:u,algorithmParams:new i.Null}),"issuerCertificate"in t?(r=t.issuerCertificate,this.serialNumber=e.serialNumber,n=n.then(()=>a.digest({name:t.hashAlgorithm},r.subject.toSchema().toBER(!1)),e=>Promise.reject(e)),n=n.then(e=>(this.issuerNameHash=new i.OctetString({valueHex:e}),a.digest({name:t.hashAlgorithm},r.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex)),e=>Promise.reject(e)).then(e=>{this.issuerKeyHash=new i.OctetString({valueHex:e})},e=>Promise.reject(e)),n):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}t.default=l},35585:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=f(r(4987)),o=f(r(2446)),u=f(r(26466)),l=f(r(20720)),c=f(r(51090)),h=f(r(39327));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function d(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"tbsCertificate",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new n.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),s.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),o.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new n.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[u.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),u.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),o.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),l.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new n.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[h.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}class p{constructor(e={}){this.tbs=(0,i.getParametersValue)(e,"tbs",p.defaultValues("tbs")),this.version=(0,i.getParametersValue)(e,"version",p.defaultValues("version")),this.serialNumber=(0,i.getParametersValue)(e,"serialNumber",p.defaultValues("serialNumber")),this.signature=(0,i.getParametersValue)(e,"signature",p.defaultValues("signature")),this.issuer=(0,i.getParametersValue)(e,"issuer",p.defaultValues("issuer")),this.notBefore=(0,i.getParametersValue)(e,"notBefore",p.defaultValues("notBefore")),this.notAfter=(0,i.getParametersValue)(e,"notAfter",p.defaultValues("notAfter")),this.subject=(0,i.getParametersValue)(e,"subject",p.defaultValues("subject")),this.subjectPublicKeyInfo=(0,i.getParametersValue)(e,"subjectPublicKeyInfo",p.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in e&&(this.issuerUniqueID=(0,i.getParametersValue)(e,"issuerUniqueID",p.defaultValues("issuerUniqueID"))),"subjectUniqueID"in e&&(this.subjectUniqueID=(0,i.getParametersValue)(e,"subjectUniqueID",p.defaultValues("subjectUniqueID"))),"extensions"in e&&(this.extensions=(0,i.getParametersValue)(e,"extensions",p.defaultValues("extensions"))),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",p.defaultValues("signatureAlgorithm")),this.signatureValue=(0,i.getParametersValue)(e,"signatureValue",p.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new n.Integer;case"signature":return new s.default;case"issuer":return new o.default;case"notBefore":case"notAfter":return new u.default;case"subject":return new o.default;case"subjectPublicKeyInfo":return new l.default;case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error(`Invalid member name for Certificate class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[d(t.tbsCertificate),s.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}fromSchema(e){(0,i.clearProps)(e,["tbsCertificate","tbsCertificate.extensions","tbsCertificate.version","tbsCertificate.serialNumber","tbsCertificate.signature","tbsCertificate.issuer","tbsCertificate.notBefore","tbsCertificate.notAfter","tbsCertificate.subject","tbsCertificate.subjectPublicKeyInfo","tbsCertificate.issuerUniqueID","tbsCertificate.subjectUniqueID","signatureAlgorithm","signatureValue"]);const t=n.compareSchema(e,e,p.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Certificate");this.tbs=t.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in t.result&&(this.version=t.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=t.result["tbsCertificate.serialNumber"],this.signature=new s.default({schema:t.result["tbsCertificate.signature"]}),this.issuer=new o.default({schema:t.result["tbsCertificate.issuer"]}),this.notBefore=new u.default({schema:t.result["tbsCertificate.notBefore"]}),this.notAfter=new u.default({schema:t.result["tbsCertificate.notAfter"]}),this.subject=new o.default({schema:t.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new l.default({schema:t.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in t.result&&(this.issuerUniqueID=t.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in t.result&&(this.subjectUniqueID=t.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in t.result&&(this.extensions=Array.from(t.result["tbsCertificate.extensions"],e=>new c.default({schema:e}))),this.signatureAlgorithm=new s.default({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return"version"in this&&this.version!==p.defaultValues("version")&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new n.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&e.push(new n.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&e.push(new n.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"extensions"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new n.Sequence({value:Array.from(this.extensions,e=>e.toSchema())})]})),new n.Sequence({value:e})}toSchema(e=!1){let t={};if(!1===e){if(0===this.tbs.length)return p.schema().value[0];t=n.fromBER(this.tbs).result}else t=this.encodeTBS();return new n.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:(0,i.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==p.defaultValues("version")&&(e.version=this.version),"issuerUniqueID"in this&&(e.issuerUniqueID=(0,i.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(e.subjectUniqueID=(0,i.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(e.extensions=Array.from(this.extensions,e=>e.toJSON())),e}getPublicKey(e=null){return(0,a.getEngine)().subtle.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}getKeyHash(e="SHA-1"){const t=(0,a.getCrypto)();return void 0===t?Promise.reject("Unable to create WebCrypto object"):t.digest({name:e},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,i=Promise.resolve();const s=(0,a.getEngine)();return i=i.then(()=>s.subtle.getSignatureParameters(e,t)),i=i.then(e=>{r=e.parameters,this.signature=e.signatureAlgorithm,this.signatureAlgorithm=e.signatureAlgorithm}),i=i.then(()=>{this.tbs=this.encodeTBS().toBER(!1)}),i=i.then(()=>s.subtle.signWithPrivateKey(this.tbs,e,r)),i=i.then(e=>{this.signatureValue=new n.BitString({valueHex:e})}),i}verify(e=null){let t={};return null!==e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),t instanceof l.default==0?Promise.reject("Please provide issuer certificate as a parameter"):(0,a.getEngine)().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,t,this.signatureAlgorithm)}}t.default=p},20624:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(1971),i=r(97226);function a(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function o(e){a(s,n,i,o,u,"next",e)}function u(e){a(s,n,i,o,u,"throw",e)}o(void 0)})}}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class l{constructor(e={}){this.trustedCerts=(0,n.getParametersValue)(e,"trustedCerts",this.defaultValues("trustedCerts")),this.certs=(0,n.getParametersValue)(e,"certs",this.defaultValues("certs")),this.crls=(0,n.getParametersValue)(e,"crls",this.defaultValues("crls")),this.ocsps=(0,n.getParametersValue)(e,"ocsps",this.defaultValues("ocsps")),this.checkDate=(0,n.getParametersValue)(e,"checkDate",this.defaultValues("checkDate")),this.findOrigin=(0,n.getParametersValue)(e,"findOrigin",this.defaultValues("findOrigin")),this.findIssuer=(0,n.getParametersValue)(e,"findIssuer",this.defaultValues("findIssuer"))}static defaultFindOrigin(e,t){0===e.tbs.byteLength&&(e.tbs=e.encodeTBS());var r,i=o(t.certs);try{for(i.s();!(r=i.n()).done;){const t=r.value;if(0===t.tbs.byteLength&&(t.tbs=t.encodeTBS()),(0,n.isEqualBuffer)(e.tbs,t.tbs))return"Intermediate Certificates"}}catch(u){i.e(u)}finally{i.f()}var a,s=o(t.trustedCerts);try{for(s.s();!(a=s.n()).done;){const t=a.value;if(0===t.tbs.byteLength&&(t.tbs=t.encodeTBS()),(0,n.isEqualBuffer)(e.tbs,t.tbs))return"Trusted Certificates"}}catch(u){s.e(u)}finally{s.f()}return"Unknown"}defaultFindIssuer(e,t){return s(function*(){let r=[],i=null,a=null,s=null;if(e.subject.isEqual(e.issuer))try{if(!0===(yield e.verify()))return[e]}catch(p){}if("extensions"in e){var u,l=o(e.extensions);try{for(l.s();!(u=l.n()).done;){const e=u.value;if("2.5.29.35"===e.extnID){"keyIdentifier"in e.parsedValue?i=e.parsedValue.keyIdentifier:("authorityCertIssuer"in e.parsedValue&&(a=e.parsedValue.authorityCertIssuer),"authorityCertSerialNumber"in e.parsedValue&&(s=e.parsedValue.authorityCertSerialNumber));break}}}catch(g){l.e(g)}finally{l.f()}}function c(t){if(null!==i&&"extensions"in t){let e=!1;var u,l=o(t.extensions);try{for(l.s();!(u=l.n()).done;){const a=u.value;if("2.5.29.14"===a.extnID){e=!0,(0,n.isEqualBuffer)(a.parsedValue.valueBlock.valueHex,i.valueBlock.valueHex)&&r.push(t);break}}}catch(g){l.e(g)}finally{l.f()}if(e)return}let c=!1;null!==s&&(c=t.serialNumber.isEqual(s)),null!==a?t.subject.isEqual(a)&&c&&r.push(t):e.issuer.isEqual(t.subject)&&r.push(t)}var h,f=o(t.trustedCerts);try{for(f.s();!(h=f.n()).done;)c(h.value)}catch(g){f.e(g)}finally{f.f()}var m,d=o(t.certs);try{for(d.s();!(m=d.n()).done;)c(m.value)}catch(g){d.e(g)}finally{d.f()}for(let t=0;t<r.length;t++)try{!1===(yield e.verify(r[t]))&&r.splice(t,1)}catch(p){r.splice(t,1)}return r})()}defaultValues(e){switch(e){case"trustedCerts":case"certs":case"crls":case"ocsps":return[];case"checkDate":return new Date;case"findOrigin":return l.defaultFindOrigin;case"findIssuer":return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}sort(e=!1){var t=this;return s(function*(){const r=[],a=t;function u(e){return l.apply(this,arguments)}function l(){return(l=s(function*(e){const t=[];function r(e){let t=!0;for(let r=0;r<e.length;r++){for(let n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t}const i=yield a.findIssuer(e,a);if(0===i.length)throw new Error("No valid certificate paths found");for(let a=0;a<i.length;a++){if((0,n.isEqualBuffer)(i[a].tbs,e.tbs)){t.push([i[a]]);continue}const s=yield u(i[a]);for(let e=0;e<s.length;e++){const n=s[e].slice();n.splice(0,0,i[a]),r(n)?t.push(n):t.push(s[e])}}return t})).apply(this,arguments)}function c(e){return h.apply(this,arguments)}function h(){return(h=s(function*(e){const t=[],n=[],i=[];if(t.push(...r.filter(t=>e.issuer.isEqual(t.subject))),0===t.length)return{status:1,statusMessage:"No certificate's issuers"};if(n.push(...a.crls.filter(t=>t.issuer.isEqual(e.issuer))),0===n.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let r=0;r<n.length;r++)if(!(n[r].nextUpdate.value<a.checkDate))for(let e=0;e<t.length;e++)try{if(yield n[r].verify({issuerCertificate:t[e]})){i.push({crl:n[r],certificate:t[e]});break}}catch(s){}return i.length?{status:0,statusMessage:"",result:i}:{status:3,statusMessage:"No valid CRLs found"}})).apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=s(function*(e,t){const r=(0,i.getAlgorithmByOID)(e.signatureAlgorithm.algorithmId);if("name"in r==0)return 1;if("hash"in r==0)return 1;for(let n=0;n<a.ocsps.length;n++){const r=yield a.ocsps[n].getCertificateStatus(e,t);if(r.isForCertificate)return 0===r.status?0:1}return 2})).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=s(function*(e,t=!1){let r=!1,n=!1,i=!1,a=!1;if("extensions"in e){for(let t=0;t<e.extensions.length;t++){if(!0===e.extensions[t].critical&&"parsedValue"in e.extensions[t]==0)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${e.extensions[t].extnID}`};if("2.5.29.15"===e.extensions[t].extnID){i=!0;const r=new Uint8Array(e.extensions[t].parsedValue.valueBlock.valueHex);4==(4&r[0])&&(n=!0),2==(2&r[0])&&(a=!0)}"2.5.29.19"===e.extensions[t].extnID&&"cA"in e.extensions[t].parsedValue&&!0===e.extensions[t].parsedValue.cA&&(r=!0)}if(!0===n&&!1===r)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'};if(!0===i&&!0===r&&!1===n)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===r&&!0===i&&t&&!1===a)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===r?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:""}})).apply(this,arguments)}function g(){return(g=s(function*(t,r){for(let e=0;e<t.length;e++)if(t[e].notBefore.value>r||t[e].notAfter.value<r)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(t.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let e=t.length-2;e>=0;e--)if(!1===t[e].issuer.isEqual(t[e].subject)&&!1===t[e].issuer.isEqual(t[e+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==a.crls.length||0!==a.ocsps.length)for(let u=0;u<t.length-1;u++){let r=2,l={status:0,statusMessage:""};if(0!==a.ocsps.length)switch(r=yield f(t[u],t[u+1]),r){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==a.crls.length){if(l=yield c(t[u]),0===l.status)for(let e=0;e<l.result.length;e++){if(l.result[e].crl.isCertificateRevoked(t[u]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(yield d(l.result[e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===e)throw{result:!1,resultCode:11,resultMessage:`No revocation values found for one of certificates: ${l.statusMessage}`}}else if(2===r)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===r&&2===l.status&&e){const e=t[u+1];let r=!1;if("extensions"in e){var n,i=o(e.extensions);try{for(i.s();!(n=i.n()).done;)switch(n.value.extnID){case"2.5.29.31":case"2.5.29.46":case"1.3.6.1.5.5.7.1.1":r=!0}}catch(s){i.e(s)}finally{i.f()}}if(r)throw{result:!1,resultCode:11,resultMessage:`No revocation values found for one of certificates: ${l.statusMessage}`}}}for(let e=1;e<t.length;e++)if(!1===(yield d(t[e])).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}})).apply(this,arguments)}r.push(...a.trustedCerts),r.push(...a.certs);for(let e=0;e<r.length;e++)for(let t=0;t<r.length;t++)if(e!==t&&(0,n.isEqualBuffer)(r[e].tbs,r[t].tbs)){r.splice(t,1),e=0;break}let y;const v=[r[r.length-1]];if(y=yield u(r[r.length-1]),0===y.length)return{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"};for(let e=0;e<y.length;e++){let t=!1;for(let r=0;r<y[e].length;r++){const i=y[e][r];for(let e=0;e<a.trustedCerts.length;e++)if((0,n.isEqualBuffer)(i.tbs,a.trustedCerts[e].tbs)){t=!0;break}if(t)break}t||(y.splice(e,1),e=0)}if(0===y.length)throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};let b=y[0].length,w=0;for(let e=0;e<y.length;e++)y[e].length<b&&(b=y[e].length,w=e);for(let e=0;e<y[w].length;e++)v.push(y[w][e]);if(y=yield function(e,t){return g.apply(this,arguments)}(v,a.checkDate),!1===y.result)throw y;return v})()}verify(e={}){var t=this;return s(function*(){function r(e,t){const r=(0,i.stringPrep)(e),n=(0,i.stringPrep)(t),a=r.split("."),s=n.split("."),o=a.length,u=s.length;if(0===o||0===u||o<u)return!1;for(let i=0;i<o;i++)if(0===a[i].length)return!1;for(let i=0;i<u;i++)if(0===s[i].length){if(0===i){if(1===u)return!1;continue}return!1}for(let i=0;i<u;i++)if(0!==s[u-1-i].length&&0!==a[o-1-i].localeCompare(s[u-1-i]))return!1;return!0}function n(e,t){const n=(0,i.stringPrep)(e),a=(0,i.stringPrep)(t),s=n.split("@"),o=a.split("@");if(0===s.length||0===o.length||s.length<o.length)return!1;if(1===o.length){if(r(s[1],o[0])){const e=s[1].split("."),t=o[0].split(".");return 0===t[0].length||e.length===t.length}return!1}return 0===n.localeCompare(a)}function a(e,t){let n=(0,i.stringPrep)(e);const a=(0,i.stringPrep)(t),s=n.split("/");if(a.split("/").length>1)return!1;if(s.length>1)for(let r=0;r<s.length;r++)if(s[r].length>0&&":"!==s[r].charAt(s[r].length-1)){n=s[r].split(":")[0];break}if(r(n,a)){const e=n.split("."),t=a.split(".");return 0===t[0].length||e.length===t.length}return!1}function s(e,t){const r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(let e=0;e<4;e++)if((r[e]^n[e])&n[e+4])return!1;return!0}if(16===r.length&&32===n.length){for(let e=0;e<16;e++)if((r[e]^n[e])&n[e+16])return!1;return!0}return!1}function o(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;let r=!0,n=0;for(let i=0;i<t.typesAndValues.length;i++){let a=!1;for(let s=n;s<e.typesAndValues.length;s++)if(a=e.typesAndValues[s].isEqual(t.typesAndValues[i]),e.typesAndValues[s].type===t.typesAndValues[i].type&&(r=r&&a),!0===a){if(0===n||n===s){n=s+1;break}return!1}if(!1===a)return!1}return 0!==n&&r}try{if(0===t.certs.length)throw"Empty certificate array";let i=!1;"passedWhenNotRevValues"in e&&(i=e.passedWhenNotRevValues);let u=[];u.push("2.5.29.32.0");let l=!1,c=!1,h=!1,f=[],m=[],d=[];"initialPolicySet"in e&&(u=e.initialPolicySet),"initialExplicitPolicy"in e&&(l=e.initialExplicitPolicy),"initialPolicyMappingInhibit"in e&&(c=e.initialPolicyMappingInhibit),"initialInhibitPolicy"in e&&(h=e.initialInhibitPolicy),"initialPermittedSubtreesSet"in e&&(f=e.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in e&&(m=e.initialExcludedSubtreesSet),"initialRequiredNameForms"in e&&(d=e.initialRequiredNameForms);let p=l,g=c,y=h;const v=new Array(3);v[0]=!1,v[1]=!1,v[2]=!1;let b=0,w=0,k=0,S=f,P=m;const A=d;let C=1;t.certs=yield t.sort(i);const I=[];I.push("2.5.29.32.0");const O=[],B=new Array(t.certs.length-1);for(let e=0;e<t.certs.length-1;e++)B[e]=!0;O.push(B);const _=new Array(t.certs.length-1),j=new Array(t.certs.length-1);let N=p?t.certs.length-1:-1;for(let e=t.certs.length-2;e>=0;e--,C++)if("extensions"in t.certs[e]){for(let r=0;r<t.certs[e].extensions.length;r++){if("2.5.29.32"===t.certs[e].extensions[r].extnID){j[e]=t.certs[e].extensions[r].parsedValue;for(let t=0;t<I.length;t++)if("2.5.29.32.0"===I[t]){delete O[t][e];break}for(let n=0;n<t.certs[e].extensions[r].parsedValue.certificatePolicies.length;n++){let i=-1;for(let a=0;a<I.length;a++)if(t.certs[e].extensions[r].parsedValue.certificatePolicies[n].policyIdentifier===I[a]){i=a;break}if(-1===i){I.push(t.certs[e].extensions[r].parsedValue.certificatePolicies[n].policyIdentifier);const i=new Array(t.certs.length-1);i[e]=!0,O.push(i)}else O[i][e]=!0}}if("2.5.29.33"===t.certs[e].extensions[r].extnID){if(g)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};_[e]=t.certs[e].extensions[r].parsedValue}"2.5.29.36"===t.certs[e].extensions[r].extnID&&!1===p&&(0===t.certs[e].extensions[r].parsedValue.requireExplicitPolicy?(p=!0,N=e):!1===v[0]?(v[0]=!0,b=t.certs[e].extensions[r].parsedValue.requireExplicitPolicy):b=b>t.certs[e].extensions[r].parsedValue.requireExplicitPolicy?t.certs[e].extensions[r].parsedValue.requireExplicitPolicy:b,0===t.certs[e].extensions[r].parsedValue.inhibitPolicyMapping?g=!0:!1===v[1]?(v[1]=!0,w=t.certs[e].extensions[r].parsedValue.inhibitPolicyMapping+1):w=w>t.certs[e].extensions[r].parsedValue.inhibitPolicyMapping+1?t.certs[e].extensions[r].parsedValue.inhibitPolicyMapping+1:w),"2.5.29.54"===t.certs[e].extensions[r].extnID&&!1===y&&(0===t.certs[e].extensions[r].parsedValue.valueBlock.valueDec?y=!0:!1===v[2]?(v[2]=!0,k=t.certs[e].extensions[r].parsedValue.valueBlock.valueDec):k=k>t.certs[e].extensions[r].parsedValue.valueBlock.valueDec?t.certs[e].extensions[r].parsedValue.valueBlock.valueDec:k)}if(!0===y){let t=-1;for(let e=0;e<I.length;e++)if("2.5.29.32.0"===I[e]){t=e;break}-1!==t&&delete O[0][e]}!1===p&&!0===v[0]&&(b--,0===b&&(p=!0,N=e,v[0]=!1)),!1===g&&!0===v[1]&&(w--,0===w&&(g=!0,v[1]=!1)),!1===y&&!0===v[2]&&(k--,0===k&&(y=!0,v[2]=!1))}for(let e=0;e<t.certs.length-1;e++)if(e<t.certs.length-2&&void 0!==_[e+1])for(let t=0;t<_[e+1].mappings.length;t++){if("2.5.29.32.0"===_[e+1].mappings[t].issuerDomainPolicy||"2.5.29.32.0"===_[e+1].mappings[t].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let r=-1,n=-1;for(let i=0;i<I.length;i++)I[i]===_[e+1].mappings[t].issuerDomainPolicy&&(r=i),I[i]===_[e+1].mappings[t].subjectDomainPolicy&&(n=i);void 0!==O[r][e]&&delete O[r][e];for(let i=0;i<j[e].certificatePolicies.length;i++)if(_[e+1].mappings[t].subjectDomainPolicy===j[e].certificatePolicies[i].policyIdentifier&&-1!==r&&-1!==n)for(let t=0;t<=e;t++)void 0!==O[n][t]&&(O[r][t]=!0,delete O[n][t])}for(let e=0;e<I.length;e++)if("2.5.29.32.0"===I[e])for(let t=0;t<N;t++)delete O[e][t];const E=[];for(let e=0;e<O.length;e++){let r=!0;for(let n=0;n<t.certs.length-1;n++){let t=!1;if(n<N&&"2.5.29.32.0"===I[e]&&I.length>1){r=!1;break}if(void 0===O[e][n]){if(n>=N)for(let e=0;e<I.length;e++)if("2.5.29.32.0"===I[e]){!0===O[e][n]&&(t=!0);break}if(!t){r=!1;break}}}!0===r&&E.push(I[e])}let V=[];if(1===u.length&&"2.5.29.32.0"===u[0]&&!1===p)V=u;else if(1===E.length&&"2.5.29.32.0"===E[0])V=u;else for(let e=0;e<E.length;e++)for(let t=0;t<u.length;t++)if(u[t]===E[e]||"2.5.29.32.0"===u[t]){V.push(E[e]);break}const x={result:V.length>0,resultCode:0,resultMessage:V.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:E,userConstrPolicies:V,explicitPolicyIndicator:p,policyMappings:_,certificatePath:t.certs};if(0===V.length)return x;if(!1===x.result)return x;C=1;for(let e=t.certs.length-2;e>=0;e--,C++){let i=[],u=[],l=[];if("extensions"in t.certs[e])for(let r=0;r<t.certs[e].extensions.length;r++)"2.5.29.30"===t.certs[e].extensions[r].extnID&&("permittedSubtrees"in t.certs[e].extensions[r].parsedValue&&(u=u.concat(t.certs[e].extensions[r].parsedValue.permittedSubtrees)),"excludedSubtrees"in t.certs[e].extensions[r].parsedValue&&(l=l.concat(t.certs[e].extensions[r].parsedValue.excludedSubtrees))),"2.5.29.17"===t.certs[e].extensions[r].extnID&&(i=i.concat(t.certs[e].extensions[r].parsedValue.altNames));let c=A.length<=0;for(let r=0;r<A.length;r++)switch(A[r].base.type){case 4:if(A[r].base.value.typesAndValues.length!==t.certs[e].subject.typesAndValues.length)continue;c=!0;for(let n=0;n<t.certs[e].subject.typesAndValues.length;n++)if(t.certs[e].subject.typesAndValues[n].type!==A[r].base.value.typesAndValues[n].type){c=!1;break}if(!0===c)break}if(!1===c)throw x.result=!1,x.resultCode=21,x.resultMessage="No neccessary name form found",x;const h=[];h[0]=[],h[1]=[],h[2]=[],h[3]=[],h[4]=[];for(let e=0;e<S.length;e++)switch(S[e].base.type){case 1:h[0].push(S[e]);break;case 2:h[1].push(S[e]);break;case 4:h[2].push(S[e]);break;case 6:h[3].push(S[e]);break;case 7:h[4].push(S[e])}for(let m=0;m<5;m++){let u=!1,l=!1;const c=h[m];for(let h=0;h<c.length;h++){switch(m){case 0:if(i.length>0)for(let e=0;e<i.length;e++)1===i[e].type&&(l=!0,u=u||n(i[e].value,c[h].base.value));else for(let r=0;r<t.certs[e].subject.typesAndValues.length;r++)"1.2.840.113549.1.9.1"!==t.certs[e].subject.typesAndValues[r].type&&"0.9.2342.19200300.100.1.3"!==t.certs[e].subject.typesAndValues[r].type||(l=!0,u=u||n(t.certs[e].subject.typesAndValues[r].value.valueBlock.value,c[h].base.value));break;case 1:if(i.length>0)for(let e=0;e<i.length;e++)2===i[e].type&&(l=!0,u=u||r(i[e].value,c[h].base.value));break;case 2:l=!0,u=o(t.certs[e].subject,c[h].base.value);break;case 3:if(i.length>0)for(let e=0;e<i.length;e++)6===i[e].type&&(l=!0,u=u||a(i[e].value,c[h].base.value));break;case 4:if(i.length>0)for(let e=0;e<i.length;e++)7===i[e].type&&(l=!0,u=u||s(i[e].value,c[h].base.value))}if(u)break}if(!1===u&&c.length>0&&l)throw x.result=!1,x.resultCode=41,x.resultMessage='Failed to meet "permitted sub-trees" name constraint',x}let f=!1;for(let m=0;m<P.length;m++){switch(P[m].base.type){case 1:if(i.length>=0)for(let e=0;e<i.length;e++)1===i[e].type&&(f=f||n(i[e].value,P[m].base.value));else for(let r=0;r<t.certs[e].subject.typesAndValues.length;r++)"1.2.840.113549.1.9.1"!==t.certs[e].subject.typesAndValues[r].type&&"0.9.2342.19200300.100.1.3"!==t.certs[e].subject.typesAndValues[r].type||(f=f||n(t.certs[e].subject.typesAndValues[r].value.valueBlock.value,P[m].base.value));break;case 2:if(i.length>0)for(let e=0;e<i.length;e++)2===i[e].type&&(f=f||r(i[e].value,P[m].base.value));break;case 4:f=f||o(t.certs[e].subject,P[m].base.value);break;case 6:if(i.length>0)for(let e=0;e<i.length;e++)6===i[e].type&&(f=f||a(i[e].value,P[m].base.value));break;case 7:if(i.length>0)for(let e=0;e<i.length;e++)7===i[e].type&&(f=f||s(i[e].value,P[m].base.value))}if(f)break}if(!0===f)throw x.result=!1,x.resultCode=42,x.resultMessage='Failed to meet "excluded sub-trees" name constraint',x;S=S.concat(u),P=P.concat(l)}return x}catch(u){if(u instanceof Object){if("resultMessage"in u)return u;if("message"in u)return{result:!1,resultCode:-1,resultMessage:u.message}}return{result:!1,resultCode:-1,resultMessage:u}}})()}}t.default=l},22104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(9490))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.certificatePolicies=(0,a.getParametersValue)(e,"certificatePolicies",u.defaultValues("certificatePolicies")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certificatePolicies":return[];default:throw new Error(`Invalid member name for CertificatePolicies class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.certificatePolicies||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["certificatePolicies"]);const t=i.compareSchema(e,e,u.schema({names:{certificatePolicies:"certificatePolicies"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(t.result.certificatePolicies,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}t.default=u},79394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=h(r(4987)),o=h(r(2446)),u=h(r(26466)),l=h(r(27414)),c=h(r(39327));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"tbsCertList",value:[new n.Integer({optional:!0,name:t.tbsCertListVersion||"tbsCertList.version",value:2}),s.default.schema(t.signature||{names:{blockName:"tbsCertList.signature"}}),o.default.schema(t.issuer||{names:{blockName:"tbsCertList.issuer"}}),u.default.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),u.default.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new n.Sequence({optional:!0,value:[new n.Repeated({name:t.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new n.Sequence({value:[new n.Integer,u.default.schema(),c.default.schema({},!0)]})})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[c.default.schema(t.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}class g{constructor(e={}){this.tbs=(0,i.getParametersValue)(e,"tbs",g.defaultValues("tbs")),this.version=(0,i.getParametersValue)(e,"version",g.defaultValues("version")),this.signature=(0,i.getParametersValue)(e,"signature",g.defaultValues("signature")),this.issuer=(0,i.getParametersValue)(e,"issuer",g.defaultValues("issuer")),this.thisUpdate=(0,i.getParametersValue)(e,"thisUpdate",g.defaultValues("thisUpdate")),"nextUpdate"in e&&(this.nextUpdate=(0,i.getParametersValue)(e,"nextUpdate",g.defaultValues("nextUpdate"))),"revokedCertificates"in e&&(this.revokedCertificates=(0,i.getParametersValue)(e,"revokedCertificates",g.defaultValues("revokedCertificates"))),"crlExtensions"in e&&(this.crlExtensions=(0,i.getParametersValue)(e,"crlExtensions",g.defaultValues("crlExtensions"))),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",g.defaultValues("signatureAlgorithm")),this.signatureValue=(0,i.getParametersValue)(e,"signatureValue",g.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new s.default;case"issuer":return new o.default;case"thisUpdate":case"nextUpdate":return new u.default;case"revokedCertificates":return[];case"crlExtensions":return new c.default;case"signatureAlgorithm":return new s.default;case"signatureValue":return new n.BitString;default:throw new Error(`Invalid member name for CertificateRevocationList class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"CertificateList",value:[p(e),s.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}fromSchema(e){(0,i.clearProps)(e,["tbsCertList","tbsCertList.version","tbsCertList.signature","tbsCertList.issuer","tbsCertList.thisUpdate","tbsCertList.nextUpdate","tbsCertList.revokedCertificates","tbsCertList.extensions","signatureAlgorithm","signatureValue"]);const t=n.compareSchema(e,e,g.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertificateRevocationList");this.tbs=t.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in t.result&&(this.version=t.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new s.default({schema:t.result["tbsCertList.signature"]}),this.issuer=new o.default({schema:t.result["tbsCertList.issuer"]}),this.thisUpdate=new u.default({schema:t.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in t.result&&(this.nextUpdate=new u.default({schema:t.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in t.result&&(this.revokedCertificates=Array.from(t.result["tbsCertList.revokedCertificates"],e=>new l.default({schema:e}))),"tbsCertList.extensions"in t.result&&(this.crlExtensions=new c.default({schema:t.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new s.default({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==g.defaultValues("version")&&e.push(new n.Integer({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&e.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&e.push(new n.Sequence({value:Array.from(this.revokedCertificates,e=>e.toSchema())})),"crlExtensions"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new n.Sequence({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbs.length)return g.schema();t=n.fromBER(this.tbs).result}else t=this.encodeTBS();return new n.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:(0,i.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==g.defaultValues("version")&&(e.version=this.version),"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(e.revokedCertificates=Array.from(this.revokedCertificates,e=>e.toJSON())),"crlExtensions"in this&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!1===this.issuer.isEqual(e.issuer))return!1;if("revokedCertificates"in this==0)return!1;var t,r=m(this.revokedCertificates);try{for(r.s();!(t=r.n()).done;)if(t.value.userCertificate.isEqual(e.serialNumber))return!0}catch(n){r.e(n)}finally{r.f()}return!1}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,i=Promise.resolve();const s=(0,a.getEngine)();return i=i.then(()=>s.subtle.getSignatureParameters(e,t)),i=i.then(e=>{r=e.parameters,this.signature=e.signatureAlgorithm,this.signatureAlgorithm=e.signatureAlgorithm}),i=i.then(()=>{this.tbs=this.encodeTBS().toBER(!1)}),i=i.then(()=>s.subtle.signWithPrivateKey(this.tbs,e,r)),i=i.then(e=>{this.signatureValue=new n.BitString({valueHex:e})}),i}verify(e={}){let t=Promise.resolve(),r=-1;const n=(0,a.getEngine)();if("issuerCertificate"in e&&(r=e.issuerCertificate.subjectPublicKeyInfo,!1===this.issuer.isEqual(e.issuerCertificate.subject)))return Promise.resolve(!1);if("publicKeyInfo"in e&&(r=e.publicKeyInfo),"subjectPublicKey"in r==0)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var i,s=m(this.crlExtensions.extensions);try{for(s.s();!(i=s.n()).done;){const e=i.value;if(e.critical&&"parsedValue"in e==0)return Promise.resolve(!1)}}catch(o){s.e(o)}finally{s.f()}}return t=t.then(()=>n.subtle.verifyWithPublicKey(this.tbs,this.signatureValue,r,this.signatureAlgorithm)),t}}t.default=g},545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(35585)),s=l(r(64445)),o=l(r(73766)),u=l(r(99600));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.certificates=(0,i.getParametersValue)(e,"certificates",h.defaultValues("certificates")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certificates":return[];default:throw new Error(`Invalid member name for Attribute class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Set({name:t.blockName||"",value:[new n.Repeated({name:t.certificates||"certificates",value:new n.Choice({value:[a.default.schema(),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any]}),new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new n.Sequence]}),new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:o.default.schema().valueBlock.value}),new n.Constructed({idBlock:{tagClass:3,tagNumber:3},value:u.default.schema().valueBlock.value})]})})]})}fromSchema(e){(0,i.clearProps)(e,["certificates"]);const t=n.compareSchema(e,e,h.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertificateSet");this.certificates=Array.from(t.result.certificates||[],e=>{const t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new a.default({schema:e});const r=new n.Sequence({value:e.valueBlock.value});switch(t){case 1:return 1===r.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new o.default({schema:r}):new s.default({schema:r});case 2:return new o.default({schema:r});case 3:return new u.default({schema:r})}return e})}toSchema(){return new n.Set({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof a.default:return e.toSchema();case e instanceof s.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof o.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof u.default:return new n.Constructed({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}t.default=h},83804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.templateID=(0,i.getParametersValue)(e,"templateID",s.defaultValues("templateID")),"templateMajorVersion"in e&&(this.templateMajorVersion=(0,i.getParametersValue)(e,"templateMajorVersion",s.defaultValues("templateMajorVersion"))),"templateMinorVersion"in e&&(this.templateMinorVersion=(0,i.getParametersValue)(e,"templateMinorVersion",s.defaultValues("templateMinorVersion"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"templateID":return"";case"templateMajorVersion":case"templateMinorVersion":return 0;default:throw new Error(`Invalid member name for CertificateTemplate class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.templateID||""}),new n.Integer({name:t.templateMajorVersion||"",optional:!0}),new n.Integer({name:t.templateMinorVersion||"",optional:!0})]})}fromSchema(e){(0,i.clearProps)(e,["templateID","templateMajorVersion","templateMinorVersion"]);let t=n.compareSchema(e,e,s.schema({names:{templateID:"templateID",templateMajorVersion:"templateMajorVersion",templateMinorVersion:"templateMinorVersion"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertificateTemplate");this.templateID=t.result.templateID.valueBlock.toString(),"templateMajorVersion"in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),"templateMinorVersion"in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new n.ObjectIdentifier({value:this.templateID})),"templateMajorVersion"in this&&e.push(new n.Integer({value:this.templateMajorVersion})),"templateMinorVersion"in this&&e.push(new n.Integer({value:this.templateMinorVersion})),new n.Sequence({value:e})}toJSON(){const e={extnID:this.templateID};return"templateMajorVersion"in this&&(e.templateMajorVersion=this.templateMajorVersion),"templateMinorVersion"in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}t.default=s},93108:function(e,t,r){"use strict";t.Z=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=c(r(20720)),o=c(r(2446)),u=c(r(4987)),l=c(r(68681));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new n.Integer({name:t.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),o.default.schema(t.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),s.default.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:l.default.schema(t.attributes||{})})]})]})}class m{constructor(e={}){this.tbs=(0,i.getParametersValue)(e,"tbs",m.defaultValues("tbs")),this.version=(0,i.getParametersValue)(e,"version",m.defaultValues("version")),this.subject=(0,i.getParametersValue)(e,"subject",m.defaultValues("subject")),this.subjectPublicKeyInfo=(0,i.getParametersValue)(e,"subjectPublicKeyInfo",m.defaultValues("subjectPublicKeyInfo")),"attributes"in e&&(this.attributes=(0,i.getParametersValue)(e,"attributes",m.defaultValues("attributes"))),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",m.defaultValues("signatureAlgorithm")),this.signatureValue=(0,i.getParametersValue)(e,"signatureValue",m.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new o.default;case"subjectPublicKeyInfo":return new s.default;case"attributes":return[];case"signatureAlgorithm":return new u.default;case"signatureValue":return new n.BitString;default:throw new Error(`Invalid member name for CertificationRequest class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({value:[f(t.certificationRequestInfo||{}),new n.Sequence({name:t.signatureAlgorithm||"signatureAlgorithm",value:[new n.ObjectIdentifier,new n.Any({optional:!0})]}),new n.BitString({name:t.signatureValue||"signatureValue"})]})}fromSchema(e){(0,i.clearProps)(e,["CertificationRequestInfo","CertificationRequestInfo.version","CertificationRequestInfo.subject","CertificationRequestInfo.subjectPublicKeyInfo","CertificationRequestInfo.attributes","signatureAlgorithm","signatureValue"]);const t=n.compareSchema(e,e,m.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for CertificationRequest");this.tbs=t.result.CertificationRequestInfo.valueBeforeDecode,this.version=t.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new o.default({schema:t.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new s.default({schema:t.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in t.result&&(this.attributes=Array.from(t.result["CertificationRequestInfo.attributes"],e=>new l.default({schema:e}))),this.signatureAlgorithm=new u.default({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new n.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,e=>e.toSchema())})),new n.Sequence({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbs.byteLength)return m.schema();t=n.fromBER(this.tbs).result}else t=this.encodeTBS();return new n.Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:(0,i.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,e=>e.toJSON())),e}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,i=Promise.resolve();const s=(0,a.getEngine)();return i=i.then(()=>s.subtle.getSignatureParameters(e,t)),i=i.then(e=>{r=e.parameters,this.signatureAlgorithm=e.signatureAlgorithm}),i=i.then(()=>{this.tbs=this.encodeTBS().toBER(!1)}),i=i.then(()=>s.subtle.signWithPrivateKey(this.tbs,e,r)),i=i.then(e=>{this.signatureValue=new n.BitString({valueHex:e})}),i}verify(){return(0,a.getEngine)().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}getPublicKey(e=null){return(0,a.getEngine)().getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}t.Z=m},60294:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.contentType=(0,i.getParametersValue)(e,"contentType",s.defaultValues("contentType")),this.content=(0,i.getParametersValue)(e,"content",s.defaultValues("content")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"contentType":return"";case"content":return new n.Any;default:throw new Error(`Invalid member name for ContentInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof n.Any;default:throw new Error(`Invalid member name for ContentInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new n.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new n.ObjectIdentifier({name:t.contentType||"contentType"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.content||"content"})]})]})}fromSchema(e){(0,i.clearProps)(e,["contentType","content"]);const t=n.compareSchema(e,e,s.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ContentInfo");this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.contentType}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof n.Any||(e.content=this.content.toJSON()),e}}t.default=s},48435:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=m(r(20720)),o=m(r(46721)),u=m(r(4987)),l=m(r(96427)),c=m(r(13272)),h=m(r(30033)),f=m(r(71045));function m(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r,n,i,a){let s,o;const u=[];switch(t.toUpperCase()){case"SHA-1":s=20,o=64;break;case"SHA-256":s=32,o=64;break;case"SHA-384":s=48,o=128;break;case"SHA-512":s=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const l=new Uint8Array(n),c=new ArrayBuffer(2*n.byteLength+2),h=new Uint8Array(c);for(let B=0;B<l.length;B++)h[2*B]=0,h[2*B+1]=l[B];h[h.length-2]=0,h[h.length-1]=0,n=c.slice(0);const f=new ArrayBuffer(o),m=new Uint8Array(f);for(let B=0;B<f.byteLength;B++)m[B]=3;const d=i.byteLength,p=o*Math.ceil(d/o),g=new ArrayBuffer(p),y=new Uint8Array(g),v=new Uint8Array(i);for(let B=0;B<p;B++)y[B]=v[B%d];const b=n.byteLength,w=o*Math.ceil(b/o),k=new ArrayBuffer(w),S=new Uint8Array(k),P=new Uint8Array(n);for(let B=0;B<w;B++)S[B]=P[B%b];let A=new ArrayBuffer(g.byteLength+k.byteLength),C=new Uint8Array(A);C.set(y),C.set(S,y.length);const I=Math.ceil((r>>3)/s);let O=Promise.resolve(A);for(let B=0;B<=I;B++){O=O.then(e=>{const t=new ArrayBuffer(f.byteLength+e.byteLength),r=new Uint8Array(t);return r.set(m),r.set(C,m.length),t});for(let r=0;r<a;r++)O=O.then(r=>e.digest({name:t},new Uint8Array(r)));O=O.then(e=>{const t=new ArrayBuffer(o),r=new Uint8Array(t);for(let o=0;o<t.byteLength;o++)r[o]=e[o%e.length];const n=Math.ceil(d/o)+Math.ceil(b/o),i=[];let a=0,s=o;for(let u=0;u<n;u++){const e=Array.from(new Uint8Array(A.slice(a,a+s)));a+=o,a+o>A.byteLength&&(s=A.byteLength-a);let n=511;for(let i=t.byteLength-1;i>=0;i--)n>>=8,n+=r[i]+e[i],e[i]=255&n;i.push(...e)}return A=new ArrayBuffer(i.length),C=new Uint8Array(A),C.set(i),u.push(...new Uint8Array(e)),A})}return O=O.then(()=>{const e=new ArrayBuffer(r>>3);return new Uint8Array(e).set(new Uint8Array(u).slice(0,r>>3)),e}),O}t.default=class{constructor(e={}){this.crypto=(0,i.getParametersValue)(e,"crypto",{}),this.subtle=(0,i.getParametersValue)(e,"subtle",{}),this.name=(0,i.getParametersValue)(e,"name","")}importKey(e,t,r,a,u){let l={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,a,u);case"spki":{const e=n.fromBER(t);if(-1===e.offset)return Promise.reject("Incorrect keyData");const i=new s.default;try{i.fromSchema(e.result)}catch(I){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(u=["verify"],l.kty="RSA",l.ext=a,l.key_ops=u,"1.2.840.113549.1.1.1"!==i.algorithm.algorithmId)return Promise.reject(`Incorrect public key algorithm: ${i.algorithm.algorithmId}`);if("alg"in l==0)switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}const e=i.toJSON();for(var c=0,h=Object.keys(e);c<h.length;c++){const t=h[c];l[t]=e[t]}}break;case"ECDSA":u=["verify"];case"ECDH":{if(l={kty:"EC",ext:a,key_ops:u},"1.2.840.10045.2.1"!==i.algorithm.algorithmId)return Promise.reject(`Incorrect public key algorithm: ${i.algorithm.algorithmId}`);const e=i.toJSON();for(var f=0,m=Object.keys(e);f<m.length;f++){const t=m[f];l[t]=e[t]}}break;case"RSA-OAEP":{if(l.kty="RSA",l.ext=a,l.key_ops=u,"safari"===this.name.toLowerCase())l.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}const e=i.toJSON();for(var d=0,p=Object.keys(e);d<p.length;d++){const t=p[d];l[t]=e[t]}}break;case"RSAES-PKCS1-V1_5":{l.kty="RSA",l.ext=a,l.key_ops=u,l.alg="PS1";const e=i.toJSON();for(var g=0,y=Object.keys(e);g<y.length;g++){const t=y[g];l[t]=e[t]}}break;default:return Promise.reject(`Incorrect algorithm name: ${r.name.toUpperCase()}`)}}break;case"pkcs8":{const e=new o.default,i=n.fromBER(t);if(-1===i.offset)return Promise.reject("Incorrect keyData");try{e.fromSchema(i.result)}catch(I){return Promise.reject("Incorrect keyData")}if("parsedKey"in e==0)return Promise.reject("Incorrect keyData");switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(u=["sign"],l.kty="RSA",l.ext=a,l.key_ops=u,"1.2.840.113549.1.1.1"!==e.privateKeyAlgorithm.algorithmId)return Promise.reject(`Incorrect private key algorithm: ${e.privateKeyAlgorithm.algorithmId}`);if("alg"in l==0)switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}const t=e.toJSON();for(var v=0,b=Object.keys(t);v<b.length;v++){const e=b[v];l[e]=t[e]}}break;case"ECDSA":u=["sign"];case"ECDH":{if(l={kty:"EC",ext:a,key_ops:u},"1.2.840.10045.2.1"!==e.privateKeyAlgorithm.algorithmId)return Promise.reject(`Incorrect algorithm: ${e.privateKeyAlgorithm.algorithmId}`);const t=e.toJSON();for(var w=0,k=Object.keys(t);w<k.length;w++){const e=k[w];l[e]=t[e]}}break;case"RSA-OAEP":{if(l.kty="RSA",l.ext=a,l.key_ops=u,"safari"===this.name.toLowerCase())l.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:return Promise.reject(`Incorrect hash algorithm: ${r.hash.name.toUpperCase()}`)}const t=e.toJSON();for(var S=0,P=Object.keys(t);S<P.length;S++){const e=P[S];l[e]=t[e]}}break;case"RSAES-PKCS1-V1_5":{u=["decrypt"],l.kty="RSA",l.ext=a,l.key_ops=u,l.alg="PS1";const t=e.toJSON();for(var A=0,C=Object.keys(t);A<C.length;A++){const e=C[A];l[e]=t[e]}}break;default:return Promise.reject(`Incorrect algorithm name: ${r.name.toUpperCase()}`)}}break;case"jwk":l=t;break;default:return Promise.reject(`Incorrect format: ${e}`)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(()=>this.subtle.importKey("jwk",(0,i.stringToArrayBuffer)(JSON.stringify(l)),r,a,u)).then(e=>e,()=>this.subtle.importKey("jwk",l,r,a,u)):this.subtle.importKey("jwk",l,r,a,u)}exportKey(e,t){let r=this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(e=>e instanceof ArrayBuffer?JSON.parse((0,i.arrayBufferToString)(e)):e)),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":r=r.then(e=>{const t=new s.default;try{t.fromJSON(e)}catch(r){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(e=>{const t=new o.default;try{t.fromJSON(e)}catch(r){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject(`Incorrect format: ${e}`)}return r}convert(e,t,r,n,i,a){switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,a)).then(e=>this.exportKey("spki",e));case"pkcs8":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,a)).then(e=>this.exportKey("pkcs8",e));case"jwk":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,a)).then(e=>this.exportKey("jwk",e));default:return Promise.reject(`Incorrect outputFormat: ${t}`)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("spki",r,n,i,a)).then(e=>this.exportKey("raw",e));case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(()=>this.importKey("spki",r,n,i,a)).then(e=>this.exportKey("jwk",e));default:return Promise.reject(`Incorrect outputFormat: ${t}`)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("pkcs8",r,n,i,a)).then(e=>this.exportKey("raw",e));case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(()=>this.importKey("pkcs8",r,n,i,a)).then(e=>this.exportKey("jwk",e));default:return Promise.reject(`Incorrect outputFormat: ${t}`)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,a)).then(e=>this.exportKey("raw",e));case"spki":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,a)).then(e=>this.exportKey("spki",e));case"pkcs8":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,a)).then(e=>this.exportKey("pkcs8",e));case"jwk":return Promise.resolve(r);default:return Promise.reject(`Incorrect outputFormat: ${t}`)}default:return Promise.reject(`Incorrect inputFormat: ${e}`)}}encrypt(...e){return this.subtle.encrypt(...e)}decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}verify(...e){return this.subtle.verify(...e)}digest(...e){return this.subtle.digest(...e)}generateKey(...e){return this.subtle.generateKey(...e)}deriveKey(...e){return this.subtle.deriveKey(...e)}deriveBits(...e){return this.subtle.deriveBits(...e)}wrapKey(...e){return this.subtle.wrapKey(...e)}unwrapKey(...e){return this.subtle.unwrapKey(...e)}getRandomValues(e){if("getRandomValues"in this.crypto==0)throw new Error("No support for getRandomValues");return this.crypto.getRandomValues(e)}getAlgorithmByOID(e){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}getOIDByAlgorithm(e){let t="";switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":t="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}getAlgorithmParameters(e,t){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}getHashAlgorithm(e){let t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const r=new c.default({schema:e.algorithmParams});if("hashAlgorithm"in r){const e=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in e==0)return"";t=e.name}else t="SHA-1"}catch(r){}}return t}encryptEncryptedContentInfo(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==0)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');if("contentType"in e==0)return Promise.reject('Absent mandatory parameter "contentType"');const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm);if(""===t)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');const r=this.getOIDByAlgorithm({name:"PBKDF2"});if(""===r)return Promise.reject("Can not find OID for PBKDF2");const i=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===i)return Promise.reject(`Incorrect value for "hmacHashAlgorithm": ${e.hmacHashAlgorithm}`);let a=Promise.resolve();const s=new ArrayBuffer(16),o=new Uint8Array(s);this.getRandomValues(o);const c=new ArrayBuffer(64),m=new Uint8Array(c);this.getRandomValues(m);const d=new Uint8Array(e.contentToEncrypt),p=new h.default({salt:new n.OctetString({valueHex:c}),iterationCount:e.iterationCount,prf:new u.default({algorithmId:i,algorithmParams:new n.Null})});return a=a.then(()=>{const t=new Uint8Array(e.password);return this.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},e=>Promise.reject(e)),a=a.then(t=>this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:m,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"]),e=>Promise.reject(e)),a=a.then(t=>this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:o},t,d),e=>Promise.reject(e)),a=a.then(i=>{const a=new f.default({keyDerivationFunc:new u.default({algorithmId:r,algorithmParams:p.toSchema()}),encryptionScheme:new u.default({algorithmId:t,algorithmParams:new n.OctetString({valueHex:s})})});return new l.default({contentType:e.contentType,contentEncryptionAlgorithm:new u.default({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:a.toSchema()}),encryptedContent:new n.OctetString({valueHex:i})})},e=>Promise.reject(e)),a}decryptEncryptedContentInfo(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("encryptedContentInfo"in e==0)return Promise.reject('Absent mandatory parameter "encryptedContentInfo"');if("1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t,r,n=Promise.resolve();try{t=new f.default({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(c){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}try{r=new h.default({schema:t.keyDerivationFunc.algorithmParams})}catch(c){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}const a=this.getAlgorithmByOID(t.encryptionScheme.algorithmId);if("name"in a==0)return Promise.reject(`Incorrect OID for "contentEncryptionAlgorithm": ${t.encryptionScheme.algorithmId}`);const s=new Uint8Array(t.encryptionScheme.algorithmParams.valueBlock.valueHex),o=new Uint8Array(r.salt.valueBlock.valueHex),u=r.iterationCount;let l="SHA-1";if("prf"in r){const e=this.getAlgorithmByOID(r.prf.algorithmId);if("name"in e==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");l=e.hash.name}return n=n.then(()=>this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),e=>Promise.reject(e)),n=n.then(e=>this.deriveKey({name:"PBKDF2",hash:{name:l},salt:o,iterations:u},e,a,!1,["decrypt"]),e=>Promise.reject(e)),n=n.then(t=>{let r=new ArrayBuffer(0);if(!1===e.encryptedContentInfo.encryptedContent.idBlock.isConstructed)r=e.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,void 0):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(e.encryptedContentInfo.encryptedContent.valueBlock.value);try{for(o.s();!(n=o.n()).done;)r=(0,i.utilConcatBuf)(r,n.value.valueBlock.valueHex)}catch(u){o.e(u)}finally{o.f()}}return this.decrypt({name:a.name,iv:s},t,r)},e=>Promise.reject(e)),n}stampDataWithPassword(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToStamp"in e==0)return Promise.reject('Absent mandatory parameter "contentToStamp"');let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}let r=Promise.resolve();const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return r=r.then(()=>g(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)),r=r.then(e=>this.importKey("raw",new Uint8Array(e),n,!1,["sign"])),r=r.then(t=>this.sign(n,t,new Uint8Array(e.contentToStamp)),e=>Promise.reject(e)),r}verifyDataStampedWithPassword(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToVerify"in e==0)return Promise.reject('Absent mandatory parameter "contentToVerify"');if("signatureToVerify"in e==0)return Promise.reject('Absent mandatory parameter "signatureToVerify"');let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}let r=Promise.resolve();const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return r=r.then(()=>g(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)),r=r.then(e=>this.importKey("raw",new Uint8Array(e),n,!1,["verify"])),r=r.then(t=>this.verify(n,t,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify)),e=>Promise.reject(e)),r}getSignatureParameters(e,t="SHA-1"){if(""===this.getOIDByAlgorithm({name:t}))return Promise.reject(`Unsupported hash algorithm: ${t}`);const r=new u.default,i=this.getAlgorithmParameters(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(i.algorithm);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}const e={};if("SHA-1"!==t.toUpperCase()){const r=this.getOIDByAlgorithm({name:t});if(""===r)return Promise.reject(`Unsupported hash algorithm: ${t}`);e.hashAlgorithm=new u.default({algorithmId:r,algorithmParams:new n.Null}),e.maskGenAlgorithm=new u.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(e.saltLength=i.algorithm.saltLength);const a=new c.default(e);r.algorithmId="1.2.840.113549.1.1.10",r.algorithmParams=a.toSchema()}break;default:return Promise.reject(`Unsupported signature algorithm: ${e.algorithm.name}`)}return Promise.resolve().then(()=>({signatureAlgorithm:r,parameters:i}))}signWithPrivateKey(e,t,r){return this.sign(r.algorithm,t,new Uint8Array(e)).then(e=>("ECDSA"===r.algorithm.name&&(e=(0,a.createCMSECDSASignature)(e)),e),e=>Promise.reject(`Signing error: ${e}`))}fillPublicKeyParameters(e,t){const r={},n=this.getHashAlgorithm(t);if(""===n)return Promise.reject(`Unsupported signature algorithm: ${t.algorithmId}`);let i;i="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;const a=this.getAlgorithmByOID(i);if("name"in a==="")return Promise.reject(`Unsupported public key algorithm: ${t.algorithmId}`);if(r.algorithm=this.getAlgorithmParameters(a.name,"importkey"),"hash"in r.algorithm.algorithm&&(r.algorithm.algorithm.hash.name=n),"ECDSA"===a.name){let t=!1;if("algorithmParams"in e.algorithm==1&&"idBlock"in e.algorithm.algorithmParams&&1===e.algorithm.algorithmParams.idBlock.tagClass&&6===e.algorithm.algorithmParams.idBlock.tagNumber&&(t=!0),!1===t)return Promise.reject("Incorrect type for ECDSA public key parameters");const n=this.getAlgorithmByOID(e.algorithm.algorithmParams.valueBlock.toString());if("name"in n==0)return Promise.reject(`Unsupported named curve algorithm: ${e.algorithm.algorithmParams.valueBlock.toString()}`);r.algorithm.algorithm.namedCurve=n.name}return r}getPublicKey(e,t,r=null){null===r&&(r=this.fillPublicKeyParameters(e,t));const n=e.toSchema().toBER(!1),i=new Uint8Array(n);return this.importKey("spki",i,r.algorithm.algorithm,!0,r.algorithm.usages)}verifyWithPublicKey(e,t,r,i,s=null){let o=Promise.resolve();if(null===s){if(""===(s=this.getHashAlgorithm(i)))return Promise.reject(`Unsupported signature algorithm: ${i.algorithmId}`);o=o.then(()=>this.getPublicKey(r,i))}else{const e={};let t;t="1.2.840.113549.1.1.10"===i.algorithmId?i.algorithmId:r.algorithm.algorithmId;const n=this.getAlgorithmByOID(t);if("name"in n==="")return Promise.reject(`Unsupported public key algorithm: ${i.algorithmId}`);if(e.algorithm=this.getAlgorithmParameters(n.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=s),"ECDSA"===n.name){let t=!1;if("algorithmParams"in r.algorithm==1&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(t=!0),!1===t)return Promise.reject("Incorrect type for ECDSA public key parameters");const n=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString());if("name"in n==0)return Promise.reject(`Unsupported named curve algorithm: ${r.algorithm.algorithmParams.valueBlock.toString()}`);e.algorithm.algorithm.namedCurve=n.name}o=o.then(()=>this.getPublicKey(r,null,e))}return o=o.then(r=>{const o=this.getAlgorithmParameters(r.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=s);let u=t.valueBlock.valueHex;if("ECDSA"===r.algorithm.name){const e=n.fromBER(u);u=(0,a.createECDSASignatureFromCMS)(e.result)}if("RSA-PSS"===r.algorithm.name){let e;try{e=new c.default({schema:i.algorithmParams})}catch(l){return Promise.reject(l)}o.algorithm.saltLength="saltLength"in e?e.saltLength:20;let t="SHA-1";if("hashAlgorithm"in e){const r=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId);if("name"in r==0)return Promise.reject(`Unrecognized hash algorithm: ${e.hashAlgorithm.algorithmId}`);t=r.name}o.algorithm.hash.name=t}return this.verify(o.algorithm,r,new Uint8Array(u),new Uint8Array(e))}),o}}},60571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.digestAlgorithm=(0,a.getParametersValue)(e,"digestAlgorithm",u.defaultValues("digestAlgorithm")),this.digest=(0,a.getParametersValue)(e,"digest",u.defaultValues("digest")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"digestAlgorithm":return new s.default;case"digest":return new i.OctetString;default:throw new Error(`Invalid member name for DigestInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"digestAlgorithm":return s.default.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==0;case"digest":return t.isEqual(u.defaultValues(e));default:throw new Error(`Invalid member name for DigestInfo class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new i.OctetString({name:t.digest||"digest"})]})}fromSchema(e){(0,a.clearProps)(e,["digestAlgorithm","digest"]);const t=i.compareSchema(e,e,u.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new s.default({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new i.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}t.default=u},70300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(29260)),s=o(r(2446));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){"distributionPoint"in e&&(this.distributionPoint=(0,i.getParametersValue)(e,"distributionPoint",l.defaultValues("distributionPoint"))),"reasons"in e&&(this.reasons=(0,i.getParametersValue)(e,"reasons",l.defaultValues("reasons"))),"cRLIssuer"in e&&(this.cRLIssuer=(0,i.getParametersValue)(e,"cRLIssuer",l.defaultValues("cRLIssuer"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"distributionPoint":return[];case"reasons":return new n.BitString;case"cRLIssuer":return[];default:throw new Error(`Invalid member name for DistributionPoint class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Choice({value:[new n.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.distributionPointNames||"",value:a.default.schema()})]}),new n.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})]}),new n.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new n.Repeated({name:t.cRLIssuerNames||"",value:a.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["distributionPoint","distributionPointNames","reasons","cRLIssuer","cRLIssuerNames"]);const t=n.compareSchema(e,e,l.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,e=>new a.default({schema:e}))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new s.default({schema:new n.Sequence({value:t.result.distributionPoint.valueBlock.value})}))),"reasons"in t.result&&(this.reasons=new n.BitString({valueHex:t.result.reasons.valueBlock.valueHex})),"cRLIssuer"in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,e=>new a.default({schema:e})))}toSchema(){const e=[];if("distributionPoint"in this){let t;t=new n.Constructed(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,e=>e.toSchema())}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={};return"distributionPoint"in this&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,e=>e.toJSON()):this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,e=>e.toJSON())),e}}t.default=l},58057:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.keyInfo=(0,a.getParametersValue)(e,"keyInfo",u.defaultValues("keyInfo")),"entityUInfo"in e&&(this.entityUInfo=(0,a.getParametersValue)(e,"entityUInfo",u.defaultValues("entityUInfo"))),this.suppPubInfo=(0,a.getParametersValue)(e,"suppPubInfo",u.defaultValues("suppPubInfo")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyInfo":return new s.default;case"entityUInfo":case"suppPubInfo":return new i.OctetString;default:throw new Error(`Invalid member name for ECCCMSSharedInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"keyInfo":case"entityUInfo":case"suppPubInfo":return t.isEqual(u.defaultValues(e));default:throw new Error(`Invalid member name for ECCCMSSharedInfo class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.keyInfo||{}),new i.Constructed({name:t.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new i.OctetString]}),new i.Constructed({name:t.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new i.OctetString]})]})}fromSchema(e){(0,a.clearProps)(e,["keyInfo","entityUInfo","suppPubInfo"]);const t=i.compareSchema(e,e,u.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ECCCMSSharedInfo");this.keyInfo=new s.default({schema:t.result.keyInfo}),"entityUInfo"in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new i.Sequence({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}t.default=u},54363:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{static register(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}t.default=r,r.namedCurves={},r.register("P-256","1.2.840.10045.3.1.7",32),r.register("P-384","1.3.132.0.34",48),r.register("P-521","1.3.132.0.35",66),r.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),r.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),r.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)},43818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(15962))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.version=(0,a.getParametersValue)(e,"version",u.defaultValues("version")),this.privateKey=(0,a.getParametersValue)(e,"privateKey",u.defaultValues("privateKey")),"namedCurve"in e&&(this.namedCurve=(0,a.getParametersValue)(e,"namedCurve",u.defaultValues("namedCurve"))),"publicKey"in e&&(this.publicKey=(0,a.getParametersValue)(e,"publicKey",u.defaultValues("publicKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 1;case"privateKey":return new i.OctetString;case"namedCurve":return"";case"publicKey":return new s.default;default:throw new Error(`Invalid member name for ECCPrivateKey class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return t===u.defaultValues(e);case"privateKey":return t.isEqual(u.defaultValues(e));case"namedCurve":return""===t;case"publicKey":return s.default.compareWithDefault("namedCurve",t.namedCurve)&&s.default.compareWithDefault("x",t.x)&&s.default.compareWithDefault("y",t.y);default:throw new Error(`Invalid member name for ECCPrivateKey class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Integer({name:t.version||""}),new i.OctetString({name:t.privateKey||""}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.ObjectIdentifier({name:t.namedCurve||""})]}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.BitString({name:t.publicKey||""})]})]})}fromSchema(e){(0,a.clearProps)(e,["version","privateKey","namedCurve","publicKey"]);const t=i.compareSchema(e,e,u.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,"namedCurve"in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),"publicKey"in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(e.namedCurve=this.namedCurve),this.publicKey=new s.default(e)}}toSchema(){const e=[new i.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new i.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new i.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new i.Sequence({value:e})}toJSON(){if("namedCurve"in this==0||u.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');let e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}const t={crv:e,d:(0,a.toBase64)((0,a.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0,!1)};if("publicKey"in this){const e=this.publicKey.toJSON();t.x=e.x,t.y=e.y}return t}fromJSON(e){let t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');{const r=(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.d,!0));if(r.byteLength<t){const e=new ArrayBuffer(t),n=new Uint8Array(e),a=new Uint8Array(r);n.set(a,1),this.privateKey=new i.OctetString({valueHex:e})}else this.privateKey=new i.OctetString({valueHex:r.slice(0,t)})}"x"in e&&"y"in e&&(this.publicKey=new s.default({json:e}))}}t.default=u},15962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(54363))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.x=(0,a.getParametersValue)(e,"x",u.defaultValues("x")),this.y=(0,a.getParametersValue)(e,"y",u.defaultValues("y")),this.namedCurve=(0,a.getParametersValue)(e,"namedCurve",u.defaultValues("namedCurve")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error(`Invalid member name for ECCPublicKey class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"x":case"y":return(0,a.isEqualBuffer)(t,u.defaultValues(e));case"namedCurve":return""===t;default:throw new Error(`Invalid member name for ECCPublicKey class: ${e}`)}}static schema(e={}){return new i.RawData}fromSchema(e){if(e instanceof ArrayBuffer==0)throw new Error("Object's schema was not verified against input data for ECPublicKey");if(4!==new Uint8Array(e)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const t=s.default.find(this.namedCurve);if(!t)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const r=t.size;if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}toSchema(){return new i.RawData({data:(0,a.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=s.default.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:(0,a.toBase64)((0,a.arrayBufferToString)(this.x),!0,!0,!1),y:(0,a.toBase64)((0,a.arrayBufferToString)(this.y),!0,!0,!1)}}fromJSON(e){let t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');{const r=s.default.find(e.crv);r&&(this.namedCurve=r.id,t=r.size)}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');{const r=(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x),n=new Uint8Array(r);e.set(n,1)}else this.x=r.slice(0,t)}if(!("y"in e))throw new Error('Absent mandatory parameter "y"');{const r=(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.y,!0));if(r.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y),n=new Uint8Array(r);e.set(n,1)}else this.y=r.slice(0,t)}}}t.default=u},63788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){if(this.eContentType=(0,i.getParametersValue)(e,"eContentType",s.defaultValues("eContentType")),"eContent"in e&&(this.eContent=(0,i.getParametersValue)(e,"eContent",s.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const e=new n.OctetString({idBlock:{isConstructed:!0},isConstructed:!0});let t=0,r=this.eContent.valueBlock.valueHex.byteLength;for(;r>0;){const i=new Uint8Array(this.eContent.valueBlock.valueHex,t,t+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-t:65536),a=new ArrayBuffer(i.length),s=new Uint8Array(a);for(let e=0;e<s.length;e++)s[e]=i[e];e.valueBlock.value.push(new n.OctetString({valueHex:a})),r-=i.length,t+=i.length}this.eContent=e}"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"eContentType":return"";case"eContent":return new n.OctetString;default:throw new Error(`Invalid member name for EncapsulatedContentInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"eContentType":return""===t;case"eContent":return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(s.defaultValues("eContent"));default:throw new Error(`Invalid member name for EncapsulatedContentInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.eContentType||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.eContent||""})]})]})}fromSchema(e){(0,i.clearProps)(e,["eContentType","eContent"]);const t=n.compareSchema(e,e,s.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=t.result.eContentType.valueBlock.toString(),"eContent"in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new n.ObjectIdentifier({value:this.eContentType})),"eContent"in this&&!1===s.compareWithDefault("eContent",this.eContent)&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new n.Sequence({value:e})}toJSON(){const e={eContentType:this.eContentType};return"eContent"in this&&!1===s.compareWithDefault("eContent",this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}t.default=s},96427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){if(this.contentType=(0,a.getParametersValue)(e,"contentType",u.defaultValues("contentType")),this.contentEncryptionAlgorithm=(0,a.getParametersValue)(e,"contentEncryptionAlgorithm",u.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in e&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed)){const e=new i.OctetString({idBlock:{isConstructed:!0},isConstructed:!0});let t=0,r=this.encryptedContent.valueBlock.valueHex.byteLength;for(;r>0;){const n=new Uint8Array(this.encryptedContent.valueBlock.valueHex,t,t+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-t:1024),a=new ArrayBuffer(n.length),s=new Uint8Array(a);for(let e=0;e<s.length;e++)s[e]=n[e];e.valueBlock.value.push(new i.OctetString({valueHex:a})),r-=n.length,t+=n.length}this.encryptedContent=e}"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new s.default;case"encryptedContent":return new i.OctetString;default:throw new Error(`Invalid member name for EncryptedContentInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"contentType":return""===t;case"contentEncryptionAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"encryptedContent":return t.isEqual(u.defaultValues(e));default:throw new Error(`Invalid member name for EncryptedContentInfo class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.ObjectIdentifier({name:t.contentType||""}),s.default.schema(t.contentEncryptionAlgorithm||{}),new i.Choice({value:[new i.Constructed({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new i.Repeated({value:new i.OctetString})]}),new i.Primitive({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){(0,a.clearProps)(e,["contentType","contentEncryptionAlgorithm","encryptedContent"]);const t=i.compareSchema(e,e,u.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new s.default({schema:t.result.contentEncryptionAlgorithm}),"encryptedContent"in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new i.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new i.Sequence({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}t.default=u},38570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=u(r(96427)),o=u(r(68681));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}class c{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",c.defaultValues("version")),this.encryptedContentInfo=(0,i.getParametersValue)(e,"encryptedContentInfo",c.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in e&&(this.unprotectedAttrs=(0,i.getParametersValue)(e,"unprotectedAttrs",c.defaultValues("unprotectedAttrs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new s.default;case"unprotectedAttrs":return[];default:throw new Error(`Invalid member name for EncryptedData class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return s.default.compareWithDefault("contentType",t.contentType)&&s.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&s.default.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error(`Invalid member name for EncryptedData class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),s.default.schema(t.encryptedContentInfo||{}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.unprotectedAttrs||"",value:o.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["version","encryptedContentInfo","unprotectedAttrs"]);const t=n.compareSchema(e,e,c.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for EncryptedData");this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new s.default({schema:t.result.encryptedContentInfo}),"unprotectedAttrs"in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,e=>new o.default({schema:e})))}toSchema(){const e=[];return e.push(new n.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,e=>e.toJSON())),e}encrypt(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');const t=(0,a.getEngine)();return void 0===t?Promise.reject("Unable to initialize cryptographic engine"):(e.contentType="1.2.840.113549.1.7.1","encryptEncryptedContentInfo"in t.subtle?t.subtle.encryptEncryptedContentInfo(e).then(e=>{this.encryptedContentInfo=e}):Promise.reject(`No support for "encryptEncryptedContentInfo" in current crypto engine ${t.name}`))}decrypt(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');const t=(0,a.getEngine)();return void 0===t?Promise.reject("Unable to initialize cryptographic engine"):(e.encryptedContentInfo=this.encryptedContentInfo,"decryptEncryptedContentInfo"in t.subtle?t.subtle.decryptEncryptedContentInfo(e):Promise.reject(`No support for "decryptEncryptedContentInfo" in current crypto engine ${t.name}`))}}t.default=c},78544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=I(r(5771)),o=I(r(16475)),u=I(r(96427)),l=I(r(68681)),c=I(r(4987)),h=I(r(56701)),f=I(r(20332)),m=I(r(35529)),d=I(r(35717)),p=I(r(38847)),g=I(r(70785)),y=I(r(52857)),v=I(r(2428)),b=I(r(40590)),w=I(r(87979)),k=I(r(30033)),S=I(r(60242)),P=I(r(58057)),A=I(r(75815)),C=I(r(35344));function I(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,i)}function j(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){_(a,n,i,s,o,"next",e)}function o(e){_(a,n,i,s,o,"throw",e)}s(void 0)})}}const N={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},E={"P-256":256,"P-384":384,"P-521":528};class V{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",V.defaultValues("version")),"originatorInfo"in e&&(this.originatorInfo=(0,i.getParametersValue)(e,"originatorInfo",V.defaultValues("originatorInfo"))),this.recipientInfos=(0,i.getParametersValue)(e,"recipientInfos",V.defaultValues("recipientInfos")),this.encryptedContentInfo=(0,i.getParametersValue)(e,"encryptedContentInfo",V.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in e&&(this.unprotectedAttrs=(0,i.getParametersValue)(e,"unprotectedAttrs",V.defaultValues("unprotectedAttrs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"originatorInfo":return new s.default;case"recipientInfos":return[];case"encryptedContentInfo":return new u.default;case"unprotectedAttrs":return[];default:throw new Error(`Invalid member name for EnvelopedData class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return t===V.defaultValues(e);case"originatorInfo":return 0===t.certs.certificates.length&&0===t.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===t.length;case"encryptedContentInfo":return u.default.compareWithDefault("contentType",t.contentType)&&u.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&u.default.compareWithDefault("encryptedContent",t.encryptedContent);default:throw new Error(`Invalid member name for EnvelopedData class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Constructed({name:t.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:s.default.schema().valueBlock.value}),new n.Set({value:[new n.Repeated({name:t.recipientInfos||"",value:o.default.schema()})]}),u.default.schema(t.encryptedContentInfo||{}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.unprotectedAttrs||"",value:l.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["version","originatorInfo","recipientInfos","encryptedContentInfo","unprotectedAttrs"]);const t=n.compareSchema(e,e,V.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for EnvelopedData");this.version=t.result.version.valueBlock.valueDec,"originatorInfo"in t.result&&(this.originatorInfo=new s.default({schema:new n.Sequence({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,e=>new o.default({schema:e})),this.encryptedContentInfo=new u.default({schema:t.result.encryptedContentInfo}),"unprotectedAttrs"in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,e=>new l.default({schema:e})))}toSchema(){const e=[];return e.push(new n.Integer({value:this.version})),"originatorInfo"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new n.Set({value:Array.from(this.recipientInfos,e=>e.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,e=>e.toJSON()),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,e=>e.toJSON())),e}addRecipientByCertificate(e,t,r){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},N,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))r=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);r=2}switch(r){case 1:{let t,r;if(!0===i.useOAEP){if(t=(0,a.getOIDByAlgorithm)({name:"RSA-OAEP"}),""===t)throw new Error("Can not find OID for RSA-OAEP");const e=(0,a.getOIDByAlgorithm)({name:i.oaepHashAlgorithm});if(""===e)throw new Error(`Unknown OAEP hash algorithm: ${i.oaepHashAlgorithm}`);const s=new c.default({algorithmId:e,algorithmParams:new n.Null});r=new h.default({hashAlgorithm:s,maskGenAlgorithm:new c.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.toSchema()})}).toSchema()}else{if(t=(0,a.getOIDByAlgorithm)({name:"RSAES-PKCS1-v1_5"}),""===t)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");r=new n.Null}const s=new f.default({version:0,rid:new m.default({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new c.default({algorithmId:t,algorithmParams:r}),recipientCertificate:e});this.recipientInfos.push(new o.default({variant:1,value:s}))}break;case 2:{const t=new g.default({variant:1,value:new m.default({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(t,i,{recipientCertificate:e})}break;default:throw new Error(`Unknown "variant" value: ${r}`)}return!0}addRecipientByPreDefinedData(e,t,r){const i=t||{};if(e instanceof ArrayBuffer==0)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in i==0){const e=new ArrayBuffer(16),t=new Uint8Array(e);(0,a.getRandomValues)(t),i.keyIdentifier=e}switch("hmacHashAlgorithm"in i==0&&(i.hmacHashAlgorithm="SHA-512"),"iterationCount"in i==0&&(i.iterationCount=2048),"keyEncryptionAlgorithm"in i==0&&(i.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in i==0&&(i.keyEncryptionAlgorithmParams=new n.Null),r){case 1:{const t=(0,a.getOIDByAlgorithm)(i.keyEncryptionAlgorithm);if(""===t)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');const r=new b.default({version:4,kekid:new w.default({keyIdentifier:new n.OctetString({valueHex:i.keyIdentifier})}),keyEncryptionAlgorithm:new c.default({algorithmId:t,algorithmParams:i.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new o.default({variant:3,value:r}))}break;case 2:{const t=(0,a.getOIDByAlgorithm)({name:"PBKDF2"});if(""===t)throw new Error("Can not find OID for PBKDF2");const r=new ArrayBuffer(64),s=new Uint8Array(r);(0,a.getRandomValues)(s);const u=(0,a.getOIDByAlgorithm)({name:"HMAC",hash:{name:i.hmacHashAlgorithm}});if(""===u)throw new Error(`Incorrect value for "hmacHashAlgorithm": ${i.hmacHashAlgorithm}`);const l=new k.default({salt:new n.OctetString({valueHex:r}),iterationCount:i.iterationCount,prf:new c.default({algorithmId:u,algorithmParams:new n.Null})}),h=(0,a.getOIDByAlgorithm)(i.keyEncryptionAlgorithm);if(""===h)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');const f=new S.default({version:0,keyDerivationAlgorithm:new c.default({algorithmId:t,algorithmParams:l.toSchema()}),keyEncryptionAlgorithm:new c.default({algorithmId:h,algorithmParams:i.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new o.default({variant:4,value:f}))}break;default:throw new Error(`Unknown value for "variant": ${r}`)}}addRecipientByKeyIdentifier(e,t,r){const i=Object.assign({},N,r||{}),a=new g.default({variant:2,value:new d.default({subjectKeyIdentifier:new n.OctetString({valueHex:t})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e})}_addKeyAgreeRecipientInfo(e,t,r){const i=new p.default({rid:e}),s=(0,a.getOIDByAlgorithm)({name:"AES-KW",length:t.kekEncryptionLength});if(""===s)throw new Error(`Unknown length for key encryption algorithm: ${t.kekEncryptionLength}`);const u=new c.default({algorithmId:s}),l=(0,a.getOIDByAlgorithm)({name:"ECDH",kdf:t.kdfAlgorithm});if(""===l)throw new Error(`Unknown KDF algorithm: ${t.kdfAlgorithm}`);const h=new ArrayBuffer(64),f=new Uint8Array(h);(0,a.getRandomValues)(f);const m={version:3,ukm:new n.OctetString({valueHex:h}),keyEncryptionAlgorithm:new c.default({algorithmId:l,algorithmParams:u.toSchema()}),recipientEncryptedKeys:new v.default({encryptedKeys:[i]})},d=new y.default(Object.assign(m,r));this.recipientInfos.push(new o.default({variant:2,value:d}))}encrypt(e,t){let r=Promise.resolve();const i=new ArrayBuffer(16),s=new Uint8Array(i);(0,a.getRandomValues)(s);const o=new Uint8Array(t);let l,f,m;const d=[],p=this,g=(0,a.getOIDByAlgorithm)(e);if(""===g)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');const y=(0,a.getCrypto)();if(void 0===y)return Promise.reject("Unable to create WebCrypto object");function v(e){let t=Promise.resolve();const r=p.recipientInfos[e];let i,s,o,u,h,f;return t=t.then(()=>{if(r.value.recipientPublicKey)return u=r.value.recipientPublicKey.algorithm.namedCurve,r.value.recipientPublicKey;{const t=r.value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject(`Incorrect "recipientCertificate" for index ${e}`);switch(t.valueBlock.toString()){case"1.2.840.10045.3.1.7":u="P-256";break;case"1.3.132.0.34":u="P-384";break;case"1.3.132.0.35":u="P-521";break;default:return Promise.reject(`Incorrect curve OID for index ${e}`)}return r.value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:u},usages:[]}})}},e=>Promise.reject(e)),t=t.then(e=>(o=e,h=E[u],y.generateKey({name:"ECDH",namedCurve:u},!0,["deriveBits"])),e=>Promise.reject(e)),t=t.then(e=>(i=e.publicKey,s=e.privateKey,y.exportKey("spki",i)),e=>Promise.reject(e)),t=t.then(e=>{f=e},e=>Promise.reject(e)),t=t.then(()=>y.deriveBits({name:"ECDH",public:o},s,h),e=>Promise.reject(e)),t=t.then(e=>{const t=new c.default({schema:r.value.keyEncryptionAlgorithm.algorithmParams}),i=(0,a.getAlgorithmByOID)(t.algorithmId);if("name"in i==0)return Promise.reject(`Incorrect OID for key encryption algorithm: ${t.algorithmId}`);let s=i.length;const o=new ArrayBuffer(4),u=new Uint8Array(o);for(let r=3;r>=0;r--)u[r]=s,s>>=8;const l=new P.default({keyInfo:new c.default({algorithmId:t.algorithmId}),entityUInfo:r.value.ukm,suppPubInfo:new n.OctetString({valueHex:o})}).toSchema().toBER(!1),h=(0,a.getAlgorithmByOID)(r.value.keyEncryptionAlgorithm.algorithmId);return"name"in h==0?Promise.reject(`Incorrect OID for key encryption algorithm: ${r.value.keyEncryptionAlgorithm.algorithmId}`):(0,a.kdf)(h.kdf,e,i.length,l)},e=>Promise.reject(e)),t=t.then(e=>y.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"]),e=>Promise.reject(e)),t=t.then(e=>y.wrapKey("raw",l,e,{name:"AES-KW"}),e=>Promise.reject(e)),t=t.then(e=>{const t=n.fromBER(f),i=new A.default;return i.variant=3,i.value=new C.default({schema:t.result}),r.value.originator=i,r.value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new n.OctetString({valueHex:e}),{ecdhPrivateKey:s}},e=>Promise.reject(e)),t}function b(e){return w.apply(this,arguments)}function w(){return(w=j(function*(e){const t=(0,a.getAlgorithmByOID)(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);if("name"in t==0)throw new Error(`Unknown keyEncryptionAlgorithm: ${p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`);if("RSA-OAEP"===t.name){const r=new h.default({schema:p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams});if(t.hash=(0,a.getAlgorithmByOID)(r.hashAlgorithm.algorithmId),"name"in t.hash==0)throw new Error(`Incorrect OID for hash algorithm: ${r.hashAlgorithm.algorithmId}`)}try{const r=yield p.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:t,usages:["encrypt","wrapKey"]}}),i=yield y.encrypt(r.algorithm,r,m);p.recipientInfos[e].value.encryptedKey=new n.OctetString({valueHex:i})}catch(r){}})).apply(this,arguments)}function S(e){let t,r=Promise.resolve();return r=r.then(()=>(t=(0,a.getAlgorithmByOID)(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in t==0?Promise.reject(`Incorrect OID for "keyEncryptionAlgorithm": ${p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`):y.importKey("raw",new Uint8Array(p.recipientInfos[e].value.preDefinedKEK),t,!0,["wrapKey"])),e=>Promise.reject(e)),r=r.then(e=>y.wrapKey("raw",l,e,t),e=>Promise.reject(e)),r=r.then(t=>{p.recipientInfos[e].value.encryptedKey=new n.OctetString({valueHex:t})},e=>Promise.reject(e)),r}function I(e){let t,r,i=Promise.resolve();return i=i.then(()=>{if("keyDerivationAlgorithm"in p.recipientInfos[e].value==0)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in p.recipientInfos[e].value.keyDerivationAlgorithm==0)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{t=new k.default({schema:p.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(r){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},e=>Promise.reject(e)),i=i.then(()=>{const t=new Uint8Array(p.recipientInfos[e].value.password);return y.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},e=>Promise.reject(e)),i=i.then(n=>{if(r=(0,a.getAlgorithmByOID)(p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==0)return Promise.reject(`Incorrect OID for "keyEncryptionAlgorithm": ${p.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`);let i="SHA-1";if("prf"in t){const e=(0,a.getAlgorithmByOID)(t.prf.algorithmId);if("name"in e==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=e.hash.name}const s=new Uint8Array(t.salt.valueBlock.valueHex);return y.deriveKey({name:"PBKDF2",hash:{name:i},salt:s,iterations:t.iterationCount},n,r,!0,["wrapKey"])},e=>Promise.reject(e)),i=i.then(e=>y.wrapKey("raw",l,e,r),e=>Promise.reject(e)),i=i.then(t=>{p.recipientInfos[e].value.encryptedKey=new n.OctetString({valueHex:t})},e=>Promise.reject(e)),i}return r=r.then(()=>y.generateKey(e,!0,["encrypt"])),r=r.then(t=>(l=t,y.encrypt({name:e.name,iv:s},l,o)),e=>Promise.reject(e)),r=r.then(e=>(f=e,y.exportKey("raw",l)),e=>Promise.reject(e)).then(e=>(m=e,!0),e=>Promise.reject(e)),r=r.then(()=>{this.version=2,this.encryptedContentInfo=new u.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new c.default({algorithmId:g,algorithmParams:new n.OctetString({valueHex:i})}),encryptedContent:new n.OctetString({valueHex:f})})},e=>Promise.reject(e)),r=r.then(()=>{for(let e=0;e<this.recipientInfos.length;e++){let t=Promise.resolve();switch(this.recipientInfos[e].variant){case 1:t=b(e);break;case 2:t=v(e);break;case 3:t=S(e);break;case 4:t=I(e);break;default:return Promise.reject(`Uknown recipient type in array with index ${e}`)}d.push(t)}return Promise.all(d)},e=>Promise.reject(e)),r}decrypt(e,t){let r=Promise.resolve();const s=t||{},o=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));const u=(0,a.getCrypto)();if(void 0===u)return Promise.reject("Unable to create WebCrypto object");function l(){return(l=j(function*(e){if("recipientPrivateKey"in s==0)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const t=(0,a.getAlgorithmByOID)(o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);if("name"in t==0)throw new Error(`Unknown keyEncryptionAlgorithm: ${o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`);if("RSA-OAEP"===t.name){const r=new h.default({schema:o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams});if(t.hash=(0,a.getAlgorithmByOID)(r.hashAlgorithm.algorithmId),"name"in t.hash==0)throw new Error(`Incorrect OID for hash algorithm: ${r.hashAlgorithm.algorithmId}`)}const r=yield u.importKey("pkcs8",s.recipientPrivateKey,t,!0,["decrypt"]),n=yield u.decrypt(r.algorithm,r,o.recipientInfos[e].value.encryptedKey.valueBlock.valueHex),i=(0,a.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in i==0)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);return u.importKey("raw",n,i,!0,["decrypt"])})).apply(this,arguments)}return r=r.then(()=>{let t=Promise.resolve();switch(this.recipientInfos[e].variant){case 1:t=function(e){return l.apply(this,arguments)}(e);break;case 2:t=function(e){let t,r,i,l,h=Promise.resolve();const f=o.recipientInfos[e].value.originator;function m(t){t=t||!1;const r=new c.default({schema:o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),i=(0,a.getAlgorithmByOID)(r.algorithmId);if("name"in i==0)return Promise.reject(`Incorrect OID for key encryption algorithm: ${r.algorithmId}`);let s=i.length;const u=new ArrayBuffer(4),l=new Uint8Array(u);for(let e=3;e>=0;e--)l[e]=s,s>>=8;const h={algorithmId:r.algorithmId};t&&(h.algorithmParams=new n.Null);const f=new P.default({keyInfo:new c.default(h),entityUInfo:o.recipientInfos[e].value.ukm,suppPubInfo:new n.OctetString({valueHex:u})}).toSchema().toBER(!1),m=(0,a.getAlgorithmByOID)(o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in m==0?Promise.reject(`Incorrect OID for key encryption algorithm: ${o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`):(0,a.kdf)(m.kdf,d,i.length,f)}let d;function p(e){return u.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])}function g(t){const r=(0,a.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==0?Promise.reject(`Incorrect "contentEncryptionAlgorithm": ${o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`):u.unwrapKey("raw",o.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])}return h=h.then(()=>{if("recipientCertificate"in s){const t=s.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject(`Incorrect "recipientCertificate" for index ${e}`);i=t.valueBlock.toString()}else{if(!("algorithmParams"in f.value.algorithm))return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const t=f.value.algorithm.algorithmParams;if(t.constructor.blockName()!==n.ObjectIdentifier.blockName())return Promise.reject(`Incorrect originator for index ${e}`);i=t.valueBlock.toString()}}if("recipientPrivateKey"in s==0)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(i){case"1.2.840.10045.3.1.7":t="P-256",r=256;break;case"1.3.132.0.34":t="P-384",r=384;break;case"1.3.132.0.35":t="P-521",r=528;break;default:return Promise.reject(`Incorrect curve OID for index ${e}`)}return u.importKey("pkcs8",s.recipientPrivateKey,{name:"ECDH",namedCurve:t},!0,["deriveBits"])},e=>Promise.reject(e)),h=h.then(e=>{l=e,"algorithmParams"in f.value.algorithm==0&&(f.value.algorithm.algorithmParams=new n.ObjectIdentifier({value:i}));const r=f.value.toSchema().toBER(!1);return u.importKey("spki",r,{name:"ECDH",namedCurve:t},!0,[])},e=>Promise.reject(e)),h=h.then(e=>u.deriveBits({name:"ECDH",public:e},l,r),e=>Promise.reject(e)),h=h.then(e=>(d=e,m()),e=>Promise.reject(e)),h=h.then(p,e=>Promise.reject(e)),h=h.then(e=>g(e).catch(()=>m(!0).then(p).then(g)),e=>Promise.reject(e)),h}(e);break;case 3:t=function(e){let t,r=Promise.resolve();return r=r.then(()=>"preDefinedData"in s==0?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):(t=(0,a.getAlgorithmByOID)(o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in t==0?Promise.reject(`Incorrect OID for "keyEncryptionAlgorithm": ${o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`):u.importKey("raw",s.preDefinedData,t,!0,["unwrapKey"])),e=>Promise.reject(e)),r=r.then(r=>{const n=(0,a.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==0?Promise.reject(`Incorrect "contentEncryptionAlgorithm": ${o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`):u.unwrapKey("raw",o.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,r,t,n,!0,["decrypt"])},e=>Promise.reject(e)),r}(e);break;case 4:t=function(e){let t,r,n=Promise.resolve();return n=n.then(()=>{if("preDefinedData"in s==0)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in o.recipientInfos[e].value==0)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in o.recipientInfos[e].value.keyDerivationAlgorithm==0)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{t=new k.default({schema:o.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(r){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return u.importKey("raw",s.preDefinedData,"PBKDF2",!1,["deriveKey"])},e=>Promise.reject(e)),n=n.then(n=>{if(r=(0,a.getAlgorithmByOID)(o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==0)return Promise.reject(`Incorrect OID for "keyEncryptionAlgorithm": ${o.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId}`);let i="SHA-1";if("prf"in t){const e=(0,a.getAlgorithmByOID)(t.prf.algorithmId);if("name"in e==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=e.hash.name}const s=new Uint8Array(t.salt.valueBlock.valueHex);return u.deriveKey({name:"PBKDF2",hash:{name:i},salt:s,iterations:t.iterationCount},n,r,!0,["unwrapKey"])},e=>Promise.reject(e)),n=n.then(t=>{const n=(0,a.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==0?Promise.reject(`Incorrect "contentEncryptionAlgorithm": ${o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`):u.unwrapKey("raw",o.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,n,!0,["decrypt"])},e=>Promise.reject(e)),n}(e);break;default:return Promise.reject(`Uknown recipient type in array with index ${e}`)}return t},e=>Promise.reject(e)),r=r.then(e=>{const t=(0,a.getAlgorithmByOID)(this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==0)return Promise.reject(`Incorrect "contentEncryptionAlgorithm": ${this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);const r=new Uint8Array(this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex);let n=new ArrayBuffer(0);if(!1===this.encryptedContentInfo.encryptedContent.idBlock.isConstructed)n=this.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var s,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,void 0):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(this.encryptedContentInfo.encryptedContent.valueBlock.value);try{for(o.s();!(s=o.n()).done;)n=(0,i.utilConcatBuf)(n,s.value.valueBlock.valueHex)}catch(l){o.e(l)}finally{o.f()}}return u.decrypt({name:t.name,iv:r},e,n)},e=>Promise.reject(e)),r}}t.default=V},50024:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.keyPurposes=(0,i.getParametersValue)(e,"keyPurposes",s.defaultValues("keyPurposes")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyPurposes":return[];default:throw new Error(`Invalid member name for ExtKeyUsage class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.keyPurposes||"",value:new n.ObjectIdentifier})]})}fromSchema(e){(0,i.clearProps)(e,["keyPurposes"]);const t=n.compareSchema(e,e,s.schema({names:{keyPurposes:"keyPurposes"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(t.result.keyPurposes,e=>e.valueBlock.toString())}toSchema(){return new n.Sequence({value:Array.from(this.keyPurposes,e=>new n.ObjectIdentifier({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}t.default=s},51090:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=A(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=P(r(32488)),s=P(r(17455)),o=P(r(28165)),u=P(r(39670)),l=P(r(33838)),c=P(r(70374)),h=P(r(83366)),f=P(r(91439)),m=P(r(22104)),d=P(r(58220)),p=P(r(96988)),g=P(r(71907)),y=P(r(50024)),v=P(r(15599)),b=P(r(34840)),w=P(r(83804)),k=P(r(43199)),S=P(r(11663));function P(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}class C{constructor(e={}){this.extnID=(0,i.getParametersValue)(e,"extnID",C.defaultValues("extnID")),this.critical=(0,i.getParametersValue)(e,"critical",C.defaultValues("critical")),this.extnValue="extnValue"in e?new n.OctetString({valueHex:e.extnValue}):C.defaultValues("extnValue"),"parsedValue"in e&&(this.parsedValue=(0,i.getParametersValue)(e,"parsedValue",C.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new n.OctetString;case"parsedValue":return{};default:throw new Error(`Invalid member name for Extension class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.extnID||""}),new n.Boolean({name:t.critical||"",optional:!0}),new n.OctetString({name:t.extnValue||""})]})}fromSchema(e){(0,i.clearProps)(e,["extnID","critical","extnValue"]);let t=n.compareSchema(e,e,C.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Extension");if(this.extnID=t.result.extnID.valueBlock.toString(),"critical"in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue,t=n.fromBER(this.extnValue.valueBlock.valueHex),-1!==t.offset)switch(this.extnID){case"2.5.29.9":try{this.parsedValue=new a.default({schema:t.result})}catch(r){this.parsedValue=new a.default,this.parsedValue.parsingError="Incorrectly formated SubjectDirectoryAttributes"}break;case"2.5.29.14":case"2.5.29.15":this.parsedValue=t.result;break;case"2.5.29.16":try{this.parsedValue=new s.default({schema:t.result})}catch(r){this.parsedValue=new s.default,this.parsedValue.parsingError="Incorrectly formated PrivateKeyUsagePeriod"}break;case"2.5.29.17":case"2.5.29.18":try{this.parsedValue=new o.default({schema:t.result})}catch(r){this.parsedValue=new o.default,this.parsedValue.parsingError="Incorrectly formated AltName"}break;case"2.5.29.19":try{this.parsedValue=new u.default({schema:t.result})}catch(r){this.parsedValue=new u.default,this.parsedValue.parsingError="Incorrectly formated BasicConstraints"}break;case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":this.parsedValue=t.result;break;case"2.5.29.28":try{this.parsedValue=new l.default({schema:t.result})}catch(r){this.parsedValue=new l.default,this.parsedValue.parsingError="Incorrectly formated IssuingDistributionPoint"}break;case"2.5.29.29":try{this.parsedValue=new c.default({schema:t.result})}catch(r){this.parsedValue=new c.default,this.parsedValue.parsingError="Incorrectly formated GeneralNames"}break;case"2.5.29.30":try{this.parsedValue=new h.default({schema:t.result})}catch(r){this.parsedValue=new h.default,this.parsedValue.parsingError="Incorrectly formated NameConstraints"}break;case"2.5.29.31":case"2.5.29.46":try{this.parsedValue=new f.default({schema:t.result})}catch(r){this.parsedValue=new f.default,this.parsedValue.parsingError="Incorrectly formated CRLDistributionPoints"}break;case"2.5.29.32":case"1.3.6.1.4.1.311.21.10":try{this.parsedValue=new m.default({schema:t.result})}catch(r){this.parsedValue=new m.default,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.33":try{this.parsedValue=new d.default({schema:t.result})}catch(r){this.parsedValue=new d.default,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.35":try{this.parsedValue=new p.default({schema:t.result})}catch(r){this.parsedValue=new p.default,this.parsedValue.parsingError="Incorrectly formated AuthorityKeyIdentifier"}break;case"2.5.29.36":try{this.parsedValue=new g.default({schema:t.result})}catch(r){this.parsedValue=new g.default,this.parsedValue.parsingError="Incorrectly formated PolicyConstraints"}break;case"2.5.29.37":try{this.parsedValue=new y.default({schema:t.result})}catch(r){this.parsedValue=new y.default,this.parsedValue.parsingError="Incorrectly formated ExtKeyUsage"}break;case"2.5.29.54":this.parsedValue=t.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":try{this.parsedValue=new v.default({schema:t.result})}catch(r){this.parsedValue=new v.default,this.parsedValue.parsingError="Incorrectly formated InfoAccess"}break;case"1.3.6.1.4.1.11129.2.4.2":try{this.parsedValue=new b.default({schema:t.result})}catch(r){this.parsedValue=new b.default,this.parsedValue.parsingError="Incorrectly formated SignedCertificateTimestampList"}break;case"1.3.6.1.4.1.311.20.2":case"1.3.6.1.4.1.311.21.2":this.parsedValue=t.result;break;case"1.3.6.1.4.1.311.21.7":try{this.parsedValue=new w.default({schema:t.result})}catch(r){this.parsedValue=new w.default,this.parsedValue.parsingError="Incorrectly formated CertificateTemplate"}break;case"1.3.6.1.4.1.311.21.1":try{this.parsedValue=new k.default({schema:t.result})}catch(r){this.parsedValue=new k.default,this.parsedValue.parsingError="Incorrectly formated CAVersion"}break;case"1.3.6.1.5.5.7.1.3":try{this.parsedValue=new S.default({schema:t.result})}catch(r){this.parsedValue=new S.default,this.parsedValue.parsingError="Incorrectly formated QCStatements"}}}toSchema(){const e=[];return e.push(new n.ObjectIdentifier({value:this.extnID})),this.critical!==C.defaultValues("critical")&&e.push(new n.Boolean({value:this.critical})),e.push(this.extnValue),new n.Sequence({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==C.defaultValues("critical")&&(e.critical=this.critical),"parsedValue"in this&&"toJSON"in this.parsedValue&&(e.parsedValue=this.parsedValue.toJSON()),e}}t.default=C},39327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(51090))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.extensions=(0,a.getParametersValue)(e,"extensions",u.defaultValues("extensions")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"extensions":return[];default:throw new Error(`Invalid member name for Extensions class: ${e}`)}}static schema(e={},t=!1){const r=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({optional:t,name:r.blockName||"",value:[new i.Repeated({name:r.extensions||"",value:s.default.schema(r.extension||{})})]})}fromSchema(e){(0,a.clearProps)(e,["extensions"]);const t=i.compareSchema(e,e,u.schema({names:{extensions:"extensions"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Extensions");this.extensions=Array.from(t.result.extensions,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:Array.from(this.extensions,e=>e.toJSON())}}}t.default=u},29260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(2446))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e={},t=!1){const r=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({optional:t,value:[new i.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new i.Choice({value:[new i.NumericString,new i.PrintableString]})]}),new i.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new i.Choice({value:[new i.NumericString,new i.PrintableString]})]}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new i.Choice({value:[new i.NumericString,new i.PrintableString]})]}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new i.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new i.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new i.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new i.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new i.Repeated({value:new i.PrintableString})]})]})}function l(e=!1){return new i.Sequence({optional:e,value:[new i.PrintableString,new i.PrintableString]})}function c(e=!1){return new i.Set({optional:e,value:[new i.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.Any]})]})}class h{constructor(e={}){this.type=(0,a.getParametersValue)(e,"type",h.defaultValues("type")),this.value=(0,a.getParametersValue)(e,"value",h.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error(`Invalid member name for GeneralName class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"type":return t===h.defaultValues(e);case"value":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for GeneralName class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Choice({value:[new i.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new i.ObjectIdentifier,new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new i.Any]})]}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new i.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[u(t.builtInStandardAttributes||{},!1),l(!0),c(!0)]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[s.default.schema(t.directoryName||{})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.Choice({value:[new i.TeletexString,new i.PrintableString,new i.UniversalString,new i.Utf8String,new i.BmpString]})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new i.Choice({value:[new i.TeletexString,new i.PrintableString,new i.UniversalString,new i.Utf8String,new i.BmpString]})]})]}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){(0,a.clearProps)(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=i.compareSchema(e,e,h.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for GeneralName");switch(this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=22;const r=e.toBER(!1);this.value=i.fromBER(r).result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new s.default({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new i.OctetString({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=6;const r=e.toBER(!1);this.value=i.fromBER(r).result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new i.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new i.IA5String({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new i.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new i.ObjectIdentifier({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return h.schema()}}toJSON(){const e={type:this.type,value:""};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(t){}return e}}t.default=h},70374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.names=(0,a.getParametersValue)(e,"names",u.defaultValues("names")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"names":return[];default:throw new Error(`Invalid member name for GeneralNames class: ${e}`)}}static schema(e={},t=!1){const r=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({optional:t,name:r.blockName||"",value:[new i.Repeated({name:r.generalNames||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["names","generalNames"]);const t=i.compareSchema(e,e,u.schema({names:{blockName:"names",generalNames:"generalNames"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(t.result.generalNames,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}t.default=u},79907:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(29260))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.base=(0,a.getParametersValue)(e,"base",u.defaultValues("base")),this.minimum=(0,a.getParametersValue)(e,"minimum",u.defaultValues("minimum")),"maximum"in e&&(this.maximum=(0,a.getParametersValue)(e,"maximum",u.defaultValues("maximum"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"base":return new s.default;case"minimum":case"maximum":return 0;default:throw new Error(`Invalid member name for GeneralSubtree class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.base||{}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.Integer({name:t.minimum||""})]}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.Integer({name:t.maximum||""})]})]})}fromSchema(e){(0,a.clearProps)(e,["base","minimum","maximum"]);const t=i.compareSchema(e,e,u.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for GeneralSubtree");this.base=new s.default({schema:t.result.base}),"minimum"in t.result&&(this.minimum=t.result.minimum.valueBlock.isHexOnly?t.result.minimum:t.result.minimum.valueBlock.valueDec),"maximum"in t.result&&(this.maximum=t.result.maximum.valueBlock.isHexOnly?t.result.maximum:t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof i.Integer?this.minimum:new i.Integer({value:this.minimum}),e.push(new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){let t=0;t=this.maximum instanceof i.Integer?this.maximum:new i.Integer({value:this.maximum}),e.push(new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new i.Sequence({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&(e.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),"maximum"in this&&(e.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),e}}t.default=u},15599:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(88413))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.accessDescriptions=(0,a.getParametersValue)(e,"accessDescriptions",u.defaultValues("accessDescriptions")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"accessDescriptions":return[];default:throw new Error(`Invalid member name for InfoAccess class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.accessDescriptions||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["accessDescriptions"]);const t=i.compareSchema(e,e,u.schema({names:{accessDescriptions:"accessDescriptions"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(t.result.accessDescriptions,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}t.default=u},35529:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(2446))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.issuer=(0,a.getParametersValue)(e,"issuer",u.defaultValues("issuer")),this.serialNumber=(0,a.getParametersValue)(e,"serialNumber",u.defaultValues("serialNumber")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuer":return new s.default;case"serialNumber":return new i.Integer;default:throw new Error(`Invalid member name for IssuerAndSerialNumber class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.issuer||{}),new i.Integer({name:t.serialNumber||""})]})}fromSchema(e){(0,a.clearProps)(e,["issuer","serialNumber"]);const t=i.compareSchema(e,e,u.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new s.default({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new i.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}t.default=u},33838:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(29260)),s=o(r(2446));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){"distributionPoint"in e&&(this.distributionPoint=(0,i.getParametersValue)(e,"distributionPoint",l.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,i.getParametersValue)(e,"onlyContainsUserCerts",l.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,i.getParametersValue)(e,"onlyContainsCACerts",l.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in e&&(this.onlySomeReasons=(0,i.getParametersValue)(e,"onlySomeReasons",l.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,i.getParametersValue)(e,"indirectCRL",l.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,i.getParametersValue)(e,"onlyContainsAttributeCerts",l.defaultValues("onlyContainsAttributeCerts")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":case"onlyContainsAttributeCerts":return!1;default:throw new Error(`Invalid member name for IssuingDistributionPoint class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Choice({value:[new n.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.distributionPointNames||"",value:a.default.schema()})]}),new n.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})]}),new n.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new n.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new n.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new n.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new n.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){(0,i.clearProps)(e,["distributionPoint","distributionPointNames","onlyContainsUserCerts","onlyContainsCACerts","onlySomeReasons","indirectCRL","onlyContainsAttributeCerts"]);const t=n.compareSchema(e,e,l.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,e=>new a.default({schema:e}));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new s.default({schema:new n.Sequence({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==e[0]}if("onlyContainsCACerts"in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==e[0]}if("onlySomeReasons"in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if("indirectCRL"in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==e[0]}if("onlyContainsAttributeCerts"in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==e[0]}}toSchema(){const e=[];if("distributionPoint"in this){let t;this.distributionPoint instanceof Array?t=new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,e=>e.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==l.defaultValues("onlyContainsUserCerts")&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==l.defaultValues("onlyContainsCACerts")&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==l.defaultValues("indirectCRL")&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==l.defaultValues("onlyContainsAttributeCerts")&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new n.Sequence({value:e})}toJSON(){const e={};return"distributionPoint"in this&&(e.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,e=>e.toJSON()):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==l.defaultValues("onlyContainsUserCerts")&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==l.defaultValues("onlyContainsCACerts")&&(e.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==l.defaultValues("indirectCRL")&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==l.defaultValues("onlyContainsAttributeCerts")&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}t.default=l},87979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(32038))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.keyIdentifier=(0,a.getParametersValue)(e,"keyIdentifier",u.defaultValues("keyIdentifier")),"date"in e&&(this.date=(0,a.getParametersValue)(e,"date",u.defaultValues("date"))),"other"in e&&(this.other=(0,a.getParametersValue)(e,"other",u.defaultValues("other"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyIdentifier":return new i.OctetString;case"date":return new i.GeneralizedTime;case"other":return new s.default;default:throw new Error(`Invalid member name for KEKIdentifier class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"keyIdentifier":return t.isEqual(u.defaultValues("keyIdentifier"));case"date":return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case"other":return t.compareWithDefault("keyAttrId",t.keyAttrId)&&"keyAttr"in t==0;default:throw new Error(`Invalid member name for KEKIdentifier class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.OctetString({name:t.keyIdentifier||""}),new i.GeneralizedTime({optional:!0,name:t.date||""}),s.default.schema(t.other||{})]})}fromSchema(e){(0,a.clearProps)(e,["keyIdentifier","date","other"]);const t=i.compareSchema(e,e,u.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=t.result.keyIdentifier,"date"in t.result&&(this.date=t.result.date),"other"in t.result&&(this.other=new s.default({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new i.Sequence({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}t.default=u},40590:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(87979)),s=o(r(4987));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",l.defaultValues("version")),this.kekid=(0,i.getParametersValue)(e,"kekid",l.defaultValues("kekid")),this.keyEncryptionAlgorithm=(0,i.getParametersValue)(e,"keyEncryptionAlgorithm",l.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,i.getParametersValue)(e,"encryptedKey",l.defaultValues("encryptedKey")),this.preDefinedKEK=(0,i.getParametersValue)(e,"preDefinedKEK",l.defaultValues("preDefinedKEK")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"kekid":return new a.default;case"keyEncryptionAlgorithm":return new s.default;case"encryptedKey":return new n.OctetString;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error(`Invalid member name for KEKRecipientInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===l.defaultValues("version");case"kekid":return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&"date"in t==0&&"other"in t==0;case"keyEncryptionAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"encryptedKey":return t.isEqual(l.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===t.byteLength;default:throw new Error(`Invalid member name for KEKRecipientInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),a.default.schema(t.kekid||{}),s.default.schema(t.keyEncryptionAlgorithm||{}),new n.OctetString({name:t.encryptedKey||""})]})}fromSchema(e){(0,i.clearProps)(e,["version","kekid","keyEncryptionAlgorithm","encryptedKey"]);const t=n.compareSchema(e,e,l.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=t.result.version.valueBlock.valueDec,this.kekid=new a.default({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new s.default({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new n.Sequence({value:[new n.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}t.default=l},70785:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(35529)),s=o(r(35717));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.variant=(0,i.getParametersValue)(e,"variant",l.defaultValues("variant")),this.value=(0,i.getParametersValue)(e,"value",l.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error(`Invalid member name for KeyAgreeRecipientIdentifier class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for KeyAgreeRecipientIdentifier class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Choice({value:[a.default.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||""}}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:s.default.schema(t.rKeyId||{names:{blockName:t.blockName||""}}).valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["blockName"]);const t=n.compareSchema(e,e,l.schema({names:{blockName:"blockName"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new a.default({schema:t.result.blockName})):(this.variant=2,this.value=new s.default({schema:new n.Sequence({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new n.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}t.default=l},52857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(75815)),s=l(r(4987)),o=l(r(2428)),u=l(r(35585));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",h.defaultValues("version")),this.originator=(0,i.getParametersValue)(e,"originator",h.defaultValues("originator")),"ukm"in e&&(this.ukm=(0,i.getParametersValue)(e,"ukm",h.defaultValues("ukm"))),this.keyEncryptionAlgorithm=(0,i.getParametersValue)(e,"keyEncryptionAlgorithm",h.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=(0,i.getParametersValue)(e,"recipientEncryptedKeys",h.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=(0,i.getParametersValue)(e,"recipientCertificate",h.defaultValues("recipientCertificate")),this.recipientPublicKey=(0,i.getParametersValue)(e,"recipientPublicKey",h.defaultValues("recipientPublicKey")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"originator":return new a.default;case"ukm":return new n.OctetString;case"keyEncryptionAlgorithm":return new s.default;case"recipientEncryptedKeys":return new o.default;case"recipientCertificate":return new u.default;case"recipientPublicKey":return null;default:throw new Error(`Invalid member name for KeyAgreeRecipientInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return 0===t;case"originator":return-1===t.variant&&"value"in t==0;case"ukm":return t.isEqual(h.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"recipientEncryptedKeys":return 0===t.encryptedKeys.length;case"recipientCertificate":case"recipientPublicKey":return!1;default:throw new Error(`Invalid member name for KeyAgreeRecipientInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[a.default.schema(t.originator||{})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.OctetString({name:t.ukm||""})]}),s.default.schema(t.keyEncryptionAlgorithm||{}),o.default.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){(0,i.clearProps)(e,["version","originator","ukm","keyEncryptionAlgorithm","recipientEncryptedKeys"]);const t=n.compareSchema(e,e,h.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=t.result.version.valueBlock.valueDec,this.originator=new a.default({schema:t.result.originator}),"ukm"in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new s.default({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new o.default({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new n.Integer({value:this.version})),e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new n.Sequence({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}t.default=h},20332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(4987)),s=l(r(35585)),o=l(r(56631)),u=l(r(35529));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",h.defaultValues("version")),this.rid=(0,i.getParametersValue)(e,"rid",h.defaultValues("rid")),this.keyEncryptionAlgorithm=(0,i.getParametersValue)(e,"keyEncryptionAlgorithm",h.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,i.getParametersValue)(e,"encryptedKey",h.defaultValues("encryptedKey")),this.recipientCertificate=(0,i.getParametersValue)(e,"recipientCertificate",h.defaultValues("recipientCertificate")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new a.default;case"encryptedKey":return new n.OctetString;case"recipientCertificate":return new s.default;default:throw new Error(`Invalid member name for KeyTransRecipientInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return t===h.defaultValues("version");case"rid":return 0===Object.keys(t).length;case"keyEncryptionAlgorithm":case"encryptedKey":return t.isEqual(h.defaultValues(e));case"recipientCertificate":return!1;default:throw new Error(`Invalid member name for KeyTransRecipientInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),o.default.schema(t.rid||{}),a.default.schema(t.keyEncryptionAlgorithm||{}),new n.OctetString({name:t.encryptedKey||""})]})}fromSchema(e){(0,i.clearProps)(e,["version","rid","keyEncryptionAlgorithm","encryptedKey"]);const t=n.compareSchema(e,e,h.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=t.result.version.valueBlock.valueDec,this.rid=3===t.result.rid.idBlock.tagClass?new n.OctetString({valueHex:t.result.rid.valueBlock.valueHex}):new u.default({schema:t.result.rid}),this.keyEncryptionAlgorithm=new a.default({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof u.default?(this.version=0,e.push(new n.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new n.Integer({value:this.version})),e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHex}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new n.Sequence({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}t.default=h},56002:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(60571))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.mac=(0,a.getParametersValue)(e,"mac",u.defaultValues("mac")),this.macSalt=(0,a.getParametersValue)(e,"macSalt",u.defaultValues("macSalt")),"iterations"in e&&(this.iterations=(0,a.getParametersValue)(e,"iterations",u.defaultValues("iterations"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"mac":return new s.default;case"macSalt":return new i.OctetString;case"iterations":return 1;default:throw new Error(`Invalid member name for MacData class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"mac":return s.default.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&s.default.compareWithDefault("digest",t.digest);case"macSalt":return t.isEqual(u.defaultValues(e));case"iterations":return t===u.defaultValues(e);default:throw new Error(`Invalid member name for MacData class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",optional:t.optional||!0,value:[s.default.schema(t.mac||{names:{blockName:"mac"}}),new i.OctetString({name:t.macSalt||"macSalt"}),new i.Integer({optional:!0,name:t.iterations||"iterations"})]})}fromSchema(e){(0,a.clearProps)(e,["mac","macSalt","iterations"]);const t=i.compareSchema(e,e,u.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new s.default({schema:t.result.mac}),this.macSalt=t.result.macSalt,"iterations"in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new i.Integer({value:this.iterations})),new i.Sequence({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}t.default=u},84690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.hashAlgorithm=(0,a.getParametersValue)(e,"hashAlgorithm",u.defaultValues("hashAlgorithm")),this.hashedMessage=(0,a.getParametersValue)(e,"hashedMessage",u.defaultValues("hashedMessage")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new s.default;case"hashedMessage":return new i.OctetString;default:throw new Error(`Invalid member name for MessageImprint class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"hashAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"hashedMessage":return 0===t.isEqual(u.defaultValues(e));default:throw new Error(`Invalid member name for MessageImprint class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.hashAlgorithm||{}),new i.OctetString({name:t.hashedMessage||""})]})}fromSchema(e){(0,a.clearProps)(e,["hashAlgorithm","hashedMessage"]);const t=i.compareSchema(e,e,u.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new s.default({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new i.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}t.default=u},83366:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(79907))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){"permittedSubtrees"in e&&(this.permittedSubtrees=(0,a.getParametersValue)(e,"permittedSubtrees",u.defaultValues("permittedSubtrees"))),"excludedSubtrees"in e&&(this.excludedSubtrees=(0,a.getParametersValue)(e,"excludedSubtrees",u.defaultValues("excludedSubtrees"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error(`Invalid member name for NameConstraints class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.Repeated({name:t.permittedSubtrees||"",value:s.default.schema()})]}),new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.Repeated({name:t.excludedSubtrees||"",value:s.default.schema()})]})]})}fromSchema(e){(0,a.clearProps)(e,["permittedSubtrees","excludedSubtrees"]);const t=i.compareSchema(e,e,u.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,e=>new s.default({schema:e}))),"excludedSubtrees"in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,e=>new s.default({schema:e})))}toSchema(){const e=[];return"permittedSubtrees"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,e=>e.toSchema())})),"excludedSubtrees"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,e=>e.toSchema())})),new i.Sequence({value:e})}toJSON(){const e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,e=>e.toJSON())),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,e=>e.toJSON())),e}}t.default=u},75815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(35529)),s=o(r(35344));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.variant=(0,i.getParametersValue)(e,"variant",l.defaultValues("variant")),"value"in e&&(this.value=(0,i.getParametersValue)(e,"value",l.defaultValues("value"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error(`Invalid member name for OriginatorIdentifierOrKey class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for OriginatorIdentifierOrKey class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Choice({value:[a.default.schema({names:{blockName:t.blockName||""}}),new n.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||""}),new n.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||"",value:s.default.schema().valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["blockName"]);const t=n.compareSchema(e,e,l.schema({names:{blockName:"blockName"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new a.default({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new s.default({schema:new n.Sequence({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new n.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}t.default=l},5771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(545)),s=o(r(88367));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){"certs"in e&&(this.certs=(0,i.getParametersValue)(e,"certs",l.defaultValues("certs"))),"crls"in e&&(this.crls=(0,i.getParametersValue)(e,"crls",l.defaultValues("crls"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certs":return new a.default;case"crls":return new s.default;default:throw new Error(`Invalid member name for OriginatorInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error(`Invalid member name for OriginatorInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Constructed({name:t.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:a.default.schema().valueBlock.value}),new n.Constructed({name:t.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["certs","crls"]);const t=n.compareSchema(e,e,l.schema({names:{certs:"certs",crls:"crls"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OriginatorInfo");"certs"in t.result&&(this.certs=new a.default({schema:new n.Set({value:t.result.certs.valueBlock.value})})),"crls"in t.result&&(this.crls=new s.default({schema:new n.Set({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return"certs"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),"crls"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new n.Sequence({value:e})}toJSON(){const e={};return"certs"in this&&(e.certs=this.certs.toJSON()),"crls"in this&&(e.crls=this.crls.toJSON()),e}}t.default=l},35344:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.algorithm=(0,a.getParametersValue)(e,"algorithm",u.defaultValues("algorithm")),this.publicKey=(0,a.getParametersValue)(e,"publicKey",u.defaultValues("publicKey")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"algorithm":return new s.default;case"publicKey":return new i.BitString;default:throw new Error(`Invalid member name for OriginatorPublicKey class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"algorithm":case"publicKey":return t.isEqual(u.defaultValues(e));default:throw new Error(`Invalid member name for OriginatorPublicKey class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.algorithm||{}),new i.BitString({name:t.publicKey||""})]})}fromSchema(e){(0,a.clearProps)(e,["algorithm","publicKey"]);const t=i.compareSchema(e,e,u.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new s.default({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new i.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}t.default=u},99600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.otherCertFormat=(0,i.getParametersValue)(e,"otherCertFormat",s.defaultValues("otherCertFormat")),this.otherCert=(0,i.getParametersValue)(e,"otherCert",s.defaultValues("otherCert")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new n.Any;default:throw new Error(`Invalid member name for OtherCertificateFormat class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.otherCertFormat||"otherCertFormat"}),new n.Any({name:t.otherCert||"otherCert"})]})}fromSchema(e){(0,i.clearProps)(e,["otherCertFormat","otherCert"]);const t=n.compareSchema(e,e,s.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof n.Any||(e.otherCert=this.otherCert.toJSON()),e}}t.default=s},32038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.keyAttrId=(0,i.getParametersValue)(e,"keyAttrId",s.defaultValues("keyAttrId")),"keyAttr"in e&&(this.keyAttr=(0,i.getParametersValue)(e,"keyAttr",s.defaultValues("keyAttr"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error(`Invalid member name for OtherKeyAttribute class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for OtherKeyAttribute class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({optional:t.optional||!0,name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.keyAttrId||""}),new n.Any({optional:!0,name:t.keyAttr||""})]})}fromSchema(e){(0,i.clearProps)(e,["keyAttrId","keyAttr"]);const t=n.compareSchema(e,e,s.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),"keyAttr"in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new n.ObjectIdentifier({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr),new n.Sequence({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}t.default=s},10176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.prime=(0,i.getParametersValue)(e,"prime",s.defaultValues("prime")),this.exponent=(0,i.getParametersValue)(e,"exponent",s.defaultValues("exponent")),this.coefficient=(0,i.getParametersValue)(e,"coefficient",s.defaultValues("coefficient")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"prime":case"exponent":case"coefficient":return new n.Integer;default:throw new Error(`Invalid member name for OtherPrimeInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.prime||""}),new n.Integer({name:t.exponent||""}),new n.Integer({name:t.coefficient||""})]})}fromSchema(e){(0,i.clearProps)(e,["prime","exponent","coefficient"]);const t=n.compareSchema(e,e,s.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new n.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:(0,i.toBase64)((0,i.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,i.toBase64)((0,i.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,i.toBase64)((0,i.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}fromJSON(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new n.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new n.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new n.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.t,!0))})}}t.default=s},41751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.oriType=(0,i.getParametersValue)(e,"oriType",s.defaultValues("oriType")),this.oriValue=(0,i.getParametersValue)(e,"oriValue",s.defaultValues("oriValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error(`Invalid member name for OtherRecipientInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for OtherRecipientInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.oriType||""}),new n.Any({name:t.oriValue||""})]})}fromSchema(e){(0,i.clearProps)(e,["oriType","oriValue"]);const t=n.compareSchema(e,e,s.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return!1===s.compareWithDefault("oriValue",this.oriValue)&&(e.oriValue=this.oriValue.toJSON()),e}}t.default=s},75341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.otherRevInfoFormat=(0,i.getParametersValue)(e,"otherRevInfoFormat",s.defaultValues("otherRevInfoFormat")),this.otherRevInfo=(0,i.getParametersValue)(e,"otherRevInfo",s.defaultValues("otherRevInfo")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new n.Any;default:throw new Error(`Invalid member name for OtherRevocationInfoFormat class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.otherRevInfoFormat||"otherRevInfoFormat"}),new n.Any({name:t.otherRevInfo||"otherRevInfo"})]})}fromSchema(e){(0,i.clearProps)(e,["otherRevInfoFormat","otherRevInfo"]);const t=n.compareSchema(e,e,s.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof n.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}t.default=s},71045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.keyDerivationFunc=(0,a.getParametersValue)(e,"keyDerivationFunc",u.defaultValues("keyDerivationFunc")),this.encryptionScheme=(0,a.getParametersValue)(e,"encryptionScheme",u.defaultValues("encryptionScheme")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyDerivationFunc":case"encryptionScheme":return new s.default;default:throw new Error(`Invalid member name for PBES2Params class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.keyDerivationFunc||{}),s.default.schema(t.encryptionScheme||{})]})}fromSchema(e){(0,a.clearProps)(e,["keyDerivationFunc","encryptionScheme"]);const t=i.compareSchema(e,e,u.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PBES2Params");this.keyDerivationFunc=new s.default({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new s.default({schema:t.result.encryptionScheme})}toSchema(){return new i.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}t.default=u},30033:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.salt=(0,a.getParametersValue)(e,"salt",u.defaultValues("salt")),this.iterationCount=(0,a.getParametersValue)(e,"iterationCount",u.defaultValues("iterationCount")),"keyLength"in e&&(this.keyLength=(0,a.getParametersValue)(e,"keyLength",u.defaultValues("keyLength"))),"prf"in e&&(this.prf=(0,a.getParametersValue)(e,"prf",u.defaultValues("prf"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new i.Null});default:throw new Error(`Invalid member name for PBKDF2Params class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Choice({value:[new i.OctetString({name:t.saltPrimitive||""}),s.default.schema(t.saltConstructed||{})]}),new i.Integer({name:t.iterationCount||""}),new i.Integer({name:t.keyLength||"",optional:!0}),s.default.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){(0,a.clearProps)(e,["salt","iterationCount","keyLength","prf"]);const t=i.compareSchema(e,e,u.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PBKDF2Params");this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,"keyLength"in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),"prf"in t.result&&(this.prf=new s.default({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new i.Integer({value:this.iterationCount})),"keyLength"in this&&u.defaultValues("keyLength")!==this.keyLength&&e.push(new i.Integer({value:this.keyLength})),"prf"in this&&!1===u.defaultValues("prf").isEqual(this.prf)&&e.push(this.prf.toSchema()),new i.Sequence({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return"keyLength"in this&&u.defaultValues("keyLength")!==this.keyLength&&(e.keyLength=this.keyLength),"prf"in this&&!1===u.defaultValues("prf").isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}t.default=u},9681:function(e,t,r){"use strict";t.Z=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=y(r(60294)),o=y(r(56002)),u=y(r(60571)),l=y(r(4987)),c=y(r(52386)),h=y(r(63788)),f=y(r(68681)),m=y(r(70815)),d=y(r(35529)),p=y(r(89945)),g=y(r(81957));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class w{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",w.defaultValues("version")),this.authSafe=(0,i.getParametersValue)(e,"authSafe",w.defaultValues("authSafe")),"macData"in e&&(this.macData=(0,i.getParametersValue)(e,"macData",w.defaultValues("macData"))),"parsedValue"in e&&(this.parsedValue=(0,i.getParametersValue)(e,"parsedValue",w.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 3;case"authSafe":return new s.default;case"macData":return new o.default;case"parsedValue":return{};default:throw new Error(`Invalid member name for PFX class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return t===w.defaultValues(e);case"authSafe":return s.default.compareWithDefault("contentType",t.contentType)&&s.default.compareWithDefault("content",t.content);case"macData":return o.default.compareWithDefault("mac",t.mac)&&o.default.compareWithDefault("macSalt",t.macSalt)&&o.default.compareWithDefault("iterations",t.iterations);case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error(`Invalid member name for PFX class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||"version"}),s.default.schema(t.authSafe||{names:{blockName:"authSafe"}}),o.default.schema(t.macData||{names:{blockName:"macData",optional:!0}})]})}fromSchema(e){(0,i.clearProps)(e,["version","authSafe","macData"]);const t=n.compareSchema(e,e,w.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PFX");this.version=t.result.version.valueBlock.valueDec,this.authSafe=new s.default({schema:t.result.authSafe}),"macData"in t.result&&(this.macData=new o.default({schema:t.result.macData}))}toSchema(){const e=[new n.Integer({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new n.Sequence({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}makeInternalValues(e={}){if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==0)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==0)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');let t=Promise.resolve();const r=(0,a.getCrypto)();if(void 0===r)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==0)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:{if("iterations"in e==0)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');const r=new ArrayBuffer(64),i=new Uint8Array(r);(0,a.getRandomValues)(i);const c=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new s.default({contentType:"1.2.840.113549.1.7.1",content:new n.OctetString({valueHex:c})});const h=(0,a.getEngine)();if("stampDataWithPassword"in h.subtle==0)return Promise.reject(`No support for "stampDataWithPassword" in current engine "${h.name}"`);t=t.then(()=>h.subtle.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:r,iterationCount:e.iterations,contentToStamp:c})),t=t.then(t=>{this.macData=new o.default({mac:new u.default({digestAlgorithm:new l.default({algorithmId:(0,a.getOIDByAlgorithm)({name:e.hmacHashAlgorithm})}),digest:new n.OctetString({valueHex:t})}),macSalt:new n.OctetString({valueHex:r}),iterations:e.iterations})},e=>Promise.reject(e))}break;case 1:{if("signingCertificate"in e==0)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in e==0)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),a=new c.default({version:1,encapContentInfo:new h.default({eContentType:"1.2.840.113549.1.7.1",eContent:new n.OctetString({valueHex:i})}),certificates:[e.signingCertificate]});t=t.then(()=>r.digest({name:e.hashAlgorithm},new Uint8Array(i))),t=t.then(t=>{const r=[];r.push(new f.default({type:"1.2.840.113549.1.9.3",values:[new n.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),r.push(new f.default({type:"1.2.840.113549.1.9.5",values:[new n.UTCTime({valueDate:new Date})]})),r.push(new f.default({type:"1.2.840.113549.1.9.4",values:[new n.OctetString({valueHex:t})]})),a.signerInfos.push(new m.default({version:1,sid:new d.default({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new p.default({type:0,attributes:r})}))},e=>Promise.reject(`Error during making digest for message: ${e}`)),t=t.then(()=>a.sign(e.privateKey,0,e.hashAlgorithm)),t=t.then(()=>{this.authSafe=new s.default({contentType:"1.2.840.113549.1.7.2",content:a.toSchema(!0)})},e=>Promise.reject(`Error during making signature: ${e}`))}break;default:return Promise.reject(`Parameter "integrityMode" has unknown value: ${e.integrityMode}`)}return t}parseInternalValues(e){if(e instanceof Object==0)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==0&&(e.checkIntegrity=!0);let t=Promise.resolve();if(void 0===(0,a.getCrypto)())return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":{if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof n.OctetString==0)return Promise.reject('Wrong type of "this.authSafe.content"');let u=new ArrayBuffer(0);if(this.authSafe.content.valueBlock.isConstructed){var r,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,void 0):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(this.authSafe.content.valueBlock.value);try{for(s.s();!(r=s.n()).done;)u=(0,i.utilConcatBuf)(u,r.value.valueBlock.valueHex)}catch(o){s.e(o)}finally{s.f()}}else u=this.authSafe.content.valueBlock.valueHex;const l=n.fromBER(u);if(-1===l.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new g.default({schema:l.result}),e.checkIntegrity){if("macData"in this==0)return Promise.reject('Absent "macData" value, can not check PKCS#12 data integrity');const r=(0,a.getAlgorithmByOID)(this.macData.mac.digestAlgorithm.algorithmId);if("name"in r==0)return Promise.reject(`Unsupported digest algorithm: ${this.macData.mac.digestAlgorithm.algorithmId}`);const n=(0,a.getEngine)();t=t.then(()=>n.subtle.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:this.macData.macSalt.valueBlock.valueHex,iterationCount:this.macData.iterations,contentToVerify:u,signatureToVerify:this.macData.mac.digest.valueBlock.valueHex})),t=t.then(e=>!1===e?Promise.reject("Integrity for the PKCS#12 data is broken!"):Promise.resolve(),e=>Promise.reject(e))}}break;case"1.2.840.113549.1.7.2":{this.parsedValue.integrityMode=1;const e=new c.default({schema:this.authSafe.content});if("eContent"in e.encapContentInfo==0)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(e.encapContentInfo.eContent instanceof n.OctetString==0)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');let r=new ArrayBuffer(0);if(!1===e.encapContentInfo.eContent.idBlock.isConstructed)r=e.encapContentInfo.eContent.valueBlock.valueHex;else for(let t=0;t<e.encapContentInfo.eContent.valueBlock.value.length;t++)r=(0,i.utilConcatBuf)(r,e.encapContentInfo.eContent.valueBlock.value[t].valueBlock.valueHex);const a=n.fromBER(r);if(-1===a.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new g.default({schema:a.result}),t=t.then(()=>e.verify({signer:0,checkChain:!1})).then(e=>!1===e?Promise.reject("Integrity for the PKCS#12 data is broken!"):Promise.resolve(),e=>Promise.reject(`Error during integrity verification: ${e}`))}break;default:return Promise.reject(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}return t.then(()=>this,e=>Promise.reject(`Error during parsing: ${e}`))}}t.Z=w},93085:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(4987)),s=l(r(38570)),o=l(r(96427)),u=l(r(46721));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.encryptionAlgorithm=(0,i.getParametersValue)(e,"encryptionAlgorithm",h.defaultValues("encryptionAlgorithm")),this.encryptedData=(0,i.getParametersValue)(e,"encryptedData",h.defaultValues("encryptedData")),"parsedValue"in e&&(this.parsedValue=(0,i.getParametersValue)(e,"parsedValue",h.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"encryptionAlgorithm":return new a.default;case"encryptedData":return new n.OctetString;case"parsedValue":return{};default:throw new Error(`Invalid member name for PKCS8ShroudedKeyBag class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"encryptionAlgorithm":return a.default.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==0;case"encryptedData":return t.isEqual(h.defaultValues(e));case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error(`Invalid member name for PKCS8ShroudedKeyBag class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[a.default.schema(t.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new n.Choice({value:[new n.OctetString({name:t.encryptedData||"encryptedData"}),new n.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||"encryptedData"})]})]})}fromSchema(e){(0,i.clearProps)(e,["encryptionAlgorithm","encryptedData"]);const t=n.compareSchema(e,e,h.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new a.default({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new n.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}parseInternalValues(e){let t=Promise.resolve();const r=new s.default({encryptedContentInfo:new o.default({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return t=t.then(()=>r.decrypt(e),e=>Promise.reject(e)),t=t.then(e=>{const t=n.fromBER(e);return-1===t.offset?Promise.reject("Error during parsing ASN.1 data"):(this.parsedValue=new u.default({schema:t.result}),Promise.resolve())},e=>Promise.reject(e)),t}makeInternalValues(e){if("parsedValue"in this==0)return Promise.reject('Please initialize "parsedValue" first');let t=Promise.resolve();const r=new s.default;return t=t.then(()=>(e.contentToEncrypt=this.parsedValue.toSchema().toBER(!1),r.encrypt(e)),e=>Promise.reject(e)),t=t.then(()=>{this.encryptionAlgorithm=r.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=r.encryptedContentInfo.encryptedContent}),t}}t.default=h},60242:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.version=(0,a.getParametersValue)(e,"version",u.defaultValues("version")),"keyDerivationAlgorithm"in e&&(this.keyDerivationAlgorithm=(0,a.getParametersValue)(e,"keyDerivationAlgorithm",u.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=(0,a.getParametersValue)(e,"keyEncryptionAlgorithm",u.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,a.getParametersValue)(e,"encryptedKey",u.defaultValues("encryptedKey")),this.password=(0,a.getParametersValue)(e,"password",u.defaultValues("password")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return new s.default;case"encryptedKey":return new i.OctetString;case"password":return new ArrayBuffer(0);default:throw new Error(`Invalid member name for PasswordRecipientinfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return-1===t;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"encryptedKey":return t.isEqual(u.defaultValues("encryptedKey"));case"password":return 0===t.byteLength;default:throw new Error(`Invalid member name for PasswordRecipientinfo class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Integer({name:t.version||""}),new i.Constructed({name:t.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:s.default.schema().valueBlock.value}),s.default.schema(t.keyEncryptionAlgorithm||{}),new i.OctetString({name:t.encryptedKey||""})]})}fromSchema(e){(0,a.clearProps)(e,["version","keyDerivationAlgorithm","keyEncryptionAlgorithm","encryptedKey"]);const t=i.compareSchema(e,e,u.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=t.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in t.result&&(this.keyDerivationAlgorithm=new s.default({schema:new i.Sequence({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new s.default({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new i.Integer({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new i.Sequence({value:e})}toJSON(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}t.default=u},71907:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){"requireExplicitPolicy"in e&&(this.requireExplicitPolicy=(0,i.getParametersValue)(e,"requireExplicitPolicy",s.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in e&&(this.inhibitPolicyMapping=(0,i.getParametersValue)(e,"inhibitPolicyMapping",s.defaultValues("inhibitPolicyMapping"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error(`Invalid member name for PolicyConstraints class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){(0,i.clearProps)(e,["requireExplicitPolicy","inhibitPolicyMapping"]);const t=n.compareSchema(e,e,s.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const r=e.toBER(!1),i=n.fromBER(r);this.requireExplicitPolicy=i.result.valueBlock.valueDec}if("inhibitPolicyMapping"in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const r=e.toBER(!1),i=n.fromBER(r);this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if("requireExplicitPolicy"in this){const t=new n.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){const t=new n.Integer({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new n.Sequence({value:e})}toJSON(){const e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}t.default=s},9490:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(38745))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.policyIdentifier=(0,a.getParametersValue)(e,"policyIdentifier",u.defaultValues("policyIdentifier")),"policyQualifiers"in e&&(this.policyQualifiers=(0,a.getParametersValue)(e,"policyQualifiers",u.defaultValues("policyQualifiers"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error(`Invalid member name for PolicyInformation class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.ObjectIdentifier({name:t.policyIdentifier||""}),new i.Sequence({optional:!0,value:[new i.Repeated({name:t.policyQualifiers||"",value:s.default.schema()})]})]})}fromSchema(e){(0,a.clearProps)(e,["policyIdentifier","policyQualifiers"]);const t=i.compareSchema(e,e,u.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,e=>new s.default({schema:e})))}toSchema(){const e=[];return e.push(new i.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new i.Sequence({value:Array.from(this.policyQualifiers,e=>e.toSchema())})),new i.Sequence({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,e=>e.toJSON())),e}}t.default=u},45632:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.issuerDomainPolicy=(0,i.getParametersValue)(e,"issuerDomainPolicy",s.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,i.getParametersValue)(e,"subjectDomainPolicy",s.defaultValues("subjectDomainPolicy")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error(`Invalid member name for PolicyMapping class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new n.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}fromSchema(e){(0,i.clearProps)(e,["issuerDomainPolicy","subjectDomainPolicy"]);const t=n.compareSchema(e,e,s.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.issuerDomainPolicy}),new n.ObjectIdentifier({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}t.default=s},58220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(45632))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.mappings=(0,a.getParametersValue)(e,"mappings",u.defaultValues("mappings")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"mappings":return[];default:throw new Error(`Invalid member name for PolicyMappings class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.mappings||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["mappings"]);const t=i.compareSchema(e,e,u.schema({names:{mappings:"mappings"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(t.result.mappings,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}t.default=u},38745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.policyQualifierId=(0,i.getParametersValue)(e,"policyQualifierId",s.defaultValues("policyQualifierId")),this.qualifier=(0,i.getParametersValue)(e,"qualifier",s.defaultValues("qualifier")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new n.Any;default:throw new Error(`Invalid member name for PolicyQualifierInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.policyQualifierId||""}),new n.Any({name:t.qualifier||""})]})}fromSchema(e){(0,i.clearProps)(e,["policyQualifierId","qualifier"]);const t=n.compareSchema(e,e,s.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}t.default=s},46721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(4987)),s=l(r(68681)),o=l(r(43818)),u=l(r(66323));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",h.defaultValues("version")),this.privateKeyAlgorithm=(0,i.getParametersValue)(e,"privateKeyAlgorithm",h.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,i.getParametersValue)(e,"privateKey",h.defaultValues("privateKey")),"attributes"in e&&(this.attributes=(0,i.getParametersValue)(e,"attributes",h.defaultValues("attributes"))),"parsedKey"in e&&(this.parsedKey=(0,i.getParametersValue)(e,"parsedKey",h.defaultValues("parsedKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new a.default;case"privateKey":return new n.OctetString;case"attributes":return[];case"parsedKey":return{};default:throw new Error(`Invalid member name for PrivateKeyInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.version||""}),a.default.schema(t.privateKeyAlgorithm||{}),new n.OctetString({name:t.privateKey||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Repeated({name:t.attributes||"",value:s.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["version","privateKeyAlgorithm","privateKey","attributes"]);const t=n.compareSchema(e,e,h.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyInfo");switch(this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new a.default({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,"attributes"in t.result&&(this.attributes=Array.from(t.result.attributes,e=>new s.default({schema:e}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=n.fromBER(this.privateKey.valueBlock.valueHex);-1!==e.offset&&(this.parsedKey=new u.default({schema:e.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof n.ObjectIdentifier){const e=n.fromBER(this.privateKey.valueBlock.valueHex);-1!==e.offset&&(this.parsedKey=new o.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result}))}}}toSchema(){const e=[new n.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){if("parsedKey"in this==0){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,e=>e.toJSON())),e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();for(var r=0,n=Object.keys(t);r<n.length;r++){const i=n[r];e[i]=t[i]}return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.default({json:e}),this.privateKeyAlgorithm=new a.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new u.default({json:e}),this.privateKeyAlgorithm=new a.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new n.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}t.default=h},17455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){"notBefore"in e&&(this.notBefore=(0,i.getParametersValue)(e,"notBefore",s.defaultValues("notBefore"))),"notAfter"in e&&(this.notAfter=(0,i.getParametersValue)(e,"notAfter",s.defaultValues("notAfter"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"notBefore":case"notAfter":return new Date;default:throw new Error(`Invalid member name for PrivateKeyUsagePeriod class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Primitive({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new n.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){(0,i.clearProps)(e,["notBefore","notAfter"]);const t=n.compareSchema(e,e,s.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in t.result){const e=new n.GeneralizedTime;e.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=e.toDate()}if("notAfter"in t.result){const e=new n.GeneralizedTime({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=e.toDate()}}toSchema(){const e=[];return"notBefore"in this&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new n.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new n.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new n.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new n.Sequence({value:e})}toJSON(){const e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}t.default=s},20720:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=l(r(4987)),o=l(r(15962)),u=l(r(59627));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.algorithm=(0,i.getParametersValue)(e,"algorithm",h.defaultValues("algorithm")),this.subjectPublicKey=(0,i.getParametersValue)(e,"subjectPublicKey",h.defaultValues("subjectPublicKey")),"parsedKey"in e&&(this.parsedKey=(0,i.getParametersValue)(e,"parsedKey",h.defaultValues("parsedKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"algorithm":return new s.default;case"subjectPublicKey":return new n.BitString;default:throw new Error(`Invalid member name for PublicKeyInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[s.default.schema(t.algorithm||{}),new n.BitString({name:t.subjectPublicKey||""})]})}fromSchema(e){(0,i.clearProps)(e,["algorithm","subjectPublicKey"]);const t=n.compareSchema(e,e,h.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for PublicKeyInfo");switch(this.algorithm=new s.default({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===n.ObjectIdentifier.blockName())try{this.parsedKey=new o.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex})}catch(r){}break;case"1.2.840.113549.1.1.1":{const e=n.fromBER(this.subjectPublicKey.valueBlock.valueHex);if(-1!==e.offset)try{this.parsedKey=new u.default({schema:e.result})}catch(r){}}}}toSchema(){return new n.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if("parsedKey"in this==0)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();for(var r=0,n=Object.keys(t);r<n.length;r++){const i=n[r];e[i]=t[i]}return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.default({json:e}),this.algorithm=new s.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new u.default({json:e}),this.algorithm=new s.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new n.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(e){let t=Promise.resolve();const r=this;if(void 0===e)return Promise.reject("Need to provide publicKey input parameter");const i=(0,a.getCrypto)();return void 0===i?Promise.reject("Unable to create WebCrypto object"):(t=t.then(()=>i.exportKey("spki",e)),t=t.then(e=>{const t=n.fromBER(e);try{r.fromSchema(t.result)}catch(i){return Promise.reject("Error during initializing object from schema")}},e=>Promise.reject(`Error during exporting public key: ${e}`)),t)}}t.default=h},11663:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QCStatement=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.id=(0,i.getParametersValue)(e,"id",s.defaultValues("id")),"type"in e&&(this.type=(0,i.getParametersValue)(e,"type",s.defaultValues("type"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"id":return"";case"type":return new n.Null;default:throw new Error(`Invalid member name for QCStatement class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"id":return""===t;case"type":return t instanceof n.Null;default:throw new Error(`Invalid member name for QCStatement class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||""}),new n.Any({name:t.type||"",optional:!0})]})}fromSchema(e){(0,i.clearProps)(e,["id","type"]);const t=n.compareSchema(e,e,s.schema({names:{id:"id",type:"type"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for QCStatement");this.id=t.result.id.valueBlock.toString(),"type"in t.result&&(this.type=t.result.type)}toSchema(){const e=[new n.ObjectIdentifier({value:this.id})];return"type"in this&&e.push(this.type),new n.Sequence({value:e})}toJSON(){const e={id:this.id};return"type"in this&&(e.type=this.type.toJSON()),e}}t.QCStatement=s;class o{constructor(e={}){this.values=(0,i.getParametersValue)(e,"values",o.defaultValues("values")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"values":return[];default:throw new Error(`Invalid member name for QCStatements class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"values":return 0===t.length;default:throw new Error(`Invalid member name for QCStatements class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Repeated({name:t.values||"",value:s.schema(t.value||{})})]})}fromSchema(e){(0,i.clearProps)(e,["values"]);const t=n.compareSchema(e,e,o.schema({names:{values:"values"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for QCStatements");this.values=Array.from(t.result.values,e=>new s({schema:e}))}toSchema(){return new n.Sequence({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{extensions:Array.from(this.values,e=>e.toJSON())}}}t.default=o},56701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.hashAlgorithm=(0,a.getParametersValue)(e,"hashAlgorithm",u.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,a.getParametersValue)(e,"maskGenAlgorithm",u.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=(0,a.getParametersValue)(e,"pSourceAlgorithm",u.defaultValues("pSourceAlgorithm")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new i.Null});case"maskGenAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new i.Null}).toSchema()});case"pSourceAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new i.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error(`Invalid member name for RSAESOAEPParams class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[s.default.schema(t.hashAlgorithm||{})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[s.default.schema(t.maskGenAlgorithm||{})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[s.default.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){(0,a.clearProps)(e,["hashAlgorithm","maskGenAlgorithm","pSourceAlgorithm"]);const t=i.compareSchema(e,e,u.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in t.result&&(this.hashAlgorithm=new s.default({schema:t.result.hashAlgorithm})),"maskGenAlgorithm"in t.result&&(this.maskGenAlgorithm=new s.default({schema:t.result.maskGenAlgorithm})),"pSourceAlgorithm"in t.result&&(this.pSourceAlgorithm=new s.default({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(u.defaultValues("hashAlgorithm"))||e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(u.defaultValues("maskGenAlgorithm"))||e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(u.defaultValues("pSourceAlgorithm"))||e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new i.Sequence({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(u.defaultValues("hashAlgorithm"))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(u.defaultValues("maskGenAlgorithm"))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(u.defaultValues("pSourceAlgorithm"))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}t.default=u},66323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(10176))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.version=(0,a.getParametersValue)(e,"version",u.defaultValues("version")),this.modulus=(0,a.getParametersValue)(e,"modulus",u.defaultValues("modulus")),this.publicExponent=(0,a.getParametersValue)(e,"publicExponent",u.defaultValues("publicExponent")),this.privateExponent=(0,a.getParametersValue)(e,"privateExponent",u.defaultValues("privateExponent")),this.prime1=(0,a.getParametersValue)(e,"prime1",u.defaultValues("prime1")),this.prime2=(0,a.getParametersValue)(e,"prime2",u.defaultValues("prime2")),this.exponent1=(0,a.getParametersValue)(e,"exponent1",u.defaultValues("exponent1")),this.exponent2=(0,a.getParametersValue)(e,"exponent2",u.defaultValues("exponent2")),this.coefficient=(0,a.getParametersValue)(e,"coefficient",u.defaultValues("coefficient")),"otherPrimeInfos"in e&&(this.otherPrimeInfos=(0,a.getParametersValue)(e,"otherPrimeInfos",u.defaultValues("otherPrimeInfos"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new i.Integer;case"otherPrimeInfos":return[];default:throw new Error(`Invalid member name for RSAPrivateKey class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Integer({name:t.version||""}),new i.Integer({name:t.modulus||""}),new i.Integer({name:t.publicExponent||""}),new i.Integer({name:t.privateExponent||""}),new i.Integer({name:t.prime1||""}),new i.Integer({name:t.prime2||""}),new i.Integer({name:t.exponent1||""}),new i.Integer({name:t.exponent2||""}),new i.Integer({name:t.coefficient||""}),new i.Sequence({optional:!0,value:[new i.Repeated({name:t.otherPrimeInfosName||"",value:s.default.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){(0,a.clearProps)(e,["version","modulus","publicExponent","privateExponent","prime1","prime2","exponent1","exponent2","coefficient","otherPrimeInfos"]);const t=i.compareSchema(e,e,u.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),"otherPrimeInfos"in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,e=>new s.default({schema:e})))}toSchema(){const e=[];return e.push(new i.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new i.Sequence({value:Array.from(this.otherPrimeInfos,e=>e.toSchema())})),new i.Sequence({value:e})}toJSON(){const e={n:(0,a.toBase64)((0,a.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,a.toBase64)((0,a.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:(0,a.toBase64)((0,a.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:(0,a.toBase64)((0,a.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:(0,a.toBase64)((0,a.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:(0,a.toBase64)((0,a.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:(0,a.toBase64)((0,a.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:(0,a.toBase64)((0,a.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,e=>e.toJSON())),e}fromJSON(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new i.Integer({valueHex:(0,a.stringToArrayBuffer)((0,a.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,e=>new s.default({json:e})))}}t.default=u},59627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.modulus=(0,i.getParametersValue)(e,"modulus",s.defaultValues("modulus")),this.publicExponent=(0,i.getParametersValue)(e,"publicExponent",s.defaultValues("publicExponent")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"modulus":case"publicExponent":return new n.Integer;default:throw new Error(`Invalid member name for RSAPublicKey class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.modulus||""}),new n.Integer({name:t.publicExponent||""})]})}fromSchema(e){(0,i.clearProps)(e,["modulus","publicExponent"]);const t=n.compareSchema(e,e,s.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new n.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:(0,i.toBase64)((0,i.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,i.toBase64)((0,i.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}fromJSON(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');{const t=(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.n,!0));this.modulus=new n.Integer({valueHex:t.slice(0,Math.pow(2,(0,i.nearestPowerOf2)(t.byteLength)))})}if(!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new n.Integer({valueHex:(0,i.stringToArrayBuffer)((0,i.fromBase64)(e.e,!0)).slice(0,3)})}}t.default=s},13272:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(4987))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.hashAlgorithm=(0,a.getParametersValue)(e,"hashAlgorithm",u.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,a.getParametersValue)(e,"maskGenAlgorithm",u.defaultValues("maskGenAlgorithm")),this.saltLength=(0,a.getParametersValue)(e,"saltLength",u.defaultValues("saltLength")),this.trailerField=(0,a.getParametersValue)(e,"trailerField",u.defaultValues("trailerField")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new i.Null});case"maskGenAlgorithm":return new s.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new s.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new i.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error(`Invalid member name for RSASSAPSSParams class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[s.default.schema(t.hashAlgorithm||{})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[s.default.schema(t.maskGenAlgorithm||{})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new i.Integer({name:t.saltLength||""})]}),new i.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new i.Integer({name:t.trailerField||""})]})]})}fromSchema(e){(0,a.clearProps)(e,["hashAlgorithm","maskGenAlgorithm","saltLength","trailerField"]);const t=i.compareSchema(e,e,u.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RSASSAPSSParams");"hashAlgorithm"in t.result&&(this.hashAlgorithm=new s.default({schema:t.result.hashAlgorithm})),"maskGenAlgorithm"in t.result&&(this.maskGenAlgorithm=new s.default({schema:t.result.maskGenAlgorithm})),"saltLength"in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),"trailerField"in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(u.defaultValues("hashAlgorithm"))||e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(u.defaultValues("maskGenAlgorithm"))||e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==u.defaultValues("saltLength")&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new i.Integer({value:this.saltLength})]})),this.trailerField!==u.defaultValues("trailerField")&&e.push(new i.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new i.Integer({value:this.trailerField})]})),new i.Sequence({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(u.defaultValues("hashAlgorithm"))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(u.defaultValues("maskGenAlgorithm"))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==u.defaultValues("saltLength")&&(e.saltLength=this.saltLength),this.trailerField!==u.defaultValues("trailerField")&&(e.trailerField=this.trailerField),e}}t.default=u},38847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(70785))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.rid=(0,a.getParametersValue)(e,"rid",u.defaultValues("rid")),this.encryptedKey=(0,a.getParametersValue)(e,"encryptedKey",u.defaultValues("encryptedKey")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"rid":return new s.default;case"encryptedKey":return new i.OctetString;default:throw new Error(`Invalid member name for RecipientEncryptedKey class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"rid":return-1===t.variant&&"value"in t==0;case"encryptedKey":return t.isEqual(u.defaultValues("encryptedKey"));default:throw new Error(`Invalid member name for RecipientEncryptedKey class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[s.default.schema(t.rid||{}),new i.OctetString({name:t.encryptedKey||""})]})}fromSchema(e){(0,a.clearProps)(e,["rid","encryptedKey"]);const t=i.compareSchema(e,e,u.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new s.default({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new i.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}t.default=u},2428:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(38847))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.encryptedKeys=(0,a.getParametersValue)(e,"encryptedKeys",u.defaultValues("encryptedKeys")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"encryptedKeys":return[];default:throw new Error(`Invalid member name for RecipientEncryptedKeys class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error(`Invalid member name for RecipientEncryptedKeys class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.RecipientEncryptedKeys||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["RecipientEncryptedKeys"]);const t=i.compareSchema(e,e,u.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}t.default=u},56631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(35529))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.variant=(0,a.getParametersValue)(e,"variant",u.defaultValues("variant")),"value"in e&&(this.value=(0,a.getParametersValue)(e,"value",u.defaultValues("value"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error(`Invalid member name for RecipientIdentifier class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"variant":return-1===t;case"values":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for RecipientIdentifier class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Choice({value:[s.default.schema({names:{blockName:t.blockName||""}}),new i.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){(0,a.clearProps)(e,["blockName"]);const t=i.compareSchema(e,e,u.schema({names:{blockName:"blockName"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new s.default({schema:t.result.blockName})):(this.variant=2,this.value=new i.OctetString({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new i.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHex});default:return new i.Any}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}t.default=u},16475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=c(r(20332)),s=c(r(52857)),o=c(r(40590)),u=c(r(60242)),l=c(r(41751));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}class f{constructor(e={}){this.variant=(0,i.getParametersValue)(e,"variant",f.defaultValues("variant")),"value"in e&&(this.value=(0,i.getParametersValue)(e,"value",f.defaultValues("value"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error(`Invalid member name for RecipientInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"variant":return t===f.defaultValues(e);case"value":return 0===Object.keys(t).length;default:throw new Error(`Invalid member name for RecipientInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Choice({value:[a.default.schema({names:{blockName:t.blockName||""}}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:s.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:o.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:u.default.schema().valueBlock.value}),new n.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:l.default.schema().valueBlock.value})]})}fromSchema(e){(0,i.clearProps)(e,["blockName"]);const t=n.compareSchema(e,e,f.schema({names:{blockName:"blockName"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RecipientInfo");if(1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new a.default({schema:t.result.blockName});else{const e=new n.Sequence({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new s.default({schema:e});break;case 2:this.variant=3,this.value=new o.default({schema:e});break;case 3:this.variant=4,this.value=new u.default({schema:e});break;case 4:this.variant=5,this.value=new l.default({schema:e});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new n.Any}}toJSON(){const e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}t.default=f},35717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(32038))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.subjectKeyIdentifier=(0,a.getParametersValue)(e,"subjectKeyIdentifier",u.defaultValues("subjectKeyIdentifier")),"date"in e&&(this.date=(0,a.getParametersValue)(e,"date",u.defaultValues("date"))),"other"in e&&(this.other=(0,a.getParametersValue)(e,"other",u.defaultValues("other"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"subjectKeyIdentifier":return new i.OctetString;case"date":return new i.GeneralizedTime;case"other":return new s.default;default:throw new Error(`Invalid member name for RecipientKeyIdentifier class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"subjectKeyIdentifier":return t.isEqual(u.defaultValues("subjectKeyIdentifier"));case"date":return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case"other":return""===t.keyAttrId&&"keyAttr"in t==0;default:throw new Error(`Invalid member name for RecipientKeyIdentifier class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.OctetString({name:t.subjectKeyIdentifier||""}),new i.GeneralizedTime({optional:!0,name:t.date||""}),s.default.schema(t.other||{})]})}fromSchema(e){(0,a.clearProps)(e,["subjectKeyIdentifier","date","other"]);const t=i.compareSchema(e,e,u.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,"date"in t.result&&(this.date=t.result.date),"other"in t.result&&(this.other=new s.default({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new i.Sequence({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}t.default=u},2446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(45402))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class c{constructor(e={}){this.typesAndValues=(0,a.getParametersValue)(e,"typesAndValues",c.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,a.getParametersValue)(e,"valueBeforeDecode",c.defaultValues("valueBeforeDecode")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error(`Invalid member name for RelativeDistinguishedNames class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error(`Invalid member name for RelativeDistinguishedNames class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.repeatedSequence||"",value:new i.Set({value:[new i.Repeated({name:t.repeatedSet||"",value:s.default.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){(0,a.clearProps)(e,["RDN","typesAndValues"]);const t=i.compareSchema(e,e,c.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RelativeDistinguishedNames");"typesAndValues"in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,e=>new s.default({schema:e}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecode}toSchema(){return 0===this.valueBeforeDecode.byteLength?new i.Sequence({value:[new i.Set({value:Array.from(this.typesAndValues,e=>e.toSchema())})]}):i.fromBER(this.valueBeforeDecode).result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof c){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(this.typesAndValues.entries());try{for(r.s();!(t=r.n()).done;){const r=(2,function(e){if(Array.isArray(e))return e}(n=t.value)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),2!==a.length);s=!0);}catch(u){o=!0,i=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(n)||u(n,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(!1===r[1].isEqual(e.typesAndValues[r[0]]))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}var n;return e instanceof ArrayBuffer&&(0,a.isEqualBuffer)(this.valueBeforeDecode,e)}}t.default=c},73229:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=l(r(2446)),s=l(r(71852)),o=l(r(51090)),u=l(r(39327));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}class h{constructor(e={}){this.tbs=(0,i.getParametersValue)(e,"tbs",h.defaultValues("tbs")),this.responderID=(0,i.getParametersValue)(e,"responderID",h.defaultValues("responderID")),this.producedAt=(0,i.getParametersValue)(e,"producedAt",h.defaultValues("producedAt")),this.responses=(0,i.getParametersValue)(e,"responses",h.defaultValues("responses")),"responseExtensions"in e&&(this.responseExtensions=(0,i.getParametersValue)(e,"responseExtensions",h.defaultValues("responseExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error(`Invalid member name for ResponseData class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"tbs":return 0===t.byteLength;case"responderID":return 0===Object.keys(t).length;case"producedAt":return t===h.defaultValues(e);case"responses":case"responseExtensions":return 0===t.length;default:throw new Error(`Invalid member name for ResponseData class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"ResponseData",value:[new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({name:t.version||"ResponseData.version"})]}),new n.Choice({value:[new n.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[a.default.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new n.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new n.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new n.GeneralizedTime({name:t.producedAt||"ResponseData.producedAt"}),new n.Sequence({value:[new n.Repeated({name:"ResponseData.responses",value:s.default.schema(t.response||{})})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[u.default.schema(t.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}fromSchema(e){(0,i.clearProps)(e,["ResponseData","ResponseData.version","ResponseData.responderID","ResponseData.producedAt","ResponseData.responses","ResponseData.responseExtensions"]);const t=n.compareSchema(e,e,h.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for ResponseData");this.tbs=t.result.ResponseData.valueBeforeDecode,"ResponseData.version"in t.result&&(this.version=t.result["ResponseData.version"].valueBlock.valueDec),this.responderID=1===t.result["ResponseData.responderID"].idBlock.tagNumber?new a.default({schema:t.result["ResponseData.responderID"].valueBlock.value[0]}):t.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=t.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(t.result["ResponseData.responses"],e=>new s.default({schema:e})),"ResponseData.responseExtensions"in t.result&&(this.responseExtensions=Array.from(t.result["ResponseData.responseExtensions"].valueBlock.value,e=>new o.default({schema:e})))}toSchema(e=!1){let t;if(!1===e){if(0===this.tbs.length)return h.schema();t=n.fromBER(this.tbs).result}else{const e=[];"version"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Integer({value:this.version})]})),e.push(new n.Constructed(this.responderID instanceof a.default?{idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}:{idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),e.push(new n.GeneralizedTime({valueDate:this.producedAt})),e.push(new n.Sequence({value:Array.from(this.responses,e=>e.toSchema())})),"responseExtensions"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new n.Sequence({value:Array.from(this.responseExtensions,e=>e.toSchema())})]})),t=new n.Sequence({value:e})}return t}toJSON(){const e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,e=>e.toJSON())),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,e=>e.toJSON())),e}}t.default=h},88367:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(79394)),s=o(r(75341));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class c{constructor(e={}){this.crls=(0,i.getParametersValue)(e,"crls",c.defaultValues("crls")),this.otherRevocationInfos=(0,i.getParametersValue)(e,"otherRevocationInfos",c.defaultValues("otherRevocationInfos")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"crls":case"otherRevocationInfos":return[];default:throw new Error(`Invalid member name for RevocationInfoChoices class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Set({name:t.blockName||"",value:[new n.Repeated({name:t.crls||"",value:new n.Choice({value:[a.default.schema(),new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new n.ObjectIdentifier,new n.Any]})]})})]})}fromSchema(e){(0,i.clearProps)(e,["crls"]);const t=n.compareSchema(e,e,c.schema({names:{crls:"crls"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RevocationInfoChoices");var r,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,void 0):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(t.result.crls);try{for(o.s();!(r=o.n()).done;){const e=r.value;1===e.idBlock.tagClass?this.crls.push(new a.default({schema:e})):this.otherRevocationInfos.push(new s.default({schema:e}))}}catch(u){o.e(u)}finally{o.f()}}toSchema(){const e=[];return e.push(...Array.from(this.crls,e=>e.toSchema())),e.push(...Array.from(this.otherRevocationInfos,e=>{const t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t})),new n.Set({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}t.default=c},27414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=o(r(26466)),s=o(r(39327));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}class l{constructor(e={}){this.userCertificate=(0,i.getParametersValue)(e,"userCertificate",l.defaultValues("userCertificate")),this.revocationDate=(0,i.getParametersValue)(e,"revocationDate",l.defaultValues("revocationDate")),"crlEntryExtensions"in e&&(this.crlEntryExtensions=(0,i.getParametersValue)(e,"crlEntryExtensions",l.defaultValues("crlEntryExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"userCertificate":return new n.Integer;case"revocationDate":return new a.default;case"crlEntryExtensions":return new s.default;default:throw new Error(`Invalid member name for RevokedCertificate class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.Integer({name:t.userCertificate||"userCertificate"}),a.default.schema({names:{utcTimeName:t.revocationDate||"revocationDate",generalTimeName:t.revocationDate||"revocationDate"}}),s.default.schema({names:{blockName:t.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}fromSchema(e){(0,i.clearProps)(e,["userCertificate","revocationDate","crlEntryExtensions"]);const t=n.compareSchema(e,e,l.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for RevokedCertificate");this.userCertificate=t.result.userCertificate,this.revocationDate=new a.default({schema:t.result.revocationDate}),"crlEntryExtensions"in t.result&&(this.crlEntryExtensions=new s.default({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new n.Sequence({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}t.default=l},46826:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=f(r(68681)),s=f(r(46721)),o=f(r(93085)),u=f(r(78342)),l=f(r(62983)),c=f(r(30751)),h=f(r(71030));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}class d{constructor(e={}){this.bagId=(0,i.getParametersValue)(e,"bagId",d.defaultValues("bagId")),this.bagValue=(0,i.getParametersValue)(e,"bagValue",d.defaultValues("bagValue")),"bagAttributes"in e&&(this.bagAttributes=(0,i.getParametersValue)(e,"bagAttributes",d.defaultValues("bagAttributes"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"bagId":return"";case"bagValue":return new n.Any;case"bagAttributes":return[];default:throw new Error(`Invalid member name for SafeBag class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof n.Any;case"bagAttributes":return 0===t.length;default:throw new Error(`Invalid member name for SafeBag class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.bagId||"bagId"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.bagValue||"bagValue"})]}),new n.Set({optional:!0,value:[new n.Repeated({name:t.bagAttributes||"bagAttributes",value:a.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["bagId","bagValue","bagAttributes"]);const t=n.compareSchema(e,e,d.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=t.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new s.default({schema:t.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new o.default({schema:t.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new u.default({schema:t.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new l.default({schema:t.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new c.default({schema:t.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new h.default({schema:t.result.bagValue});break;default:throw new Error(`Invalid "bagId" for SafeBag: ${this.bagId}`)}"bagAttributes"in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,e=>new a.default({schema:e})))}toSchema(){const e=[new n.ObjectIdentifier({value:this.bagId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new n.Set({value:Array.from(this.bagAttributes,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,e=>e.toJSON())),e}}t.default=d},71030:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(46826))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.safeBags=(0,a.getParametersValue)(e,"safeBags",u.defaultValues("safeBags")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"safeBags":return[];default:throw new Error(`Invalid member name for SafeContents class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error(`Invalid member name for SafeContents class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.safeBags||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["safeBags"]);const t=i.compareSchema(e,e,u.schema({names:{safeBags:"safeBags"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(t.result.safeBags,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}t.default=u},30751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.secretTypeId=(0,i.getParametersValue)(e,"secretTypeId",s.defaultValues("secretTypeId")),this.secretValue=(0,i.getParametersValue)(e,"secretValue",s.defaultValues("secretValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"secretTypeId":return"";case"secretValue":return new n.Any;default:throw new Error(`Invalid member name for SecretBag class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof n.Any;default:throw new Error(`Invalid member name for SecretBag class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[new n.ObjectIdentifier({name:t.id||"id"}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.Any({name:t.value||"value"})]})]})}fromSchema(e){(0,i.clearProps)(e,["secretTypeId","secretValue"]);const t=n.compareSchema(e,e,s.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new n.Sequence({value:[new n.ObjectIdentifier({value:this.secretTypeId}),new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}t.default=s},89945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(68681))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.type=(0,a.getParametersValue)(e,"type",u.defaultValues("type")),this.attributes=(0,a.getParametersValue)(e,"attributes",u.defaultValues("attributes")),this.encodedValue=(0,a.getParametersValue)(e,"encodedValue",u.defaultValues("encodedValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error(`Invalid member name for SignedAndUnsignedAttributes class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"type":return t===u.defaultValues("type");case"attributes":return 0===t.length;case"encodedValue":return 0===t.byteLength;default:throw new Error(`Invalid member name for SignedAndUnsignedAttributes class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Constructed({name:t.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber},value:[new i.Repeated({name:t.attributes||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["attributes"]);const t=i.compareSchema(e,e,u.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SignedAndUnsignedAttributes");if(this.type=t.result.idBlock.tagNumber,this.encodedValue=t.result.valueBeforeDecode,new Uint8Array(this.encodedValue)[0]=49,"attributes"in t.result!=0)this.attributes=Array.from(t.result.attributes,e=>new s.default({schema:e}));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(u.compareWithDefault("type",this.type)||u.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new i.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(u.compareWithDefault("type",this.type)||u.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}t.default=u},34840:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SignedCertificateTimestamp=void 0,t.verifySCTsForCertificate=function(e,t,r){return g.apply(this,arguments)};var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=r(28807),o=r(97226),u=(n=r(20720))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){f(a,n,i,s,o,"next",e)}function o(e){f(a,n,i,s,o,"throw",e)}s(void 0)})}}class d{constructor(e={}){this.version=(0,a.getParametersValue)(e,"version",d.defaultValues("version")),this.logID=(0,a.getParametersValue)(e,"logID",d.defaultValues("logID")),this.timestamp=(0,a.getParametersValue)(e,"timestamp",d.defaultValues("timestamp")),this.extensions=(0,a.getParametersValue)(e,"extensions",d.defaultValues("extensions")),this.hashAlgorithm=(0,a.getParametersValue)(e,"hashAlgorithm",d.defaultValues("hashAlgorithm")),this.signatureAlgorithm=(0,a.getParametersValue)(e,"signatureAlgorithm",d.defaultValues("signatureAlgorithm")),this.signature=(0,a.getParametersValue)(e,"signature",d.defaultValues("signature")),"schema"in e&&this.fromSchema(e.schema),"stream"in e&&this.fromStream(e.stream)}static defaultValues(e){switch(e){case"version":return 0;case"logID":case"extensions":return new ArrayBuffer(0);case"timestamp":return new Date(0);case"hashAlgorithm":case"signatureAlgorithm":return"";case"signature":return new i.Any;default:throw new Error(`Invalid member name for SignedCertificateTimestamp class: ${e}`)}}fromSchema(e){if(e instanceof i.RawData==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new s.SeqStream({stream:new s.ByteStream({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date((0,a.utilFromBase)(new Uint8Array(e.getBlock(8)),8));const r=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm="anonymous";break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const n=e.getUint16(),s=new Uint8Array(e.getBlock(n)).buffer.slice(0),o=i.fromBER(s);if(-1===o.offset)throw new Error("Object's stream was not correct for SignedCertificateTimestamp");if(this.signature=o.result,t!==47+r+n)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new i.RawData({data:e.stream.buffer})}toStream(){const e=new s.SeqStream;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecode.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),r=new Uint8Array(t),n=(0,a.utilToBase)(this.timestamp.valueOf(),8);let i,o;switch(r.set(new Uint8Array(n),8-n.byteLength),e.appendView(r),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":i=0;break;case"md5":i=1;break;case"sha1":i=2;break;case"sha224":i=3;break;case"sha256":i=4;break;case"sha384":i=5;break;case"sha512":i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(e.appendChar(i),this.signatureAlgorithm.toLowerCase()){case"anonymous":o=0;break;case"rsa":o=1;break;case"dsa":o=2;break;case"ecdsa":o=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(o);const u=this.signature.toBER(!1);return e.appendUint16(u.byteLength),e.appendView(new Uint8Array(u)),e}toJSON(){return{version:this.version,logID:(0,a.bufferToHexCodes)(this.logID),timestamp:this.timestamp,extensions:(0,a.bufferToHexCodes)(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}verify(e,t,r=0){var n=this;return m(function*(){let l,h=(0,a.toBase64)((0,a.arrayBufferToString)(n.logID)),f=null,m=new s.SeqStream;var d,p=c(e);try{for(p.s();!(d=p.n()).done;){const e=d.value;if(e.log_id===h){f=e.key;break}}}catch(w){p.e(w)}finally{p.f()}if(null===f)throw new Error(`Public key not found for CT with logId: ${h}`);const g=i.fromBER((0,a.stringToArrayBuffer)((0,a.fromBase64)(f)));if(-1===g.offset)throw new Error(`Incorrect key value for CT Log with logId: ${h}`);l=new u.default({schema:g.result}),m.appendChar(0),m.appendChar(0);const y=new ArrayBuffer(8),v=new Uint8Array(y),b=(0,a.utilToBase)(n.timestamp.valueOf(),8);return v.set(new Uint8Array(b),8-b.byteLength),m.appendView(v),m.appendUint16(r),0===r&&m.appendUint24(t.byteLength),m.appendView(new Uint8Array(t)),m.appendUint16(n.extensions.byteLength),0!==n.extensions.byteLength&&m.appendView(new Uint8Array(n.extensions)),(0,o.getEngine)().subtle.verifyWithPublicKey(m._stream._buffer.slice(0,m._length),{valueBlock:{valueHex:n.signature.toBER(!1)}},l,{algorithmId:""},"SHA-256")})()}}t.SignedCertificateTimestamp=d;class p{constructor(e={}){this.timestamps=(0,a.getParametersValue)(e,"timestamps",p.defaultValues("timestamps")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"timestamps":return[];default:throw new Error(`Invalid member name for SignedCertificateTimestampList class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"timestamps":return 0===t.length;default:throw new Error(`Invalid member name for SignedCertificateTimestampList class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new i.OctetString({name:t.blockName||"SignedCertificateTimestampList",optional:t.optional})}fromSchema(e){if(e instanceof i.OctetString==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new s.SeqStream({stream:new s.ByteStream({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new d({stream:t}))}toSchema(){const e=new s.SeqStream;let t=0;const r=[];var n,a=c(this.timestamps);try{for(a.s();!(n=a.n()).done;){const e=n.value.toStream();r.push(e),t+=e.stream.buffer.byteLength}}catch(l){a.e(l)}finally{a.f()}e.appendUint16(t);for(var o=0,u=r;o<u.length;o++)e.appendView(u[o].stream.view);return new i.OctetString({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}function g(){return(g=m(function*(e,t,r,n=-1){let i,a,u=null;const l=new s.SeqStream;let h;const f=(0,o.getCrypto)();if(void 0===f)return Promise.reject("Unable to create WebCrypto object");for(let s=0;s<e.extensions.length;s++)switch(e.extensions[s].extnID){case"1.3.6.1.4.1.11129.2.4.2":if(u=e.extensions[s].parsedValue,0===u.timestamps.length)throw new Error("Nothing to verify in the certificate");e.extensions.splice(s,1)}if(null===u)throw new Error("No SignedCertificateTimestampList extension in the specified certificate");if(i=e.encodeTBS().toBER(!1),a=yield f.digest({name:"SHA-256"},new Uint8Array(t.subjectPublicKeyInfo.toSchema().toBER(!1))),l.appendView(new Uint8Array(a)),l.appendUint24(i.byteLength),l.appendView(new Uint8Array(i)),h=l._stream._buffer.slice(0,l._length),-1===n){const e=[];var m,d=c(u.timestamps);try{for(d.s();!(m=d.n()).done;){const t=m.value,n=yield t.verify(r,h,1);e.push(n)}}catch(p){d.e(p)}finally{d.f()}return e}return n>=u.timestamps.length&&(n=u.timestamps.length-1),[yield u.timestamps[n].verify(r,h,1)]})).apply(this,arguments)}t.default=p},52386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=k(r(4987)),o=k(r(63788)),u=k(r(35585)),l=k(r(79394)),c=k(r(75341)),h=k(r(70815)),f=k(r(545)),m=k(r(88367)),d=k(r(35529)),p=k(r(77126)),g=k(r(20624)),y=k(r(77597)),v=k(r(99600)),b=k(r(64445)),w=k(r(73766));function k(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function P(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(l){return void r(l)}o.done?t(u):Promise.resolve(u).then(n,i)}function A(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return C(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}class I{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",I.defaultValues("version")),this.digestAlgorithms=(0,i.getParametersValue)(e,"digestAlgorithms",I.defaultValues("digestAlgorithms")),this.encapContentInfo=(0,i.getParametersValue)(e,"encapContentInfo",I.defaultValues("encapContentInfo")),"certificates"in e&&(this.certificates=(0,i.getParametersValue)(e,"certificates",I.defaultValues("certificates"))),"crls"in e&&(this.crls=(0,i.getParametersValue)(e,"crls",I.defaultValues("crls"))),"ocsps"in e&&(this.ocsps=(0,i.getParametersValue)(e,"ocsps",I.defaultValues("ocsps"))),this.signerInfos=(0,i.getParametersValue)(e,"signerInfos",I.defaultValues("signerInfos")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new o.default;case"certificates":case"crls":case"ocsps":case"signerInfos":return[];default:throw new Error(`Invalid member name for SignedData class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return t===I.defaultValues("version");case"encapContentInfo":return new o.default;case"digestAlgorithms":case"certificates":case"crls":case"ocsps":case"signerInfos":return 0===t.length;default:throw new Error(`Invalid member name for SignedData class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return"optional"in t==0&&(t.optional=!1),new n.Sequence({name:t.blockName||"SignedData",optional:t.optional,value:[new n.Integer({name:t.version||"SignedData.version"}),new n.Set({value:[new n.Repeated({name:t.digestAlgorithms||"SignedData.digestAlgorithms",value:s.default.schema()})]}),o.default.schema(t.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new n.Constructed({name:t.certificates||"SignedData.certificates",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema(t.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new n.Set({value:[new n.Repeated({name:t.signerInfos||"SignedData.signerInfos",value:h.default.schema()})]})]})}fromSchema(e){(0,i.clearProps)(e,["SignedData.version","SignedData.digestAlgorithms","SignedData.encapContentInfo","SignedData.certificates","SignedData.crls","SignedData.signerInfos"]);const t=n.compareSchema(e,e,I.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SignedData");if(this.version=t.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in t.result&&(this.digestAlgorithms=Array.from(t.result["SignedData.digestAlgorithms"],e=>new s.default({schema:e}))),this.encapContentInfo=new o.default({schema:t.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in t.result){const e=new f.default({schema:new n.Set({value:t.result["SignedData.certificates"].valueBlock.value})});this.certificates=e.certificates.slice(0)}"SignedData.crls"in t.result&&(this.crls=Array.from(t.result["SignedData.crls"],e=>1===e.idBlock.tagClass?new l.default({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new c.default({schema:e})))),"SignedData.signerInfos"in t.result&&(this.signerInfos=Array.from(t.result["SignedData.signerInfos"],e=>new h.default({schema:e})))}toSchema(e=!1){const t=[];if(this.version=this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof v.default)||this.crls&&this.crls.length&&this.crls.some(e=>e instanceof c.default)?5:this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof w.default)?4:this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof b.default)||this.signerInfos.some(e=>3===e.version)||this.encapContentInfo.eContentType!==I.ID_DATA?3:1,t.push(new n.Integer({value:this.version})),t.push(new n.Set({value:Array.from(this.digestAlgorithms,t=>t.toSchema(e))})),t.push(this.encapContentInfo.toSchema()),"certificates"in this){const e=new f.default({certificates:this.certificates}).toSchema();t.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:e.valueBlock.value}))}return"crls"in this&&t.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,t=>{if(t instanceof c.default){const r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return t.toSchema(e)})})),t.push(new n.Set({value:Array.from(this.signerInfos,t=>t.toSchema(e))})),new n.Sequence({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,e=>e.toJSON()),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,e=>e.toJSON())),"crls"in this&&(e.crls=Array.from(this.crls,e=>e.toJSON())),e.signerInfos=Array.from(this.signerInfos,e=>e.toJSON()),e}verify({signer:e=-1,data:t=new ArrayBuffer(0),trustedCerts:r=[],checkDate:s=new Date,checkChain:o=!1,extendedMode:l=!1,passedWhenNotRevValues:c=!1,findOrigin:h=null,findIssuer:f=null}={}){var m=this;let v=Promise.resolve(),b=new ArrayBuffer(0),w="",k={},S=null,C=[];const I=(0,a.getEngine)(),O=(0,a.getCrypto)();return void 0===O?Promise.reject("Unable to create WebCrypto object"):-1===e?Promise.reject(l?{date:s,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"Unable to get signer index from input parameters"):"certificates"in this==0?Promise.reject(l?{date:s,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"No certificates attached to this signed data"):(v=this.signerInfos[e].sid instanceof d.default?v.then(()=>{var t,r=A(this.certificates);try{for(r.s();!(t=r.n()).done;){const r=t.value;if(r instanceof u.default!=0&&r.issuer.isEqual(this.signerInfos[e].sid.issuer)&&r.serialNumber.isEqual(this.signerInfos[e].sid.serialNumber))return k=r,Promise.resolve()}}catch(n){r.e(n)}finally{r.f()}return Promise.reject(l?{date:s,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}:"Unable to find signer certificate")}):(B=function*(){try{const a=m.signerInfos[e].sid,s=a.idBlock.isConstructed?a.valueBlock.value[0].valueBlock.valueHex:a.valueBlock.valueHex;var t,r=A(m.certificates);try{for(r.s();!(t=r.n()).done;){const e=t.value;if(!(e instanceof u.default))continue;const r=yield O.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex));if((0,i.isEqualBuffer)(r,s)){k=e;break}}}catch(n){r.e(n)}finally{r.f()}if(!k)throw new Error("Signing certificate not found")}catch(a){if(l)return Promise.reject({date:s,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null});throw"Unable to find signer certificate"}},function(){var e=this,t=arguments;return new Promise(function(r,n){var i=B.apply(e,t);function a(e){P(i,r,n,a,s,"next",e)}function s(e){P(i,r,n,a,s,"throw",e)}a(void 0)})})(),v=v.then(()=>{if("1.2.840.113549.1.9.16.1.4"===this.encapContentInfo.eContentType){if("eContent"in this.encapContentInfo==0)return!1;const r=n.fromBER(this.encapContentInfo.eContent.valueBlock.valueHex);let i;try{i=new p.default({schema:r.result})}catch(e){return!1}return s=i.genTime,S=i.serialNumber.valueBlock.valueHex,0===t.byteLength?Promise.reject(l?{date:s,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:k,signerCertificateVerified:null}:"Missed detached data input array"):i.verify({data:t})}return!0}),o&&(v=v.then(e=>{if(!1===e)return!1;const t=Array.from(this.certificates.filter(e=>e instanceof u.default),e=>function(e){if(!0===e.issuer.isEqual(k.issuer)&&!0===e.serialNumber.isEqual(k.serialNumber))return null;let t=!1;if("extensions"in e){var r,n=A(e.extensions);try{for(n.s();!(r=n.n()).done;){const e=r.value;"2.5.29.19"===e.extnID&&"cA"in e.parsedValue&&!0===e.parsedValue.cA&&(t=!0)}}catch(i){n.e(i)}finally{n.f()}}return t?e:null}(e)),n={checkDate:s,certs:Array.from(t.filter(e=>null!==e)),trustedCerts:r};null!==f&&(n.findIssuer=f),null!==h&&(n.findOrigin=h);const i=new g.default(n);if(i.certs.push(k),"crls"in this){var a,o=A(this.crls);try{for(o.s();!(a=o.n()).done;){const e=a.value;"thisUpdate"in e?i.crls.push(e):"1.3.6.1.5.5.7.48.1.1"===e.otherRevInfoFormat&&i.ocsps.push(new y.default({schema:e.otherRevInfo}))}}catch(m){o.e(m)}finally{o.f()}}return"ocsps"in this&&i.ocsps.push(...this.ocsps),i.verify({passedWhenNotRevValues:c}).then(e=>("certificatePath"in e&&(C=e.certificatePath),!0===e.result?Promise.resolve(!0):Promise.reject(l?{date:s,code:5,message:`Validation of signer's certificate failed: ${e.resultMessage}`,signatureVerified:null,signerCertificate:k,signerCertificateVerified:!1}:"Validation of signer's certificate failed")),e=>Promise.reject(l?{date:s,code:5,message:`Validation of signer's certificate failed with error: ${e instanceof Object?e.resultMessage:e}`,signatureVerified:null,signerCertificate:k,signerCertificateVerified:!1}:`Validation of signer's certificate failed with error: ${e instanceof Object?e.resultMessage:e}`))})),v=v.then(t=>{if(!1===t)return!1;const r=(0,a.getAlgorithmByOID)(this.signerInfos[e].digestAlgorithm.algorithmId);return"name"in r==0?Promise.reject(l?{date:s,code:7,message:`Unsupported signature algorithm: ${this.signerInfos[e].digestAlgorithm.algorithmId}`,signatureVerified:null,signerCertificate:k,signerCertificateVerified:!0}:`Unsupported signature algorithm: ${this.signerInfos[e].digestAlgorithm.algorithmId}`):(w=r.name,!0)}),v=v.then(r=>{if(!1===r)return!1;if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(!1===this.encapContentInfo.eContent.idBlock.isConstructed)t=this.encapContentInfo.eContent.valueBlock.valueHex;else{var n,a=A(this.encapContentInfo.eContent.valueBlock.value);try{for(a.s();!(n=a.n()).done;)t=(0,i.utilConcatBuf)(t,n.value.valueBlock.valueHex)}catch(c){a.e(c)}finally{a.f()}}else t=this.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===t.byteLength)return Promise.reject(l?{date:s,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:k,signerCertificateVerified:!0}:"Missed detached data input array");if("signedAttrs"in this.signerInfos[e]){let t=!1,r=!1;var o,u=A(this.signerInfos[e].signedAttrs.attributes);try{for(u.s();!(o=u.n()).done;){const e=o.value;if("1.2.840.113549.1.9.3"===e.type&&(t=!0),"1.2.840.113549.1.9.4"===e.type&&(r=!0,b=e.values[0].valueBlock.valueHex),t&&r)break}}catch(c){u.e(c)}finally{u.f()}if(!1===t)return Promise.reject(l?{date:s,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:k,signerCertificateVerified:!0}:'Attribute "content-type" is a mandatory attribute for "signed attributes"');if(!1===r)return Promise.reject(l?{date:s,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:k,signerCertificateVerified:!0}:'Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0}),v=v.then(r=>!1!==r&&(!("signedAttrs"in this.signerInfos[e])||O.digest(w,new Uint8Array(t)))).then(r=>!1!==r&&(!("signedAttrs"in this.signerInfos[e])||!!(0,i.isEqualBuffer)(r,b)&&(t=this.signerInfos[e].signedAttrs.encodedValue,!0))),v=v.then(r=>!1!==r&&I.subtle.verifyWithPublicKey(t,this.signerInfos[e].signature,k.subjectPublicKeyInfo,k.signatureAlgorithm,w)),v=v.then(e=>l?{date:s,code:14,message:"",signatureVerified:e,signerCertificate:k,timestampSerial:S,signerCertificateVerified:!0,certificatePath:C}:e,e=>Promise.reject(l?"code"in e?e:{date:s,code:15,message:`Error during verification: ${e.message}`,signatureVerified:null,signerCertificate:k,timestampSerial:S,signerCertificateVerified:!0}:e)),v);var B}sign(e,t,r="SHA-1",o=new ArrayBuffer(0)){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let u,l=Promise.resolve();const c=(0,a.getEngine)(),h=(0,a.getOIDByAlgorithm)({name:r});return""===h?Promise.reject(`Unsupported hash algorithm: ${r}`):(0===this.digestAlgorithms.filter(e=>e.algorithmId===h).length&&this.digestAlgorithms.push(new s.default({algorithmId:h,algorithmParams:new n.Null})),this.signerInfos[t].digestAlgorithm=new s.default({algorithmId:h,algorithmParams:new n.Null}),l=l.then(()=>c.subtle.getSignatureParameters(e,r)),l=l.then(e=>{u=e.parameters,this.signerInfos[t].signatureAlgorithm=e.signatureAlgorithm}),l=l.then(()=>{if("signedAttrs"in this.signerInfos[t])0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength?o=this.signerInfos[t].signedAttrs.encodedValue:(o=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1),new Uint8Array(o)[0]=49);else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(!1===this.encapContentInfo.eContent.idBlock.isConstructed)o=this.encapContentInfo.eContent.valueBlock.valueHex;else{var e,r=A(this.encapContentInfo.eContent.valueBlock.value);try{for(r.s();!(e=r.n()).done;)o=(0,i.utilConcatBuf)(o,e.value.valueBlock.valueHex)}catch(n){r.e(n)}finally{r.f()}}else o=this.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===o.byteLength)return Promise.reject("Missed detached data input array");return Promise.resolve()}),l=l.then(()=>c.subtle.signWithPrivateKey(o,e,u)),l=l.then(e=>(this.signerInfos[t].signature=new n.OctetString({valueHex:e}),e)),l)}}t.default=I,I.ID_DATA="1.2.840.113549.1.7.1"},70815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=u(r(4987)),s=u(r(89945)),o=u(r(35529));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}class c{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",c.defaultValues("version")),this.sid=(0,i.getParametersValue)(e,"sid",c.defaultValues("sid")),this.digestAlgorithm=(0,i.getParametersValue)(e,"digestAlgorithm",c.defaultValues("digestAlgorithm")),"signedAttrs"in e&&(this.signedAttrs=(0,i.getParametersValue)(e,"signedAttrs",c.defaultValues("signedAttrs"))),this.signatureAlgorithm=(0,i.getParametersValue)(e,"signatureAlgorithm",c.defaultValues("signatureAlgorithm")),this.signature=(0,i.getParametersValue)(e,"signature",c.defaultValues("signature")),"unsignedAttrs"in e&&(this.unsignedAttrs=(0,i.getParametersValue)(e,"unsignedAttrs",c.defaultValues("unsignedAttrs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"sid":return new n.Any;case"digestAlgorithm":return new a.default;case"signedAttrs":return new s.default({type:0});case"signatureAlgorithm":return new a.default;case"signature":return new n.OctetString;case"unsignedAttrs":return new s.default({type:1});default:throw new Error(`Invalid member name for SignerInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":return c.defaultValues("version")===t;case"sid":return t instanceof n.Any;case"digestAlgorithm":return t instanceof a.default!=0&&t.isEqual(c.defaultValues("digestAlgorithm"));case"signedAttrs":return s.default.compareWithDefault("type",t.type)&&s.default.compareWithDefault("attributes",t.attributes)&&s.default.compareWithDefault("encodedValue",t.encodedValue);case"signatureAlgorithm":return t instanceof a.default!=0&&t.isEqual(c.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return s.default.compareWithDefault("type",t.type)&&s.default.compareWithDefault("attributes",t.attributes)&&s.default.compareWithDefault("encodedValue",t.encodedValue);default:throw new Error(`Invalid member name for SignerInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:"SignerInfo",value:[new n.Integer({name:t.version||"SignerInfo.version"}),new n.Choice({value:[o.default.schema(t.sid||{names:{blockName:"SignerInfo.sid"}}),new n.Choice({value:[new n.Constructed({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new n.OctetString]}),new n.Primitive({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new n.OctetString]})]})]}),a.default.schema(t.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),s.default.schema(t.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),a.default.schema(t.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new n.OctetString({name:t.signature||"SignerInfo.signature"}),s.default.schema(t.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}fromSchema(e){(0,i.clearProps)(e,["SignerInfo.version","SignerInfo.sid","SignerInfo.digestAlgorithm","SignerInfo.signedAttrs","SignerInfo.signatureAlgorithm","SignerInfo.signature","SignerInfo.unsignedAttrs"]);const t=n.compareSchema(e,e,c.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SignerInfo");this.version=t.result["SignerInfo.version"].valueBlock.valueDec;const r=t.result["SignerInfo.sid"];this.sid=1===r.idBlock.tagClass?new o.default({schema:r}):r,this.digestAlgorithm=new a.default({schema:t.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in t.result&&(this.signedAttrs=new s.default({type:0,schema:t.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new a.default({schema:t.result["SignerInfo.signatureAlgorithm"]}),this.signature=t.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in t.result&&(this.unsignedAttrs=new s.default({type:1,schema:t.result["SignerInfo.unsignedAttrs"]}))}toSchema(){if(c.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new n.Integer({value:this.version})),e.push(this.sid instanceof o.default?this.sid.toSchema():this.sid),e.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&!1===c.compareWithDefault("signedAttrs",this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"unsignedAttrs"in this&&!1===c.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new n.Sequence({value:e})}toJSON(){if(c.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version};return this.sid instanceof n.Any||(e.sid=this.sid.toJSON()),e.digestAlgorithm=this.digestAlgorithm.toJSON(),!1===c.compareWithDefault("signedAttrs",this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),e.signatureAlgorithm=this.signatureAlgorithm.toJSON(),e.signature=this.signature.toJSON(),!1===c.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}t.default=c},71852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=u(r(42689)),s=u(r(51090)),o=u(r(39327));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}class c{constructor(e={}){this.certID=(0,i.getParametersValue)(e,"certID",c.defaultValues("certID")),this.certStatus=(0,i.getParametersValue)(e,"certStatus",c.defaultValues("certStatus")),this.thisUpdate=(0,i.getParametersValue)(e,"thisUpdate",c.defaultValues("thisUpdate")),"nextUpdate"in e&&(this.nextUpdate=(0,i.getParametersValue)(e,"nextUpdate",c.defaultValues("nextUpdate"))),"singleExtensions"in e&&(this.singleExtensions=(0,i.getParametersValue)(e,"singleExtensions",c.defaultValues("singleExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certID":return new a.default;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error(`Invalid member name for SingleResponse class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"certID":return a.default.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&a.default.compareWithDefault("issuerNameHash",t.issuerNameHash)&&a.default.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&a.default.compareWithDefault("serialNumber",t.serialNumber);case"certStatus":return 0===Object.keys(t).length;case"thisUpdate":case"nextUpdate":return t===c.defaultValues(e);default:throw new Error(`Invalid member name for SingleResponse class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"",value:[a.default.schema(t.certID||{}),new n.Choice({value:[new n.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new n.Constructed({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new n.GeneralizedTime,new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.Enumerated]})]}),new n.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new n.GeneralizedTime({name:t.thisUpdate||""}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.GeneralizedTime({name:t.nextUpdate||""})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[o.default.schema(t.singleExtensions||{})]})]})}fromSchema(e){(0,i.clearProps)(e,["certID","certStatus","thisUpdate","nextUpdate","singleExtensions"]);const t=n.compareSchema(e,e,c.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new a.default({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),"nextUpdate"in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),"singleExtensions"in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,e=>new s.default({schema:e})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new n.GeneralizedTime({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new n.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new n.GeneralizedTime({valueDate:this.nextUpdate})]})),"singleExtensions"in this&&e.push(new n.Sequence({value:Array.from(this.singleExtensions,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,e=>e.toJSON())),e}}t.default=c},32488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(68681))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}class u{constructor(e={}){this.attributes=(0,a.getParametersValue)(e,"attributes",u.defaultValues("attributes")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"attributes":return[];default:throw new Error(`Invalid member name for SubjectDirectoryAttributes class: ${e}`)}}static schema(e={}){const t=(0,a.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",value:[new i.Repeated({name:t.attributes||"",value:s.default.schema()})]})}fromSchema(e){(0,a.clearProps)(e,["attributes"]);const t=i.compareSchema(e,e,u.schema({names:{attributes:"attributes"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(t.result.attributes,e=>new s.default({schema:e}))}toSchema(){return new i.Sequence({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}t.default=u},77126:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971),a=r(97226),s=c(r(84690)),o=c(r(13264)),u=c(r(29260)),l=c(r(51090));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}class f{constructor(e={}){this.version=(0,i.getParametersValue)(e,"version",f.defaultValues("version")),this.policy=(0,i.getParametersValue)(e,"policy",f.defaultValues("policy")),this.messageImprint=(0,i.getParametersValue)(e,"messageImprint",f.defaultValues("messageImprint")),this.serialNumber=(0,i.getParametersValue)(e,"serialNumber",f.defaultValues("serialNumber")),this.genTime=(0,i.getParametersValue)(e,"genTime",f.defaultValues("genTime")),"accuracy"in e&&(this.accuracy=(0,i.getParametersValue)(e,"accuracy",f.defaultValues("accuracy"))),"ordering"in e&&(this.ordering=(0,i.getParametersValue)(e,"ordering",f.defaultValues("ordering"))),"nonce"in e&&(this.nonce=(0,i.getParametersValue)(e,"nonce",f.defaultValues("nonce"))),"tsa"in e&&(this.tsa=(0,i.getParametersValue)(e,"tsa",f.defaultValues("tsa"))),"extensions"in e&&(this.extensions=(0,i.getParametersValue)(e,"extensions",f.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new s.default;case"serialNumber":return new n.Integer;case"genTime":return new Date(0,0,0);case"accuracy":return new o.default;case"ordering":return!1;case"nonce":return new n.Integer;case"tsa":return new u.default;case"extensions":return[];default:throw new Error(`Invalid member name for TSTInfo class: ${e}`)}}static compareWithDefault(e,t){switch(e){case"version":case"policy":case"genTime":case"ordering":return t===f.defaultValues(e);case"messageImprint":return s.default.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&s.default.compareWithDefault("hashedMessage",t.hashedMessage);case"serialNumber":case"nonce":return t.isEqual(f.defaultValues(e));case"accuracy":return o.default.compareWithDefault("seconds",t.seconds)&&o.default.compareWithDefault("millis",t.millis)&&o.default.compareWithDefault("micros",t.micros);case"tsa":return u.default.compareWithDefault("type",t.type)&&u.default.compareWithDefault("value",t.value);case"extensions":return 0===t.length;default:throw new Error(`Invalid member name for TSTInfo class: ${e}`)}}static schema(e={}){const t=(0,i.getParametersValue)(e,"names",{});return new n.Sequence({name:t.blockName||"TSTInfo",value:[new n.Integer({name:t.version||"TSTInfo.version"}),new n.ObjectIdentifier({name:t.policy||"TSTInfo.policy"}),s.default.schema(t.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new n.Integer({name:t.serialNumber||"TSTInfo.serialNumber"}),new n.GeneralizedTime({name:t.genTime||"TSTInfo.genTime"}),o.default.schema(t.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new n.Boolean({name:t.ordering||"TSTInfo.ordering",optional:!0}),new n.Integer({name:t.nonce||"TSTInfo.nonce",optional:!0}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[u.default.schema(t.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.Repeated({name:t.extensions||"TSTInfo.extensions",value:l.default.schema(t.extension||{})})]})]})}fromSchema(e){(0,i.clearProps)(e,["TSTInfo.version","TSTInfo.policy","TSTInfo.messageImprint","TSTInfo.serialNumber","TSTInfo.genTime","TSTInfo.accuracy","TSTInfo.ordering","TSTInfo.nonce","TSTInfo.tsa","TSTInfo.extensions"]);const t=n.compareSchema(e,e,f.schema());if(!1===t.verified)throw new Error("Object's schema was not verified against input data for TSTInfo");this.version=t.result["TSTInfo.version"].valueBlock.valueDec,this.policy=t.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new s.default({schema:t.result["TSTInfo.messageImprint"]}),this.serialNumber=t.result["TSTInfo.serialNumber"],this.genTime=t.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in t.result&&(this.accuracy=new o.default({schema:t.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in t.result&&(this.ordering=t.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in t.result&&(this.nonce=t.result["TSTInfo.nonce"]),"TSTInfo.tsa"in t.result&&(this.tsa=new u.default({schema:t.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in t.result&&(this.extensions=Array.from(t.result["TSTInfo.extensions"],e=>new l.default({schema:e})))}toSchema(){const e=[];return e.push(new n.Integer({value:this.version})),e.push(new n.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new n.GeneralizedTime({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new n.Boolean({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new n.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,e=>e.toSchema())})),new n.Sequence({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,e=>e.toJSON())),e}verify(e={}){let t,r=Promise.resolve(),n=null,s=null;const o=(0,a.getCrypto)();if(void 0===o)return Promise.reject("Unable to create WebCrypto object");if(!("data"in e))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');if(t=e.data,"notBefore"in e&&(n=e.notBefore),"notAfter"in e&&(s=e.notAfter),null!==n&&this.genTime<n)return Promise.reject("Generation time for TSTInfo object is less than notBefore value");if(null!==s&&this.genTime>s)return Promise.reject("Generation time for TSTInfo object is more than notAfter value");const u=(0,a.getAlgorithmByOID)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in u==0?Promise.reject(`Unsupported signature algorithm: ${this.messageImprint.hashAlgorithm.algorithmId}`):(r=r.then(()=>o.digest(u.name,new Uint8Array(t))).then(e=>(0,i.isEqualBuffer)(e,this.messageImprint.hashedMessage.valueBlock.valueHex)),r)}}t.default=f},26466:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(75530)),i=r(1971);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}class s{constructor(e={}){this.type=(0,i.getParametersValue)(e,"type",s.defaultValues("type")),this.value=(0,i.getParametersValue)(e,"value",s.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error(`Invalid member name for Time class: ${e}`)}}static schema(e={},t=!1){const r=(0,i.getParametersValue)(e,"names",{});return new n.Choice({optional:t,value:[new n.UTCTime({name:r.utcTimeName||""}),new n.GeneralizedTime({name:r.generalTimeName||""})]})}fromSchema(e){(0,i.clearProps)(e,["utcTimeName","generalTimeName"]);const t=n.compareSchema(e,e,s.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Time");"utcTimeName"in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),"generalTimeName"in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){let e={};return 0===this.type&&(e=new n.UTCTime({valueDate:this.value})),1===this.type&&(e=new n.GeneralizedTime({valueDate:this.value})),e}toJSON(){return{type:this.type,value:this.value}}}t.default=s},97226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCMSECDSASignature=function(e){if(e.byteLength%2!=0)return new ArrayBuffer(0);const t=e.byteLength/2,r=new ArrayBuffer(t);new Uint8Array(r).set(new Uint8Array(e,0,t));const n=new i.Integer({valueHex:r}),a=new ArrayBuffer(t);new Uint8Array(a).set(new Uint8Array(e,t,t));const s=new i.Integer({valueHex:a});return new i.Sequence({value:[n.convertToDER(),s.convertToDER()]}).toBER(!1)},t.createECDSASignatureFromCMS=function(e){if(e instanceof i.Sequence==0)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof i.Integer==0)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof i.Integer==0)return new ArrayBuffer(0);const t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();switch(!0){case t.valueBlock.valueHex.byteLength<r.valueBlock.valueHex.byteLength:{if(r.valueBlock.valueHex.byteLength-t.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");const e=r.valueBlock.valueHex.byteLength,n=new Uint8Array(t.valueBlock.valueHex),i=new ArrayBuffer(e),s=new Uint8Array(i);return s.set(n,1),s[0]=0,(0,a.utilConcatBuf)(i,r.valueBlock.valueHex)}case t.valueBlock.valueHex.byteLength>r.valueBlock.valueHex.byteLength:{if(t.valueBlock.valueHex.byteLength-r.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");const e=t.valueBlock.valueHex.byteLength,n=new Uint8Array(r.valueBlock.valueHex),i=new ArrayBuffer(e),s=new Uint8Array(i);return s.set(n,1),s[0]=0,(0,a.utilConcatBuf)(t.valueBlock.valueHex,i)}default:if(t.valueBlock.valueHex.byteLength%2){const e=t.valueBlock.valueHex.byteLength+1,n=new Uint8Array(t.valueBlock.valueHex),i=new ArrayBuffer(e),s=new Uint8Array(i);s.set(n,1),s[0]=0;const o=new Uint8Array(r.valueBlock.valueHex),u=new ArrayBuffer(e),l=new Uint8Array(u);return l.set(o,1),l[0]=0,(0,a.utilConcatBuf)(i,u)}}return(0,a.utilConcatBuf)(t.valueBlock.valueHex,r.valueBlock.valueHex)},t.getAlgorithmByOID=function(e){return f().subtle.getAlgorithmByOID(e)},t.getAlgorithmParameters=function(e,t){return f().subtle.getAlgorithmParameters(e,t)},t.getCrypto=m,t.getEngine=f,t.getHashAlgorithm=function(e){return f().subtle.getHashAlgorithm(e)},t.getOIDByAlgorithm=function(e){return f().subtle.getOIDByAlgorithm(e)},t.getRandomValues=function(e){return f().subtle.getRandomValues(e)},t.kdf=function(e,t,r,n){let i=0,s=1;const o=[];switch(e.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:return Promise.reject(`Unknown hash function: ${e}`)}if(t instanceof ArrayBuffer==0)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==0)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');const l=r/i;Math.floor(l)>0&&(s=Math.floor(l),l-s>0&&s++);for(let a=1;a<=s;a++)o.push(d(e,t,a,n));return Promise.all(o).then(e=>{let t=new ArrayBuffer(0),n=1,i=!0;for(;i;){i=!1;var s,o=u(e);try{for(o.s();!(s=o.n()).done;){const e=s.value;if(e.counter===n){t=(0,a.utilConcatBuf)(t,e.result),i=!0;break}}}catch(l){o.e(l)}finally{o.f()}n++}if(t.byteLength>(r>>=3)){const e=new ArrayBuffer(r),n=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<r;t++)n[t]=i[t];return e}return t})},t.kdfWithCounter=d,t.setEngine=h,t.stringPrep=function(e){let t=!1,r="";const n=e.trim();for(let i=0;i<n.length;i++)32===n.charCodeAt(i)?!1===t&&(t=!0):(t&&(r+=" ",t=!1),r+=n[i]);return r.toLowerCase()};var n,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(75530)),a=r(1971),s=(n=r(48435))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}let c={name:"none",crypto:null,subtle:null};function h(e,t,r){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){if(void 0===global[process.pid])global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(void 0===global[process.pid].pkijs)global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:e,crypto:t,subtle:r}}else c.name!==e&&(c={name:e,crypto:t,subtle:r})}function f(){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){let t;try{t=global[process.pid].pkijs.engine}catch(e){throw new Error('Please call "setEngine" before call to "getEngine"')}return t}return c}function m(){const e=f();if(null!==e.subtle)return e.subtle}function d(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject(`Unknown hash function: ${e}`)}if(t instanceof ArrayBuffer==0)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==0)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');const i=new ArrayBuffer(4),s=new Uint8Array(i);s[0]=0,s[1]=0,s[2]=0,s[3]=r;let o=new ArrayBuffer(0);const u=m();return void 0===u?Promise.reject("Unable to create WebCrypto object"):(o=(0,a.utilConcatBuf)(o,t),o=(0,a.utilConcatBuf)(o,i),o=(0,a.utilConcatBuf)(o,n),u.digest({name:e},o).then(e=>({counter:r,result:e})))}!function(){if("undefined"!=typeof self&&"crypto"in self){let t="webcrypto";const r=self.crypto;let n;if("webkitSubtle"in self.crypto){try{n=self.crypto.webkitSubtle}catch(e){n=self.crypto.subtle}t="safari"}"subtle"in self.crypto&&(n=self.crypto.subtle),c=void 0===n?{name:t,crypto:r,subtle:null}:{name:t,crypto:r,subtle:new s.default({name:t,crypto:self.crypto,subtle:n})}}h(c.name,c.crypto,c.subtle)}()},27286:function(e,t){!function(e){"use strict";class t{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){const t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if("undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e))return new t(e.buffer,e.byteOffset,e.byteLength);if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=t.toUint8Array(e),i=t.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}}class r{static fromString(e){const t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}static toString(e){const r=t.toUint8Array(e);let n="";for(let t=0;t<r.length;t++)n+=String.fromCharCode(r[t]);return decodeURIComponent(escape(n))}}class n{static toString(e,r=!1){const n=t.toArrayBuffer(e),i=new DataView(n);let a="";for(let t=0;t<n.byteLength;t+=2){const e=i.getUint16(t,r);a+=String.fromCharCode(e)}return a}static fromString(e,t=!1){const r=new ArrayBuffer(2*e.length),n=new DataView(r);for(let i=0;i<e.length;i++)n.setUint16(2*i,e.charCodeAt(i),t);return r}}let i=(()=>{class e{static isHex(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,r="utf8"){const i=t.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(i);case"binary":return this.ToBinary(i);case"hex":return this.ToHex(i);case"base64":return this.ToBase64(i);case"base64url":return this.ToBase64Url(i);case"utf16le":return n.toString(i,!0);case"utf16":case"utf16be":return n.toString(i);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return n.fromString(e,!0);case"utf16":case"utf16be":return n.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const r=t.toUint8Array(e);if("undefined"!=typeof btoa){const e=this.ToString(r,"binary");return btoa(e)}return Buffer.from(r).toString("base64")}static FromBase64(t){const r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(t){const r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,i=e.DEFAULT_UTF8_ENCODING){switch(i){case"ascii":return this.FromBinary(t);case"utf8":return r.fromString(t);case"utf16":case"utf16be":return n.fromString(t);case"utf16le":case"usc2":return n.fromString(t,!0);default:throw new Error(`Unknown type of encoding '${i}'`)}}static ToUtf8String(t,i=e.DEFAULT_UTF8_ENCODING){switch(i){case"ascii":return this.ToBinary(t);case"utf8":return r.toString(t);case"utf16":case"utf16be":return n.toString(t);case"utf16le":case"usc2":return n.toString(t,!0);default:throw new Error(`Unknown type of encoding '${i}'`)}}static FromBinary(e){const t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){const r=t.toUint8Array(e);let n="";for(let t=0;t<r.length;t++)n+=String.fromCharCode(r[t]);return n}static ToHex(e){const r=t.toUint8Array(e),n=[],i=r.length;for(let t=0;t<i;t++){const e=r[t].toString(16).padStart(2,"0");n.push(e)}return n.join("")}static FromHex(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let e=0;e<r.length;e+=2){const t=r.slice(e,e+2);n[e/2]=parseInt(t,16)}return n.buffer}static ToUtf16String(e,t=!1){return n.toString(e,t)}static FromUtf16String(e,t=!1){return n.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}return e.DEFAULT_UTF8_ENCODING="utf8",e})();e.BufferSourceConverter=t,e.Convert=i,e.assign=function(e,...t){const r=arguments[0];for(let n=1;n<arguments.length;n++){const e=arguments[n];for(const t in e)r[t]=e[t]}return r},e.combine=function(...e){const t=e.map(e=>e.byteLength).reduce((e,t)=>e+t),r=new Uint8Array(t);let n=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(const t of e)r[n++]=t}),r.buffer},e.isEqual=function(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<e.byteLength;i++)if(r[i]!==n[i])return!1;return!0},Object.defineProperty(e,"__esModule",{value:!0})}(t)},1971:function(e,t,r){"use strict";function n(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function i(e,t,r){var n;return e instanceof Object==0?r:null!==(n=e[t])&&void 0!==n?n:r}function a(e,t=0,r=e.byteLength-t,n=!1){let i="";for(const a of new Uint8Array(e,t,r)){const e=a.toString(16).toUpperCase();1===e.length&&(i+="0"),i+=e,n&&(i+=" ")}return i.trim()}function s(e,t,r,n){return t instanceof ArrayBuffer?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0&&(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)}function o(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function u(e,t,r=-1){const n=r;let i=e,a=0,s=Math.pow(2,t);for(let o=1;o<8;o++){if(e<s){let e;if(n<0)e=new ArrayBuffer(o),a=o;else{if(n<o)return new ArrayBuffer(0);e=new ArrayBuffer(n),a=n}const r=new Uint8Array(e);for(let n=o-1;n>=0;n--){const e=Math.pow(2,n*t);r[a-n-1]=Math.floor(i/e),i-=r[a-n-1]*e}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function l(...e){let t=0,r=0;for(const a of e)t+=a.byteLength;const n=new ArrayBuffer(t),i=new Uint8Array(n);for(const a of e)i.set(new Uint8Array(a),r),r+=a.byteLength;return n}function c(...e){let t=0,r=0;for(const a of e)t+=a.length;const n=new ArrayBuffer(t),i=new Uint8Array(n);for(const a of e)i.set(a,r),r+=a.length;return i}function h(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=0===e[0]&&0==(128&e[1]);(255===e[0]&&128&e[1]||t)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(t);for(let s=0;s<this.valueHex.byteLength;s++)r[s]=0;r[0]=128&e[0];const n=o(r,8),i=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(i);for(let s=0;s<this.valueHex.byteLength;s++)a[s]=e[s];return a[0]&=127,o(a,8)-n}function f(e){const t=e<0?-1*e:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=u(r-t,8,n);return new Uint8Array(e)[0]|=128,e}let i=u(t,8,n),a=new Uint8Array(i);if(128&a[0]){const e=i.slice(0),t=new Uint8Array(e);i=new ArrayBuffer(i.byteLength+1),a=new Uint8Array(i);for(let r=0;r<e.byteLength;r++)a[r+1]=t[r];a[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function m(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function d(e,t){const r=e.toString(10);if(t<r.length)return"";const n=t-r.length,i=new Array(n);for(let a=0;a<n;a++)i[a]="0";return i.join("").concat(r)}r.r(t),r.d(t,{arrayBufferToString:function(){return b},bufferToHexCodes:function(){return a},checkBufferParams:function(){return s},clearProps:function(){return P},fromBase64:function(){return v},getParametersValue:function(){return i},getUTCDate:function(){return n},isEqualBuffer:function(){return m},nearestPowerOf2:function(){return S},padNumber:function(){return d},stringToArrayBuffer:function(){return w},toBase64:function(){return y},utilConcatBuf:function(){return l},utilConcatView:function(){return c},utilDecodeTC:function(){return h},utilEncodeTC:function(){return f},utilFromBase:function(){return o},utilToBase:function(){return u}});const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function y(e,t=!1,r=!1,n=!1){let i=0,a=0,s=0,o="";const u=t?g:p;if(n){let t=0;for(let r=0;r<e.length;r++)if(0!==e.charCodeAt(r)){t=r;break}e=e.slice(t)}for(;i<e.length;){const t=e.charCodeAt(i++);i>=e.length&&(a=1);const n=e.charCodeAt(i++);i>=e.length&&(s=1);const l=e.charCodeAt(i++),c=t>>2,h=(3&t)<<4|n>>4;let f=(15&n)<<2|l>>6,m=63&l;1===a?f=m=64:1===s&&(m=64),o+=r?64===f?`${u.charAt(c)}${u.charAt(h)}`:64===m?`${u.charAt(c)}${u.charAt(h)}${u.charAt(f)}`:`${u.charAt(c)}${u.charAt(h)}${u.charAt(f)}${u.charAt(m)}`:`${u.charAt(c)}${u.charAt(h)}${u.charAt(f)}${u.charAt(m)}`}return o}function v(e,t=!1,r=!1){const n=t?g:p;function i(e){for(let t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function a(e){return 64===e?0:e}let s=0,o="";for(;s<e.length;){const t=i(e.charAt(s++)),r=s>=e.length?0:i(e.charAt(s++)),n=s>=e.length?0:i(e.charAt(s++)),u=s>=e.length?0:i(e.charAt(s++)),l=a(t)<<2|a(r)>>4,c=(15&a(r))<<4|a(n)>>2,h=(3&a(n))<<6|a(u);o+=String.fromCharCode(l),64!==n&&(o+=String.fromCharCode(c)),64!==u&&(o+=String.fromCharCode(h))}if(r){let e=-1;for(let t=o.length-1;t>=0;t--)if(0!==o.charCodeAt(t)){e=t;break}o=-1!==e?o.slice(0,e+1):""}return o}function b(e){let t="";const r=new Uint8Array(e);for(const n of r)t+=String.fromCharCode(n);return t}function w(e){const t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}const k=Math.log(2);function S(e){const t=Math.log(e)/k,r=Math.floor(t),n=Math.round(t);return r===n?r:n}function P(e,t){for(const r of t)delete e[r]}},57714:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(93576);t.Observable=n.Observable},46056:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(57714))},93576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15730),i=r(67104),a=r(96232),s=r(23915),o=r(68273),u=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,a=i.toSubscriber(e,t,r);if(a.add(n?n.call(a,this.source):this.source||o.config.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),o.config.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){o.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=l(t))(function(t,n){var i;i=r.subscribe(function(t){try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=l(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=o.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=u},16011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(68273),i=r(32434);t.empty={closed:!0,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},67241:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(67382),s=r(16011),o=r(43984),u=r(81476),l=r(68273),c=r(32434),h=function(e){function t(r,n,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=s.empty;break;case 1:if(!r){a.destination=s.empty;break}if("object"==typeof r){r instanceof t?(a.syncErrorThrowable=r.syncErrorThrowable,a.destination=r,r.add(a)):(a.syncErrorThrowable=!0,a.destination=new f(a,r));break}default:a.syncErrorThrowable=!0,a.destination=new f(a,r,n,i)}return a}return i(t,e),t.prototype[u.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.Subscription);t.Subscriber=h;var f=function(e){function t(t,r,n,i){var o,u=e.call(this)||this;u._parentSubscriber=t;var l=u;return a.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==s.empty&&(l=Object.create(r),a.isFunction(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=o,u._error=n,u._complete=i,u}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):c.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;c.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw r;c.hostReportError(r)}},t.prototype.__tryOrSetError=function(e,t,r){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return l.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(c.hostReportError(n),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(h);t.SafeSubscriber=f},43984:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40993),i=r(54720),a=r(67382),s=r(18574),o=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this._parentOrParents,o=this._ctorUnsubscribe,l=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var h=0;h<r.length;++h)r[h].remove(this);if(a.isFunction(l)){o&&(this._unsubscribe=void 0);try{l.call(this)}catch(d){t=d instanceof s.UnsubscriptionError?u(d.errors):[d]}}if(n.isArray(c)){h=-1;for(var f=c.length;++h<f;){var m=c[h];if(i.isObject(m))try{m.unsubscribe()}catch(d){t=t||[],d instanceof s.UnsubscriptionError?t=t.concat(u(d.errors)):t.push(d)}}}if(t)throw new s.UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[r]:a.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce(function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)},[])}t.Subscription=o},68273:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},96232:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},81476:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},18574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=r},15730:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67241);t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof n.Subscriber?t:null}return!0}},32434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}},72516:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e}},40993:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},67382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},54720:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},23915:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(72516);function i(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},67104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67241),i=r(81476),a=r(16011);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(a.empty)}},25865:function(e,t,r){"use strict";r.r(t),r.d(t,{ListViewModule:function(){return Ke}});var n=r(38583),i=r(37716),a=r(99763);let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-list-view"]],decls:1,vars:0,template:function(e,t){1&e&&i["\u0275\u0275element"](0,"router-outlet")},directives:[a.lC],encapsulation:2}),e})();var o=r(46056);const u=(e,t="UTC")=>(new Intl.DateTimeFormat("en-GB",{timeZone:t}),new Date(e).toISOString().slice(0,19).replace("T"," ")),l={device:{id:{title:"ID",type:"number",description:"identifier"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of device",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},organization:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list"],required:!0},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list"],required:!0},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list"],required:!0},federationType:{title:"Federation type",type:"string",description:"OpenID Connect federation type",visibleFrom:["detail"],immutable:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},service:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of service",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},instanceVersion:{title:"Instance version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},oidcAccessType:{title:"Access type",type:"string",description:"OpenID Connect access type",visibleFrom:["detail"]},oidcClientId:{title:"OIDC client ID",type:"string",description:"OpenID Connect client ID",visibleFrom:["detail"]},vessel:{title:"Vessel",type:"string",description:"Correlated vessel",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},user:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},firstName:{title:"First name",type:"string",visibleFrom:["detail","list"],required:!0},lastName:{title:"Last name",type:"string",visibleFrom:["detail","list"],required:!0},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],immutable:!0,required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["detail","list"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},vessel:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of device",visibleFrom:["detail","list"],required:!0},permissions:{title:"Permissions",type:"string",description:"List of permissions assigned by the organization",visibleFrom:["edit","detail"]},imoNumber:{title:"IMO number",type:"string",visibleFrom:["detail","list"]},mmsiNumber:{title:"MMSI number",type:"string",visibleFrom:["detail","list"]},callsign:{title:"Call sign",type:"string",visibleFrom:["detail","list"]},flagstate:{title:"Flag state",type:"string",visibleFrom:["detail","list"]},aisClass:{title:"AIS class",type:"string",visibleFrom:["detail","list"]},portOfRegister:{title:"Port of register",type:"string",visibleFrom:["detail","list"]},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},role:{id:{title:"ID",type:"number"},roleName:{title:"Role name",type:"string",visibleFrom:["detail","list"],required:!0},permission:{title:"Permission",type:"string",visibleFrom:["detail","list"],required:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},approveorg:{id:{title:"ID",type:"number"},mrn:{title:"Maritime Resource Name (MRN)",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},name:{title:"Name",type:"string",description:"Name of organization",visibleFrom:["detail","list"],required:!0},mrnSubsidiary:{title:"Subsidiary MRN",type:"string",description:"Additional MRN assigned to entity",visibleFrom:["detail"]},homeMMSUrl:{title:"Home MMS URL",type:"string",description:"URL of home MMS",visibleFrom:["detail"]},email:{title:"e-mail",type:"string",description:"Contact e-mail",visibleFrom:["detail","list"],required:!0},url:{title:"URL",type:"string",description:"URL of organization",visibleFrom:["detail","list"],required:!0},address:{title:"Address",type:"string",description:"Address of organization",visibleFrom:["detail"],required:!0},country:{title:"Country",type:"string",description:"Country that organization belongs to",visibleFrom:["detail","list"],required:!0},federationType:{title:"Federation type",type:"string",description:"OpenID Connect federation type",visibleFrom:["detail"],immutable:!0},createdAt:{title:"Created at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},updatedAt:{title:"Updated at",type:"string",filter:!1,valuePrepareFunction:e=>u(e),immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},instance:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list"],required:!0},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},serviceType:{title:"Type",type:"string",description:"Type",visibleFrom:["detail","list"]},status:{title:"Status",type:"string",visibleFrom:["detail","list"]},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization",type:"string",visibleFrom:["detail"],immutable:!0,required:!0},keywords:{title:"Keywords",type:"string",visibleFrom:["detail"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},createdAt:{title:"Created at",type:"string",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},lastUpdatedAt:{title:"Updated at",type:"string",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}},approvesvc:{id:{title:"ID",type:"number"},name:{title:"Name",type:"string",description:"Name of service instance",visibleFrom:["detail","list"],required:!0},version:{title:"Version",type:"string",description:"Version of service instance",visibleFrom:["detail","list"],immutable:!0,required:!0},serviceType:{title:"Type",type:"string",description:"Type",visibleFrom:["detail","list"]},status:{title:"Status",type:"string",visibleFrom:["detail","list"]},endpointUri:{title:"Endpoint URI",type:"string",visibleFrom:["detail"],required:!0},organizationId:{title:"Organization",type:"string",visibleFrom:["detail"],immutable:!0,required:!0},keywords:{title:"Keywords",type:"string",visibleFrom:["detail"]},instanceId:{title:"Instance ID",type:"string",description:"MCP MRN as unique identifer",visibleFrom:["detail","list"],immutable:!0,required:!0},createdAt:{title:"Created at",type:"string",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail"]},lastUpdatedAt:{title:"Updated at",type:"string",filter:!1,immutable:!0,notShowOnEdit:!0,visibleFrom:["detail","list"]}}};var c=r(70419);const h=["device","vessel","user","service","organization","mms"];var f=(()=>(function(e){e.Device="device",e.Organization="organization",e.Service="service",e.User="user",e.Vessel="vessel",e.MMS="mms"}(f||(f={})),f))(),m=(()=>(function(e){e.Device="device",e.Organization="organization",e.Service="service",e.User="user",e.Vessel="vessel",e.MMS="mms",e.Role="role",e.Agent="agent",e.Instance="instance",e.InstanceOfOrg="instanceorg",e.UnapprovedOrg="approveorg",e.UnapprovedSvc="approvesvc"}(m||(m={})),m))();const d={vessel:"vessel",device:"device",user:"user",organization:"organization",service:"service",role:"role",agent:"agent",mms:"mms",instance:"instance",instanceorg:"instance",approveorg:"unapproved organization",approvesvc:"unapproved service",orgsvc:"owned service"},p={vessel:"ship",device:"hdd",user:"user",organization:"flag",service:"cog",role:"id-badge",agent:"user",mms:"forward",instance:"compass",instanceorg:"compass",approveorg:"clipboard",approvesvc:"clipboard"};var g=r(77229),y=(()=>(function(e){e.AttributeNameEnum={ImoNumber:"imo-number",MmsiNumber:"mmsi-number",Callsign:"callsign",Flagstate:"flagstate",AisClass:"ais-class",PortOfRegister:"port-of-register"}}(y||(y={})),y))();const v=e=>{let t={};for(const r in e)if("attributes"===r)for(const n in e[r]){const i=w(e[r][n].attributeName);Object.values(y.AttributeNameEnum).find(e=>e===i)&&(t[b(i)]=e[r][n].attributeValue)}else t[r]=r.endsWith("At")?u(parseInt(e[r])):e[r];return t},b=e=>e.split("-").reduce((e,t,r)=>0===r?t.toLowerCase():`${e}${t.charAt(0).toUpperCase()}${t.substr(1).toLowerCase()}`,""),w=e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);var k=r(47770),S=r(8996),P=r(76009),A=r(53542),C=(r(79774),r(34869),r(1502),r(21831)),I=r(67126),O=r(32826),B=r(36276);r(19454);const _={Unspecified:"unspecified",Keycompromise:"keycompromise",Cacompromise:"cacompromise",Affiliationchanged:"affiliationchanged",Superseded:"superseded",Cessationofoperation:"cessationofoperation",Certificatehold:"certificatehold",Removefromcrl:"removefromcrl",Privilegewithdrawn:"privilegewithdrawn",Aacompromise:"aacompromise"};r(43355),r(45556),r(18649);var j=r(33037),N=r(96297),E=r(98609),V=r(50384);function x(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onAddNew()}),i["\u0275\u0275text"](1,"Add new"),i["\u0275\u0275elementEnd"]()}}function D(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ng2-smart-table",11),i["\u0275\u0275listener"]("edit",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onEdit(t)})("delete",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onDelete(t)}),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("settings",e.settings)("source",e.source)}}let M=(()=>{class e{constructor(e,t,r,n,i,a,s,u,h,f,y,v,b){this.router=e,this.userControllerService=r,this.deviceControllerService=n,this.roleControllerService=i,this.vesselControllerService=a,this.serviceControllerService=s,this.instanceControllerService=u,this.searchControllerService=h,this.mmsControllerService=f,this.organizationControllerService=y,this.notifierService=v,this.authService=b,this.menuType="device",this.title=" for ",this.contextForAttributes="list",this.orgName="MCC",this.orgMrn="",this.iconName="circle",this.menuTypeName="",this.data=[],this.isLoading=!1,this.mySettings={mode:"external",edit:{editButtonContent:'<i class="nb-compose"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:l[this.menuType],hideSubHeader:!0},this.showTables=!0,this.source=new c.nC,this.isForServiceForOrg=!1,this.deleteData=(e,t,r,n,i)=>e===d.user?this.userControllerService.deleteUser(t,r):e===d.device?this.deviceControllerService.deleteDevice(t,r):e===d.vessel?this.vesselControllerService.deleteVessel(t,r):e===d.mms?this.mmsControllerService.deleteMMS(t,r):e===d.service&&n?this.serviceControllerService.deleteService(t,r,n):e===d.organization?this.organizationControllerService.deleteOrg(r):e===d.role&&i?this.roleControllerService.deleteRole(t,i):new o.Observable,this.loadMyOrganization=()=>this.organizationControllerService.getOrganizationByMrn(this.authService.authState.orgMrn),this.loadServiceInstances=e=>e?this.searchControllerService.searchInstancesUsingGET("","",!1,"organizationId:"+e.split(":").join("\\:")+"*"):this.instanceControllerService.getInstancesUsingGET(),this.loadDataContent=(e,t)=>e===m.User?this.userControllerService.getOrganizationUsers(t):e===m.Device?this.deviceControllerService.getOrganizationDevices(t):e===m.Vessel?this.vesselControllerService.getOrganizationVessels(t):e===m.MMS?this.mmsControllerService.getOrganizationMMSes(t):e===m.Service?this.serviceControllerService.getOrganizationServices(t):e===m.Organization?this.organizationControllerService.getOrganization():e===m.UnapprovedOrg?this.organizationControllerService.getUnapprovedOrganizations():new o.Observable,this.loadRoles=e=>this.roleControllerService.getRoles(e),this.isAdmin=()=>{const e=this.menuType;return e===d.user?this.authService.authState.hasPermission(g.Xg.UserAdmin):e===d.device?this.authService.authState.hasPermission(g.Xg.DeviceAdmin):e===d.vessel?this.authService.authState.hasPermission(g.Xg.VesselAdmin):e===d.mms?this.authService.authState.hasPermission(g.Xg.MMSAdmin):e===d.service?this.authService.authState.hasPermission(g.Xg.ServiceAdmin):(e===d.organization||e===d.role)&&this.authService.authState.hasPermission(g.Xg.OrgAdmin)},this.menuType=this.router.url.split("/").pop(),this.menuType=this.menuType.endsWith("s")?this.menuType.replace("-","").substr(0,this.menuType.length-1):this.menuType.replace("-",""),this.menuType===m.InstanceOfOrg&&(this.isForServiceForOrg=!0,this.menuType=m.Instance),Object.values(m).includes(this.menuType)?(this.menuTypeName=d[this.menuType],this.iconName=p[this.menuType],this.orgMrn=this.authService.authState.orgMrn,t.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"})):this.router.navigate(["**"])}ngOnInit(){this.fetchValues()}fetchValues(){if(!l.hasOwnProperty(this.menuType))throw this.isLoading=!1,new Error(`There's no '${this.menuType}DataService' in ColumnForMenu`);if(this.mySettings.columns=Object.assign({},...Object.entries(l[this.menuType]).filter(([e,t])=>Array.isArray(t.visibleFrom)&&t.visibleFrom.includes(this.contextForAttributes)).map(([e,t])=>({[e]:t}))),this.settings=Object.assign({},this.mySettings),this.title=`${e=this.menuTypeName,"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)} list`,this.isLoading=!0,!Object.values(m).includes(this.menuType))throw this.isLoading=!1,new Error(`There's no such thing as '${this.menuType}DataService'`);var e;this.menuType===m.Organization||this.menuType===m.UnapprovedOrg?this.loadDataContent(this.menuType).subscribe(e=>{this.source.load(this.formatResponse(e.content)),this.isLoading=!1},e=>this.notifierService.notify("error",e.message)):this.menuType===m.Role?this.loadMyOrganization().subscribe(e=>this.loadRoles(e.mrn).subscribe(e=>{this.source.load(e),this.isLoading=!1},e=>this.notifierService.notify("error",e.message)),e=>this.notifierService.notify("error",e.message)):this.menuType===m.Instance||this.menuType===m.InstanceOfOrg?this.loadServiceInstances(this.isForServiceForOrg?this.orgMrn:void 0).subscribe(e=>{this.source.load(this.formatResponseForService(e)),this.isLoading=!1},e=>this.notifierService.notify("error",e.message)):this.menuType===m.UnapprovedSvc?this.loadServiceInstances().subscribe(e=>{this.source.load(this.formatResponseForService(e)),this.isLoading=!1},e=>this.notifierService.notify("error",e.message)):this.loadMyOrganization().subscribe(e=>this.loadDataContent(this.menuType,e.mrn).subscribe(e=>{this.source.load(this.formatResponse(e.content)),this.isLoading=!1},e=>this.notifierService.notify("error",e.message)),e=>this.notifierService.notify("error",e.message))}formatResponse(e){return e.map(e=>v(e))}formatResponseForService(e){return e.map(e=>(e=>{let t={};for(const r in e)t[r]=r.endsWith("At")?u(new Date(e[r])):e[r];return t})(e))}onDelete(e){this.isAdmin()?this.delete(this.menuType,this.orgMrn,e.data.mrn,e.data.instanceVersion,e.data.id):this.notifierService.notify("error","You don't have right permission")}delete(e,t,r,n,i){let a="Are you sure you want to delete?";a=h.indexOf(this.menuType)>=0?a+" All certificates under this entity will be revoked.":a,confirm(a)&&this.deleteData(e,t,r,n).subscribe(e=>{this.notifierService.notify("success",this.menuTypeName+" has been successfully deleted"),this.fetchValues()},e=>this.notifierService.notify("error","There was error in deletion - "+e.message))}onEdit(e){this.router.navigate([this.router.url,e.data.mrn?encodeURIComponent(e.data.mrn):e.data.id],{queryParams:{name:e.data.roleName?e.data.roleName:e.data.name?e.data.name:e.data.lastName+" "+e.data.firstName,version:e.data.instanceVersion}})}onAddNew(){this.router.navigate([this.router.url,"new"])}onSearch(e=""){this.source.setFilter([{field:"id",search:e},{field:"name",search:e},{field:"mrn",search:e}],!1)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.F0),i["\u0275\u0275directiveInject"](k.B7b),i["\u0275\u0275directiveInject"](S.p),i["\u0275\u0275directiveInject"](P.$),i["\u0275\u0275directiveInject"](A.U),i["\u0275\u0275directiveInject"](B.H),i["\u0275\u0275directiveInject"](O.e),i["\u0275\u0275directiveInject"](j.$),i["\u0275\u0275directiveInject"](N.A8),i["\u0275\u0275directiveInject"](C.T),i["\u0275\u0275directiveInject"](I.r),i["\u0275\u0275directiveInject"](E.lG),i["\u0275\u0275directiveInject"](V.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-list"]],decls:15,vars:5,consts:[[1,"row"],[1,"col","my-auto"],[1,"icon_header"],["pack","fas",3,"icon"],[1,"col-md-auto"],["type","button","nbButton","","status","primary",3,"click",4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["type","text","placeholder","Search...",1,"search",3,"keydown.enter"],["search",""],[3,"settings","source","edit","delete",4,"ngIf"],["type","button","nbButton","","status","primary",3,"click"],[3,"settings","source","edit","delete"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275element"](5,"nb-icon",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275template"](8,x,2,0,"button",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"nb-card-body",6),i["\u0275\u0275elementStart"](10,"div"),i["\u0275\u0275elementStart"](11,"input",7,8),i["\u0275\u0275listener"]("keydown.enter",function(){i["\u0275\u0275restoreView"](e);const r=i["\u0275\u0275reference"](12);return t.onSearch(r.value)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,D,1,2,"ng2-smart-table",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"notifier-container")}2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("icon",t.iconName),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",t.title," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.isAdmin()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbSpinner",t.isLoading),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.showTables))},directives:[k.Asz,k.ndF,k.fMN,n.O5,k.yKW,k.Q7R,E.TK,k.DPz,c.T5],styles:["nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}"]}),e})();var T=r(3679);const R=e=>{switch(e){case _.Aacompromise:return{value:e,title:"AA compromised",description:"This reason indicates that it is known or suspected that the certificate subject's private key has been compromised. It applies to authority attribute (AA) certificates only.",reference:"https://docs.oracle.com/javase/8/docs/api/java/security/cert/CRLReason.html"};case _.Affiliationchanged:return{value:e,title:"Affiliation changed",description:"The user has terminated his or her relationship with the organization indicated in the Distinguished Name attribute of the certificate. This revocation code is typically used when an individual is terminated or has resigned from an organization. You do not have to revoke a certificate when a user changes departments, unless your security policy requires different certificate be issued by a departmental CA.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Cacompromise:return{value:e,title:"CA compromised",description:"The token or disk location where the CA's private key is stored has been compromised and is in the possession of an unauthorized individual. When a CA's private key is revoked, this results in all certificates issued by the CA that are signed using the private key associated with the revoked certificate being considered revoked.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Certificatehold:return{value:e,title:"Certificate Hold",description:"A temporary revocation that indicates that a CA will not vouch for a certificate at a specific point in time. Once a certificate is revoked with a CertificateHold reason code, the certificate can then be revoked with another Reason Code, or unrevoked and returned to use.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Cessationofoperation:return{value:e,title:"Cessation of Operation",description:"If a CA is decommissioned, no longer to be used, the CA's certificate should be revoked with this reason code. Do not revoke the CA's certificate if the CA no longer issues new certificates, yet still publishes CRLs for the currently issued certificates.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Keycompromise:return{value:e,title:"Key compromised",description:"The token or disk location where the private key associated with the certificate has been compromised and is in the possession of an unauthorized individual. This can include the case where a laptop is stolen, or a smart card is lost.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Privilegewithdrawn:return{value:e,title:"Privilege withdrawn",description:"A certificate (public-key or attribute certificate) was revoked because a privilege contained within that certificate has been withdrawn",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Removefromcrl:return{value:e,title:"Remove from CRL",description:'If a certificate is revoked with the CertificateHold reason code, it is possible to "unrevoke" a certificate. The unrevoking process still lists the certificate in the CRL, but with the reason code set to RemoveFromCRL.',reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Superseded:return{value:e,title:"Superseded",description:"A replacement certificate has been issued to a user, and the reason does not fall under the previous reasons. This revocation reason is typically used when a smart card fails, the password for a token is forgotten by a user, or the user has changed their legal name.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};case _.Unspecified:return{value:e,title:"Unspecified",description:"It is possible to revoke a certificate without providing a specific reason code. While it is possible to revoke a certificate with the Unspecified reason code, this is not recommended, as it does not provide an audit trail as to why a certificate is revoked.",reference:"https://docs.microsoft.com/en-us/previous-versions/tn-archive/cc700843(v=technet.10)?redirectedfrom=MSDN#revocation-reasons"};default:return{value:e,title:_[e],description:"No description",reference:""}}};let U=(()=>{class e{constructor(e,t,r,n,i,a){this.organizationsService=e,this.devicesService=t,this.servicesService=r,this.usersService=n,this.vesselsService=i,this.mmsService=a}ngOnInit(){}formatCerts(e){let t=[];for(const r in e){const n=e[r];for(const t in n)e[r][t]=t.endsWith("At")||"end"===t||"start"===t?u(parseInt(n[t])):n[t];n.revoked&&(n.revokeInfo=n.revokedAt,n.revokeReasonText=R(n.revokeReason).title),t.push(n)}return t}splitByRevokeStatus(e){let t=[],r=[];for(const n in e){const i=e[n];i.revoked?r.push(i):t.push(i)}return t.sort((e,t)=>e.end-t.end),r.sort((e,t)=>e.end-t.end),{activeCertificates:this.formatCerts(t),revokedCertificates:this.formatCerts(r)}}issueNewCertificateFromMIR(e,t,r,n){if(null==e||!t)throw new Error("Internal state lost");switch(e){case f.Organization:return this.organizationsService.newOrgCert(t);case f.Device:return this.devicesService.newDeviceCert(r,t);case f.Service:return this.servicesService.newServiceCert(r,t,n);case f.User:return this.usersService.newUserCert(r,t);case f.Vessel:return this.vesselsService.newVesselCert(r,t);case f.MMS:return this.mmsService.newMMSCert(r,t)}}issueNewCertificate(e,t,r,n,i){if(null==t||!r)throw new Error("Internal state lost");switch(t){case f.Organization:return this.organizationsService.newOrgCertFromCsr(e,r);case f.Device:return this.devicesService.newDeviceCertFromCsr(e,n,r);case f.Service:return this.servicesService.newServiceCertFromCsr(e,n,r,i);case f.User:return this.usersService.newUserCertFromCsr(e,n,r);case f.Vessel:return this.vesselsService.newVesselCertFromCsr(e,n,r);case f.MMS:return this.mmsService.newMMSCertFromCsr(e,n,r)}}revokeCertificate(e,t,r,n,i,a){if(null==e||!t)throw new Error("Internal state lost");switch(e){case f.Organization:return this.organizationsService.revokeOrgCert(i,t,n);case f.Device:return this.devicesService.revokeDeviceCert(i,r,t,n);case f.Service:return this.servicesService.revokeServiceCert(i,r,t,a,n);case f.User:return this.usersService.revokeUserCert(i,r,t,n);case f.Vessel:return this.vesselsService.revokeVesselCert(i,r,t,n);case f.MMS:return this.mmsService.revokeMMSCert(i,r,t,n)}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](I.r),i["\u0275\u0275inject"](P.$),i["\u0275\u0275inject"](O.e),i["\u0275\u0275inject"](S.p),i["\u0275\u0275inject"](B.H),i["\u0275\u0275inject"](C.T))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=r(49670);let H=(()=>{class e{constructor(e){this.authService=e,this.idpNamespace=L.X.IDP_NAMESPACE,this.mrnMCP="urn:mrn:mcp:"}shortIdFromMrn(e){let t=e.split(":");return t[t.length-1]}mrnPreFix(){return this.mrnPreFixForOrg(this.authService.authState.orgMrn)}mrnPreFixForOrg(e){return e.split(":org:")[0]+":"}orgShortId(){return this.shortIdFromMrn(this.authService.authState.orgMrn)}mrnMcpIdpRegexForOrg(){return"urn:mrn:mcp:(device|org|user|vessel|service|mms):"+this.idpNamespace+":((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$"}mrnRegex(){return"urn:mrn:([a-z0-9]([a-z0-9]|-){0,20}[a-z0-9]):([a-z0-9][-a-z0-9]{0,20}[a-z0-9]):((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)((?+((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?(?=((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?)?(#(((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)||?)*))?$"}mrnMcpIdpRegex(){return"urn:mrn:mcp:(device|org|user|vessel|service|mms):"+this.idpNamespace+":"+this.orgShortId()+"((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|)*)$"}mrnMask(e){switch(e){case d.device:return this.mrnMaskForDevice();case d.user:return this.mrnMaskForUser();case d.organization:return this.mrnMaskForOrganization();case d.vessel:return this.mrnMaskForVessel();case d.instance:case d.service:return this.mrnMaskForInstance();case d.mms:return this.mrnMaskForMms();default:return this.mrnMaskForOrganization()}}mrnPattern(){return"^((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$"}mrnPatternError(){return"It should contain at least 3 characters and only a-z 0-9 + , / ~ - . : = @ ; $ _ ! * '"}mrnMaskForVessel(){return this.mrnMCP+"vessel:"+this.idpNamespace+":"+this.orgShortId()+":"}mrnMaskForMms(){return this.mrnMCP+"mms:"+this.idpNamespace+":"+this.orgShortId()+":"}mrnMaskForDevice(){return this.mrnMCP+"device:"+this.idpNamespace+":"+this.orgShortId()+":"}mrnMaskForOrganization(){return this.mrnMCP+"org:"+this.idpNamespace+":"}mrnMaskForUserOfOrg(e){return this.mrnPreFixForOrg(e)+"user:"+this.idpNamespace+":"+this.shortIdFromMrn(e)+":"}mrnMaskForUser(){return this.mrnMCP+"user:"+this.idpNamespace+":"+this.orgShortId()+":"}mrnMaskForSpecification(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":specification:"}mrnMaskForDesign(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":design:"}mrnMaskForInstance(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":instance:"}mrnMaskTextForInstance(){return this.mrnMCP+"service:"+this.idpNamespace+":"+this.orgShortId()+":instance:"}checkMrnForSpecification(e){let t=`^${this.mrnMaskForSpecification()}((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$`;return console.log(t),new RegExp(t).test(e)}checkMrnForDesign(e){let t=`^${this.mrnMaskForDesign()}((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$`;return new RegExp(t).test(e)}checkMrnForInstance(e){let t=`^${this.mrnMaskForInstance()}((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)((([-._a-z0-9]|~)|%[0-9a-f][0-9a-f]|([!$&'()*+,;=])|:|@)|/)*)$`;return new RegExp(t,"g").test(e)}checkMrn(e,t){try{let n=e.indexOf(t);if(n<0)return!1;var r=!0;return e.substring(n).split(":").forEach(e=>{e.toLowerCase().match(this.mrnPattern())||(r=!1)}),r}catch(n){return!1}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](V.e))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),K=(()=>{class e extends k.O$F{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=i["\u0275\u0275getInheritedFactory"](e)))(r||e)}}(),e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-day-cell"]],hostAttrs:[1,"day-cell"],hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("click",function(){return t.onClick()})},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:2,consts:[[1,"caption"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"span",0),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t.day),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",(t.day+100)*t.day,"$"))},styles:[".nb-theme-default   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-default   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-default   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-default   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-dark   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-dark   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-dark   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-dark   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-cosmic   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-cosmic   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-cosmic   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-cosmic   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}.nb-theme-corporate   [_nghost-%COMP%]{text-align:center;flex-direction:column}.nb-theme-corporate   [_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{display:block}.nb-theme-corporate   .selected[_nghost-%COMP%]   .caption[_ngcontent-%COMP%], .nb-theme-corporate   [_nghost-%COMP%]:hover   .caption[_ngcontent-%COMP%]{color:#fff}.nb-theme-corporate   .bounding-month[_nghost-%COMP%]   .caption[_ngcontent-%COMP%]{color:inherit}"]}),e})();function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-option",16),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.title,"")}}function W(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",17),i["\u0275\u0275elementStart"](1,"a",18),i["\u0275\u0275text"](2,"(Reference)"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",e.reference,i["\u0275\u0275sanitizeUrl"])}}let q=(()=>{class e{constructor(e){this.ref=e,this.date=new Date,this.reasons=[],this.description="",this.reference="",this.dayCellComponent=K,this.isLoading=!1;for(const t in _)this.reasons.push(R(t.toLocaleLowerCase()))}doRevoke(){this.isLoading=!0;const e={revokedAt:this.date.getTime().toString(),revokationReason:this.revokationReason};this.certificateService.revokeCertificate(this.entityType,this.entityMrn,this.orgMrn,this.certificateId,e,this.instanceVersion).subscribe(e=>{this.ref.close(),this.notifierService.notify("success","Certificate has been successfully revoked"),this.isLoading=!1,this.updateCertificate()},e=>{this.isLoading=!1,410!==e.status?this.notifierService.notify("error","Error when trying to issue new certificate",e.message):this.notifierService.notify("error","Generating certificates with server generated keys is not supported by this ID provider")})}ngOnInit(){}dismiss(){this.ref.close()}onMenuItemSelected(e){const t=R(e);this.revokationReason=t.value,this.description=t.description,this.reference=t.reference}onDateChange(e){this.date=e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](k.X4l))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cert-revoke-dialog"]],inputs:{entityMrn:"entityMrn",entityTitle:"entityTitle",orgMrn:"orgMrn",certificateId:"certificateId",instanceVersion:"instanceVersion",entityType:"entityType",certificateService:"certificateService",notifierService:"notifierService",updateCertificate:"updateCertificate"},decls:30,vars:7,consts:[[1,"modal-window"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],[1,"container"],[1,"row"],[1,"col"],[1,"subtitle"],["fullWidth","","placeholder","Choose a reason",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","placeholder","Choose a date",3,"nbDatepicker"],[3,"dateChange"],["formpicker",""],[1,"headline"],["class","reference",4,"ngIf"],[1,"buttons-row"],["type","button","nbButton","","status","primary",3,"click"],["type","button","nbButton","","status","danger",3,"click"],[3,"value"],[1,"reference"],["target","_blank",3,"href"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-card",0),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"nb-card-body",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"span",5),i["\u0275\u0275text"](8," Revocation reason: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"br"),i["\u0275\u0275elementStart"](10,"nb-select",6),i["\u0275\u0275listener"]("selectedChange",function(e){return t.onMenuItemSelected(e)}),i["\u0275\u0275template"](11,F,2,2,"nb-option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",4),i["\u0275\u0275elementStart"](13,"span",5),i["\u0275\u0275text"](14," Revocation date: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"br"),i["\u0275\u0275element"](16,"input",8),i["\u0275\u0275elementStart"](17,"nb-datepicker",9,10),i["\u0275\u0275listener"]("dateChange",function(e){return t.onDateChange(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",3),i["\u0275\u0275elementStart"](20,"div",4),i["\u0275\u0275elementStart"](21,"div",11),i["\u0275\u0275text"](22),i["\u0275\u0275template"](23,W,3,1,"span",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"nb-card-footer"),i["\u0275\u0275elementStart"](25,"div",13),i["\u0275\u0275elementStart"](26,"button",14),i["\u0275\u0275listener"]("click",function(){return t.doRevoke()}),i["\u0275\u0275text"](27,"Revoke"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"button",15),i["\u0275\u0275listener"]("click",function(){return t.dismiss()}),i["\u0275\u0275text"](29,"Cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](18);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate2"](" Revoke certificate for ",t.entityTitle," (",t.entityMrn,") "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbSpinner",t.isLoading),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",t.reasons),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("nbDatepicker",e),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"](" ",t.description," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.reference.length)}},directives:[k.Asz,k.ndF,k.yKW,k.Q7R,k.rs,n.sg,k.h8i,k.$kf,k.B4C,n.O5,k.XWE,k.DPz,k.q51],styles:[".modal-window[_ngcontent-%COMP%]{width:40rem}.headline[_ngcontent-%COMP%]{padding:10px}.reference[_ngcontent-%COMP%], .reference[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#646464}.nb-theme-default   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-default   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-dark   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-dark   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-cosmic   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-corporate   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-corporate   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}"]}),e})();var z=r(27286),J=r(46721),$=r(35585),G=r(9681),Z=r(46826),Q=r(81957),X=r(78342),Y=r(93108),ee=r(45402),te=r(1971),re=r(71030),ne=r(93085),ie=r(68681),ae=r(97226),se=r(75530);function oe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," Certificate issued with success "),i["\u0275\u0275elementEnd"]())}function ue(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1," Select cert issue method "),i["\u0275\u0275elementEnd"]())}function le(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2,"There are four ways to issue a new certificate:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",5),i["\u0275\u0275elementStart"](4,"nb-card",6),i["\u0275\u0275elementStart"](5,"nb-tabset",7),i["\u0275\u0275elementStart"](6,"nb-tab",8),i["\u0275\u0275elementStart"](7,"p"),i["\u0275\u0275text"](8,"Many operating systems and browsers require that certificates are imported as a password protected PKCS#12 keystore. If you want to manually generate the keystore, which is the recommended approach, click the corresponding button below and download the resulting zip file, unzip it and then use OpenSSL to generate the keystore using the following command: "),i["\u0275\u0275element"](9,"br"),i["\u0275\u0275element"](10,"br"),i["\u0275\u0275elementStart"](11,"pre"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13," This will prompt you for a passphrase to protect the keystore. If successful the command will result in a PKCS#12 keystore file called 'keystore.p12'. "),i["\u0275\u0275element"](14,"br"),i["\u0275\u0275text"](15,"If you don't want to generate a keystore at all you can just skip executing the OpenSSL command. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",9),i["\u0275\u0275elementStart"](17,"button",10),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().locallyWManualKeystore()}),i["\u0275\u0275text"](18,"Issue a cert locally with manual keystore setup"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"nb-tab",11),i["\u0275\u0275elementStart"](20,"p"),i["\u0275\u0275text"](21," Many operating systems and browsers require that certificates are imported as a password protected PKCS#12 keystore. You can let your browser generate a keystore for you. NOTE that this action will take a little while and the resulting keystore will NOT be compatible with most major operating systems and browsers. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"nb-tab",12),i["\u0275\u0275elementStart"](24,"p"),i["\u0275\u0275text"](25," MIR API server generate it for you? NOTE that it is strongly recommended to NOT let the server generate the key pair for you as in case of a breach of the MIR API server, a malicious third party can potentially take control over your identity by stealing your private key when it is generated. Also note that the possibility of getting server generated key pairs will be removed completely in the future, and that MCP ID service providers can already choose to disable it now. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",9),i["\u0275\u0275elementStart"](27,"button",13),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fromServer()}),i["\u0275\u0275text"](28,"Issue a cert from server"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"nb-tab",14),i["\u0275\u0275elementStart"](30,"span"),i["\u0275\u0275text"](31," You can generate the key pair and a CSR from scratch by yourself - an example on how to do this can be found "),i["\u0275\u0275elementStart"](32,"a",15),i["\u0275\u0275text"](33,"here"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,". "),i["\u0275\u0275element"](35,"br"),i["\u0275\u0275text"](36," .. and you are free to click 'Close' button to proceed. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"p"),i["\u0275\u0275text"](38," We strongly recommend to read the instructions throughly as the security impact significantly differs from each other. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](12),i["\u0275\u0275textInterpolate2"]("openssl pkcs12 -export -out keystore.p12 -in Certificate_",e.nameNoSpaces,".pem -inkey PrivateKey_",e.nameNoSpaces,".pem")}}function ce(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"button",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().zipAndDownload()}),i["\u0275\u0275text"](2,"Download certificate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let he=(()=>{class e{constructor(e){this.ref=e,this.serverGeneratedKeys=!1}ngOnInit(){this.isLoading=!1,this.entityMrn&&(this.generateLabelValues(),this.nameNoSpaces=this.entityTitle.split(" ").join("_"))}dismiss(){this.ref.close(),this.certificateBundle&&this.updateCertificate()}locallyWManualKeystore(){this.issueNewWithLocalKeys(!1)}locallyFromBrowser(){this.issueNewWithLocalKeys(!0)}fromServer(){this.issueNewWithServerKeys()}zipAndDownload(){this.fileHelper.downloadPemCertificate(this.certificateBundle,this.entityTitle,this.serverGeneratedKeys,this.notifierService),this.notifierService.notify("success","Chosen certificate has downloaded")}issueNewWithServerKeys(){this.isLoading=!0,this.certificateService.issueNewCertificateFromMIR(this.entityType,this.entityMrn,this.orgMrn,this.instanceVersion).subscribe(e=>{this.certificateBundle=e,this.serverGeneratedKeys=!0,this.isLoading=!1,this.notifierService.notify("success","You can now download the issued certificate")},e=>{this.isLoading=!1,410!==e.status?this.notifierService.notify("error","Error when trying to issue new certificate",e.message):this.notifierService.notify("error","Generating certificates with server generated keys is not supported by this ID provider")})}issueNewWithLocalKeys(e){this.isLoading=!0,crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384",typedCurve:""},!0,["sign","verify"]).then(t=>{let r=new Y.Z;r.subject.typesAndValues.push(new ee.default({type:"2.5.4.3",value:new se.PrintableString({value:"Test"})})),r.subjectPublicKeyInfo.importKey(t.publicKey).then(()=>{r.sign(t.privateKey,"SHA-384").then(()=>{let n=r.toSchema().toBER(!1),i=this.toPem(n,"CERTIFICATE REQUEST");this.certificateService.issueNewCertificate(i,this.entityType,this.entityMrn,this.orgMrn,this.instanceVersion).subscribe(e=>{},r=>{if(201===r.status){const n=r.error.text;crypto.subtle.exportKey("pkcs8",t.privateKey).then(r=>{crypto.subtle.exportKey("spki",t.publicKey).then(t=>{let i=new J.default({schema:(0,se.fromBER)(r).result});if(e){let e=this.convertCertChain(n).map(e=>new $.default({schema:(0,se.fromBER)(e).result})),a=this.generatePassword();Promise.resolve().then(()=>this.generatePKCS12(i,e,a)).then(e=>{this.certificateBundle={pemCertificate:{privateKey:this.toPem(r,"PRIVATE KEY"),publicKey:this.toPem(t,"PUBLIC KEY"),certificate:n},pkcs12Keystore:new TextDecoder("utf-8").decode(e),keystorePassword:a},this.isLoading=!1,this.notifierService.notify("success","You can now download the issued certificate")},e=>{this.isLoading=!1,this.notifierService.notify("error","PKCS#12 keystore could not be generated - "+e.message)})}else this.certificateBundle={pemCertificate:{privateKey:this.toPem(r,"PRIVATE KEY"),publicKey:this.toPem(t,"PUBLIC KEY"),certificate:n}},this.notifierService.notify("success","You can now download the issued certificate"),this.isLoading=!1},e=>{this.isLoading=!1,this.notifierService.notify("error","Public key could not be exported - "+e.message)})},e=>{this.isLoading=!1,this.notifierService.notify("error","Private key could not be exported - "+e.message)})}else this.isLoading=!1,this.notifierService.notify("error","Error when trying to issue new certificate - "+r.message)})})})},e=>{this.isLoading=!1,this.notifierService.notify("error","Error when trying to issue new certificate - "+e.message)})}generateLabelValues(){this.labelValues=[],this.labelValues.push({label:"Name",valueHtml:this.entityTitle}),this.labelValues.push({label:"MRN",valueHtml:this.entityMrn.split("#\xa4#")[0]})}toPem(e,t){let r=z.Convert.ToBase64(e),n="";for(;r.length>0;)n+=r.substring(0,64)+"\n",r=r.substring(64);return`-----BEGIN ${t}-----\n${n}-----END ${t}-----\n`}convertCertChain(e){let t=e.split(/-----END CERTIFICATE-----/);return t=t.slice(0,t.length-1),t.map(e=>e.split(/-----BEGIN CERTIFICATE-----/)[1].replace(/\n/gm,"")).map(e=>z.Convert.FromBase64(e))}generatePassword(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_^$#&!%",t=new Uint32Array(26);crypto.getRandomValues(t);let r="";for(let n=0;n<t.length;n++)r+=e[t[n]%e.length];return r}generatePKCS12(e,t,r){const n=new ArrayBuffer(4),i=new Uint8Array(n);(0,ae.getRandomValues)(i);const a=new ArrayBuffer(4),s=new Uint8Array(a);(0,ae.getRandomValues)(s);const o=new ArrayBuffer(4),u=new Uint8Array(o);(0,ae.getRandomValues)(u);const l=new ArrayBuffer(1);new Uint8Array(l)[0]|=128;const c=new se.BitString({valueHex:l,unusedBits:7});e.attributes=[new ie.default({type:"2.5.29.15",values:[c]})];let h="";t[0].subject.typesAndValues.forEach(e=>{"2.5.4.3"===e.type&&(h=e.value.valueBlock.value)});let f="";t[1].subject.typesAndValues.forEach(e=>{"2.5.4.3"===e.type&&(f=e.value.valueBlock.value)});const m=new G.Z({parsedValue:{integrityMode:0,authenticatedSafe:new Q.default({parsedValue:{safeContents:[{privacyMode:0,value:new re.default({safeBags:[new Z.default({bagId:"1.2.840.113549.1.12.10.1.2",bagValue:new ne.default({parsedValue:e}),bagAttributes:[new ie.default({type:"1.2.840.113549.1.9.20",values:[new se.BmpString({value:"PKCS8ShroudedKeyBag from PKIjs"})]}),new ie.default({type:"1.2.840.113549.1.9.21",values:[new se.OctetString({valueHex:n})]}),new ie.default({type:"1.3.6.1.4.1.311.17.1",values:[new se.BmpString({value:"MCP using https://pkijs.org/"})]})]})]})},{privacyMode:1,value:new re.default({safeBags:[new Z.default({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new X.default({parsedValue:t[0]}),bagAttributes:[new ie.default({type:"1.2.840.113549.1.9.20",values:[new se.BmpString({value:h})]}),new ie.default({type:"1.2.840.113549.1.9.21",values:[new se.OctetString({valueHex:a})]}),new ie.default({type:"1.3.6.1.4.1.311.17.1",values:[new se.BmpString({value:"MCP using https://pkijs.org/"})]})]}),new Z.default({bagId:"1.2.840.113549.1.12.10.1.3",bagValue:new X.default({parsedValue:t[1]}),bagAttributes:[new ie.default({type:"1.2.840.113549.1.9.20",values:[new se.BmpString({value:f})]}),new ie.default({type:"1.2.840.113549.1.9.21",values:[new se.OctetString({valueHex:o})]}),new ie.default({type:"1.3.6.1.4.1.311.17.1",values:[new se.BmpString({value:"MCP using https://pkijs.org/"})]})]})]})}]}})}});let d=(0,te.stringToArrayBuffer)(r),p=Promise.resolve();return p=p.then(()=>m.parsedValue.authenticatedSafe.parsedValue.safeContents[0].value.safeBags[0].bagValue.makeInternalValues({password:d,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-256",iterationCount:1e5})),p=p.then(()=>m.parsedValue.authenticatedSafe.makeInternalValues({safeContents:[{},{password:d,contentEncryptionAlgorithm:{name:"AES-CBC",length:128},hmacHashAlgorithm:"SHA-256",iterationCount:1e5}]})),p=p.then(()=>m.makeInternalValues({password:d,iterations:1e5,pbkdf2HashAlgorithm:"SHA-256",hmacHashAlgorithm:"SHA-256"})),p.then(()=>m.toSchema().toBER(!1))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](k.X4l))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-cert-issue-dialog"]],inputs:{entityMrn:"entityMrn",entityTitle:"entityTitle",entityType:"entityType",orgMrn:"orgMrn",instanceVersion:"instanceVersion",notifierService:"notifierService",fileHelper:"fileHelper",certificateService:"certificateService",updateCertificate:"updateCertificate"},decls:11,vars:5,consts:[[4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["class","container",4,"ngIf"],[1,"buttons-row"],["nbButton","","status","danger",3,"click"],[1,"col-12"],["size","small"],["fullWidth",""],["tabTitle","Locally with manual keystore setup"],[1,"container"],["nbButton","","status","success",1,"w-100",3,"click"],["tabTitle","Locally from browser"],["tabTitle","From server"],["nbButton","","status","warning",1,"w-100",3,"click"],["tabTitle","Locally from scratch with OpenSSL"],["href","https://github.com/maritimeconnectivity/IdentityRegistry#certificate-issuing-by-certificate-signing-request","target","_blank"],["type","button","nbButton","","status","success",1,"w-100",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275template"](2,oe,2,0,"div",0),i["\u0275\u0275template"](3,ue,2,0,"div",0),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"nb-card-body",1),i["\u0275\u0275template"](5,le,39,2,"div",0),i["\u0275\u0275template"](6,ce,3,0,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"nb-card-footer"),i["\u0275\u0275elementStart"](8,"div",3),i["\u0275\u0275elementStart"](9,"button",4),i["\u0275\u0275listener"]("click",function(){return t.dismiss()}),i["\u0275\u0275text"](10,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.certificateBundle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.certificateBundle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbSpinner",t.isLoading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.certificateBundle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.certificateBundle))},directives:[k.Asz,k.ndF,n.O5,k.yKW,k.Q7R,k.XWE,k.DPz,k.kyn,k.TR4],styles:[""]}),e})();const fe={start:{title:"Valid from",type:"string"},end:{title:"Valid until",type:"string"}},me={revokeInfo:{title:"Revoked from",type:"string"},revokeReasonText:{title:"Reason",type:"string"}};var de=r(49457),pe=r(7586);let ge=(()=>{class e{constructor(){}downloadPemCertificate(e,t,r,n){try{let n=t.split(" ").join("_");r&&(e.pemCertificate.certificate=this.replaceNewLines(e.pemCertificate.certificate),e.pemCertificate.publicKey&&(e.pemCertificate.publicKey=this.replaceNewLines(e.pemCertificate.publicKey)),e.pemCertificate.privateKey&&(e.pemCertificate.privateKey=this.replaceNewLines(e.pemCertificate.privateKey)),e.pkcs12Keystore&&(e.pkcs12Keystore=this.convertBase64ToByteArray(e.pkcs12Keystore).toString()));let i=new pe;if(i.file("Certificate_"+n+".pem",e.pemCertificate.certificate),e.pemCertificate.privateKey&&i.file("PrivateKey_"+n+".pem",e.pemCertificate.privateKey),e.pemCertificate.publicKey&&i.file("PublicKey_"+n+".pem",e.pemCertificate.publicKey),e.keystorePassword&&i.file("KeystorePassword.txt",this.replaceNewLines(e.keystorePassword)),e.jksKeystore){let t=this.convertBase64ToByteArray(e.jksKeystore),r=new Blob([t]);i.file("Keystore_"+n+".jks",r)}if(e.pkcs12Keystore){let t=new Blob([e.pkcs12Keystore]);i.file("Keystore_"+n+".p12",t)}i.generateAsync({type:"blob"}).then(function(e){de.saveAs(e,"Certificate_"+n+".zip")})}catch(i){n.notify("error","Error when trying to download file - "+i)}}downloadXml(e,t){e?this.downloadFile(e.content,e.contentContentType,e.name,t):t.notify("error","No file to download")}downloadDoc(e,t){if(!e)return void t.notify("error","No file to download");if(e.filecontent.length>1&&e.filecontent.length<10)return void t.notify("error","File from Service Registry is in the wrong format. "+e.name);let r=e.filecontent.toString();this.downloadBase64File(r,e.filecontentContentType,e.name,t)}downloadBase64File(e,t,r,n){try{let n=this.convertBase64ToByteArray(e),i=new Blob([n],{type:t});de.saveAs(i,r)}catch(i){n.notify("error","Error when trying to download file - "+i)}}downloadFile(e,t,r,n){try{let n=new Blob([e],{type:t});de.saveAs(n,r)}catch(i){n.notify("error","Error when trying to download file - "+i)}}convertBase64ToByteArray(e){let t=window.atob(e),r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new Uint8Array(r)}replaceNewLines(e){let t="\n";return-1!=navigator.appVersion.indexOf("Win")&&(t="\r\n"),e?e.replace(/(\\n)/gm,t):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ye(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",4),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).openIssueDialog()}),i["\u0275\u0275text"](1,"Issue new certificate"),i["\u0275\u0275elementEnd"]()}}function ve(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",2),i["\u0275\u0275template"](2,ye,2,0,"button",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.hasPermission)}}let be=(()=>{class e{constructor(e,t,r,n){this.notifierService=e,this.fileHelper=t,this.certificateService=r,this.dialogService=n,this.settings={mode:"external",edit:{editButtonContent:'<small><i class="fas fa-file-download fa-xs"></i></small>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<small><i class="fas fa-ban fa-xs"></i></small>',confirmDelete:!0},hideSubHeader:!0,actions:{position:"right"}},this.source=new c.nC,this.onUpdate=new i.EventEmitter,this.certificateTitle="Certificate for "}ngOnInit(){this.forRevoked?(this.settings.actions=void 0,this.settings.columns=me):this.settings.columns=fe}openIssueDialog(){this.hasPermission?this.dialogService.open(he,{context:{entityMrn:this.entityMrn,entityTitle:this.entityTitle,entityType:this.entityType,orgMrn:this.orgMrn,instanceVersion:this.instanceVersion,notifierService:this.notifierService,fileHelper:this.fileHelper,certificateService:this.certificateService,updateCertificate:()=>this.onUpdate.emit()},closeOnBackdropClick:!1,closeOnEsc:!1}):this.notifierService.notify("error","You don't have right permission")}openRevokeDialog(e){this.hasPermission?this.dialogService.open(q,{context:{entityMrn:this.entityMrn,entityTitle:this.entityTitle,entityType:this.entityType,orgMrn:this.orgMrn,certificateId:e.serialNumber,instanceVersion:this.instanceVersion,notifierService:this.notifierService,certificateService:this.certificateService,updateCertificate:()=>this.onUpdate.emit()},closeOnBackdropClick:!1,closeOnEsc:!1}):this.notifierService.notify("error","You don't have right permission")}onEdit(e){this.download(e.data),this.notifierService.notify("success","Chosen certificate has downloaded")}onDelete(e){this.openRevokeDialog(e.data)}download(e){this.fileHelper.downloadPemCertificate({pemCertificate:{certificate:e.certificate}},"Certificate for "+this.entityTitle,!0,this.notifierService)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](E.lG),i["\u0275\u0275directiveInject"](ge),i["\u0275\u0275directiveInject"](U),i["\u0275\u0275directiveInject"](k.Gln))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-certificates"]],inputs:{data:"data",forRevoked:"forRevoked",entityMrn:"entityMrn",entityTitle:"entityTitle",entityType:"entityType",orgMrn:"orgMrn",instanceVersion:"instanceVersion",hasPermission:"hasPermission"},outputs:{onUpdate:"onUpdate"},decls:2,vars:3,consts:[[3,"settings","source","edit","delete"],[4,"ngIf"],[1,"container"],["class","w-100","status","primary","type","button","nbButton","",3,"click",4,"ngIf"],["status","primary","type","button","nbButton","",1,"w-100",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"ng2-smart-table",0),i["\u0275\u0275listener"]("edit",function(e){return t.onEdit(e)})("delete",function(e){return t.onDelete(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](1,ve,3,1,"div",1)),2&e&&(i["\u0275\u0275property"]("settings",t.settings)("source",t.data),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.forRevoked))},directives:[c.T5,n.O5,k.DPz],styles:[""]}),e})();function we(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"button",6),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().cancel()}),i["\u0275\u0275element"](2,"nb-icon",7),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" Back to ",e.entityTypeName," list ")}}function ke(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).submit()}),i["\u0275\u0275text"](1,"Submit"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",!e.formGroup.valid)}}function Se(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).cancel()}),i["\u0275\u0275text"](1,"Cancel"),i["\u0275\u0275elementEnd"]()}}function Pe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",18),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).invertIsEditing()}),i["\u0275\u0275text"](1,"Edit"),i["\u0275\u0275elementEnd"]()}}function Ae(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).delete()}),i["\u0275\u0275text"](1,"Delete"),i["\u0275\u0275elementEnd"]()}}function Ce(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).updateForNewVer()}),i["\u0275\u0275text"](1,"New version"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",!e.formGroup.valid)}}function Ie(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).submit()}),i["\u0275\u0275text"](1,"Update"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",!e.formGroup.valid)}}function Oe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).invertIsEditing()}),i["\u0275\u0275text"](1,"Cancel"),i["\u0275\u0275elementEnd"]()}}function Be(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275template"](1,ke,2,1,"button",13),i["\u0275\u0275template"](2,Se,2,0,"button",14),i["\u0275\u0275template"](3,Pe,2,0,"button",15),i["\u0275\u0275template"](4,Ae,2,0,"button",14),i["\u0275\u0275template"](5,Ce,2,1,"button",13),i["\u0275\u0275template"](6,Ie,2,1,"button",13),i["\u0275\u0275template"](7,Oe,2,0,"button",14),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isForNew),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isForNew),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.isEditing&&!e.isForNew),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.isEditing&&!e.isForNew),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEditing&&!e.isForNew&&"service"===e.menuType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEditing&&!e.isForNew),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEditing&&!e.isForNew)}}function _e(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-card-header"),i["\u0275\u0275elementStart"](1,"div",0),i["\u0275\u0275elementStart"](2,"div",8),i["\u0275\u0275elementStart"](3,"span",9),i["\u0275\u0275element"](4,"nb-icon",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Be,8,7,"div",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("icon",e.iconName),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",e.name," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isAdmin())}}function je(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",8),i["\u0275\u0275elementStart"](2,"h1"),i["\u0275\u0275text"](3,"Failed to load"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function Ne(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"label",24),i["\u0275\u0275text"](2,"Short ID for MRN"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",25),i["\u0275\u0275elementStart"](4,"input",26),i["\u0275\u0275listener"]("input",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).addShortIdToMrn(t.target.value)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("status",e.isShortIdValid?"success":"danger"),i["\u0275\u0275propertyInterpolate"]("value",e.shortId)}}function Ee(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"p",30),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t.formGroup.get(e[0]).value)}}function Ve(e,t){if(1&e&&i["\u0275\u0275element"](0,"input",31),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275propertyInterpolate1"]("id","input_",e[0],""),i["\u0275\u0275propertyInterpolate"]("status",t.formGroup.get(e[0]).value?t.formGroup.get(e[0]).valid?"success":"danger":e[1].required?"danger":""),i["\u0275\u0275propertyInterpolate"]("formControlName",e[0]),i["\u0275\u0275propertyInterpolate"]("required",!0===e[1].required)}}function xe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"label",27),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",25),i["\u0275\u0275template"](4,Ee,2,1,"p",28),i["\u0275\u0275template"](5,Ve,1,4,"input",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate1"]("for","input",e[0],""),i["\u0275\u0275propertyInterpolate"]("nbPopover",e[1].description),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e[1].title),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.isEditing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.isEditing)}}function De(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"label",32),i["\u0275\u0275text"](2,"Active certificates"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",33),i["\u0275\u0275elementStart"](4,"ngx-certificates",34),i["\u0275\u0275listener"]("onUpdate",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).refreshData()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("data",e.activeCertificates)("forRevoked",!1)("entityType",e.menuType)("entityTitle",e.name)("entityMrn",e.entityMrn)("orgMrn",e.orgMrn)("instanceVersion",e.instanceVersion)("hasPermission",e.isAdmin())}}function Me(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"label",35),i["\u0275\u0275text"](2,"Revoked certificates"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",33),i["\u0275\u0275element"](4,"ngx-certificates",36),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("data",e.revokedCertificates)("forRevoked",!0)("updateData",e.refreshData)}}function Te(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",37),i["\u0275\u0275elementStart"](1,"button",38),i["\u0275\u0275text"](2,"Approve"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",39),i["\u0275\u0275text"](4,"Reject"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function Re(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"form",19),i["\u0275\u0275template"](1,Ne,5,2,"div",20),i["\u0275\u0275template"](2,xe,6,5,"div",21),i["\u0275\u0275template"](3,De,5,8,"div",20),i["\u0275\u0275template"](4,Me,5,3,"div",20),i["\u0275\u0275template"](5,Te,5,0,"div",22),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",e.formGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isForNew&&"role"!==e.menuType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.columnForMenu),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEntity&&!e.isForNew&&!e.isEditing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEntity&&!e.isForNew&&!e.isEditing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isUnapprovedorg&&e.canApproveOrg)}}const Ue=[{path:"",component:s,children:[{path:"",component:M},{path:":id",component:(()=>{class e{constructor(e,t,r,n,i,a,s,u,c,f,m,b,k,S,P,A){this.route=e,this.router=t,this.location=r,this.formBuilder=n,this.iconsLibrary=i,this.userControllerService=a,this.deviceControllerService=s,this.roleControllerService=u,this.vesselControllerService=c,this.serviceControllerService=f,this.mmsControllerService=m,this.organizationControllerService=b,this.certificateService=k,this.notifierService=S,this.mrnHelperService=P,this.authService=A,this.name="",this.isLoading=!1,this.menuType="device",this.instanceVersion="",this.noBacklink=!1,this.isForNew=!1,this.columnForMenu=l[this.menuType],this.contextForAttributes="detail",this.iconName="circle",this.menuTypeName="",this.isEntity=!1,this.entityMrn="",this.orgMrn="",this.isUnapprovedorg=!1,this.canApproveOrg=!1,this.values={},this.activeCertificates=[],this.revokedCertificates=[],this.isEditing=!1,this.shortId="",this.roleId=-1,this.isLoaded=!0,this.isShortIdValid=!1,this.registerData=(e,t,r)=>e===d.user?this.userControllerService.createUser(t,r):e===d.device?this.deviceControllerService.createDevice(t,r):e===d.vessel?this.vesselControllerService.createVessel(t,r):e===d.mms?this.mmsControllerService.createMMS(t,r):e===d.service?this.serviceControllerService.createService(t,r):e===d.organization?this.organizationControllerService.applyOrganization(t):e===d.role?this.roleControllerService.createRole(t,r):new o.Observable,this.updateData=(e,t,r,n,i)=>e===d.user?this.userControllerService.updateUser(t,r,n):e===d.device?this.deviceControllerService.updateDevice(t,r,n):e===d.vessel?this.vesselControllerService.updateVessel((e=>{let t=[];for(const r in e){const n=w(r);Object.values(y.AttributeNameEnum).find(e=>e===n)&&(t.push({createdAt:new Date,updatedAt:new Date,attributeName:n,attributeValue:e[r]}),delete e[r])}return e.attributes=t,e})(t),r,n):e===d.mms?this.mmsControllerService.updateMMS(t,r,n):e===d.service&&i?this.serviceControllerService.updateService(t,r,n,i):e===d.organization?this.organizationControllerService.updateOrganization(t,n):e===d.role?this.roleControllerService.updateRole(t,r,this.roleId):new o.Observable,this.deleteData=(e,t,r,n)=>e===d.user?this.userControllerService.deleteUser(t,r):e===d.device?this.deviceControllerService.deleteDevice(t,r):e===d.vessel?this.vesselControllerService.deleteVessel(t,r):e===d.mms?this.mmsControllerService.deleteMMS(t,r):e===d.service&&n?this.serviceControllerService.deleteService(t,r,n):e===d.organization?this.organizationControllerService.deleteOrg(r):e===d.role?this.roleControllerService.deleteRole(t,this.roleId):new o.Observable,this.loadDataContent=(e,t,r,n)=>e===d.user?this.userControllerService.getUser(t,r):e===d.device?this.deviceControllerService.getDevice(t,r):e===d.vessel?this.vesselControllerService.getVessel(t,r):e===d.mms?this.mmsControllerService.getMMS(t,r):e===d.service&&n?this.serviceControllerService.getServiceVersion(t,r,n):new o.Observable,this.isAdmin=()=>{const e=this.menuType;return e===d.user?this.authService.authState.hasPermission(g.Xg.UserAdmin):e===d.device?this.authService.authState.hasPermission(g.Xg.DeviceAdmin):e===d.vessel?this.authService.authState.hasPermission(g.Xg.VesselAdmin):e===d.mms?this.authService.authState.hasPermission(g.Xg.MMSAdmin):e===d.service?this.authService.authState.hasPermission(g.Xg.ServiceAdmin):(e===d.organization||e===d.role)&&this.authService.authState.hasPermission(g.Xg.OrgAdmin)},this.loadOrgContent=e=>this.organizationControllerService.getOrganizationByMrn(e),this.setFormWithValidators=()=>{const e={};for(const t in this.columnForMenu)e[this.columnForMenu[t][0]]=[null,this.getValidators(this.columnForMenu[t])];this.formGroup=this.formBuilder.group(e)},this.adjustData=e=>{const t=v(e);for(const r in t){const e=this.columnForMenu.filter(e=>e[0]===r)[0];if(e)if(!0===e[1].immutable&&this.formGroup.get(e[0]).disable(),"role"!==this.menuType&&"mrn"===e[0]){this.shortId=this.mrnHelperService.shortIdFromMrn(t[r]);const n=this.mrnHelperService.mrnMask(this.menuType)+this.shortId;this.isShortIdValid=this.validateMrn(n),this.formGroup.get(e[0]).setValue(n)}else this.formGroup.get(e[0]).setValue(t[r])}};const C=this.router.url.split("/");this.menuType=C[C.length-2],this.menuType=this.menuType.replace("-","").substr(0,this.menuType.length-1),this.menuTypeName=d[this.menuType],this.iconName=p[this.menuType],this.isEntity=h.includes(this.menuType),this.entityMrn=decodeURIComponent(this.route.snapshot.paramMap.get("id")),this.orgMrn=this.authService.authState.orgMrn,this.isForNew="new"===this.entityMrn,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.route.queryParams.subscribe(e=>{this.noBacklink=void 0===e.name,this.name=e.name,this.instanceVersion=e.version}),i.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"}),this.roleControllerService.getMyRole(this.authService.authState.orgMrn).subscribe(e=>{this.authService.authState.permission=(0,g.Kc)(e),g.fQ.canApproveOrg(this.authService.authState.permission)&&(this.canApproveOrg=!0)})}ngOnInit(){this.isForNew&&(this.isEditing=!0),this.columnForMenu=Object.entries(l[this.menuType]).filter(([e,t])=>Array.isArray(t.visibleFrom)&&t.visibleFrom.includes(this.contextForAttributes)&&(!this.isEditing||this.isForNew&&!0!==t.notShowOnEdit)),this.setFormWithValidators(),this.isForNew?(this.name="New "+this.menuType,this.formGroup.get("mrn")&&(this.formGroup.get("mrn").setValue(this.mrnHelperService.mrnMask(this.menuType)),this.formGroup.get("mrn").disable()),this.isLoaded=!0):this.fetchFieldValues()}updateForNewVer(){this.formGroup.get("instanceVersion").enable(),this.isForNew=!0}settle(e){this.isLoading=!1,this.isLoaded=e}addShortIdToMrn(e){const t=this.mrnHelperService.mrnMask(this.menuType)+e;this.formGroup.get("mrn").setValue(t),this.isShortIdValid=this.validateMrn(t)}validateMrn(e){return this.menuTypeName===d.organization||this.menuTypeName===d.approveorg?new RegExp(this.mrnHelperService.mrnMcpIdpRegexForOrg()).test(e):new RegExp(this.mrnHelperService.mrnMcpIdpRegex()).test(e)}getValidators(e){const t=[];return e[1].required&&t.push(T.kI.required),"email"===e[0]&&t.push(T.kI.email),"mrn"===e[0]&&t.push(T.kI.pattern(this.menuTypeName===d.organization||this.menuTypeName===d.approveorg?this.mrnHelperService.mrnMcpIdpRegexForOrg():this.mrnHelperService.mrnMcpIdpRegex())),t}invertIsEditing(){this.isEditing=!this.isEditing}fetchFieldValues(){if(!l.hasOwnProperty(this.menuType))throw this.settle(!1),new Error(`There's no '${this.menuType}DataService' in ColumnForMenu`);if(this.isLoading=!0,!Object.values(m).includes(this.menuType))throw this.settle(!1),new Error(`There's no such thing as '${this.menuType}DataService'`);if(this.menuType===m.Organization)this.loadOrgContent(this.entityMrn).subscribe(e=>{this.settle(!0),this.name=e.name,this.adjustData(e);const t=this.certificateService.splitByRevokeStatus(e.certificates);this.activeCertificates=t.activeCertificates,this.revokedCertificates=t.revokedCertificates},e=>{this.notifierService.notify("error",e.message),this.router.navigateByUrl("/pages/404")});else if(this.menuType===m.UnapprovedOrg)this.isUnapprovedorg=!0,this.organizationControllerService.getUnapprovedOrganizations().subscribe(e=>{this.settle(!0),this.adjustData(e.content.filter(e=>e.mrn===this.entityMrn).pop())},e=>{this.notifierService.notify("error",e.message),this.router.navigateByUrl("/pages/404")});else if(this.menuType===m.Role){const e=parseInt(this.entityMrn);this.roleControllerService.getRole(this.orgMrn,e).subscribe(e=>{this.settle(!0),this.roleId=e.id,this.adjustData(e)},e=>{this.notifierService.notify("error",e.message),this.router.navigateByUrl("/pages/404")})}else this.route.queryParams.subscribe(e=>this.loadDataContent(this.menuType,this.authService.authState.user.organization,this.entityMrn,e.version).subscribe(e=>{this.settle(!0),this.menuType===m.User&&(this.name=e.firstName+" "+e.lastName),this.adjustData(e);const t=this.certificateService.splitByRevokeStatus(e.certificates);this.activeCertificates=t.activeCertificates,this.revokedCertificates=t.revokedCertificates},e=>{this.notifierService.notify("error",e.message),this.router.navigateByUrl("/pages/404")}))}refreshData(){this.fetchFieldValues()}moveToListPage(){this.router.navigate(["../../"+this.menuType+"s"],{relativeTo:this.route})}delete(){let e="Are you sure you want to delete?";e=h.indexOf(this.menuType)>=0?e+" All certificates under this entity will be revoked.":e,confirm(e)&&this.deleteData(this.menuType,this.orgMrn,this.entityMrn,this.instanceVersion).subscribe(e=>{this.notifierService.notify("success",this.name+" has been successfully deleted"),this.moveToListPage()},e=>this.notifierService.notify("error","There was error in deletion - "+e.message))}cancel(){this.location.back()}submit(){const e=Object.assign({},this.formGroup.value);"role"===this.menuType?this.loadOrgContent(this.orgMrn).subscribe(t=>this.submitDateToBackend(Object.assign(Object.assign({},e),{idOrganization:t.id})),e=>this.notifierService.notify("error","Error in fetching organization information")):this.submitDateToBackend(Object.assign(Object.assign({},e),{mrn:this.formGroup.get("mrn").value}),this.formGroup.get("mrn").value),this.isLoading=!0}submitDateToBackend(e,t){this.isForNew?this.registerData(this.menuType,e,this.authService.authState.orgMrn).subscribe(e=>{this.notifierService.notify("success","New "+this.menuType+" has been created"),this.isLoading=!1,this.moveToListPage()},e=>{this.notifierService.notify("error","Creation has failed - "+e.message),this.isLoading=!1}):this.updateData(this.menuType,e,this.authService.authState.orgMrn,t,this.instanceVersion).subscribe(e=>{this.notifierService.notify("success",this.menuType+" has been updated"),this.isLoading=!1,this.isEditing=!1},e=>{this.notifierService.notify("error","Update has failed - "+e.message),this.isLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.gz),i["\u0275\u0275directiveInject"](a.F0),i["\u0275\u0275directiveInject"](n.Ye),i["\u0275\u0275directiveInject"](T.qu),i["\u0275\u0275directiveInject"](k.B7b),i["\u0275\u0275directiveInject"](S.p),i["\u0275\u0275directiveInject"](P.$),i["\u0275\u0275directiveInject"](A.U),i["\u0275\u0275directiveInject"](B.H),i["\u0275\u0275directiveInject"](O.e),i["\u0275\u0275directiveInject"](C.T),i["\u0275\u0275directiveInject"](I.r),i["\u0275\u0275directiveInject"](U),i["\u0275\u0275directiveInject"](E.lG),i["\u0275\u0275directiveInject"](H),i["\u0275\u0275directiveInject"](V.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-detail"]],decls:9,vars:5,consts:[[1,"row"],[1,"col-lg-12"],[4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],["class","row",4,"ngIf"],[3,"formGroup",4,"ngIf"],["nbButton","","status","info","ghost","",3,"click"],["icon","arrow-ios-back","pack","eva"],[1,"col","my-auto"],[1,"icon_header"],["pack","fas",3,"icon"],["class","col-md-auto",4,"ngIf"],[1,"col-md-auto"],["type","submit","nbButton","","status","primary",3,"disabled","click",4,"ngIf"],["type","button","nbButton","","status","danger",3,"click",4,"ngIf"],["type","button","nbButton","","status","primary",3,"click",4,"ngIf"],["type","submit","nbButton","","status","primary",3,"disabled","click"],["type","button","nbButton","","status","danger",3,"click"],["type","button","nbButton","","status","primary",3,"click"],[3,"formGroup"],["class","form-group row",4,"ngIf"],["class","form-group row",4,"ngFor","ngForOf"],["class","buttons-row",4,"ngIf"],[1,"form-group","row"],[1,"label","col-sm-3","col-form-label"],[1,"col-sm-9","my-auto"],["type","text","nbInput","","fullWidth","","id","input_shortId","required","true",1,"form-control",3,"status","value","input"],["nbPopoverTrigger","hint","nbPopoverPlacement","top",1,"label","col-sm-3","col-form-label",3,"for","nbPopover"],["class","my-auto","id","keyword.name",4,"ngIf"],["type","text","nbInput","","fullWidth","","class","form-control",3,"id","status","formControlName","required",4,"ngIf"],["id","keyword.name",1,"my-auto"],["type","text","nbInput","","fullWidth","",1,"form-control",3,"id","status","formControlName","required"],["for","inputActiveCert",1,"label","col-sm-3","col-form-label"],[1,"col"],[3,"data","forRevoked","entityType","entityTitle","entityMrn","orgMrn","instanceVersion","hasPermission","onUpdate"],["for","inputRevokedCert",1,"label","col-sm-3","col-form-label"],[3,"data","forRevoked","updateData"],[1,"buttons-row"],["type","button","nbButton","","status","primary"],["type","button","nbButton","","status","danger"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,we,4,1,"div",2),i["\u0275\u0275elementStart"](3,"nb-card"),i["\u0275\u0275template"](4,_e,7,3,"nb-card-header",2),i["\u0275\u0275elementStart"](5,"nb-card-body",3),i["\u0275\u0275template"](6,je,4,0,"div",4),i["\u0275\u0275template"](7,Re,6,6,"form",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"notifier-container")),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.noBacklink&&!t.isForNew),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.isLoaded),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbSpinner",t.isLoading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isLoaded),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isLoaded))},directives:[n.O5,k.Asz,k.yKW,k.Q7R,E.TK,k.DPz,k.fMN,k.ndF,T._Y,T.JL,T.sg,n.sg,k.h8i,k.ydg,T.Fj,T.JJ,T.u,T.Q7,be],styles:["nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}.nb-theme-default   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-default   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-dark   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-dark   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-cosmic   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-cosmic   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}.nb-theme-corporate   [_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}.nb-theme-corporate   [_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}"]}),e})()},{path:"**",component:r(55477).w}]}];let Le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.Bz.forChild(Ue)],a.Bz]}),e})();var He=r(81718);let Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[E.lG],imports:[[n.ez,T.UX,k.nKr,k.zyh,k.KdK,k.uuI,k.EoG,k.T2N,k.spT,k.IIj,k.OA,c.ne,Le,E.Eb.withConfig(He.r)]]}),e})()}}]);